/*! jQuery Typer Plugin v0.9.2 | https://github.com/misonou/jquery-typer | The MIT License (MIT) */

!function(a,b,c,d,e,f,g,h,i){"use strict";function j(a,b){this.typer=a,this.baseCaret=new p(a,this),this.extendCaret=new p(a,this),b&&this.select(b)}function k(a,b,c,d){this.typer=a,this.id=b,this.element=c||null,this.options=d||{}}function l(b,c,d,e,f){this.eventName=b,this.typer=c,this.widget=d||null,this.data=void 0!==e?e:null,a.extend(this,f)}function m(a,b,c){this.childNodes=[],this.nodeType=a,this.element=b,this.widget=c}function n(a,b,c){this.whatToShow=b,this.filter=c||null,this.currentNode=a,this.root=a}function o(a,b,c){this.whatToShow=b,this.filter=c||null,ha(this,E(a,n)||new n(a,xa|Ia))}function p(a,b){this.typer=a,this.selection=b||null}function q(a){return function b(c,d,e){var f=b.executing;try{return b.executing=!0,c.apply(e||this,d)}finally{b.executing=f,!b.executing&&a&&a()}}}function r(a,b,c){clearTimeout(r[a.name]),r[a.name]=b&&setTimeout(b,c)}function s(a,b,c,d){Object.defineProperty(a,b,{enumerable:d!==!1,configurable:!0,writable:!0,value:c})}function t(a,b){a.prototype=b,s(b,"constructor",a,!1)}function u(a,b,c){return i.slice.call(a||{},b||0,c)}function v(a){return v[a]=v[a]||function(b){return b[a]},v[a]}function w(b,c){var d;return a.each(b,function(a,b){return d=c.call(this,b)&&b,!d}),d}function x(a,b){var c=(b||a.currentNode||"").nodeType;return a.whatToShow&(E(a,n)?c:1<<c-1)?a.filter?(a.filter.acceptNode||a.filter).call(a.filter,b||a.currentNode):1:3}function y(a,b,c){a.currentNode=c||a.currentNode;var d=x(a);if(2!==d){1===d&&b&&b(a.currentNode);for(var e;e=a.nextNode();b&&b(e));}}function z(b,c,d){var e=[];return y(b,i.push.bind(e),d),c?a.map(e,c):e}function A(a){return d(a||"").replace(/^[\s\u200b]+|[\s\u200b]+$/g,"")}function B(a){return a=d(a||""),a.charAt(0).toUpperCase()+a.slice(1)}function C(a){return a=d(a||""),a.charAt(0).toLowerCase()+a.slice(1)}function D(a){return a&&a.tagName&&a.tagName.toLowerCase()}function E(b,c){return!(!b||!c)&&(c.prototype?b instanceof c&&b:c.toFixed?b.nodeType&c&&b:("*"===c||a(b).is(c))&&b)}function F(b){var c={};return a.each(a.makeArray(b&&b.attributes),function(a,b){c[b.nodeName]=b.value}),c}function G(b,c){var d=F(b),e=F(c);return a.each(e,function(a,b){b===d[a]&&(delete d[a],delete e[a])}),!Object.keys(d)[0]&&!Object.keys(e)[0]}function H(a,b,c){if(a===b)return 0;var d=a&&b&&a.compareDocumentPosition(b);return 2&d?c&&8&d||1&d?NaN:1:4&d?c&&16&d||1&d?NaN:-1:NaN}function I(a,b){return a&&b&&!(1&(a.commonAncestorContainer||a).compareDocumentPosition(b.commonAncestorContainer||b))}function J(b,c){return b===c||a.contains(b,c)}function K(a,b){for(b=b||a;a&&a!==b&&20!==a.compareDocumentPosition(b);a=a.parentNode);return a}function L(a,b){var c=a.length||a.childNodes.length;return b===c||0===b&&1/b===-(1/0)?c:(c+b)%c||0}function M(a,b){for(var c,d=new o(a,5),e=0;(c=d.nextNode())&&c!==b;e+=c.length||0);return e}function N(a,b,d,g){if(a&&Oa(a.getRange))return a.getRange();var h;if(E(a,e)?(h=c.createRange(),+b!==b?(h["contents"!==b&&a.parentNode?"selectNode":"selectNodeContents"](a),"boolean"==typeof b&&h.collapse(b)):h.setStart(a,L(a,b)),E(d,e)&&I(a,d)&&h.setEnd(d,L(d,g))):E(a,f)&&(h=a.cloneRange(),h.collapsed||"boolean"!=typeof b||h.collapse(b)),E(b,f)&&I(h,b)){var i=h.collapsed&&b.collapsed?-1:1;h.compareBoundaryPoints(0,b)*i<0&&h.setStart(b.startContainer,b.startOffset),h.compareBoundaryPoints(2,b)*i>0&&h.setEnd(b.endContainer,b.endOffset)}return h}function O(a,b){return a=E(a,f)||N(a),b=E(b,f)||N(b),I(a,b)&&a.compareBoundaryPoints(3,b)<=0&&a.compareBoundaryPoints(1,b)>=0}function P(a,b){return a=E(a,f)||N(a),b=E(b,f)||N(b),I(a,b)&&a.compareBoundaryPoints(0,b)<=0&&a.compareBoundaryPoints(2,b)>=0}function Q(a,b){return a=E(a,f)||N(a),b=E(b,f)||N(b),I(a,b)&&0===a.compareBoundaryPoints(0,b)&&0===a.compareBoundaryPoints(2,b)}function R(a,b,c){a=E(a,f)||N(a),b=E(b,f)||N(b);var d=I(a,b)?a.compareBoundaryPoints(0,b)+a.compareBoundaryPoints(2,b):NaN;return c&&(0!==d&&O(a,b)||0===d&&!Q(a,b))?NaN:d&&d/Math.abs(d)}function S(a,b){function c(c){return Math.abs(a[c]-b[c])<1}return c("left")&&c("top")&&c("bottom")&&c("right")}function T(a,b,c){return a>=c.left&&a<=c.right&&b>=c.top&&b<=c.bottom}function U(a){var b=E(a,f)||N(a,"contents"),c=b.collapsed&&3===b.startContainer.nodeType&&!b.startContainer.length;c&&(b.startContainer.nodeValue=ua);try{if(b.collapsed&&b.startOffset===b.startContainer.length){b.setStart(b.startContainer,b.startOffset-1);var d=b.getClientRects()[0];return[{top:d.top,left:d.right,right:d.right,bottom:d.bottom,width:0,height:d.height}]}return b.getClientRects()}finally{c&&(b.startContainer.nodeValue="")}}function V(a){if(Pa.rangeCount){var b=Pa.getRangeAt(0);return J(a,b.commonAncestorContainer)&&b}}function W(b,d,e){var f=Qa.call(c,b,d);if(e&&e!==c.body&&T(b,d,e.getBoundingClientRect())){var g=[];try{for(;H(e,f.commonAncestorContainer,!0);){var h=a(f.commonAncestorContainer).parentsUntil(K(e,f.commonAncestorContainer)).slice(-1)[0];h.style.pointerEvents="none",g[g.length]=h,f=Qa.call(c,b,d)}}finally{a(g).css("pointer-events","")}}return f}function X(b){return E(b,g)||a(c.createDocumentFragment()).append(b)[0]}function Y(a){return c.createTextNode(a||ua)}function Z(a){return c.createElement(a)}function $(b){a(b).remove()}function _(b,c){return a.each(c,function(c,d){b=a(d.cloneNode(!1)).append(b)[0]}),E(b,e)||X(b)}function aa(a){try{Pa.removeAllRanges()}catch(a){var b=c.body.createTextRange();b.collapse(),b.select(),Pa.removeAllRanges()}Pa.addRange(a)}function ba(s,x){function H(){}function I(a){switch(a){case Ja:return oa.concat(ka.getWidgets());case Ka:return oa;case La:return ka.getWidgets().reverse().concat(oa);case Ma:return ka.getWidgets().slice(-1)}}function K(a){return w(I(La),function(b){var c=pa[b.id];return c.commands&&Oa(c.commands[a])})}function L(b,c,d,e){var f,g=a.makeArray(E(b,k)||I(b));return Qa(function(){a.each(g,function(a,g){var h=pa[g.id];if(Oa(h[c]))return f=!0,h[c].call(h,new l(c,ma,g,d,e))!==!1||b!==La})}),E(b,k)&&setTimeout(function(){L(Ka,"widget"+B(c),null,{targetWidget:b})}),f}function S(c,d){function e(a,b){if(b.parentNode!==a&&b!==a){b.parentNode&&f(b,!0);for(var c=a.childNodes.length;c&&R(b.element,a.childNodes[c-1].element)<0;c--);b.parentNode=a,b.previousSibling=a.childNodes[c-1],b.nextSibling=a.childNodes[c],(b.previousSibling||{}).nextSibling=b,(b.nextSibling||{}).previousSibling=b,a.childNodes.splice(c,0,b)}}function f(a,b){if(a.parentNode){var c=a.parentNode.childNodes.indexOf(a);c>=0&&(d&&!b&&a.widget.element===a.element&&(a.widget.destroyed=!0,L(a.widget,"destroy")),a.parentNode.childNodes.splice(c,1),a.parentNode=null,(a.previousSibling||{}).nextSibling=a.nextSibling,(a.nextSibling||{}).previousSibling=a.previousSibling)}}function j(b,d){d=d||b.parentNode||v.get(c),E(d,xa)||b.widget&&E(b.element,pa[b.widget.id].element)||(delete b.widget,a.each(pa,function(a,c){if(E(b.element,c.element))return b.widget=new k(z,a,b.element,c.options),!1})),b.widget=b.widget||d.widget;var e=pa[b.widget.id];b.widget!==d.widget||E(d,xa)?E(b.element,e.editable)||e.inline&&!e.editable?b.nodeType=e.inline?Ea:E(b.element,ta)?za:ya:b.nodeType=e.inline&&!E(d,Da)?Da:xa:b.nodeType=E(b.element,ta)?Aa:Ca}function l(b){a.each(b.childNodes.slice(0),function(a,b){J(c,b.element)||(f(b),v.delete(b.element))})}function n(b,c){var h=[v.get(b)];l(h[0]);var i=c?a(b).children():E(b,g)?a(b).children().find("*").andSelf():a("*",b);i.each(function(a,b){for(;!J(h[0].element,b);)h.shift();if("br"===D(b))return void(v.has(b)&&E(h[0],Ia)&&(f(v.get(b)),v.delete(b)));var g=!v.has(b),i=v.get(b)||new m(0,b),k=i.widget;e(h[0],i),l(i),j(i),i.widget!==k&&d&&(k&&(k.destroyed=!0,L(k,"destroy")),L(i.widget,"init")),v.set(b,i),c&&g&&n(b),h.unshift(i)})}function o(b){var c=a.map(b,function(b){return a(b.addedNodes).add(b.removedNodes).filter(":not(#Typer_RangeStart,#Typer_RangeEnd)")[0]?b.target:null});i.push.apply(w,c)}function p(a){for(var b=a;!v.has(b);b=b.parentNode);return n(b),v.get(a)}function q(){u?o(u.takeRecords()):r(q,function(){w.push(null)}),null===w[0]?n(w.splice(0)&&c):w[0]&&a(c.parentNode||c).find(a.unique(w.splice(0))).each(function(a,b){n(b,!!u)})}function t(a){if(q(),J(c,a))return 3!==a.nodeType&&"br"!==D(a)||(a=a.parentNode),v.get(a)||p(a)}var u,v=new h,w=[],y={},z=J(s,c)?ma:y;return c.parentNode||(c=E(c,g)||X(c)),b.MutationObserver&&d&&(u=new MutationObserver(o),u.observe(c,{subtree:!0,childList:!0})),v.set(c,new m(na,c,new k(z,"__root__",s,x))),w.push(null),a.extend(y,{getNode:t,getEditableNode:function(a){var b=t(a)||v.get(c);return E(b,xa)?t(b.widget.element):b}})}function T(a,b){var c=new p(ma);return c.moveToText(a,b),c.getRange()}function U(b){var c=V(s);if(!qa.has(ma)&&c&&!Q(c,N(ka)))try{ma.snapshot=a.noop,ka.select(c)}finally{ma.snapshot=ua.snapshot}b!==!1&&(L(Ja,"beforeStateChange"),L(Ja,"stateChange"))}function ca(b){b=E(b,f)||N(s,"contents"),Qa(function(){var c=new j(ma,b);if(E(c.focusNode,ya)&&!c.focusNode.childNodes[0])return void a(wa).appendTo(c.focusNode.element);if(E(c.focusNode,za)&&!c.focusNode.element.childNodes[0])return void a(Y()).appendTo(c.focusNode.element);var d=N(ka);y(c.createTreeWalker(Ia|ya|Fa),function(b){if(E(b,Ha)&&!E(b.parentNode,Aa|za)&&a(b.element).wrap("<p>"),E(b,Ia)){var c=a("br:last-child",b.element)[0];c&&!c.nextSibling&&(a(Y()).insertBefore(c),$(c));var e=a("br:first-child",b.element)[0];e&&!e.previousSibling&&$(e),a(b.element).contents().each(function(a,b){/\b\u00a0$/.test(b.nodeValue)&&b.nextSibling&&3===b.nextSibling.nodeType&&!/^[^\S\u00a0]/.test(b.nextSibling.nodeValue)&&(b.nodeValue=b.nodeValue.slice(0,-1)+" "),3===b.nodeType&&b!==ka.startTextNode&&b!==ka.endTextNode&&(b.nodeValue=b.nodeValue.replace(/(?=.)\u200b+(?=.)/g,"").replace(/\b\u00a0\b/g," "))}),/\S/.test(b.element.textContent)||a(Y()).appendTo(b.element),E(b,Ca)&&b.element!==ka.startElement&&b.element!==ka.endElement&&D(b.element.previousSibling)===D(b.element)&&G(b.element,b.element.previousSibling)&&(a(b.element).contents().appendTo(b.element.previousSibling),$(b.element))}else b.element.childNodes[0]?a(b.element).contents().each(function(b,c){3===c.nodeType&&A(c.nodeValue)&&a(c).wrap("<p>")}):a(wa).appendTo(b.element);O(d,b.element)&&!P(d,b.element)||b.element.normalize()}),a('br[type="_moz"]',s).remove(),a(Na&&"*",s).each(function(b,c){a(c).data("typerIEFix")||(a(c).data("typerIEFix",!0),a(c).bind("input textinput",function(a){Qa.executing||Qa.suppressTextEvent||Ba.trigger(a)}))})})}function da(b,d,h){b=E(b,f)||N(b);var i="cut"===d?"extractContents":"paste"===d?"deleteContents":"cloneContents",k="paste"!==d,l="copy"!==d,m=c.createDocumentFragment(),n=new j(ma,b),o=n.isSingleEditable;if(!b.collapsed){var p,q=n.getCaret("end").clone(),r=!q.moveByCharacter(1)||q.node!==n.endNode||q.textNode&&/\s/.test(q.textNode.nodeValue[q.offset-1]),t=[[s,m]];y(n.createTreeWalker(-1,function(c){for(;E(c.element,e)&&!J(t[0][0],c.element);)t.shift();if(P(b,c.element))return k&&a(t[0][1]).append(c.element.cloneNode(!0)),l&&(E(c,ya)?a(c.element).html(wa):E(c,za)?a(c.element).html(va):$(c.element)),2;var d=E(c,Ia)&&N(c.element,b)[i]();if(k){if(c.element!==s&&(!E(c,Aa|Ca)||d&&D(d.firstChild)!==D(c.element))){var f=c.element.cloneNode(!1);t[0][1].appendChild(f),E(f,g)||t.unshift([c.element,f])}d&&(p=d.lastChild,t[0][1].appendChild(d))}return E(c,Ia)?2:1})),r&&p&&a(Y(" ")).insertAfter(p)}if(Oa(h)){var u=N(b,!0),v=o?N(b,!1):u,w=new j(ma,N(u,v));E(w.startNode,Ga)&&w.startNode===w.endNode&&(ca(b),w=new j(ma,N(w.startNode.element,"contents"))),R(u,w.startNode.element)<0&&(u=N(w.startNode.element,0)),h(w,u,v)}else ca(b),ua.snapshot();return m}function ea(b,f){E(f,e)||(f=d(f||"").replace(/\u000d/g,"").replace(/</g,"&lt;").replace(/\n{2,}/g,"</p><p>").replace(/\n/g,"<br>").replace(/.*/,"<p>$&</p>")),f=u(X(f).childNodes),da(b,"paste",function(b,d,e){var g,h,i,j=("__root__ "+(pa[b.focusNode.widget.id].allowedWidgets||"*")).split(" "),k=d.cloneRange(),l=E(b.startNode,Ia),n=!0;for(i=E(b.startNode,za)?[]:E(b.startNode,Aa)?[b.startNode.element]:E(b.startNode,Ha)?a(b.startElement).parentsUntil(b.startNode.element).andSelf().get().reverse():[Z("p")];f[0];){var o=f.shift(),p=new m(Ca,o);if(1===o.nodeType&&"br"!==D(o)&&(d.insertNode(o),p=la.getNode(o),$(o),("__unknown__"===p.widget.id||"*"!==j[1]&&j.indexOf(p.widget.id)<0)&&(o=Y("__unknown__"===p.widget.id?o.textContent:fa(o)),p=new m(Ca,o))),!E(p,Ia)||!E(p,Ha)&&!n){for(var q=la.getEditableNode(k.startContainer);!E(q.parentNode,Ga);)q=q.parentNode;var r=N(q.element,!1),s=N(k,r).extractContents(),t=s.firstChild;if(r.insertNode(s),/\S/.test(q.element.textContent)||k.insertNode(Y()),t&&!/\S/.test(t.textContent)&&t.appendChild(Y())," "===q.element.textContent.slice(-1)){var u=z(c.createNodeIterator(q.element,4,null,!1)).filter(v("nodeValue")).slice(-1)[0];u.nodeValue=u.nodeValue.slice(0,-1)+" "}if(t&&" "===t.textContent.charAt(0)){var w=z(c.createNodeIterator(t,4,null,!1)).filter(v("nodeValue"))[0];w.nodeValue=w.nodeValue.slice(1)}k=t?N(t,0):N(r,!1),h=h||k.cloneRange(),e=N(r,!1),n=!0,g=!0}l=l&&E(p,Ia),E(p,Ha)?o=X(_(o,l?i.slice(0,-1):i)):l&&n&&(o=X(o.childNodes));var x=o.lastChild;if(l)x&&k.insertNode(o),n=!1;else{var y=la.getEditableNode(k.startContainer);E(y,Ga)?k.insertNode(o):N(y.element,!0).insertNode(o),l=E(p,Ia),g=!0}k=x&&N(x,-0)||k}!g&&b.startNode!==b.endNode&&E(b.startNode,Aa)&&E(b.endNode,Aa)&&(N(b.startNode.element,-0).insertNode(N(b.endNode.element,"contents").extractContents()),$(b.endNode.element)),ka.select(h||k)})}function fa(b){J(s,b)&&(b=da(b,"copy"));var c="",d=S(b).getNode(b);return a.each(d.childNodes,function(a,b){return E(b,xa|ya)&&Oa(pa[b.widget.id].text)?void(c+=(c&&"\n\n")+pa[b.widget.id].text(b.widget)):void y(new n(b,Ia|Fa,function(a){return c+=c&&"\n\n",y(new o(a,5,function(a){c+=3===a.nodeType?a.nodeValue.replace(/\s+|\u00a0/g," "):"br"===D(a)?"\n":""})),2}))}),c}function ga(){function b(){var a=A(s.innerHTML.replace(/\s+x-typer-(start|end)(="\d+")?|(?!>)\u200b(?!<\/)/g,""));if(a!==h)return L(Ja,"change",a),h=a,!0}function c(b,c,d){b&&3===b.nodeType?a(b.parentNode).attr(g[+d],M(la.getNode(b),b)+c):b&&a(b).attr(g[+d],"")}function d(b){var c=g[+b],d=Ba.find("["+c+"]")[0]||Ba.filter("["+c+"]")[0],e=parseInt(a(d).attr(c));if(d)return a(d).removeAttr(c),+e===e?T(d,e):N(d,!!b)}function e(){U(),c(ka.startTextNode||ka.startElement,ka.startOffset,!0),ka.isCaret||c(ka.endTextNode||ka.endElement,ka.endOffset,!1);var a=s.outerHTML;if(a!==i[0]){var d=b();i.splice(0,j+!d,a),i.splice(x.historyLevel),j=0}Ba.find("[x-typer-start], [x-typer-end]").andSelf().removeAttr("x-typer-start x-typer-end")}function f(c){var e=a.parseHTML(c)[0];Ba.empty().append(e.childNodes).attr(F(e)),ka.select(d(!0),d(!1)),U(),b()}var g=["x-typer-end","x-typer-start"],h=s.outerHTML,i=[h],j=0;a.extend(ua,{canUndo:function(){return j<i.length-1},canRedo:function(){return j>0},undo:function(){ua.canUndo()&&f(i[++j])},redo:function(){ua.canRedo()&&f(i[--j])},snapshot:function(a){r("snapshot"),+a!==a&&ka?a!==!0&&Qa.executing?(Qa.needSnapshot=!0,U(!1)):(Qa.needSnapshot=!1,e()):r("snapshot",e,a)}})}function ha(){function e(){var a=o;o&&!o.destroyed&&(o=null,L(a,"focusout"))}function f(a){setTimeout(function(){ua.snapshot(a.timeStamp-p<200?200:0),p=a.timeStamp})}function g(a){if(ka.isCaret){var b=ka.clone();b.extendCaret.moveByCharacter("backspace"===a.eventName?-1:1)&&b.isSingleEditable&&ea(b,"")}else ea(ka,"")}function h(a,b){return!(!a||!L(Ma,"textInput",a))||(!b&&ka.startTextNode&&ka.isCaret?void 0:(ea(ka,a),!0))}var i,j,k,l,m,n,o,p=0;Ba.mousedown(function(b){var d={mousemove:function(a){return!a.which&&i?void d.mouseup():(ka.extendCaret.moveToPoint(a.clientX,a.clientY),setTimeout(function(){ka.focus()}),void a.preventDefault())},mouseup:function(){i=!1,a(c.body).unbind(d)}};1===b.which&&((b.shiftKey?ka.extendCaret:ka).moveToPoint(b.clientX,b.clientY),a(c.body).bind(d),i=!0)}),Ba.bind("compositionstart compositionupdate compositionend",function(a){if(a.stopPropagation(),j="d"!==a.type.slice(-1))h("");else{var b=V(s);N(b.startContainer,b.startOffset-a.originalEvent.data.length,b.startContainer,b.startOffset).deleteContents(),U(!1),h(a.originalEvent.data,!0)}}),Ba.bind("keydown keypress keyup",function(b){if(j)return void b.stopImmediatePropagation();n=!0,setTimeout(function(){n=!1});var c=a.inArray(b.keyCode,[16,17,18,91,93])>=0,g=!c&&sa[b.keyCode]!==d.fromCharCode(b.keyCode).toLowerCase();if("keydown"===b.type){if(k=b.ctrlKey+b.shiftKey+b.altKey+b.metaKey+!c,k*=g||(k>2||k>1&&!b.shiftKey)&&!c,l=b.keyCode,k){var h=C((b.ctrlKey||b.metaKey?"Ctrl":"")+(b.altKey?"Alt":"")+(b.shiftKey?"Shift":"")+B(sa[l]||d.fromCharCode(b.charCode)));L(La,h)&&b.preventDefault(),L(Ka,"keystroke",h,{preventDefault:b.preventDefault.bind(b),isDefaultPrevented:function(){return b.isDefaultPrevented()}}),/ctrl(?![acfnprstvwx]|f5|shift[nt]$)|enter/i.test(h)&&b.preventDefault()}m=b.isDefaultPrevented(),r(ha,function(){j||m||(U(),ka.focusNode.widget!==o&&e())})}else"keypress"===b.type?!k&&b.charCode||b.stopImmediatePropagation():((b.keyCode===l||c)&&k--&&b.stopImmediatePropagation(),m||c||j||(U(),f(b)))}),Ba.bind("keypress textInput textinput",function(a){Qa.executing||Qa.suppressTextEvent||(h(a.originalEvent.data||d.fromCharCode(a.charCode)||"")&&a.preventDefault(),f(a))}),Ba.bind("dragstart",function(a){var b=N(ka),c={drop:function(a){var d=W(a.originalEvent.clientX,a.originalEvent.clientY),e=da(b,a.ctrlKey?"copy":"cut");ea(d,e),a.preventDefault(),Ba.unbind(c)}};Ba.bind(c)}),Ba.bind("cut copy",function(c){var d=c.originalEvent.clipboardData||b.clipboardData;Ra.content=da(ka,c.type),Ra.textContent=fa(Ra.content),b.clipboardData?d.setData("Text",Ra.textContent):(d.setData("text/plain",Ra.textContent),d.setData("text/html",a('<div id="Typer">').append(Ra.content.cloneNode(!0))[0].outerHTML),d.setData("application/x-typer","true")),c.preventDefault()}),Ba.bind("paste",function(c){var d=c.originalEvent.clipboardData||b.clipboardData;if(a.inArray("application/x-typer",d.types)>=0){var e=d.getData("text/html"),f=X(a(e).filter("#Typer").contents());ea(ka,f)}else{var g=d.getData(b.clipboardData?"Text":"text/plain");ea(ka,g===Ra.textContent?Ra.content.cloneNode(!0):g)}c.preventDefault(),Na&&setTimeout(function(){ka.focus()})}),Ba.bind("mousedown mouseup mscontrolselect",function(a){var b=la.getNode(a.target);o!==b.widget&&e(),E(b,xa|Da)&&(setTimeout(function(){ka.focus()}),ka.select(b.widget.element),o!==b.widget&&(o=b.widget,L(b.widget,"focusin")))}),Ba.bind("contextmenu",function(a){var b=W(a.clientX,a.clientY,s);!ka.isCaret&&O(ka,b)||ka.select(b)}),Ba.bind("dblclick",function(a){ka.select("word"),a.preventDefault()}),Ba.bind("focusin",function(){var a=i;setTimeout(function(){qa.has(ma)||(L(Ja,"focusin"),a||ka.focus()),ra=!1,qa.delete(ma)})}),Ba.bind("focusout",function(){setTimeout(function(){ra||qa.has(ma)||(e(),L(Ja,"focusout")),ca()})}),a.each({moveByLine:"upArrow downArrow shiftUpArrow shiftDownArrow",moveByWord:"ctrlLeftArrow ctrlRightArrow ctrlShiftLeftArrow ctrlShiftRightArrow",moveToLineEnd:"home end shiftHome shiftEnd",moveByCharacter:"leftArrow rightArrow shiftLeftArrow shiftRightArrow"},function(b,c){a.each(c.split(" "),function(a,c){var d=1&a?1:-1,e=!!(2&a);pa.__core__[c]=function(){e||ka.isCaret?(e?ka.extendCaret:ka)[b](d):ka.collapse(d<0?"start":"end")}})}),a.extend(pa.__core__,{ctrlZ:ua.undo,ctrlY:ua.redo,ctrlShiftZ:ua.redo,backspace:g,delete:g,escape:function(){s.blur(),V(s)&&Pa.removeAllRanges()}})}function ia(b,c){!x[b]&&!(x.widgets||"")[b]||!c.inline&&na!==ya||(pa[b]=Object.create(c),pa[b].options=a.extend(Object.create(c.options||null),x[b]),c.element||oa.push(new k(ma,b,null,pa[b].options)))}function ja(){oa[0]=new k(ma,"__core__"),oa[1]=new k(ma,"__root__"),a.each(x.widgets||{},ia),a.each(ba.widgets,ia),pa.__root__=x,pa.__core__={},pa.__unknown__={element:x.disallowedElement||":not("+ta+",br,b,em,i,u,strike,small,strong,sub,sup,ins,del,mark,span)"}}E(s,e)||(x=s,s=s.element),x=a.extend(!0,{},(!x||x.defaultOptions!==!1)&&ba.defaultOptions,x);var ka,la,ma=this,na=x.inline||E(s,ta)?za:ya,oa=[],pa={},ua={},Ba=a(s),Qa=q(function(){Qa.needSnapshot&&ua.snapshot(),Qa.suppressTextEvent=!0,setTimeout(function(){Qa.suppressTextEvent=!1})}),Sa={focusin:function(a){qa.set(ma,a.currentTarget)},focusout:function(a){var b=a.currentTarget;setTimeout(function(){J(b,a.relatedTarget)||qa.get(ma)!==b||V(s)||(qa.delete(ma),Ba.trigger("focusout"))})}};ga(),ja(),ha(),Ba.attr("contenteditable","true"),la=S(s,!0),a.extend(ma,ua,la,{element:s,hasCommand:function(a){return!!K(a)},widgetEnabled:function(a){return pa.hasOwnProperty(a)},getStaticWidgets:function(){return oa.slice(0)},getSelection:function(){return ka},extractText:function(a){var b=da(a,"copy");return fa(b)},nodeFromPoint:function(a,b){return la.getNode(c.elementFromPoint(a,b))},retainFocus:function(b){a(b).bind(Sa)},invoke:function(a,b){var c=new H;if("string"==typeof a&&(c.commandName=a,c.widget=K(a),a=c.widget&&pa[c.widget.id].commands[a]),Oa(a)){var d=ka.clone(),e=ka.timestamp;Qa(function(){a.call(ma,c,b),e===ka.timestamp&&ka.select(d)})}}}),t(H,{typer:ma,widget:null,get selection(){return ka},insertText:function(a){ea(ka,a)},insertHtml:function(a){ea(ka,X(a))},insertWidget:function(a,b){pa[a]&&Oa(pa[a].insert)&&pa[a].insert(this,b)},removeWidget:function(b){if(Oa(pa[b.id].remove))pa[b.id].remove(this,b);else if("keepText"===pa[b.id].remove){var c=fa(b.element);a(b.element).replaceWith(Y(c))}else $(b.element)},execCommand:function(b,d){var e=ka.baseCaret.getRange(),f=ka.extendCaret.getRange(),g=Z("span"),h=Z("span");e.insertNode(g),f.insertNode(h),ka.select(N(g,!1),N(h,!0)),a.each(ka.getEditableRanges(),function(a,e){aa(e),c.execCommand(b,!1,d||"")}),ka.select(N(g,!1),N(h,!0)),$(g),$(h)}}),ka=new j(ma,N(s,0)),ca(),L(Ka,"init")}function ca(a,b){return b&&(a.whatToShow&Fa||!E(b,xa|Ga))}function da(a,b,c){return c&&!ca(a,b)?2:E(b,xa)&&E(b.parentNode,xa)?3:x(a,b)}function ea(a,b,c){if(da.returnValue=da(a,b,c),1===da.returnValue)return a.currentNode=b,!0}function fa(a,b,c){for(var d=a.currentNode[b];d;){if(ea(a,d,!0))return d;if(3===da.returnValue&&d[b])d=d[b];else{for(;!d[c];)if(d=ca(a,d.parentNode)&&d.parentNode,!d||d===a.root||d===a.currentNode)return null;d=d[c]}}}function ga(a,b,c){for(var d=a.currentNode;d&&d!==a.root;){for(var e=d[c];e;){if(ea(a,e))return e;e=2!==da.returnValue&&e[b]?e[b]:e[c]}if(d=ca(a,d.parentNode)&&d.parentNode,!d||d===a.root||1===da(a,d,!0))return null}}function ha(a,b){var d=b.currentNode.widget.typer,e=c.createTreeWalker(b.root.element,1|a.whatToShow,function(c){return 1!==da(b,d.getNode(c),!0)?3:1|x(a,c)},!1);s(a,"iterator",e,!1)}function ia(a,b,c){var d=N(a);return new n(a.focusNode,b|Fa,function(a){return O(a.element,d)?c?c(a):1:2})}function ja(a){var b=a.getCaret("start"),c=a.getCaret("end"),d=b.textNode===c.textNode;if(c.textNode&&c.offset<c.textNode.length&&c.textNode.splitText(c.offset),b.textNode&&b.offset>0){var e=b.offset;la(a,function(){oa(b,b.node,b.element,b.textNode.splitText(b.offset),0),d&&oa(c,c.node,c.element,b.textNode,c.offset-e)})}}function ka(a){for(a.timestamp=+new Date,a.direction=R(a.extendCaret.getRange(),a.baseCaret.getRange())||0,a.isCaret=!a.direction,a.focusNode=a.typer.getEditableNode(K(a.baseCaret.element,a.extendCaret.element));!E(a.focusNode,xa|Da|Ga|Ea);)a.focusNode=a.focusNode.parentNode;for(var b=0,c=a.getCaret("start"),d=a.getCaret("end");b<4;b++)a[ka.NAMES[b+4]]=c[ka.NAMES[b]],a[ka.NAMES[b+8]]=d[ka.NAMES[b]]}function la(a,b,c,d){return a._lock=a._lock||q(function(){delete a._lock,ka(a),a===a.typer.getSelection()&&(qa.has(a.typer)||a.focus(),a.typer.snapshot())}),a._lock(b,c,d)}function ma(a){var b=new o(new n(a.typer.getNode(a.typer.element),Ia|Fa),4);return b.currentNode=a.textNode||a.element,b}function na(a,b){return a.selection?la(a.selection,b,null,a):b.call(a)}function oa(a,b,c,d,e){return na(a,function(){a.node=b,a.element=c,a.textNode=d||null,a.offset=e,a.wholeTextOffset=(d?a.offset:0)+M(b,d||c)}),!0}function pa(a,b,c,d){var e,f;if("br"===D(b)?(f=b.nextSibling,c=0):1===b.nodeType&&b.childNodes[0]&&(c===b.childNodes.length||d&&1===b.childNodes[(c||1)-1].nodeType?(b=b.childNodes[(c||1)-1],c=b.length,d=!0):(b=b.childNodes[c],c=0)),3===b.nodeType&&(f=b,b=f.parentNode),e=a.typer.getEditableNode(f||b),f&&(e.element!==f.parentNode?(b=e.element,f=null):E(e,Ia)||(e=w(e.childNodes,function(a){return H(f,a.element)<0})||e.lastChild||e,b=e.element,f=null,d=!0)),!f&&E(e,Ia)){var g=new o(e,4);for(g.currentNode=b;g.nextNode()&&d;);3===g.currentNode.nodeType&&(f=g.currentNode),c=d?f&&f.length:0}if(E(e,Ia))for(;e.parentNode&&!E(e,Aa|za);e=e.parentNode);return oa(a,e,b,f,f?c:!d)}var qa,ra,sa=JSON.parse('{"8":"backspace","9":"tab","13":"enter","16":"shift","17":"ctrl","18":"alt","19":"pause","20":"capsLock","27":"escape","32":"space","33":"pageUp","34":"pageDown","35":"end","36":"home","37":"leftArrow","38":"upArrow","39":"rightArrow","40":"downArrow","45":"insert","46":"delete","48":"0","49":"1","50":"2","51":"3","52":"4","53":"5","54":"6","55":"7","56":"8","57":"9","65":"a","66":"b","67":"c","68":"d","69":"e","70":"f","71":"g","72":"h","73":"i","74":"j","75":"k","76":"l","77":"m","78":"n","79":"o","80":"p","81":"q","82":"r","83":"s","84":"t","85":"u","86":"v","87":"w","88":"x","89":"y","90":"z","91":"leftWindow","92":"rightWindowKey","93":"select","96":"numpad0","97":"numpad1","98":"numpad2","99":"numpad3","100":"numpad4","101":"numpad5","102":"numpad6","103":"numpad7","104":"numpad8","105":"numpad9","106":"multiply","107":"add","109":"subtract","110":"decimalPoint","111":"divide","112":"f1","113":"f2","114":"f3","115":"f4","116":"f5","117":"f6","118":"f7","119":"f8","120":"f9","121":"f10","122":"f11","123":"f12","144":"numLock","145":"scrollLock","186":"semiColon","187":"equalSign","188":"comma","189":"dash","190":"period","191":"forwardSlash","192":"backtick","219":"openBracket","220":"backSlash","221":"closeBracket","222":"singleQuote"}'),ta=("area base br col command embed hr img input keygen link meta param source track wbr".split(" "),"h1,h2,h3,h4,h5,h6,p,q,blockquote,pre,code,li,caption,figcaption,summary,dt,th"),ua="​",va="&#8203;",wa="<p>&#8203;</p>",xa=1,ya=2,za=32,Aa=4,Ba=8,Ca=16,Da=64,Ea=128,Fa=4096,Ga=ya|za,Ha=Ca|Da|Ea,Ia=Aa|za|Ha,Ja=1,Ka=2,La=3,Ma=4,Na=!!b.ActiveXObject||void 0!==c.documentElement.style.msTouchAction,Oa=a.isFunction,Pa=b.getSelection(),Qa=c.caretRangeFromPoint,Ra={};if(b.Typer=ba,a.extend(ba,{NODE_WIDGET:xa,NODE_PARAGRAPH:Aa,NODE_EDITABLE:ya,NODE_EDITABLE_PARAGRAPH:za,NODE_INLINE:Ca,NODE_INLINE_WIDGET:Da,NODE_INLINE_EDITABLE:Ea,NODE_OUTER_PARAGRAPH:Ba,NODE_SHOW_EDITABLE:Fa,ZWSP:ua,ZWSP_ENTITIY:va,trim:A,iterate:y,iterateToArray:z,compareAttrs:G,comparePosition:H,compareRangePosition:R,containsOrEquals:J,createElement:Z,createTextNode:Y,createRange:N,rangeIntersects:O,rangeCovers:P,rangeEquals:Q,rectEquals:S,caretRangeFromPoint:W,defaultOptions:{historyLevel:100,disallowedWidgets:"keepText",widgets:{}},widgets:{}}),t(m,{get firstChild(){return this.childNodes[0]||null},get lastChild(){return this.childNodes.slice(-1)[0]||null}}),t(n,{previousSibling:function(){return ga(this,"lastChild","previousSibling")},nextSibling:function(){return ga(this,"firstChild","nextSibling")},firstChild:function(){return fa(this,"firstChild","nextSibling")},lastChild:function(){return fa(this,"lastChild","previousSibling")},parentNode:function(){for(var a=this.currentNode;a&&a!==this.root;a=a.parentNode)if(ea(this,a.parentNode,!0))return a.parentNode},previousNode:function(){for(var a=this.currentNode;a&&a!==this.root;){for(var b=a.previousSibling;b;b=a.previousSibling){a=b;for(var c=da(this,b);2!==c&&ca(this,a.childNodes[0])&&a.childNodes[0];)a=a.lastChild,c=da(this,a,!0);if(1===c)return this.currentNode=a,a}if(a=ca(this,a.parentNode)&&a.parentNode,!a||a===this.root)return null;if(ea(this,a,!0))return a}},nextNode:function(){for(var a=this.currentNode,b=1;a;){for(;2!==b&&a.childNodes[0];){if(a=a.firstChild,ea(this,a,!0))return a;b=da.returnValue}for(;a&&a!==this.root&&!a.nextSibling;)a=ca(this,a.parentNode)&&a.parentNode;if(!a||a===this.root)return null;if(a=a.nextSibling,ea(this,a))return a;b=da.returnValue}}}),t(o,{get currentNode(){return this.iterator.currentNode},set currentNode(a){this.iterator.currentNode=a},previousNode:function(){return this.iterator.previousNode()},nextNode:function(){return this.iterator.nextNode()}}),ka.NAMES="node element textNode offset startNode startElement startTextNode startOffset endNode endElement endTextNode endOffset".split(" "),t(j,{get isSingleEditable(){return!ia(this,Ga).nextNode()},getCaret:function(a){switch(a){case"extend":return this.extendCaret;case"start":return this.direction<0?this.extendCaret:this.baseCaret;case"end":return this.direction<0?this.baseCaret:this.extendCaret;default:return this.baseCaret}},getRange:function(a){return void 0!==a||this.isCaret?(a!==!1?this.baseCaret:this.extendCaret).getRange():N(this.baseCaret.getRange(),this.extendCaret.getRange())},getEditableRanges:function(){var b=N(this);return E(this.focusNode,Ha)?[b]:a.map(z(ia(this,Aa|za)),function(a){return N(b,N(a.element))})},getWidgets:function(){for(var a=[],b=this.focusNode;b;b=b.parentNode)a.unshift(b.widget),b=this.typer.getNode(b.widget.element);return a},getParagraphElements:function(){var b=new n(this.focusNode,Aa|Fa),c=z(b,null,this.startNode);return c.splice(c.indexOf(this.endNode)+1),a.map(c,v("element"))},getSelectedElements:function(){return z(ia(this,Ia),v("element"))},getSelectedText:function(){return this.typer.extractText(this)},getSelectedTextNodes:function(){ja(this);var a=N(this),b=new o(ia(this,xa|Ia),4,function(b){return O(a,N(b,"contents"))?1:2});return z(b)},createTreeWalker:function(a,b){return ia(this,a,b)},collapse:function(a){return a=this.getCaret(a),(a===this.baseCaret?this.extendCaret:this.baseCaret).moveTo(a)},select:function(a,b,c,d){return la(this,function(){if("word"===a)return this.getCaret("start").moveByWord(-1)+this.getCaret("end").moveByWord(1)>0;var e=N(a,b,c,d);return this.baseCaret.moveTo(N(e,!0))+this.extendCaret.moveTo(N(e,!1))>0})},focus:function(){J(c,this.typer.element)&&(qa.delete(this.typer),aa(N(this)))},clone:function(){var a=new j(this.typer);return a.baseCaret.moveTo(this.baseCaret),a.extendCaret.moveTo(this.extendCaret),a}}),a.each("moveToPoint moveToText moveByLine moveToLineEnd moveByWord moveByCharacter".split(" "),function(a,b){j.prototype[b]=function(){return la(this,function(){return p.prototype[b].apply(this.extendCaret,arguments)+this.collapse("extend")>0},u(arguments))}}),t(p,{getRange:function(){return(this.element&&!this.element.parentNode||this.textNode&&(!this.textNode.parentNode||this.offset>this.textNode.length))&&this.moveToText(this.node.element,this.wholeTextOffset),N(this.textNode||this.element,this.offset)},clone:function(){var a=new p(this.typer);return a.moveTo(this),a},moveTo:function(a,b){var c=E(a,f)||N(a,b);if(c){var d=this.selection&&this===this.selection.extendCaret&&R(this.selection.baseCaret,c)<0;return pa(this,c.startContainer,c.startOffset,d)}return!1},moveToPoint:function(a,b){return this.moveTo(W(a,b,this.typer.element))},moveToText:function(a,b){if(3!==a.nodeType){var c=new o(this.typer.getNode(a),4);if(b)for(;c.nextNode()&&b>c.currentNode.length;b-=c.currentNode.length);else if(1/b<0)for(;c.nextNode(););a=c.currentNode}return!!a&&pa(this,a,L(a,b))},moveToLineEnd:function(b){var c=U(this)[0],d=c.left;return y(new o(new n(this.node,Ia|Fa),4),function(e){a.each(U(e),function(a,e){e.top<=c.bottom&&e.bottom>=c.top&&(d=Math[b<0?"min":"max"](d,b<0?e.left:e.right))})}),this.moveToPoint(d,c.top+c.height/2)},moveByLine:function(a){var b=ma(this),c=U(this)[0];do{var d=U(b.currentNode),e=w(a<0?u(d).reverse():d,function(b){return a<0?b.bottom<=c.top:b.top>=c.bottom});if(e)return this.moveToPoint(c.left,e.top+e.height/2)}while(b[a<0?"previousNode":"nextNode"]());return this.moveToLineEnd(a)},moveByWord:function(a){var b,c=a<0?/\b(\S*\s+|\S+)$/:/^(\s+\S*|\S+)\b/,d="";if(this.textNode&&(d=a<0?this.textNode.nodeValue.substr(0,this.offset):this.textNode.nodeValue.slice(this.offset),(b=c.test(d))&&RegExp.$1.length!==d.length))return this.moveToText(this.textNode,this.offset+a*RegExp.$1.length);
var e=new o(new n(this.node,Ia|Fa),4);for(e.currentNode=this.textNode||this.element;e[a<0?"previousNode":"nextNode"]();)if(d=a<0?e.currentNode.nodeValue+d:d+e.currentNode.nodeValue,(b=c.test(d))&&RegExp.$1.length!==d.length)return this.moveToText(e.currentNode,a*(RegExp.$1.length-(d.length-e.currentNode.length)));return!(!b||!e.currentNode)&&this.moveToText(e.currentNode,0*-a)},moveByCharacter:function(a){for(var b=ma(this),c=U(this)[0],d=this.offset;;){for(;1===b.currentNode.nodeType||d===L(b.currentNode,0*-a);){if(!b[a<0?"previousNode":"nextNode"]())return!1;var e=new p(this.typer);e.moveToText(b.currentNode),d=(a<0?b.currentNode.length:0)+(e.node!==this.node&&-a)}d+=a;var f=U(N(b.currentNode,d))[0];if(f&&!S(c,f))return this.moveToText(b.currentNode,d)}}}),a.each("moveByLine moveByWord moveByCharacter".split(" "),function(a,b){var c=p.prototype[b];p.prototype[b]=function(a){return na(this,function(){for(var b=a;b&&c.call(this,a/Math.abs(a));b+=b>0?-1:1);return!a||b!==a})}}),t(k,{remove:function(){var a=this;a.typer.invoke(function(b){b.removeWidget(a)})}}),!Na){try{c.designMode="on",c.execCommand("enableObjectResizing",!1,!1),c.execCommand("enableInlineTableEditing",!1,!1)}catch(a){}c.designMode="off"}a(b).bind("focusin focusout",function(a){a.target!==b&&a.target!==c.body&&a.relatedTarget||(ra="focusout"===a.type)}),"undefined"==typeof h&&(h=function(){Object.defineProperty(this,"__dataKey__",{value:"typer"+Math.random().toString(36).substr(2,8)})},t(h,{get:function(a){return a[this.__dataKey__]},set:function(a,b){a[this.__dataKey__]=b},has:function(a){return this.__dataKey__ in a},delete:function(a){delete a[this.__dataKey__]}})),qa=new h,"undefined"==typeof Qa&&(Qa=function(){return c.caretPositionFromPoint?function(a,b){var d=c.caretPositionFromPoint(a,b);return N(d.offsetNode,d.offset)}:function(d,e){function f(a,b){for(;10===a.nodeValue.charCodeAt(b)&&--b;);var c=U(N(a,b))[0];if(c){var f=c.left>d?c.left-d:Math.min(0,c.right-d),g=c.top>e?c.top-e:Math.min(0,c.bottom-e);return g?g>0?1/0:-(1/0):f}}function g(a){for(var b=0,c=a.length;c-b>1;){var d=c+b>>1,e=f(a,d)<0;b=e?d:b,c=e?c:d}return Math.abs(f(a,b))<Math.abs(f(a,c))?b:c}function h(b){var c,f;return a(b).children().each(function(b,g){if(T(d,e,g.getBoundingClientRect())&&"none"!==a(g).css("pointer-events")){var h="static"===a(g).css("position")?void 0:parseInt(a(g).css("z-index"))||0;(void 0===c||h>c)&&(c=h,f=g)}}),f}for(var i=[],j=b.ActiveXObject?c.body:c.elementFromPoint(d,e),k=j;k;j=k||j)i.unshift(k),k=h(j);for(var l,m=0,n=i.length;m<n;m++){var o=a.grep(i[m].childNodes,function(a){return 3===a.nodeType&&w(U(a),function(a){return a.top<=e&&a.bottom>=e})}),p=w(o,function(a){return f(a,a.length-1)>=0});if(p)return N(p,g(p));o[0]&&(!l||H(l,o[o.length-1])<0)&&(l=o[o.length-1])}return N(l,-0)}}())}(jQuery,window,document,String,Node,Range,DocumentFragment,window.WeakMap,Array.prototype),function(a,b){"use strict";b.presets={textbox:{inline:!0,defaultOptions:!1,disallowedElement:"*",init:function(a){a.typer.getSelection().moveToText(a.typer.element,-0),Object.defineProperty(a.typer.element,"value",{enumerable:!0,configurable:!0,get:function(){return b.trim(this.textContent)},set:function(b){b!==this.value&&(this.textContent=b,a.typer.getSelection().moveToText(this,-0))}})},change:function(b){a(b.typer.element).trigger("change")}}},a.fn.typer=function(c,d){return d="string"==typeof c?a.extend({},b.presets[c],d):c,this.each(function(a,c){new b(c,d)})}}(jQuery,window.Typer),function(a,b){"use strict";function c(b,d,e){var f=new Function("fn","return function "+(b||"")+"() { return fn.apply(this, arguments); }")(function(b){if(!(this instanceof f)){var c=Object.create(f.prototype);return f.apply(c,arguments),c}if(!o(e))return a.extend(this,b);try{this._super=d,e.apply(this,arguments)}finally{delete this._super}});return f.prototype=o(d)?new d:a.extend(f.prototype,d),f.extend=function(a){return c(null,f,a)},f}function d(a,b,c){var d=a[b];Object.defineProperty(a,b,{enumerable:!0,configurable:!0,get:function(){return d},set:function(a){d!==a&&(d=a,c.call(this,b,a))}})}function e(b,c){c=c||q;var d=(b||"")+(c.expandedFrom?" @ "+c.expandedFrom:"");if(w[d])return w[d].slice(0);var e=(b||"").split(/\s+/),f=[];return a.each(e,function(b,d){"*"===d.slice(-1)?a.each(c,function(a){a.slice(0,d.length-1)===d.slice(0,-1)&&a.indexOf(":",d.length)<0&&e.indexOf("-"+a)<0&&f.indexOf(a)<0&&(f[f.length]=a)}):"-"!==d.charAt(0)&&c[d]&&e.indexOf("-"+d)<0&&f.indexOf(d)<0&&(f[f.length]=d)}),w[d]=f.slice(0),f}function f(a){var b=/^([\w-:]*)(?:\(([^}]+)\))?$/.exec(a),c=null;try{c=b[2]&&JSON.parse(("{"+b[2]+"}").replace(/([{:,])\s*([^\s:,}]+)/g,'$1"$2"'))}catch(a){}return{name:b[1],params:c}}function g(a,b){b?a.data("original-display")?a.css("display",a.data("original-display")):a.show():("none"!==a.css("display")&&a.data("original-display",a.css("display")),a.hide())}function h(a,b,c,d){if(a!==b&&o(b[c]))return b[c](a,b,d)}function i(a,b,c,d){h(a,b,c,d);var e=b.type+c.charAt(0).toUpperCase()+c.slice(1);o(t[a.theme][e])&&t[a.theme][e](a,b,d)}function j(b,c){c=c||b,o(c.controls)&&(c.controls=c.controls(b,c)),"string"==typeof c.controls&&(c.controls=e(c.controls));var d={};return c.controls=a.map(c.controls||[],function(a,e){var f=Object.create("string"==typeof a?q[a]:a);return f.parent=c,f.name=f.name||("string"==typeof a?a:"noname:"+Math.random().toString(36).substr(2,8)),void 0===f.label&&(f.label=f.name),d[f.name]=e,b.all[f.name]=f,j(b,f),f}),c.controls.sort(function(a,b){function c(a,b,c,d){return!a[c]||b[c]&&b[c].indexOf(a.name)?0:d*(a[c].indexOf(b.name)>=0?1:-1)}return c(a,b,"after",1)||c(a,b,"before",-1)||c(b,a,"after",-1)||c(b,a,"before",1)||d[a.name]-d[b.name]}),c.controls}function k(b,c,e){function g(b,c){c=(v[b]||v.__default__)(c),a.each(l[b],function(b,d){"_"===d[1]?a(d[0]).text(c||""):p.indexOf(d[1])>=0?a(d[0]).prop(d[1],!!c&&"false"!==c):c?a(d[0]).attr(d[1],c):a(d[0]).removeAttr(d[1])})}function h(b){a(b).find("*").andSelf().filter("[x\\:bind]").each(function(b,e){var h=f(a(e).attr("x:bind"));a.each(h.params,function(a,b){l[b]||(l[b]=[],d(c,b,g)),l[b].push([e,a])})}).removeAttr("x:bind")}function i(d){var e=a(t[b.theme][d]||'<div><br x:t="children"></div>')[0];return h(e),a("[x\\:t]",e).each(function(d,e){var g,j=f(a(e).attr("x:t"));o(t[b.theme][j.name])?(g=a(t[b.theme][j.name](b,c,j.params)),h(g)):g="children"===j.name?a.map(c.controls,function(a){return k(b,a,j.params)}):i(j.name),a(e).replaceWith(g)}),e}function j(d){a(d.target).is(":checkbox")?setTimeout(function(){b.setValue(c,!!d.target.checked)}):b.execute(c)}c=c||b;var l={};c.element=i(c.type),a(c.element).attr("role",c.name),a.each(l,function(a,b){g(a,c[a])});var m=t[b.theme][c.type+"ExecuteOn"];return"string"==typeof m?a(c.element).bind(m,j):m&&a(m.of,c.element).bind(m.on,j),c.element}function l(b,c){var d;"string"==typeof(c.requireWidget||c.requireWidgetEnabled)&&(c.widget=b._widgets[c.requireWidget||c.requireWidgetEnabled]||null,d=!c.widget),d||i(b,c,"stateChange");var e=!b.enabled(c),f=!c.hiddenWhenDisabled||!e,h=a(c.element),j=t[b.theme];h.is(":input")&&h.prop("disabled",e),j.controlDisabledClass&&h.toggleClass(j.controlDisabledClass,e),j.controlActiveClass&&h.toggleClass(j.controlActiveClass,!!b.active(c)),j.controlHiddenClass?h.toggleClass(j.controlHiddenClass,!f):g(h,f)}function m(a,b){a.typer?o(b.execute)?a.typer.invoke(function(c){b.execute(a,b,c,b.value)}):a.typer.hasCommand(b.execute)&&a.typer.invoke(b.execute,b.value):o(b.execute)&&b.execute(a,b,null,b.value)}function n(b,c,d,e){a.each(Object.keys(b.all).reverse(),function(a,e){c(b,b.all[e],d)}),c(b,b,d)}var o=a.isFunction,p="checked selected disabled readonly multiple ismap".split(" "),q={},r={},s={},t={},u={},v={},w={};b.ui=c("TyperUI",null,function(b,c){c&&(b={theme:c.theme,typer:c.typer,widget:c.widget,controls:b,parentUI:c});var d=a.extend(this,b);d.all={},Object.defineProperty(d.all,"expandedFrom",{value:d.controls}),d.controls=j(d),d.element=k(d),a(d.element).addClass("typer-ui typer-ui-"+b.theme),d.typer&&d.typer.retainFocus(d.element),h(d,t[d.theme],"init"),n(d,i,"init")}),a.extend(b.ui.prototype,{update:function(){var b=this,c=b._widgets={};b.widget?c[b.widget.id]=b.widget:b.typer&&a.each(b.typer.getSelection().getWidgets().concat(b.typer.getStaticWidgets()),function(a,b){c[b.id]=b}),n(this,l)},destroy:function(){n(this,h,"destroy")},trigger:function(a,b){"string"==typeof a&&(a=this.all[a]||{}),i(this,a,b)},enabled:function(a){return"string"==typeof a&&(a=this.all[a]||{}),!(!this.typer&&(a.requireTyper||a.requireWidget||a.requireWidgetEnabled||a.requireCommand))&&(!(a.requireCommand&&!this.typer.hasCommand(a.requireCommand)||a.requireWidgetEnabled&&!this.typer.widgetEnabled(a.requireWidgetEnabled))&&(!(a.requireWidget===!0&&!Object.getOwnPropertyNames(this._widgets)[0]||a.requireWidget&&!a.widget&&!this.widget)&&h(this,a,"enabled")!==!1))},active:function(a){return"string"==typeof a&&(a=this.all[a]||{}),!!h(this,a,"active")},resolve:function(b){var c=this;return a.map(e(b,c.all),function(a){return c.all[a]})},getValue:function(b){var c=this;if("string"==typeof b&&(b=c.all[b]||{}),!b.valueMap)return b.value;var d={};return a.each(b.valueMap,function(a,b){d[a]=c.getValue(b)}),d},setValue:function(b,c){var d=this;if("string"==typeof b&&(b=d.all[b]||{}),b.valueMap){var e=b.valueMap||{};return void a.each(c,function(b,c){a.each(d.resolve(e[b]),function(a,b){d.setValue(b,c)})})}b.value=c,b.executeOnSetValue&&d.enabled(b)&&m(d,b)},execute:function(b){var c=this;if("string"==typeof b?b=c.all[b]||{}:b||(b=c.controls[0]),c.enabled(b)){if(o(b.dialog)){var d=a.when(b.dialog(c,b));return d.done(function(a){void 0!==a&&c.setValue(b,a),m(c,b)}),d}m(c,b)}},spawn:function(a,c){var d=b.ui(a,this);return d.setValue(a,c),d.execute()},alert:function(a){var c=b.ui("ui:alert",this);return c.all["ui:alert"].label=a,c.execute()},confirm:function(a){var c=b.ui("ui:confirm",this);return c.all["ui:confirm"].label=a,c.execute()},prompt:function(a,c){var d=b.ui("ui:prompt",this);return d.all["ui:prompt"].label=a,d.all["ui:prompt"].value=c,d.execute()}}),a.extend(b.ui,{controls:q,themes:t,getIcon:function(a,b){return(r[a.icon]||r[a.name]||"")[b]||""},getShortcut:function(a){var b=u._map[a];return b&&b[0]},addIcons:function(b,c){a.each(c,function(a,c){r[a]||(r[a]={}),r[a][b]=c})},addLabels:function(b,c){a.extend(s,c)},addHook:function(c,d){return"object"==typeof c?void a.each(c,b.ui.addHook):void(c||"").replace(/\S+/g,function(a){u[a]=u[a]||[],u[a].push({hook:d})})},setShortcut:function(c,d){if("object"==typeof c)return void a.each(c,b.ui.setShortcut);c=f(c),u._map=u._map||{};var e=u._map[c.name]=u._map[c.name]||[],g=e.slice(0);(d||"").replace(/\S+/g,function(a){var b=g.indexOf(a);b>=0?g.splice(b,1):(e[e.length]=a,u[a]=u[a]||[],u[a].push({command:c.name,value:(c.params||"").value}))}),a.each(g,function(b,d){e.splice(e.indexOf(d),1),a.each(u[d],function(a,b){if(b.command===c.name&&b.value===(c.params||"").value)return u[d].splice(a,1),!1})})},setZIndex:function(b,c){"static"===a(b).css("position")&&(b.style.position="relative"),b.style.zIndex=(+a(c).parentsUntil(b.parentNode).filter(function(b,c){return/absolute|fixed|relative/.test(a(c).css("position"))}).slice(-1).css("z-index")||0)+1}}),a.extend(b.ui,{button:c("TyperUIButton",{type:"button"}),dropdown:c("TyperUIDropdown",{type:"dropdown",stateChange:function(b,c){a.each(c.controls,function(d,e){if(b.active(e))return a("select",c.element).prop("selectedIndex",d),c.selectedIndex=d,c.selectedValue=e.label||e.name,!1})},execute:function(a,b){a.execute(b.controls[b.selectedIndex])},enabled:function(a,b){return b.controls.length>0}}),group:c("TyperUIGroup",{type:"group",hiddenWhenDisabled:!0},function(b,c){this.controls=b,a.extend(this,c)}),callout:c("TyperUICallout",{type:"callout"}),textbox:c("TyperUITextbox",{type:"textbox",executeOnSetValue:!0}),checkbox:c("TyperUICheckbox",{type:"checkbox",executeOnSetValue:!0}),dialog:c("TyperUIDialog",{type:"dialog",resolve:"ui:button-ok",reject:"ui:button-cancel"},function(c){a.extend(this,c),this.dialog=function(c,d){var e=a.Deferred();return a.each(c.resolve(d.resolve),function(a,b){b.execute=function(){e.resolve(c.getValue(d.resolveValue||d))}}),a.each(c.resolve(d.reject),function(a,b){b.execute=function(){e.reject()}}),o(d.setup)&&d.setup(c,d,e.resolve.bind(e),e.reject.bind(e)),c.update(),c.trigger(d,"open"),e.always(function(){c.trigger(d,"close"),c.destroy()}),c.parentUI&&b.ui.setZIndex(c.element,c.parentUI.element),e.promise()}})}),a.extend(q,{"ui:button-ok":b.ui.button(),"ui:button-cancel":b.ui.button(),"ui:prompt-input":b.ui.textbox({label:"",executeOnSetValue:!1}),"ui:prompt-buttonset":b.ui.group("ui:button-ok ui:button-cancel"),"ui:prompt":b.ui.dialog({controls:"ui:prompt-input ui:prompt-buttonset",resolveValue:"ui:prompt-input",setup:function(a,b){a.setValue("ui:prompt-input",b.value)}}),"ui:confirm-buttonset":b.ui.group("ui:button-ok ui:button-cancel"),"ui:confirm":b.ui.dialog({controls:"ui:confirm-buttonset"}),"ui:alert-buttonset":b.ui.group("ui:button-ok"),"ui:alert":b.ui.dialog({controls:"ui:alert-buttonset"})}),b.ui.addLabels("en",{"ui:button-ok":"OK","ui:button-cancel":"Cancel"}),b.ui.addIcons("material",{"ui:button-ok":"","ui:button-cancel":""}),b.defaultOptions.shortcut=!0,b.widgets.shortcut={keystroke:function(b){b.isDefaultPrevented()||a.each(u[b.data]||[],function(a,c){return c.hook&&c.hook(b.typer)?(b.preventDefault(),!1):b.typer.hasCommand(c.command)?(b.typer.invoke(c.command,c.value),b.preventDefault(),!1):void 0})}},v.__default__=function(a){return"string"==typeof a&&a in s?s[a]:a},v.shortcut=function(a){return(a||"").replace(/ctrl|alt|shift/gi,function(a){return a.charAt(0).toUpperCase()+a.slice(1)+"+"})}}(jQuery,window.Typer),function(a,b){"use strict";function c(b){var c=a(b).css("text-align"),d=a(b).css("direction");switch(c){case"-webkit-left":return"left";case"-webkit-right":return"right";case"start":return"ltr"===d?"left":"right";case"end":return"ltr"===d?"right":"left";default:return c}}function d(b,d){var e;return a(b.getSelectedElements()).each(function(b,f){var g;g="textAlign"===d?c(f):"inlineClass"===d?a(f).filter("span").attr("class")||"":a(f).css(d),e=""===e||e&&e!==g?"":g}),e||""}function e(a,c){var d=b.createElement(a);return c&&(d.className=c),d}function f(b){a(b).is("li:only-child")&&(b=b.parentNode),a(b).remove()}function g(c){var d=a(c).parent("ul,ol")[0]||a(c).prev("ul,ol")[0]||a("<ul>").insertBefore(c)[0],e=d;if(e===c.parentNode){var g=a(c).prev("li")[0]||a("<li>").insertBefore(c)[0];e=a(g).children("ul,ol")[0]||a(d.cloneNode(!1)).appendTo(g)[0]}a("<li>").append(c.childNodes).appendTo(e),f(c),a(e).parent("li")[0]&&!e.previousSibling&&a(b.createTextNode()).insertBefore(e)}function h(b){var c=a(b).parent("ul,ol")[0],d=a(c).parent("li")[0];a(b).next("li")[0]&&(d?a(c.cloneNode(!1)).append(a(b).nextAll()).appendTo(b):(a(c.cloneNode(!1)).append(a(b).nextAll()).insertAfter(c),a(b).children("ul,ol").insertAfter(c))),a(e(d?"li":"p")).append(b.childNodes).insertAfter(d||c),f(b)}function i(b){a(b.selection.getParagraphElements()).attr("align",m[b.commandName])}function j(a){a.selection.isCaret?a.insertHtml(e(n[a.commandName])):(a.widget.subscript&&"superscript"===a.commandName?a.execCommand("subscript"):a.widget.superscript&&"subscript"===a.commandName&&a.execCommand("superscript"),a.execCommand(a.commandName))}function k(c,d){var e="insertOrderedList"===c.commandName||d?"ol":"ul",f="<"+e+(d||"").replace(/^.+/,' type="$&"')+">",g=function(b,c){return c.tagName.toLowerCase()===e&&(a(c).attr("type")||"")===(d||"")},i=[];a.each(c.selection.getParagraphElements(),function(d,e){if(a(e).is("ol>li,ul>li"))a(e.parentNode).filter(g)[0]?"list"===c.selection.focusNode.widget.id&&a.inArray(e.parentNode,i)<0&&h(e):(a(e.parentNode).wrap(f).contents().unwrap(),i.push(e.parentNode));else{var j=a(e).prev().filter(g)[0]||a(e).next().filter(g)[0]||a(f).insertAfter(e)[0];a(e)[b.comparePosition(e,j)<0?"prependTo":"appendTo"](j).wrap("<li>").contents().unwrap(),i.push(j)}})}function l(a,c){var d=a.typer.getSelection();return!!(c?d.startNode.nodeType&(b.NODE_PARAGRAPH|b.NODE_EDITABLE_PARAGRAPH|b.NODE_INLINE):d.getParagraphElements()[0])}var m={justifyLeft:"left",justifyRight:"right",justifyCenter:"center",justifyFull:"justify"},n={bold:"b",italic:"i",underline:"u",strikeThrough:"strike",superscript:"sup",subscript:"sub"},o={1:"decimal",A:"upper-alpha",a:"lower-alpha",I:"upper-roman",i:"lower-roman"};b.widgets.inlineStyle={inline:!0,beforeStateChange:function(b){var c=b.typer.getSelection();a.extend(b.widget,{bold:/bold|700/.test(d(c,"fontWeight")),italic:"italic"===d(c,"fontStyle"),underline:"underline"===d(c,"textDecoration"),strikeThrough:"line-through"===d(c,"textDecoration"),superscript:!!a(c.getSelectedElements()).filter("sup")[0],subscript:!!a(c.getSelectedElements()).filter("sub")[0],inlineClass:d(c,"inlineClass")})},commands:{bold:j,italic:j,underline:j,strikeThrough:j,superscript:j,subscript:j,applyClass:function(b,c){var d=b.selection.getParagraphElements();a(b.selection.getSelectedTextNodes()).wrap(e("span",c)),a("span:has(span)",d).each(function(b,c){a(c).contents().unwrap().filter(function(a,b){return 3===b.nodeType}).wrap(e("span",c.className))}),a('span[class=""]',d).contents().unwrap()}}},b.widgets.formatting={beforeStateChange:function(b){var c=b.typer.getSelection(),e=c.getParagraphElements().slice(-1)[0];a(e).is("li")&&(e=a(e).closest("ol, ul")[0]||e);var f=e&&e.tagName.toLowerCase(),g=f+(a(e).attr("class")||"").replace(/^(.)/,".$1"),h=d(c,"textAlign");a.extend(b.widget,{justifyLeft:"left"===h,justifyCenter:"center"===h,justifyRight:"right"===h,justifyFull:"justify"===h,formatting:f,formattingWithClassName:g})},enter:function(a){a.typer.invoke("insertLine")},commands:{justifyCenter:i,justifyFull:i,justifyLeft:i,justifyRight:i,formatting:function(b,c){var d=/^([a-z\d]*)(?:\.(.+))?/i.exec(c)||[];"ol"===d[1]||"ul"===d[1]?b.insertWidget("list","ol"===d[1]&&"1"):a(b.selection.getParagraphElements()).not("li").wrap(e(d[1]||"p",d[2])).contents().unwrap()},insertLine:function(a){a.insertText("\n\n")}}},b.widgets.lineBreak={inline:!0,shiftEnter:function(a){a.typer.invoke("insertLineBreak")},commands:{insertLineBreak:function(a){a.insertHtml("<br>")}}},b.widgets.list={element:"ul,ol",editable:"ul,ol",insert:k,remove:"keepText",tab:function(a){a.typer.invoke("indent")},shiftTab:function(a){a.typer.invoke("outdent")},init:function(c){a(c.widget.element).filter("ol").attr("type-css-value",o[a(c.widget.element).attr("type")]||"decimal"),a(c.widget.element).parent("li")[0]&&!c.widget.element.previousSibling&&a(b.createTextNode()).insertBefore(c.widget.element)},commands:{indent:function(b){a.map(b.selection.getParagraphElements(),g)},outdent:function(b){a.map(b.selection.getParagraphElements(),h)}}},a.each("formatting list inlineStyle lineBreak".split(" "),function(a,c){b.defaultOptions[c]=!0});var p=b.ui.button.extend(function(a,b){this._super({requireWidget:b,requireCommand:a,execute:a,active:function(b,c){return c.widget&&c.widget[a]},enabled:function(a){return l(a,"inlineStyle"===b)}})}),q=b.ui.button.extend(function(b,c){this._super({name:"formatting:orderedList:"+b,annotation:c,requireWidgetEnabled:"list",value:b,execute:function(a,c,d){d.insertWidget("list",b)},active:function(c,d){return d.widget&&a(d.widget.element).attr("type")===b}})});a.extend(b.ui.controls,{"toolbar:formatting":b.ui.group("formatting:*",{requireTyper:!0}),"formatting:paragraph":b.ui.dropdown({requireCommand:"formatting",hiddenWhenDisabled:!0,controls:function(c){return a.map(Object.keys(c.options.formattings||{}),function(a){return b.ui.button({requireWidget:"formatting",execute:"formatting",value:a,label:c.options.formattings[a],active:function(b,c){return c.widget.formattingWithClassName===a||c.widget.formatting===a}})})},enabled:function(a){return l(a,!1)}}),"formatting:inlineStyle":b.ui.dropdown({requireCommand:"applyClass",hiddenWhenDisabled:!0,controls:function(c){return a.map(Object.keys(c.options.inlineClass||{}),function(a){return b.ui.button({requireWidget:"inlineStyle",execute:"applyClass",value:a,label:c.options.inlineClass[a],active:function(b,c){return c.widget.inlineClass===a}})})},enabled:function(a){return l(a,!0)}}),"formatting:bold":p("bold","inlineStyle"),"formatting:italic":p("italic","inlineStyle"),"formatting:underline":p("underline","inlineStyle"),"formatting:strikeThrough":p("strikeThrough","inlineStyle"),"formatting:unorderedList":b.ui.button({requireWidgetEnabled:"list",execute:function(a,b,c){c.insertWidget("list","")},active:function(a,b){return b.widget&&"ul"===b.widget.element.tagName.toLowerCase()},enabled:function(a){return l(a,!1)}}),"formatting:orderedList":b.ui.callout({requireWidgetEnabled:"list",controls:[q("1","1, 2, 3, 4"),q("a","a, b, c, d"),q("A","A, B, C, D"),q("i","i, ii, iii, iv"),q("I","I, II, III, IV")],active:function(a,b){return b.widget&&"ol"===b.widget.element.tagName.toLowerCase()},enabled:function(a){return l(a,!1)}}),"formatting:indent":p("indent","list"),"formatting:outdent":p("outdent","list"),"formatting:justifyLeft":p("justifyLeft","formatting"),"formatting:justifyCenter":p("justifyCenter","formatting"),"formatting:justifyRight":p("justifyRight","formatting"),"formatting:justifyFull":p("justifyFull","formatting")}),b.ui.addLabels("en",{"formatting:bold":"Bold","formatting:italic":"Italic","formatting:underline":"Underlined","formatting:strikeThrough":"Strikethrough","formatting:unorderedList":"Bullet list","formatting:orderedList":"Numbered list","formatting:indent":"Indent","formatting:outdent":"Outdent","formatting:justifyLeft":"Align left","formatting:justifyCenter":"Align center","formatting:justifyRight":"Align right","formatting:justifyFull":"Align justified","formatting:paragraph":"Formatting","formatting:inlineStyle":"Text style","formatting:orderedList:1":"Decimal numbers","formatting:orderedList:a":"Alphabetically ordered list, lowercase","formatting:orderedList:A":"Alphabetically ordered list, uppercase","formatting:orderedList:i":"Roman numbers, lowercase","formatting:orderedList:I":"Roman numbers, uppercase"}),b.ui.addIcons("material",{"formatting:bold":"","formatting:italic":"","formatting:underline":"","formatting:strikeThrough":"","formatting:unorderedList":"","formatting:orderedList":"","formatting:indent":"","formatting:outdent":"","formatting:justifyLeft":"","formatting:justifyCenter":"","formatting:justifyRight":"","formatting:justifyFull":""}),b.ui.setShortcut({bold:"ctrlB",italic:"ctrlI",underline:"ctrlU",justifyLeft:"ctrlShiftL",justifyCenter:"ctrlShiftE",justifyRight:"ctrlShiftR"}),b.ui.addHook("tab",function(b){if(b.widgetEnabled("list"))return b.invoke(function(b){a.map(b.selection.getParagraphElements(),g)}),!0})}(jQuery,window.Typer),function(a,b){"use strict";b.widgets.link={element:"a[href]",inline:!0,insert:function(b,c){if(c=c||/^[a-z]+:\/\//g.test(b.selection.getSelectedText())&&RegExp.input||"#",b.selection.isCaret){var d=a("<a>").text(c).attr("href",c)[0];b.insertHtml(d)}else b.execCommand("createLink",c),b.selection.collapse("end")},remove:"keepText",commands:{setURL:function(a,b){a.widget.element.href=b},unlink:function(a){a.removeWidget(a.widget)}}},b.defaultOptions.link=!0,a.extend(b.ui.controls,{"toolbar:link":b.ui.callout({controls:"link:*",after:"toolbar:insert",requireWidgetEnabled:"link",hiddenWhenDisabled:!0,dialog:function(b,c){if(c.widget)return null;var d=c.widget||b.typer.getSelection().getSelectedText(),e={href:c.widget?a(c.widget.element).attr("href"):/^[a-z]+:\/\//g.test(d)?d:"",text:c.widget?a(c.widget.element).text():d};return"function"==typeof b.options.selectLink?b.options.selectLink(e):b.spawn("dialog:selectLink",e)},execute:function(c,d,e,f){if(!f)return null;var g=f.href||f,h=f.text||g;if(d.widget)a(d.element).text(h),e.typer.invoke("setURL",g);else{var i=b.createTextNode(h);e.insertHtml(i),e.selection.select(i),e.insertWidget("link",g)}},active:function(a,b){return b.widget}}),"link:url":b.ui.textbox({hiddenWhenDisabled:!0,requireWidget:"link",execute:"setURL",stateChange:function(b,c){c.value=a(c.widget.element).attr("href")}}),"link:blank":b.ui.checkbox({hiddenWhenDisabled:!0,requireWidget:"link",stateChange:function(b,c){c.value="_blank"===a(c.widget.element).attr("target")},execute:function(b,c){c.value?a(c.widget.element).attr("target","_blank"):a(c.widget.element).removeAttr("target")}}),"link:unlink":b.ui.button({hiddenWhenDisabled:!0,requireWidget:"link",execute:"unlink"}),"contextmenu:openLink":b.ui.button({requireWidget:"link",hiddenWhenDisabled:!0,execute:function(a,b){window.open(b.widget.element.href)}}),"dialog-control:selectLink-text":b.ui.textbox(),"dialog-control:selectLink-url":b.ui.textbox(),"dialog:selectLink":b.ui.dialog({controls:"dialog-control:selectLink-text dialog-control:selectLink-url ui:prompt-buttonset",valueMap:{text:"dialog-control:selectLink-text",href:"dialog-control:selectLink-url"}})}),b.ui.addLabels("en",{"toolbar:link":"Insert hyperlink","link:url":"Link URL","link:blank":"Open in new window","link:unlink":"Remove hyperlink","dialog:selectLink":"Create hyperlink","dialog-control:selectLink-text":"Text","dialog-control:selectLink-url":"URL","contextmenu:openLink":"Open hyperlink"}),b.ui.addIcons("material",{"toolbar:link":"","link:url":""}),b.ui.addHook("space",function(a){if(a.widgetEnabled("link")){var b=a.getSelection().clone();b.getCaret("start").moveByWord(-1)&&"link"!==b.focusNode.widget.id&&/^[a-z]+:\/\//g.test(b.getSelectedText())&&(a.snapshot(!0),a.getSelection().select(b),a.invoke(function(a){a.insertWidget("link")}),a.getSelection().collapse("end"))}})}(jQuery,window.Typer),function(a,b){"use strict";var c=/\.(?:(jpg|jpeg|png|gif|webp)|(mp4|ogg|webm)|(mp3))(?:\?.*)?$/gi;b.widgets.media={element:"img,audio,video,a:has(>img)",text:function(a){return a.element.src},insert:function(d,e){var f=b.createElement(c.exec(e.src||e)&&(RegExp.$1?"img":RegExp.$2?"video":"audio"));f.src=e.src||e,"video"===f.tagName&&a(f).attr("controls",""),d.insertHtml(f)}},b.defaultOptions.media=!0;var d=b.ui.button.extend(function(a){this._super({requireWidgetEnabled:"media",hiddenWhenDisabled:!0,dialog:function(b){return"function"==typeof b.options.selectMedia?b.options.selectMedia(a):b.prompt("dialog:selectImage")},execute:function(a,b,c,d){c.insertWidget("media",d)}})});a.extend(b.ui.controls,{"widget:media":b.ui.group("media:* widget:delete"),"insert:image":d("image"),"insert:video":d("video"),"media:filePicker":b.ui.button({requireWidget:"media",stateChange:function(b,c){c.value=a(c.widget.element).attr("src"),c.label=(/(?:^|\/)([^\/?#]+)(?:\?.+)?$/.exec(c.value)||[])[1]||""},dialog:function(a,b){if("function"==typeof a.options.selectMedia){var d=c.exec(b.label)&&(RegExp.$1?"image":RegExp.$2?"video":"audio");return a.options.selectMedia(d,b.value)}return a.prompt("dialog:selectImage",b.value)},execute:function(b,c,d,e){a(c.widget.element).attr("src",e.src||e)}}),"media:altText":b.ui.textbox({requireWidget:"media",hiddenWhenDisabled:!0,stateChange:function(b,c){c.value=a(c.widget.element).attr("alt")},execute:function(b,c){a(c.widget.element).attr("alt",c.value)}})}),b.ui.addLabels("en",{"insert:image":"Image","insert:video":"Video","media:altText":"Alternate text","dialog:selectImage":"Enter image URL"}),b.ui.addIcons("material",{"insert:image":"","insert:video":"","media:altText":""})}(jQuery,window.Typer),function(a,b){"use strict";function c(a,b){return new Array(b+1).join(a)}function d(c){var d=[],e=[];return b.iterate(c.createTreeWalker(b.NODE_EDITABLE|b.NODE_EDITABLE_PARAGRAPH),function(b){d[d.length]=a(b).parent().index(),e[e.length]=a(b).index()}),{minRow:Math.min.apply(null,d),maxRow:Math.max.apply(null,d),minColumn:Math.min.apply(null,e),maxColumn:Math.max.apply(null,e)}}function e(b,c,d){if(b.isSingleEditable){var e=a(b.focusNode.element)[c]()[0]||a(b.focusNode.element).parent()[c]().children(d)[0];e&&b.moveToText(e,-0)}}var f="<td></td>",g="<th></th>",h="<tr>%</tr>";b.widgets.table={element:"table",editable:"th,td",insert:function(b,d){d=a.extend({rows:2,columns:2},d),b.insertHtml("<table>"+c(h.replace("%",c(f,d.columns)),d.rows)+"</table>")},tab:function(a){e(a.typer.getSelection(),"next",":first-child")},shiftTab:function(a){e(a.typer.getSelection(),"prev",":last-child")},ctrlEnter:function(a){a.typer.invoke(function(a){a.selection.select(a.widget.element,b.COLLAPSE_START_OUTSIDE),a.insertText("")})},commands:{addColumnBefore:function(b){var c=d(b.selection);a(b.widget.element).find(">tbody>tr>th:nth-child("+(c.minColumn+1)+")").before(g),a(b.widget.element).find(">tbody>tr>td:nth-child("+(c.minColumn+1)+")").before(f)},addColumnAfter:function(b){var c=d(b.selection);a(b.widget.element).find(">tbody>tr>th:nth-child("+(c.maxColumn+1)+")").after(g),a(b.widget.element).find(">tbody>tr>td:nth-child("+(c.maxColumn+1)+")").after(f)},addRowAbove:function(b){var e=d(b.selection),g=a(b.widget.element).find(">tbody>tr")[e.minRow];a(g).before(h.replace("%",c(f,g.childElementCount)))},addRowBelow:function(b){var e=d(b.selection),g=a(b.widget.element).find(">tbody>tr")[e.maxRow];a(g).after(h.replace("%",c(f,g.childElementCount)))},removeColumn:function(b){var c=d(b.selection);a(b.widget.element).find(">tbody>tr").each(function(b,d){a(a(d).children().splice(c.minColumn,c.maxColumn-c.minColumn+1)).remove()})},removeRow:function(b){var c=d(b.selection);a(a(b.widget.element).find(">tbody>tr").splice(c.minRow,c.maxRow-c.minRow+1)).remove()},toggleTableHeader:function(b){if(a(b.widget.element).find("th")[0])a(b.widget.element).find("th").wrap("<td>").contents().unwrap();else{var d=a(b.widget.element).find(">tbody>tr")[0].childElementCount;a(b.widget.element).find("tbody").prepend(h.replace("%",c(g,d)))}}}},a.extend(b.ui.controls,{"insert:table":b.ui.button({requireWidgetEnabled:"table",hiddenWhenDisabled:!0,execute:function(a,b,c){c.insertWidget("table")}}),"contextmenu:table":b.ui.callout({controls:"table:*",requireWidget:"table",hiddenWhenDisabled:!0}),"table:toggleTableHeader":b.ui.checkbox({requireWidget:"table",execute:"toggleTableHeader",stateChange:function(b,c){c.value=!!a(c.widget.element).find("th")[0]}}),"table:addColumnBefore":b.ui.button({requireWidget:"table",execute:"addColumnBefore"}),"table:addColumnAfter":b.ui.button({requireWidget:"table",execute:"addColumnAfter"}),"table:addRowAbove":b.ui.button({requireWidget:"table",execute:"addRowAbove"}),"table:addRowBelow":b.ui.button({requireWidget:"table",execute:"addRowBelow"}),"table:removeColumn":b.ui.button({requireWidget:"table",execute:"removeColumn"}),"table:removeRow":b.ui.button({requireWidget:"table",execute:"removeRow"})}),b.ui.addLabels("en",{"insert:table":"Table","contextmenu:table":"Modify table","table:toggleTableHeader":"Toggle header","table:addColumnBefore":"Add column before","table:addColumnAfter":"Add column after","table:addRowAbove":"Add row above","table:addRowBelow":"Add row below","table:removeColumn":"Remove column","table:removeRow":"Remove row"})}(jQuery,window.Typer),function(a,b){"use strict";function c(b){if(c.value===!1)b();else if(!c.value){var d=function(){c.value=!0};a(document).one("paste",d),setTimeout(function(){a(document).unbind("paste",d),c.value||(c.value=!1,b())})}}function d(c,d){if(c.update(),c.widget||!c.options.container){clearTimeout(k),i!==c&&(f(!0),i=c,a(c.element).appendTo(document.body),b.ui.setZIndex(c.element,c.typer.element));var e=a(c.element).height();if(d)c.position="fixed";else if("fixed"!==c.position){var g=(c.widget||c.typer).element.getBoundingClientRect();d={position:"fixed",left:g.left,top:Math.max(0,g.top-e-10)}}if(d){var h=c.typer.getSelection().getRange();if(h){var j=h.getClientRects()[0]||h.getBoundingClientRect();j.top>=d.top&&j.top<=d.top+e&&(d.top=j.bottom+10)}a(c.element).css(d)}}}function e(c,d,e){c.update(),j!==c&&(g(),j=c,a(c.element).appendTo(document.body),b.ui.setZIndex(c.element,c.typer.element)),d+a(c.element).width()>a(window).width()&&(d-=a(c.element).width()),e+a(c.element).height()>a(window).height()&&(e-=a(c.element).height()),
a(c.element).css({position:"fixed",left:d,top:e})}function f(b){clearTimeout(k),b?i&&(a(i.element).detach(),i.position="",i=null):k=setTimeout(function(){f(!0)},100)}function g(){j&&(a(j.element).detach(),j=null)}function h(c,f,h,i){var j=b.ui({type:i||"toolbar",typer:c,widget:h||null,theme:f.theme,controls:"contextmenu"===i?"contextmenu":h?"toolbar:widget":"toolbar",options:f}),k=a(j.element);if(f.container?k.appendTo(f.container):(k.addClass("typer-ui-toolbar-floating"),k.mousedown(function(b){var c=k.position();if(b.target===j.element){var e=function(a){d(j,{top:c.top+(a.clientY-b.clientY),left:c.left+(a.clientX-b.clientX)})};a(document.body).mousemove(e),a(document.body).mouseup(function(){a(document.body).unbind("mousemove",e)})}})),"contextmenu"===i){var l;a(c.element).bind("contextmenu",function(a){a.preventDefault(),l=!1,e(j,a.clientX,a.clientY)}),k.focusout(function(a){l=!0}),k.mouseup(function(a){setTimeout(function(){l&&g()})})}return j}var i,j,k;b.widgets.toolbar={inline:!0,options:{container:"",theme:"material",formattings:{p:"Paragraph",h1:"Heading 1",h2:"Heading 2",h3:"Heading 3",h4:"Heading 4"},inlineClasses:{}},init:function(a){a.widget.toolbar=h(a.typer,a.widget.options),a.widget.contextmenu=h(a.typer,a.widget.options,null,"contextmenu")},widgetInit:function(a){b.ui.controls["widget:"+a.targetWidget.id]&&(a.targetWidget.toolbar=h(a.typer,a.widget.options,a.targetWidget))},focusin:function(a){d(a.widget.toolbar)},focusout:function(a){k=setTimeout(f)},widgetFocusin:function(a){a.targetWidget.toolbar&&d(a.targetWidget.toolbar)},widgetFocusout:function(a){d(a.widget.toolbar)},widgetDestroy:function(a){a.targetWidget.toolbar&&(a.targetWidget.toolbar.destroy(),d(a.widget.toolbar))},stateChange:function(){i&&d(i)}},a(window).scroll(function(){i&&d(i)}),a(function(){a(document.body).mouseup(function(b){j&&!a.contains(j.element,b.target)&&g()})}),a.extend(b.ui.controls,{contextmenu:b.ui.group("contextmenu:*"),"contextmenu:history":b.ui.group("history:*"),"contextmenu:selection":b.ui.group("selection:*"),"contextmenu:clipboard":b.ui.group("clipboard:*"),toolbar:b.ui.group("toolbar:insert toolbar:* -toolbar:widget"),"toolbar:insert":b.ui.callout({controls:"insert:*",enabled:function(a){return a.typer.getNode(a.typer.element).nodeType!==b.NODE_EDITABLE_INLINE}}),"toolbar:widget":b.ui.group("",{requireWidget:!0,controls:function(a,b){return a.widget&&"widget:"+a.widget.id}}),"history:undo":b.ui.button({shortcut:"ctrlZ",execute:function(a){a.typer.undo()},enabled:function(a){return a.typer.canUndo()}}),"history:redo":b.ui.button({shortcut:"ctrlShiftZ",execute:function(a){a.typer.redo()},enabled:function(a){return a.typer.canRedo()}}),"widget:delete":b.ui.button({requireWidget:!0,execute:function(a){a.widget.remove()}}),"selection:selectAll":b.ui.button({shortcut:"ctrlA",execute:function(a){a.typer.getSelection().select(a.typer.element,!0),a.typer.getSelection().focus()}}),"clipboard:cut":b.ui.button({shortcut:"ctrlX",execute:function(a){a.typer.getSelection().focus(),document.execCommand("cut")}}),"clipboard:copy":b.ui.button({shortcut:"ctrlC",execute:function(a){a.typer.getSelection().focus(),document.execCommand("copy")}}),"clipboard:paste":b.ui.button({shortcut:"ctrlV",execute:function(a){a.typer.getSelection().focus(),document.execCommand("paste"),c(function(){a.alert("clipboard:inaccessible")})}})}),b.ui.addLabels("en",{"toolbar:insert":"Insert widget","history:undo":"Undo","history:redo":"Redo","selection:selectAll":"Select all","clipboard:cut":"Cut","clipboard:copy":"Copy","clipboard:paste":"Paste","clipboard:inaccessible":"Unable to access clipboard due to browser security. Please use Ctrl+V or [Paste] from browser's menu.","widget:delete":"Delete"}),b.ui.addIcons("material",{"toolbar:insert":"","history:undo":"","history:redo":"","selection:selectAll":"","clipboard:cut":"","clipboard:copy":"","clipboard:paste":"","widget:delete":""})}(jQuery,window.Typer),function(a,b){function c(){var b='            .has-typer-visualizer:focus { outline:none; }            .has-typer-visualizer::selection,.has-typer-visualizer ::selection { background-color:transparent; }            .has-typer-visualizer::-moz-selection,.has-typer-visualizer ::-moz-selection { background-color:transparent; }            .typer-visualizer { position:fixed;pointer-events:none;width:100%;height:100%; }            .typer-visualizer > div { position:fixed;box-sizing:border-box; }            .typer-visualizer .fill { background-color:rgba(0,31,81,0.2); }            .typer-visualizer .fill-margin { border:solid rgba(255,158,98,0.2); }            @supports (clip-path:polygon(0 0,0 0)) or (-webkit-clip-path:polygon(0 0,0 0)) { .typer-visualizer .bl-r:before,.typer-visualizer .tl-r:before,.typer-visualizer .br-r:after,.typer-visualizer .tr-r:after { content:"";display:block;position:absolute;background-color:rgba(0,31,81,0.2);width:4px;height:4px;-webkit-clip-path:polygon(100% 100%,100% 0,96.6% 25.9%,86.6% 50%,70.7% 70.7%,50% 86.6%,25.9% 96.6%,0 100%);clip-path:polygon(100% 100%,100% 0,96.6% 25.9%,86.6% 50%,70.7% 70.7%,50% 86.6%,25.9% 96.6%,0 100%); } }            .typer-visualizer .line-n,.typer-visualizer .line-s { border-top:1px solid rgba(0,31,81,0.2);left:0;right:0;height:1px; }            .typer-visualizer .line-w,.typer-visualizer .line-e { border-left:1px solid rgba(0,31,81,0.2);top:0;bottom:0;width:1px; }            .typer-visualizer .line-s { margin-top:-1px; }            .typer-visualizer .line-e { margin-left:-1px; }            .typer-visualizer .bl { border-bottom-left-radius:4px; }            .typer-visualizer .tl { border-top-left-radius:4px; }            .typer-visualizer .br { border-bottom-right-radius:4px; }            .typer-visualizer .tr { border-top-right-radius:4px; }            .typer-visualizer .bl-r:before { right:100%;bottom:0; }            .typer-visualizer .tl-r:before { right:100%;top:0;-webkit-transform:flipY();transform:flipY(); }            .typer-visualizer .br-r:after { left:100%;bottom:0;-webkit-transform:flipX();transform:flipX(); }            .typer-visualizer .tr-r:after { left:100%;top:0;-webkit-transform:rotate(180deg);transform:rotate(180deg); }        ';a(document.body).append("<style>"+b+"</style>"),p=a('<div class="typer-ui typer-visualizer">').appendTo(document.body)[0],a(window).bind("scroll resize orientationchange focus",function(){z=a(window).width(),A=a(window).height(),m()}),a(document.body).bind("mousewheel",m),a(document.body).bind("mousemove",function(a){n(a.clientX,a.clientY)})}function d(a,b){return a.left===b.left&&a.top===b.top&&a.width===b.width&&a.height===b.height}function e(a,b){return b.left>=a.left&&b.right<=a.right&&b.top>=a.top&&b.bottom<=a.bottom}function f(a){return{top:0|a.top,left:0|a.left,right:0|(a.right||a.left+a.width),bottom:0|(a.bottom||a.top+a.height)}}function g(a){return{top:a.top,left:a.left,right:z-(a.right||a.left+a.width),bottom:A-(a.bottom||a.top+a.height)}}function h(c){var d=c.getBoundingClientRect(),g=window.getSelection().rangeCount&&window.getSelection().getRangeAt(0),h=g?a.map(b.createRange(g,b.createRange(c)).getClientRects(),f):[],i=[];return h.sort(function(a,b){return a.top-b.top||a.left-b.left||b.bottom-a.bottom||b.right-a.right}),a.each(h,function(a,b){var c=i[0];if(c&&(b.left>=c.right&&b.top<c.bottom?(i.shift(),b.top=Math.min(b.top,c.top),b.left=c.left,b.bottom=Math.max(b.bottom,c.bottom),c=i[0]):b.top>=c.bottom&&(c.right=d.left+d.width)),c){if(e(c,b))return;b.top>c.top&&b.top-c.bottom<b.bottom-b.top&&(c.bottom=b.top),i[1]&&c.left===i[1].left&&c.right===i[1].right&&(c.top=i.splice(1,1)[0].top)}i.unshift(b)}),i}function i(a){if(a.nodeType&(b.NODE_INLINE|b.NODE_INLINE_EDITABLE|b.NODE_INLINE_WIDGET))for(;!(a.nodeType&(b.NODE_PARAGRAPH|b.NODE_EDITABLE_PARAGRAPH))&&a.parentNode;a=a.parentNode);return a}function j(b,c,d){var e;a.each(b,function(a,b){if(null===b.element&&(e=b),b.element===c)return b.type=d,e=!0,!1}),"object"==typeof e?(e.element=c,e.type=d):e||(b[b.length]={element:c,type:d})}function k(b){a.each(b,function(b,c){c.type="none",a.contains(document,c.element)||(c.element=null)})}function l(b){a.each(b,function(b,c){function d(b,c,d){return e[f]=e[f]||y.pop()||a("<div>")[0],e[f].className=b,e[f].setAttribute("style",""),a(e[f]).css(c||"",d),e[f++]}var e=c.dom=c.dom||[],f=0;if("text"===c.type){var i=h(c.element);a.each(i,function(a,b){var c=i[a-1]||t,e=i[a+1]||t,f=d("fill",g(b));f.className+=[b.left<c.left||b.left>c.right?" bl":b.left>c.left&&b.left<c.right?" bl-r":"",b.left<e.left||b.left>e.right?" tl":b.left>e.left&&b.left<e.right?" tl-r":"",b.right>c.right||b.right<c.left?" br":b.right<c.right&&b.right>c.left?" br-r":"",b.right>e.right||b.right<e.left?" tr":b.right<e.right&&b.right>e.left?" tr-r":""].join("")})}else if("layout"===c.type||"layout-fill"===c.type||"layout-margin"===c.type){var j=c.element.getBoundingClientRect();if(d("line-n","top",j.top),d("line-s","top",j.top+j.height),d("line-w","left",j.left),d("line-e","left",j.left+j.width),"layout-margin"===c.type||"layout-fill"===c.type){var k=window.getComputedStyle(c.element),l=g(j);l.margin=[-parseFloat(k.marginTop),-parseFloat(k.marginRight),-parseFloat(k.marginBottom),-parseFloat(k.marginLeft),""].join("px "),l.borderWidth=[k.marginTop,k.marginRight,k.marginBottom,k.marginLeft].join(" "),d("fill-margin",l)}"layout-fill"===c.type&&d("fill",j)}e.length>f&&y.push.apply(y,e.splice(f)),a(e).appendTo(p)}),a(y).detach()}function m(){if(q){var a=q.element.getBoundingClientRect();s&&d(s,a)||(s=a,l(w))}}function n(a,c){if(k(x),q){var d=q.nodeFromPoint(a,c);d&&(d.nodeType&b.NODE_WIDGET?j(x,d.widget.element,"layout"):(d=i(d),j(x,d.element,"layout")))}l(x)}function o(a){var c=q.getSelection();k(w),c.isCaret?a.layout&&c.startNode&&c.startNode.nodeType&u&&j(w,(i(c.startNode)||c.startNode).element,"layout-margin"):b.iterate(c.createTreeWalker(-1,function(b){if(b.nodeType&u||a.layout&&r&&b.element===r.element)return j(w,b.element,b.nodeType&u?"text":"layout-fill"),2})),l(w)}var p,q,r,s,t={left:1e4,right:-1e4},u=b.NODE_PARAGRAPH|b.NODE_EDITABLE_PARAGRAPH|b.NODE_INLINE|b.NODE_INLINE_WIDGET|b.NODE_INLINE_EDITABLE,v=!window.ActiveXObject,w=[],x=[],y=[],z=a(window).width(),A=a(window).height();b.widgets.visualizer={inline:!0,options:{layout:!0},init:function(b){a(b.typer.element).addClass("has-typer-visualizer"),v&&!c.init&&(c(),c.init=!0)},focusin:function(a){q=a.typer,b.ui.setZIndex(p,q.element)},focusout:function(b){q=null,a(p).children().detach()},widgetFocusin:function(a){r=a.targetWidget,v&&o(a.widget.options)},widgetFocusout:function(a){r=null},stateChange:function(a){v&&a.typer===q&&o(a.widget.options)}},b.defaultOptions.visualizer=v}(jQuery,window.Typer),function(a,b){"use strict";function c(b){var c=a(".typer-ui-menupane",b)[0],d=!!a(b).parents(".typer-ui-menupane")[0],e=c.getBoundingClientRect();e.bottom>a(window).height()?a(c).css("bottom",d?"0":"100%"):e.top<0&&a(c).css("bottom","auto"),e.right>a(window).width()?a(c).css("right",d?"100%":"0"):e.left<0&&a(c).css("right","auto")}b.ui.themes.material={resources:["https://fonts.googleapis.com/css?family=Roboto:400,500,700","https://fonts.googleapis.com/icon?family=Material+Icons","https://cdn.rawgit.com/misonou/jquery-typer/master/css/jquery.typer.material.css"],controlActiveClass:"active",controlDisabledClass:"disabled",controlHiddenClass:"hidden",labelText:function(a,c){var d=!!b.ui.getIcon(c,"material");return!d||"toolbar"!==a.type||"textbox"!==c.type&&"callout"===(c.parent||"").type?'<span x:bind="(_:label)"></span>':""},labelIcon:function(a,c){var d=b.ui.getIcon(c,"material");return"callout"===(c.parent||"").type||"contextmenu"===a.type?"checkbox"===c.type?"":d.replace(/.*/,'<i class="material-icons">$&</i>'):d.replace(/.+/,'<i class="material-icons">$&</i>')},toolbar:'<div class="typer-ui-toolbar"><br x:t="children"/></div>',contextmenu:'<div class="typer-ui-contextmenu typer-ui-menupane"><br x:t="children"/></div>',group:'<div class="typer-ui-group"><br x:t="children"/></div>',groupStateChange:function(b,c){a(c.element).toggleClass("visible-first",!a(c.element).prevAll(":not(.hidden)")[0]),a(c.element).toggleClass("visible-last",!a(c.element).nextAll(":not(.hidden)")[0])},label:'<span class="typer-ui-label"><br x:t="labelIcon"/><br x:t="labelText"/></span>',button:'<button x:bind="(title:label)"><br x:t="label"/><span class="typer-ui-menu-annotation" role="shortcut" x:bind="(_:shortcut)"></span><span class="typer-ui-menu-annotation" x:bind="(_:annotation)"></span></button>',buttonExecuteOn:"click",callout:'<div class="typer-ui-menu"><button x:bind="(title:label)"><br x:t="label"/></button><div class="typer-ui-menupane"><br x:t="children"></div></div>',calloutExecuteOn:{on:"click",of:">button"},dropdown:'<div class="typer-ui-dropdown typer-ui-menu"><button x:bind="(title:label)"><span class="typer-ui-label"><br x:t="labelIcon"/><span x:bind="(_:selectedValue)"></span></span></button><div class="typer-ui-menupane"><br x:t="children(t:button)"></div></div>',checkbox:'<label class="typer-ui-checkbox" x:bind="(title:label)"><input type="checkbox" x:bind="(checked:value)"/><br x:t="label"/></label>',checkboxExecuteOn:{on:"change",of:":checkbox"},textbox:'<label class="typer-ui-textbox" x:bind="(title:label)"><br x:t="label"/><div contenteditable spellcheck="false" x:bind="(data-placeholder:label)"></div></label>',textboxInit:function(b,c){var d=a("[contenteditable]",c.element);d.typer("textbox",{enter:function(){b.execute("ui:button-ok")},escape:function(){b.execute("ui:button-cancel")}}),d.bind("change",function(){b.setValue(c,this.value),a(c.element).toggleClass("has-value",!!this.value)}),d.bind("focusin focusout",function(b){a(c.element).parents(".typer-ui-menu").toggleClass("open","focusin"===b.type)})},textboxStateChange:function(b,c){a(c.element).toggleClass("has-value",!!c.value),a(c.element).find("[contenteditable]").prop("value",c.value||"")},dialog:'<div class="typer-ui-dialog"><h1><br x:t="label"/></h1><br x:t="children"></div>',dialogOpen:function(b,c){a('<div style="position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(255,255,255,0.5) url(data:image/gif;,);">').prependTo(b.element),a(b.element).appendTo(document.body),setTimeout(function(){a(c.element).addClass("open"),a("[contenteditable]:first",b.element).focus()})},dialogClose:function(b,c){a(c.element).removeClass("open").one("transitionend otransitionend webkitTransitionEnd",function(){a(b.element).remove()})},init:function(b){a(b.element).click(function(c){a(".typer-ui-menu.open",b.element).not(a(c.target).parentsUntil(b.element)).removeClass("open")}),a(b.element).focusout(function(c){a.contains(b.element,c.relatedTarget)||a(".typer-ui-menu.open",b.element).removeClass("open")}),a(b.element).on("click",".typer-ui-menu>:not(.typer-ui-menupane)",function(d){var e=d.currentTarget.parentNode;a(".typer-ui-menu.open",b.element).not(e).removeClass("open"),a(e).find(">.typer-ui-menupane>:not(.disabled)")[0]&&(a(e).toggleClass("open"),setTimeout(function(){c(e)})),d.stopPropagation()}),a(b.element).on("mouseover",".typer-ui-menu",function(a){c(a.currentTarget)})}}}(jQuery,window.Typer);
//# sourceMappingURL=jquery.typer.min.js.map
