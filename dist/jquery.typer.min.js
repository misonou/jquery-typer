/*! jQuery Typer Plugin v0.10.3 | https://github.com/misonou/jquery-typer | The MIT License (MIT) */

!function(a,b,c,d,e,f,g,h,i){"use strict";function j(a,b){this.typer=a,this.baseCaret=new q(a,this),this.extendCaret=new q(a,this),b&&this.select(b)}function k(a,b,c,d){this.typer=a,this.id=b,this.element=c||null,this.options=d||{}}function l(b,c,d,e,f){this.eventName=b,this.typer=c,this.widget=d||null,this.data=void 0!==e?e:null,a.extend(this,f)}function m(a,b,c){this.childNodes=[],this.nodeType=a,this.element=b,this.widget=c}function n(a,b,c){this.whatToShow=b,this.filter=c||null,this.currentNode=a,this.root=a}function o(a,b,c){this.whatToShow=b,this.filter=c||null,ja(this,F(a,n)||new n(a,Ha|Sa))}function p(a){this.typer=a,this.changes=[]}function q(a,b){this.typer=a,this.selection=b||null}function r(){this.weakMap=new h}function s(a){return function b(c,d,e){var f=b.executing;try{return b.executing=!0,c.apply(e||this,d)}finally{b.executing=f,!b.executing&&a&&a()}}}function t(a,b,c,d){Object.defineProperty(a,b,{configurable:!d,writable:!0,value:c})}function u(a,b){a.prototype=b,t(b,"constructor",a)}function v(a,b,c){return i.slice.call(a||{},b||0,c)}function w(a){return w[a]=w[a]||function(b){return b[a]},w[a]}function x(b,c){var d;return a.each(b,function(a,b){return d=c.call(this,b)&&b,!d}),d}function y(a,b){var c=(b||a.currentNode||"").nodeType;return a.whatToShow&(F(a,n)?c:1<<c-1)?a.filter?(a.filter.acceptNode||a.filter).call(a.filter,b||a.currentNode):1:3}function z(a,b,c){a.currentNode=c||a.currentNode;var d=a.currentNode?y(a):3;if(2!==d){1===d&&b&&b(a.currentNode);for(var e;e=a.nextNode();b&&b(e));}}function A(b,c,d){var e=[];return z(b,i.push.bind(e),d),c?a.map(e,c):e}function B(a){return d(a||"").replace(/^[\s\u200b]+|[\s\u200b]+$/g,"")}function C(a){return a=d(a||""),a.charAt(0).toUpperCase()+a.slice(1)}function D(a){return a=d(a||""),a.charAt(0).toLowerCase()+a.slice(1)}function E(a){return a&&a.tagName&&a.tagName.toLowerCase()}function F(b,c){return!(!b||!c)&&(c.prototype?b instanceof c&&b:c.toFixed?b.nodeType&c&&b:("*"===c||E(b)===c||a(b).is(c))&&b)}function G(b){var c={};return a.each(a.makeArray(b&&b.attributes),function(a,b){c[b.nodeName]=b.value}),c}function H(b,c){var d=G(b),e=G(c);return a.each(e,function(a,b){b===d[a]&&(delete d[a],delete e[a])}),!Object.keys(d)[0]&&!Object.keys(e)[0]}function I(a,b,c){if(a===b)return 0;var d=a&&b&&Za.call(a,b);return 2&d?c&&8&d||1&d?NaN:1:4&d?c&&16&d||1&d?NaN:-1:NaN}function J(a,b){return a&&b&&!(1&Za.call(a.commonAncestorContainer||a,b.commonAncestorContainer||b))}function K(b,c){return b===c||a.contains(b,c)}function L(a,b){for(b=b||a;a&&a!==b&&20!==Za.call(a,b);a=a.parentNode);return a}function M(a,b){var c=a.length||a.childNodes.length;return b===c||0===b&&1/b===-(1/0)?c:(c+b)%c||0}function N(a,b){for(var c,d=new o(new n(a,Sa|Pa),5),e=0;(c=d.nextNode())&&c!==b;e+=c.length||0);return e}function O(a,b,d,g){if(a&&_a(a.getRange))return a.getRange();var h;if(F(a,e)?(h=c.createRange(),+b!==b?(h["contents"!==b&&a.parentNode?"selectNode":"selectNodeContents"](a),"boolean"==typeof b&&h.collapse(b)):h.setStart(a,M(a,b)),F(d,e)&&J(a,d)&&h.setEnd(d,M(d,g))):F(a,f)&&(h=a.cloneRange(),h.collapsed||"boolean"!=typeof b||h.collapse(b)),F(b,f)&&J(h,b)){var i=h.collapsed&&b.collapsed?-1:1;$a.call(h,0,b)*i<0&&h.setStart(b.startContainer,b.startOffset),$a.call(h,2,b)*i>0&&h.setEnd(b.endContainer,b.endOffset)}return h}function P(a,b){return a=F(a,f)||O(a),b=F(b,f)||O(b),J(a,b)&&$a.call(a,3,b)<=0&&$a.call(a,1,b)>=0}function Q(a,b){return a=F(a,f)||O(a),b=F(b,f)||O(b),J(a,b)&&$a.call(a,0,b)<=0&&$a.call(a,2,b)>=0}function R(a,b){return a=F(a,f)||O(a),b=F(b,f)||O(b),J(a,b)&&0===$a.call(a,0,b)&&0===$a.call(a,2,b)}function S(a,b,c){a=F(a,f)||O(a),b=F(b,f)||O(b);var d=J(a,b)?$a.call(a,0,b)+$a.call(a,2,b):NaN;return c&&(0!==d&&P(a,b)||0===d&&!R(a,b))?NaN:d&&d/Math.abs(d)}function T(a,b){function c(c){return Math.abs(a[c]-b[c])<1}return c("left")&&c("top")&&c("bottom")&&c("right")}function U(a,b){return b.left>=a.left&&b.right<=a.right&&b.top>=a.top&&b.bottom<=a.bottom}function V(a,b,c){return a>=c.left&&a<=c.right&&b>=c.top&&b<=c.bottom}function W(a){var b=F(a,f)||O(a,"contents"),c=b.collapsed&&3===b.startContainer.nodeType&&!b.startContainer.length;c&&(b.startContainer.nodeValue=Ba);try{if(b.collapsed&&b.startOffset===b.startContainer.length){b.setStart(b.startContainer,b.startOffset-1);var d=b.getClientRects()[0];if(d)return[{top:d.top,left:d.right,right:d.right,bottom:d.bottom,width:0,height:d.height}]}return b.getClientRects()}finally{c&&(b.startContainer.nodeValue="")}}function X(a){if(ab.rangeCount){var b=ab.getRangeAt(0);return K(a,b.commonAncestorContainer)&&b}}function Y(b,d,e){var f=Ya.call(c,b,d);if(f&&e&&e!==c.body&&V(b,d,e.getBoundingClientRect())){var g=[];try{for(var h;I(e,h=f.commonAncestorContainer,!0);){var i=a(h).parentsUntil(L(e,h)).slice(-1)[0]||h;if(i===g[g.length-1])return null;i.style.pointerEvents="none",g[g.length]=i,f=Ya.call(c,b,d)}}finally{a(g).css("pointer-events","")}}return f}function Z(b){return F(b,g)||a(c.createDocumentFragment()).append(b)[0]}function $(a){return c.createTextNode(a||Ba)}function _(a){return c.createElement(a)}function aa(b,d){d!==!1&&z(c.createNodeIterator(b,1,null,!1),function(a){ua.update(a,b.parentNode)}),a(b).remove()}function ba(b,c){return a.each(c,function(c,d){b=a(d.cloneNode(!1)).append(b)[0]}),F(b,e)||Z(b)}function ca(a){try{ab.removeAllRanges()}catch(a){var b=c.body.createTextRange();b.collapse(),b.select(),ab.removeAllRanges()}try{ab.addRange(a)}catch(b){ab.rangeCount||(ab.addRange(O(c.body)),ab.removeAllRanges(),ab.addRange(a))}}function da(n,r){function t(){}function y(a){switch(a){case Ta:return qa.concat(ma.getWidgets().slice(0,-1));case Ua:return qa;case Va:return ma.getWidgets().reverse().concat(qa);case Wa:return ma.focusNode.widget}}function I(a){return x(y(Va),function(b){var c=ra[b.id];return c.commands&&_a(c.commands[a])})}function J(b,c){return Array.isArray(b)||(b=a.makeArray(F(b,k)||y(b))),!!x(b,function(a){return!a.destroyed&&_a(ra[a.id][c])})}function L(b,c,d,e,f){var g,h=a.makeArray(F(c,k)||y(c));return J(h,d)&&cb(b,function(){a.each(h,function(a,b){var h=ra[b.id];if(!b.destroyed&&_a(h[d]))return g=!0,h[d].call(h,new l(d,oa,b,e,f)),c!==Va})}),F(c,k)&&J(Ua,"widget"+C(d))&&setImmediate(function(){L(b,Ua,"widget"+C(d),null,{targetWidget:c})}),g}function M(b,c,d,e,f){return f=f||a.Event(d),L(b,c,d,e,{preventDefault:f.preventDefault.bind(f),isDefaultPrevented:function(){return f.isDefaultPrevented()}}),f.isDefaultPrevented()}function T(d,e){function f(a,b){if(b.parentNode!==a&&b!==a){b.parentNode&&j(b,!0);for(var c=a.childNodes.length;c&&S(b.element,a.childNodes[c-1].element)<0;c--);b.parentNode=a,b.previousSibling=a.childNodes[c-1],b.nextSibling=a.childNodes[c],(b.previousSibling||{}).nextSibling=b,(b.nextSibling||{}).previousSibling=b,a.childNodes.splice(c,0,b)}}function j(a,b){if(a.parentNode){var c=a.parentNode.childNodes.indexOf(a);c>=0&&(e&&!b&&a.widget.element===a.element&&(a.widget.destroyed=!0,L(null,a.widget,"destroy")),a.parentNode.childNodes.splice(c,1),a.parentNode=null,(a.previousSibling||{}).nextSibling=a.nextSibling,(a.nextSibling||{}).previousSibling=a.previousSibling)}}function l(b){var c=b.parentNode||x.get(d);if(F(c,Ha)||b.widget&&F(b.element,ra[b.widget.id].element)||(e&&b.widget&&b.widget.element===b.element&&(b.widget.destroyed=!0,b.widget.id!==Ga&&L(null,b.widget,"destroy")),delete b.widget,a.each(ra,function(a,c){if(F(b.element,c.element))return b.widget=new k(A,a,b.element,c.options),!1}),e&&b.widget&&b.widget.id!==Ga&&L(null,b.widget,"init")),b.widget&&b.widget.id===Ga&&!F(c,Sa))b.widget=c.widget,b.nodeType=Ha;else{b.widget=b.widget||c.widget;var f=ra[b.widget.id];b.widget!==c.widget||F(c,Ha)?F(b.element,f.editable)||f.inline&&!f.editable?b.nodeType=f.inline?Oa:F(b.element,za)?Ja:Ia:b.nodeType=f.inline&&b.widget!==c.widget&&F(c,Sa)?Na:Ha:b.nodeType=F(b.element,za)?Ka:Ma}}function o(b){a.each(b.childNodes.slice(0),function(a,b){K(d,b.element)||(j(b),x.delete(b.element))})}function p(b){a(b).bind("input textinput",function(a){var b=c.createEvent("Event");b.initEvent("input"===a.type?"input":"textInput",!0,!1),b.data=a.data,a.stopPropagation(),n.dispatchEvent(b)})}function q(b,c){var d=[x.get(b)];o(d[0]);var e=c?a(b).children():F(b,g)?a(b).children().find("*").andSelf():a("*",b);e.each(function(a,b){for(;!K(d[0].element,b);)d.shift();if("br"===E(b))return void(x.has(b)&&F(d[0],Sa)&&(j(x.get(b)),x.delete(b)));var e=!x.has(b),g=x.get(b)||new m(0,b);g.widget;f(d[0],g),o(g),l(g),x.set(b,g),c&&e&&(q(b),p(b)),d.unshift(g)})}function s(b){var c=a.map(b,function(b){return a(b.addedNodes).add(b.removedNodes).filter(":not(#Typer_RangeStart,#Typer_RangeEnd)")[0]?b.target:null});i.push.apply(y,c)}function t(a){for(var b=a;!x.has(b);b=b.parentNode);return q(b),x.get(a)}function u(){w?s(w.takeRecords()):(clearImmediate(u.handle),u.handle=setImmediate(function(){y.push(null)})),null===y[0]?q(y.splice(0)&&d):y[0]&&a(d.parentNode||d).find(a.unique(y.splice(0))).each(function(a,b){q(b,!!w)})}function v(a){if(u(),3!==a.nodeType&&"br"!==E(a)||(a=a.parentNode||a),K(d,a))return x.get(a)||t(a);if(!K(c,a)){for(var b=a;b.parentNode;b=b.parentNode);return(x.get(b)||T(b)).getNode(a)}}var w,x=new h,y=[],z={},A=K(n,d)?oa:z;return d.parentNode||(d=F(d,g)||Z(d)),b.MutationObserver&&e&&(w=new MutationObserver(s),w.observe(d,{subtree:!0,childList:!0})),x.set(d,new m(pa,d,new k(A,Fa,n,r))),y.push(null),a.extend(z,{getNode:v,getEditableNode:function(a){var b=v(a)||x.get(d);return F(b,Ha)?v(b.widget.element):b}})}function U(a,b){var c=new q(oa);return c.moveToText(a,b),c.getRange()}function V(b){return F(b,Ia)&&!b.childNodes[0]?(a(b.element).html("<p>"+(B(b.element.textContent)||Ca)+"</p>"),!0):F(b,Ja)&&!b.element.childNodes[0]?(a($()).appendTo(b.element),!0):void 0}function W(a){var b=ma.baseCaret,c=ma.extendCaret;if(a===b.textNode||a===c.textNode)return!0;if(Xa){var d=b.textNode&&(a===b.textNode.previousSibling&&0===b.offset||a===b.textNode.nextSibling&&b.offset===b.textNode.length),e=c.textNode&&(a===c.textNode.previousSibling&&0===c.offset||a===c.textNode.nextSibling&&c.offset===c.textNode.length);return d||e}}function ea(b){b=F(b,f)||O(n,"contents"),cb("script",function(){z(new j(oa,b).createTreeWalker(Sa|Ia|Pa),function(b){if(!V(b)){if(F(b,Ia))return void a(b.element).contents().each(function(c,d){if(d.parentNode===b.element){for(var e=[];d&&(3===d.nodeType||"br"===E(d)||F(na.getNode(d),Ra));d=d.nextSibling)(e.length||1===d.nodeType||B(d.data))&&e.push(d);e.length&&a(e).wrap("<p>")}});if(F(b,Ka|Ja)){var c=a(">br:last-child",b.element)[0];c&&!c.nextSibling&&(a($()).insertBefore(c),aa(c));var d=a(">br:first-child",b.element)[0];d&&!d.previousSibling&&aa(d)}F(b,Sa)&&(a(">br",b.element).each(function(b,c){c.nextSibling&&1!==c.nextSibling.nodeType||a($()).insertAfter(c)}),a(b.element).contents().each(function(a,b){if(3===b.nodeType&&!W(b)){var c=b.nextSibling;/\b\u00a0$/.test(b.nodeValue)&&c&&3===c.nodeType&&!/^[^\S\u00a0]/.test(c.nodeValue)&&(b.nodeValue=b.nodeValue.slice(0,-1)+" "),b.nodeValue=b.nodeValue.replace(/(?=.)\u200b+(?=.)/g,"").replace(/\b\u00a0\b/g," ")||Ba,c&&3===c.nodeType&&!W(c)&&(c.nodeValue=b.nodeValue+c.nodeValue,aa(b))}}),/\S/.test(b.element.textContent)||a($()).appendTo(b.element),F(b,Ma)&&b.element!==ma.startElement&&b.element!==ma.endElement&&E(b.element.previousSibling)===E(b.element)&&H(b.element,b.element.previousSibling)&&(a(b.element).contents().appendTo(b.element.previousSibling),aa(b.element)))}}),a('br[type="_moz"]',n).remove()})}function fa(b,d,h){b=F(b,f)||O(b);var i="cut"===d?"extractContents":"paste"===d?"deleteContents":"cloneContents",k="paste"!==d,l="copy"!==d,m=c.createDocumentFragment(),o=new j(oa,b),p=o.isSingleEditable||(o.startNode.widget.id===Fa||ra[o.startNode.widget.id].textFlow)&&(o.endNode.widget.id===Fa||ra[o.endNode.widget.id].textFlow);return cb(null,function(){if(!b.collapsed){var c=[[n,m]];z(o.createTreeWalker(-1,function(d){var f;if(d===o.focusNode&&F(d,Ia))return 3;for(;F(d.element,e)&&!K(c[0][0],d.element);)c.shift();if(Q(b,d.element))return k&&(f=d.element.cloneNode(!0),a(c[0][1]).append(d.element===n?f.childNodes:f)),l&&(F(d,Ia)?(a(d.element).html(Da),La.track(d)):F(d,Ja)?(a(d.element).html(Ca),La.track(d)):aa(d.element)),2;if(F(d,Sa)&&(f=O(d.element,b)[i]()),k){if(d.element!==n&&(!F(d,Ka|Ma)||f&&E(f.firstChild)!==E(d.element))){var h=d.element.cloneNode(!1);c[0][1].appendChild(h),F(h,g)||c.unshift([d.element,h])}f&&c[0][1].appendChild(f)}return l&&La.track(d),F(d,Sa)?2:1}))}if(_a(h)){var d=O(b,!0),f=p?O(b,!1):d,q=new j(oa,O(d,f));F(q.startNode,Qa)&&q.startNode===q.endNode&&V(q.startNode)&&(q=new j(oa,O(q.startNode.element,"contents"))),S(d,q.startNode.element)<0&&(d=O(q.startNode.element,0)),h(q,d,f)}}),m}function ga(b,f){F(f,e)||(f=a.parseHTML(d(f||"").replace(/\u000d/g,"").replace(/</g,"&lt;").replace(/\n{2,}/g,"</p><p>").replace(/\n/g,"<br>").replace(/.*/,"<p>$&</p>"))),f=v(Z(f).childNodes),fa(b,"paste",function(a,b,d){var e,g=("__root__ "+(ra[a.focusNode.widget.id].allowedWidgets||"*")).split(" "),h=b.cloneRange(),i=F(a.startNode,Ja),j=F(a.startNode,Sa),k=!0,l=[],n=na.getNode(a.startElement);if(F(n,Ra)){for(;n!==a.startNode;n=n.parentNode)F(n,Ma)&&l.push(n.element);l.push(a.startNode.element)}else F(n,Ka)?l[0]=a.startNode.element:F(n,Ja)||(l[0]=_("p"));for(;f[0];){var o=f.shift(),p=new m(Ma,o),q="br"===E(o);if(1!==o.nodeType||q||(b.insertNode(o),p=na.getNode(o),aa(o),(p.widget.id===Ga||"*"!==g[1]&&g.indexOf(p.widget.id)<0)&&(o=$(p.widget.id===Ga?o.textContent:ha(o)),p=new m(Ma,o))),q&&!F(na.getEditableNode(h.startContainer),Ka|Ja)||!F(p,Sa|Na)||!F(p,Ra)&&!k){for(var r=na.getEditableNode(h.startContainer);!F(r.parentNode,q?Ka:Qa);)r=r.parentNode;var s=O(r.element,!1),t=O(h,s).extractContents();t.textContent||(t=Z(ba($(),l)));var u=t.firstChild;if(s.insertNode(t),La.track(s.startContainer),/\S/.test(r.element.textContent)||h.insertNode($()),u&&!/\S/.test(u.textContent)&&u.appendChild($())," "===r.element.textContent.slice(-1)){var v=A(c.createNodeIterator(r.element,4,null,!1)).filter(w("nodeValue")).slice(-1)[0];v.nodeValue=v.nodeValue.slice(0,-1)+" "}if(u&&" "===u.textContent.charAt(0)){var x=A(c.createNodeIterator(u,4,null,!1)).filter(w("nodeValue"))[0];x.nodeValue=x.nodeValue.slice(1)}h=q?O(s,!0):u?O(u,0):O(s,!1),d=O(s,!1),q||(k=!0,e=!0)}j=j&&F(p,Sa|Na),q||(F(p,Ra)?o=Z(ba(o,j?l.slice(0,-1):l)):j&&k&&(o=Z(o.childNodes)));var y=Z(o).lastChild;if(j)y&&(h.insertNode(o),q||F(p,Na)?(h=O(y,!1),h.insertNode($()),h.collapse(!1)):h=O(y,-0)),k=i;else{var z=na.getEditableNode(h.startContainer);F(z,Qa)?h.insertNode(o):O(z.element,!0).insertNode(o),j=i||F(p,Sa|Na),h=j?O(y,-0):O(y,!1),k=i||!j,e=!0}La.track(h.startContainer)}if(!e&&a.startNode!==a.endNode&&F(a.startNode,Ka)&&F(a.endNode,Ka)){if(h){for(var B=na.getNode(h.startContainer);F(B,Ra);)B=B.parentNode;h=O(B.element,-0)}else h=O(a.startNode.element,-0);h.insertNode(O(a.endNode.element,"contents").extractContents()),h.collapse(!0),aa(a.endNode.element),La.track(a.endNode),La.track(a.startNode)}ma.select(h)})}function ha(a){var b,c,d=O(a||n),e="",f=new o(new j(oa,d).createTreeWalker(-1),5,function(a){return P(d,O(a,"contents"))?1:2});return z(f,function(a){var f=na.getNode(a),g=ra[f.widget.id];if(f!==b&&(F(f,Ha|Ka|Ja)&&"\n\n"!==e.slice(-2)&&(e+="\n\n"),f.widget!==c&&_a(g.text)&&(e+=g.text(f.widget)),b=f,c=f.widget),F(f,Sa)&&!_a(g.text))if(3===a.nodeType){var h=a.nodeValue;a===d.endContainer&&(h=h.slice(0,d.endOffset)),a===d.startContainer&&(h=h.slice(d.startOffset)),e+=h}else"br"===E(a)&&(e+="\n")}),B(e).replace(/\u200b/g,"").replace(/[^\S\n\u00a0]+|\u00a0/g," ")}function ia(){function b(){setImmediate(function(){L(null,Ta,"beforeStateChange"),L(null,Ta,"stateChange")})}function c(){var a=B(n.innerHTML.replace(/\s+(style|x-typer-(start|end))(="[^"]*")?|(?!>)\u200b(?!<\/)/g,""));if(a!==j)return j=a,!0}function d(b,c,d){b&&3===b.nodeType?a(b.parentNode).attr(i[+d],N(na.getNode(b),b)+c):b&&a(b).attr(i[+d],"")}function e(b){var c=i[+b],d=$a.find("["+c+"]")[0]||$a.filter("["+c+"]")[0],e=parseInt(a(d).attr(c));if(d)return a(d).removeAttr(c),+e===e?U(d,e):O(d,!!b)}function f(){b(),d(ma.startTextNode||ma.startElement,ma.startOffset,!0),ma.isCaret||d(ma.endTextNode||ma.endElement,ma.endOffset,!1);var a=n.outerHTML;if(a!==k[0]){var e=c();k.splice(0,l+!e,a),k.splice(da.historyLevel),l=0}$a.find("[x-typer-start], [x-typer-end]").andSelf().removeAttr("x-typer-start x-typer-end")}function g(d){var f=a.parseHTML(d)[0];$a.empty().append(f.childNodes).attr(G(f)),ma.select(e(!0),e(!1)),b(),c()}var h,i=["x-typer-end","x-typer-start"],j=B(n.innerHTML),k=[],l=0;a.extend(Ya,{getValue:function(){return cb.needSnapshot&&(cb.needSnapshot=!1,f()),j},canUndo:function(){return l<k.length-1},canRedo:function(){return l>0},undo:function(){Ya.canUndo()&&g(k[++l])},redo:function(){Ya.canRedo()&&g(k[--l])},snapshot:function(a){clearImmediate(h),+a!==a&&ma?a!==!0&&cb.executing?(cb.needSnapshot=!0,b()):(cb.needSnapshot=!1,f()):h=setImmediate(f,a)}})}function ja(){function e(a,b){return D((a.ctrlKey||a.metaKey?"Ctrl":"")+(a.altKey?"Alt":"")+(a.shiftKey?"Shift":"")+C(b))}function f(){var a=q;q&&!q.destroyed&&(q=null,L(null,a,"focusout"))}function g(){var a=X(n);if(!ta.has(oa)&&a&&!R(a,O(ma))){ma.select(a),ma.focusNode.widget!==q&&f();var b=+new Date;setImmediate(function(){Ya.snapshot(b-r<200?200:0),r=b})}}function h(a){if(ma.isCaret){var b=ma.clone();b.extendCaret.moveByCharacter("backspace"===a.data?-1:1)&&cb("keystroke",function(){ga(b,"")})}else cb("keystroke",function(){ga(ma,"")})}function i(a,b){return!(!a||!M("textInput",Ta,"textInput",a))||(!b&&ma.startTextNode&&ma.isCaret?void setImmediate(function(){g(),y(Wa).id!==Fa&&L("textInput",Wa,"contentChange","textInput"),L("textInput",Ua,"contentChange","textInput")}):(cb("textInput",function(){ga(ma,a)}),!0))}var j,k,l,m,o,p,q,r=0;$a.mousedown(function(b){var d={mousemove:function(a){return!a.which&&j?void d.mouseup():(ma.extendCaret.moveToPoint(a.clientX,a.clientY),setImmediate(function(){ma.focus()}),void a.preventDefault())},mouseup:function(){j=!1,a(c.body).unbind(d)}};1===b.which&&((b.shiftKey?ma.extendCaret:ma).moveToPoint(b.clientX,b.clientY),ma.focus(),a(c.body).bind(d),j=!0),b.preventDefault()}),$a.bind("compositionstart compositionupdate compositionend",function(a){if(a.stopPropagation(),k="d"!==a.type.slice(-1))i("");else{var b=X(n);O(b.startContainer,b.startOffset-a.originalEvent.data.length,b.startContainer,b.startOffset).deleteContents(),g(),i(a.originalEvent.data,!0)}}),$a.bind("keydown keypress keyup",function(b){if(k)return void b.stopImmediatePropagation();p=!0,setImmediate(function(){p=!1});var c=a.inArray(b.keyCode,[16,17,18,91,93])>=0,f=!c&&ya[b.keyCode]!==d.fromCharCode(b.keyCode).toLowerCase();if("keydown"===b.type){if(l=b.ctrlKey+b.shiftKey+b.altKey+b.metaKey+!c,l*=f||(l>2||l>1&&!b.shiftKey)&&!c,m=b.keyCode,l){var h=e(b,ya[m]||d.fromCharCode(b.charCode));L("keystroke",Va,h)&&b.preventDefault(),(M("keystroke",Ta,"keystroke",h,b)||/ctrl(?![acfnprstvwx]|f5|shift[nt]$)|enter/i.test(h))&&b.preventDefault()}o=b.isDefaultPrevented(),o||(cb.suppressTextEvent=!1),setImmediate(function(){k||o||g()})}else"keypress"===b.type?b.charCode||b.stopImmediatePropagation():((b.keyCode===m||c)&&l--&&b.stopImmediatePropagation(),o||c||k||g())}),$a.bind("keypress input textInput",function(a){cb.executing||cb.suppressTextEvent||"textInput"!==a.type&&xa||i(a.originalEvent.data||d.fromCharCode(a.charCode)||"")&&a.preventDefault()}),$a.bind("dragstart",function(a){var b=O(ma),c={drop:function(a){cb("drop",function(){var d=Y(a.originalEvent.clientX,a.originalEvent.clientY),e=fa(b,a.ctrlKey?"copy":"cut");ga(d,e),a.preventDefault(),$a.unbind(c)})}};$a.bind(c)}),$a.bind("cut copy",function(c){var d=c.originalEvent.clipboardData||b.clipboardData;cb("cut",function(){bb.content=fa(ma,c.type),bb.textContent=ha(bb.content)}),b.clipboardData?d.setData("Text",bb.textContent):(d.setData("text/plain",bb.textContent),d.setData("text/html",a('<div id="Typer">').append(bb.content.cloneNode(!0))[0].outerHTML),d.setData("application/x-typer","true")),c.preventDefault()}),$a.bind("paste",function(c){var d=c.originalEvent.clipboardData||b.clipboardData,e="text"!==ra[ma.focusNode.widget.id].accept;if(e&&a.inArray("application/x-typer",d.types)>=0){var f=d.getData("text/html"),g=Z(a(f).filter("#Typer").contents());cb("paste",function(){ga(ma,g)})}else{var h=d.getData(b.clipboardData?"Text":"text/plain");e&&h===bb.textContent?cb("paste",function(){ga(ma,bb.content.cloneNode(!0))}):M("paste",Ta,"textInput",h)||cb("paste",function(){ga(ma,h)})}if(c.preventDefault(),Xa){var i=ma.clone();setImmediate(function(){ma.select(i)})}}),$a.bind("mousedown mouseup mscontrolselect",function(a){var b=na.getNode(a.target);q!==b.widget&&f(),F(b,Ha|Na)&&(setImmediate(function(){ma.focus()}),ma.select(b.widget.element),q!==b.widget&&(q=b.widget,L(null,b.widget,"focusin")))}),$a.bind("contextmenu",function(a){var b=Y(a.clientX,a.clientY,n);!ma.isCaret&&P(ma,b)||ma.select(b)}),$a.bind("click",function(a){var b={clientX:a.clientX,clientY:a.clientY,target:a.target};L("mouse",Va,e(a,"click"),null,b),a.preventDefault()}),$a.bind("dblclick",function(a){L("mouse",Va,"dblclick")||ma.select("word"),a.preventDefault()}),$a.bind("mousewheel",function(a){Za&&M("mouse",Va,"mousewheel",da.ui.getWheelDelta(a))&&a.preventDefault()}),$a.bind("focusin",function(a){Za||cb.executing&&!wa||(wa=!1,va=!1,ta.has(oa)||(Za=!0,L(null,Ta,"focusin"),j||ma.focus()),ta.delete(oa))}),$a.bind("focusout",function(a){if(c.activeElement!==n&&Za){if(void 0===a.relatedTarget)return;for(var b=a.relatedTarget;b;b=b.parentNode)if(sa.has(b))return void ta.set(oa,b);Za=!1,f(),L(null,Ta,"focusout"),ea(),K(n,c.activeElement)&&(a.relatedTarget?a.relatedTarget.focus():n.blur())}});var s={ctrlZ:Ya.undo,ctrlY:Ya.redo,ctrlShiftZ:Ya.redo,backspace:h,delete:h,escape:function(){n.blur(),X(n)&&ab.removeAllRanges()}};a.each({moveByLine:"upArrow downArrow shiftUpArrow shiftDownArrow",moveByWord:"ctrlLeftArrow ctrlRightArrow ctrlShiftLeftArrow ctrlShiftRightArrow",moveToLineEnd:"home end shiftHome shiftEnd",moveByCharacter:"leftArrow rightArrow shiftLeftArrow shiftRightArrow"},function(b,c){a.each(c.split(" "),function(a,c){var d=1&a?1:-1,e=!!(2&a);s[c]=function(){e||ma.isCaret?(e?ma.extendCaret:ma)[b](d):ma.collapse(d<0?"start":"end")}})}),ra.__core__.keystroke=function(a){!a.isDefaultPrevented()&&a.data in s&&(a.preventDefault(),s[a.data](a))}}function ka(b,c){!r[b]&&!(r.widgets||"")[b]||!c.inline&&pa!==Ia||(ra[b]=Object.create(c),ra[b].options=a.extend(Object.create(c.options||null),r[b]),c.element||qa.push(new k(oa,b,null,ra[b].options)))}function la(){qa[0]=new k(oa,Fa),a.each(r.widgets||{},ka),a.each(da.widgets,ka),qa[qa.length]=new k(oa,Ea),ra[Fa]=r,ra[Ea]={},ra[Ga]={element:r.disallowedElement||":not("+za+",br,b,em,i,u,strike,small,strong,sub,sup,ins,del,mark,span)"}}F(n,e)||(r=n,n=n.element),r=a.extend(!0,{},(!r||r.defaultOptions!==!1)&&da.defaultOptions,r);var ma,na,oa=this,pa=r.inline||F(n,za)?Ja:Ia,qa=[],ra={},sa=new h,La=new p(oa),Ya={},Za=!1,$a=a(n),cb=function(){var b="script",c=s(function(){var c=b;cb.executing=!1,(cb.needSnapshot||La.changes[0])&&Ya.snapshot(),b="script",setImmediate(function(){cb.suppressTextEvent=!1,La.collect(function(b){cb(c,function(){a.each(b,function(a,b){ea(b.element),b.id!==Fa&&L(c,b,"contentChange",c)}),L(c,Ua,"contentChange",c)})})})});return function(a,d){cb.suppressTextEvent=!0,cb.executing=!0,a!==b&&Aa.indexOf(a)>Aa.indexOf(b)&&(b=a||"script");var e=v(arguments,2);return c(function(){return d.apply(null,e)})}}(),db={focusout:function(a){K(a.currentTarget,a.relatedTarget)||(ta.get(oa)===a.currentTarget&&ta.delete(oa),n===a.relatedTarget?ma.focus():$a.trigger("focusout"))}};ia(),la(),ja(),$a.attr("contenteditable","true"),na=T(n,!0),a.extend(oa,Ya,na,{element:n,hasCommand:function(a){return!!I(a)},focused:function(){return Za},widgetEnabled:function(a){return ra.hasOwnProperty(a)},getStaticWidget:function(a){return x(qa.slice(1,-1),function(b){return b.id===a})},getStaticWidgets:function(){return qa.slice(1,-1)},getSelection:function(){return ma},extractText:function(a){return ha(a)},nodeFromPoint:function(a,b){var c=Y(a,b,n);return c&&na.getNode(c.commonAncestorContainer)},retainFocus:function(b){sa.has(b)||(sa.set(b,!0),a(b).bind(db))},releaseFocus:function(b){sa.delete(b),a(b).unbind(db)},invoke:function(a,b){var c=new t;"string"==typeof a&&(c.commandName=a,c.widget=I(a),a=c.widget&&ra[c.widget.id].commands[a]),_a(a)&&cb("script",function(){a.call(oa,c,b),Za&&!ta.has(oa)&&ma.focus()})}}),u(t,{typer:oa,widget:null,get selection(){return ma},insertText:function(a){ga(ma,a)},insertHtml:function(a){ga(ma,Z(a))},insertWidget:function(a,b){ra[a]&&_a(ra[a].insert)&&ra[a].insert(this,b)},removeWidget:function(a){if(_a(ra[a.id].remove))ra[a.id].remove(this,a);else if("keepText"===ra[a.id].remove){var b=ha(a.element);ga(O(a.element,!0),b),aa(a.element)}else ga(O(a.element),"")},replaceElement:function(b,c){return c=F(c,e)||_(c),a(c).append(b.childNodes).insertBefore(b),ua.update(b,c),aa(b,!1),La.track(c.parentNode),c},removeElement:function(a){aa(a),La.track(a.parentNode)},trackChange:function(a){La.track(a)},execCommand:function(b,d){var e,f;a.each(ma.getEditableRanges(),function(a,g){ca(g),c.execCommand(b,!1,d||""),e=e||ab.getRangeAt(0),f=ab.getRangeAt(0)}),ma.select(O(e,!0),O(f,!1))}}),ma=new j(oa,O(n,0)),ea(),L(null,Ua,"init")}function ea(a,b){return b&&(a.whatToShow&Pa||!F(b,Ha|Qa))}function fa(a,b,c){return c&&!ea(a,b)?2:F(b,Ha)&&F(b.parentNode,Ha)?3:y(a,b)}function ga(a,b,c){if(fa.returnValue=fa(a,b,c),1===fa.returnValue)return a.currentNode=b,!0}function ha(a,b,c){for(var d=a.currentNode[b];d;){if(ga(a,d,!0))return d;if(3===fa.returnValue&&d[b])d=d[b];else{for(;!d[c];)if(d=ea(a,d.parentNode)&&d.parentNode,!d||d===a.root||d===a.currentNode)return null;d=d[c]}}}function ia(a,b,c){for(var d=a.currentNode;d&&d!==a.root;){for(var e=d[c];e;){if(ga(a,e))return e;e=2!==fa.returnValue&&e[b]?e[b]:e[c]}if(d=ea(a,d.parentNode)&&d.parentNode,!d||d===a.root||1===fa(a,d,!0))return null}}function ja(a,b){var d=b.currentNode.widget.typer,e=c.createTreeWalker(b.root.element,1|a.whatToShow,function(c){return 1!==fa(b,d.getNode(c),!0)?3:1|y(a,c)},!1);t(a,"iterator",e)}function ka(a,b,c){var d=O(a);return new n(a.focusNode,b|Pa,function(a){return P(a.element,d)?c?c(a):1:2})}function la(a){var b=a.getCaret("start"),c=a.getCaret("end"),d=b.textNode===c.textNode;if(c.textNode&&c.offset<c.textNode.length&&c.textNode.splitText(c.offset),b.textNode&&b.offset>0){var e=b.offset;na(a,function(){qa(b,b.node,b.element,b.textNode.splitText(b.offset),0),d&&qa(c,c.node,c.element,b.textNode,c.offset-e)})}}function ma(a){a.direction=S(a.extendCaret.getRange(),a.baseCaret.getRange())||0,a.isCaret=!a.direction;for(var b=0,c=a.getCaret("start"),d=a.getCaret("end");b<4;b++)a[ma.NAMES[b+4]]=c[ma.NAMES[b]],a[ma.NAMES[b+8]]=d[ma.NAMES[b]]}function na(a,b,c,d){return a._lock=a._lock||s(function(){delete a._lock,ma(a),a===a.typer.getSelection()&&(a.typer.focused()&&!ta.has(a.typer)&&a.focus(),a.typer.snapshot())}),a._lock(b,c,d)}function oa(a){var b=new o(new n(a.typer.getNode(a.typer.element),Sa|Pa),4);return b.currentNode=a.textNode||a.element,b}function pa(a,b){return a.selection?na(a.selection,b,null,a):b.call(a)}function qa(a,b,c,d,e){return pa(a,function(){a.selection&&a.selection===a.typer.getSelection()&&(a.node!==b&&a.node.element!==a.element&&ua.unlisten(a,a.node.element),a.element!==c&&a.element!==a.node.element&&ua.unlisten(a,a.element),ua.listen(a,b.element),ua.listen(a,c)),a.node=b,a.element=c,a.textNode=d||null,a.offset=e,a.wholeTextOffset=(d?a.offset:0)+N(b,d||c)}),!0}function ra(a,b,c,d){var e,f;if("br"===E(b)?(f=b.nextSibling,c=0):1===b.nodeType&&b.childNodes[0]&&(c===b.childNodes.length||d&&1===b.childNodes[(c||1)-1].nodeType?(b=b.childNodes[(c||1)-1],c=b.length,d=!0):(b=b.childNodes[c],c=0)),3===b.nodeType&&(f=b,b=f.parentNode),e=a.typer.getEditableNode(f||b),f&&(e.element!==f.parentNode?(b=e.element,f=null):F(e,Sa)||(e=x(e.childNodes,function(a){return I(f,a.element)<0})||e.lastChild||e,b=e.element,f=null,d=!0)),!f&&F(e,Sa)){var g=new o(e,4);for(g.currentNode=b;g.nextNode()&&d;);3===g.currentNode.nodeType&&(f=g.currentNode),c=d?f&&f.length:0}if(F(e,Sa|Na))for(;e.parentNode&&!F(e,Ka|Ja);e=e.parentNode);return qa(a,e,b,f,f?c:!d)}function sa(a){cb="keypress"===a.type,cb&&setImmediate(function(){xa=!cb,c.removeEventListener("keypress",sa,!0),c.removeEventListener("textInput",sa,!0)})}var ta,ua,va,wa,xa,ya=JSON.parse('{"8":"backspace","9":"tab","13":"enter","16":"shift","17":"ctrl","18":"alt","19":"pause","20":"capsLock","27":"escape","32":"space","33":"pageUp","34":"pageDown","35":"end","36":"home","37":"leftArrow","38":"upArrow","39":"rightArrow","40":"downArrow","45":"insert","46":"delete","48":"0","49":"1","50":"2","51":"3","52":"4","53":"5","54":"6","55":"7","56":"8","57":"9","65":"a","66":"b","67":"c","68":"d","69":"e","70":"f","71":"g","72":"h","73":"i","74":"j","75":"k","76":"l","77":"m","78":"n","79":"o","80":"p","81":"q","82":"r","83":"s","84":"t","85":"u","86":"v","87":"w","88":"x","89":"y","90":"z","91":"leftWindow","92":"rightWindowKey","93":"select","96":"numpad0","97":"numpad1","98":"numpad2","99":"numpad3","100":"numpad4","101":"numpad5","102":"numpad6","103":"numpad7","104":"numpad8","105":"numpad9","106":"multiply","107":"add","109":"subtract","110":"decimalPoint","111":"divide","112":"f1","113":"f2","114":"f3","115":"f4","116":"f5","117":"f6","118":"f7","119":"f8","120":"f9","121":"f10","122":"f11","123":"f12","144":"numLock","145":"scrollLock","186":"semiColon","187":"equalSign","188":"comma","189":"dash","190":"period","191":"forwardSlash","192":"backtick","219":"openBracket","220":"backSlash","221":"closeBracket","222":"singleQuote"}'),za=("area base br col command embed hr img input keygen link meta param source track wbr".split(" "),"h1,h2,h3,h4,h5,h6,p,q,blockquote,pre,code,li,caption,figcaption,summary,dt,th"),Aa="keystroke textInput mouse cut paste".split(" "),Ba="​",Ca="&#8203;",Da="<p>&#8203;</p>",Ea="__core__",Fa="__root__",Ga="__unknown__",Ha=1,Ia=2,Ja=32,Ka=4,La=8,Ma=16,Na=64,Oa=128,Pa=4096,Qa=Ia|Ja,Ra=Ma|Na|Oa,Sa=Ka|Ja|Ma|Oa,Ta=1,Ua=2,Va=3,Wa=4,Xa=!!b.ActiveXObject||void 0!==c.documentElement.style.msTouchAction||void 0!==c.documentElement.style.msUserSelect,Ya=Xa?void 0:c.caretRangeFromPoint,Za=c.compareDocumentPosition,$a=f.prototype.compareBoundaryPoints,_a=a.isFunction,ab=b.getSelection(),bb={};if(b.Typer=da,a.extend(da,{NODE_WIDGET:Ha,NODE_PARAGRAPH:Ka,NODE_EDITABLE:Ia,NODE_EDITABLE_PARAGRAPH:Ja,NODE_INLINE:Ma,NODE_INLINE_WIDGET:Na,NODE_INLINE_EDITABLE:Oa,NODE_OUTER_PARAGRAPH:La,NODE_SHOW_EDITABLE:Pa,NODE_ANY_ALLOWTEXT:Sa,NODE_ANY_BLOCK_EDITABLE:Qa,NODE_ANY_INLINE:Ra,ZWSP:Ba,ZWSP_ENTITIY:Ca,is:F,trim:B,iterate:z,iterateToArray:A,compareAttrs:H,comparePosition:I,compareRangePosition:S,containsOrEquals:K,createElement:_,createTextNode:$,createRange:O,rangeIntersects:P,rangeCovers:Q,rangeEquals:R,rectEquals:T,rectCovers:U,pointInRect:V,caretRangeFromPoint:Y,historyLevel:100,defaultOptions:{disallowedWidgets:"keepText",widgets:{}},widgets:{}}),u(da,{hasContent:function(){return!!this.getValue()},setValue:function(a){this.selectAll(),this.invoke(function(b){b.insertHtml(a)})},select:function(a,b,c,d){this.getSelection().select(a,b,c,d)},selectAll:function(){this.getSelection().selectAll()}}),u(m,{get firstChild(){return this.childNodes[0]||null},get lastChild(){return this.childNodes.slice(-1)[0]||null}}),u(n,{previousSibling:function(){return ia(this,"lastChild","previousSibling")},nextSibling:function(){return ia(this,"firstChild","nextSibling")},firstChild:function(){return ha(this,"firstChild","nextSibling")},lastChild:function(){return ha(this,"lastChild","previousSibling")},parentNode:function(){for(var a=this.currentNode;a&&a!==this.root;a=a.parentNode)if(ga(this,a.parentNode,!0))return a.parentNode},previousNode:function(){for(var a=this.currentNode;a&&a!==this.root;){for(var b=a.previousSibling;b;b=a.previousSibling){
a=b;for(var c=fa(this,b);2!==c&&ea(this,a.childNodes[0])&&a.childNodes[0];)a=a.lastChild,c=fa(this,a,!0);if(1===c)return this.currentNode=a,a}if(a=ea(this,a.parentNode)&&a.parentNode,!a||a===this.root)return null;if(ga(this,a,!0))return a}},nextNode:function(){for(var a=this.currentNode,b=1;a;){for(;2!==b&&a.childNodes[0];){if(a=a.firstChild,ga(this,a,!0))return a;b=fa.returnValue}for(;a&&a!==this.root&&!a.nextSibling;)a=ea(this,a.parentNode)&&a.parentNode;if(!a||a===this.root)return null;if(a=a.nextSibling,ga(this,a))return a;b=fa.returnValue}}}),u(o,{get currentNode(){return this.iterator.currentNode},set currentNode(a){this.iterator.currentNode=a},previousNode:function(){return this.iterator.previousNode()},nextNode:function(){return this.iterator.nextNode()}}),ma.NAMES="node element textNode offset startNode startElement startTextNode startOffset endNode endElement endTextNode endOffset".split(" "),u(j,{get isSingleEditable(){return this.isCaret||!ka(this,Qa).nextNode()},get focusNode(){for(var a=this.typer.getEditableNode(L(this.baseCaret.element,this.extendCaret.element));a.parentNode&&!F(a,Ha|Na|Qa|Oa);)a=a.parentNode;return a},getCaret:function(a){switch(a){case"extend":return this.extendCaret;case"start":return this.direction<0?this.extendCaret:this.baseCaret;case"end":return this.direction<0?this.baseCaret:this.extendCaret;default:return this.baseCaret}},getRange:function(a){return void 0!==a||this.isCaret?(a!==!1?this.baseCaret:this.extendCaret).getRange():O(this.baseCaret.getRange(),this.extendCaret.getRange())},getEditableRanges:function(){var b=O(this);if(this.isCaret||F(this.focusNode,Ra))return[b];var c=a.map(A(ka(this,Ka|Ja)),function(a){return O(b,O(a.element))});return a.grep(c,function(a,b){return!b||!x(c.slice(0,b),function(b){return Q(b,a)})})},getWidgets:function(){for(var a=[],b=this.focusNode;b;b=b.parentNode)a.unshift(b.widget),b=this.typer.getNode(b.widget.element);return a},getParagraphElements:function(){if(this.isCaret)return[this.startNode.element];var b=new n(this.focusNode,Ka|Pa),c=A(b,null,this.startNode);return c.splice(c.indexOf(this.endNode)+1),a.map(c,w("element"))},getSelectedElements:function(){return this.isCaret?[this.startElement]:A(ka(this,Sa|Na),w("element"))},getSelectedText:function(){return this.typer.extractText(this.getRange())},getSelectedTextNodes:function(){if(this.isCaret)return[];la(this);var a=O(this),b=new o(ka(this,Sa),4,function(b){return P(a,O(b,"contents"))?1:2});return A(b)},createTreeWalker:function(a,b){return ka(this,a,b)},collapse:function(a){return a=this.getCaret(a),(a===this.baseCaret?this.extendCaret:this.baseCaret).moveTo(a)},select:function(a,b,c,d){return na(this,function(){if("word"===a)return this.getCaret("start").moveByWord(-1)+this.getCaret("end").moveByWord(1)>0;var e=O(a,b,c,d);return this.baseCaret.moveTo(O(e,!0))+this.extendCaret.moveTo(O(e,!1))>0})},selectAll:function(){return this.select(this.typer.element,"contents")},focus:function(){K(c,this.typer.element)&&(wa=!0,ca(O(this)),Xa||c.activeElement===this.typer.element||this.typer.element.focus())},clone:function(){var a=new j(this.typer);return a.baseCaret.moveTo(this.baseCaret),a.extendCaret.moveTo(this.extendCaret),a}}),a.each("moveToPoint moveToText moveByLine moveToLineEnd moveByWord moveByCharacter".split(" "),function(a,b){j.prototype[b]=function(){return na(this,function(){return q.prototype[b].apply(this.extendCaret,arguments)+this.collapse("extend")>0},v(arguments))}}),u(r,{listen:function(a,b){var c=this.weakMap.get(b)||(this.weakMap.set(b,[]),this.weakMap.get(b));c.indexOf(a)<0&&c.push(a)},unlisten:function(a,b){var c=this.weakMap.get(b);c&&c.indexOf(a)>=0&&c.splice(c.indexOf(a),1)},update:function(a,b){var c=this.weakMap.get(a);c&&c.length&&na(c[0].selection,function(){c.forEach(function(c){var d=c.node.element===a?c.typer.getNode(b):c.node,e=c.element===a?b:c.element,f=K(b,c.textNode)?c.textNode:null;d===c.node&&e===c.element||qa(c,d,e,f,!f||c.offset)})})}}),u(q,{getRange:function(){return(this.element&&this.element!==this.typer.element&&!this.element.parentNode||this.textNode&&(!this.textNode.parentNode||this.offset>this.textNode.length))&&this.moveToText(this.node.element,this.wholeTextOffset),Xa&&this.textNode&&this.offset===this.textNode.length&&this.textNode.nextSibling&&1===this.textNode.nextSibling.nodeType&&!/inline/.test(a(this.textNode.nextSibling).css("display"))&&(this.textNode.nodeValue.slice(-1)===Ba?this.offset--:this.textNode.nodeValue+=Ba),this.textNode||this.element!==this.typer.element?O(this.textNode||this.element,this.offset):O(this.element,this.offset?0:-0)},clone:function(){var a=new q(this.typer);return a.moveTo(this),a},moveTo:function(a,b){var c=F(a,f)||O(a,b);if(c){var d=this.selection&&this===this.selection.extendCaret&&S(this.selection.baseCaret,c)<0;return ra(this,c.startContainer,c.startOffset,d)}return!1},moveToPoint:function(a,b){var c=Y(a,b,this.typer.element),d=this.typer.getNode(c.startContainer);return F(d,Ha)&&(V(a,b,d.widget.element.getBoundingClientRect())||(c=O(d.widget.element,!1))),this.moveTo(c)},moveToText:function(a,b){if(3!==a.nodeType){var c=new o(new n(this.typer.getNode(a),Sa|Pa),4);if(b)for(;c.nextNode()&&b>c.currentNode.length;b-=c.currentNode.length);else if(1/b<0)for(;c.nextNode(););a=c.currentNode}return!!a&&ra(this,a,M(a,b))},moveToLineEnd:function(b){var c=W(this)[0],d=c.left;return z(new o(new n(this.node,Sa|Pa),4),function(e){a.each(W(e),function(a,e){e.top<=c.bottom&&e.bottom>=c.top&&(d=Math[b<0?"min":"max"](d,b<0?e.left:e.right))})}),this.moveToPoint(d,c.top+c.height/2)},moveByLine:function(a){var b=oa(this),c=W(this)[0];do{var d=W(b.currentNode),e=x(a<0?v(d).reverse():d,function(b){return a<0?b.bottom<=c.top:b.top>=c.bottom});if(e)return this.moveToPoint(c.left,e.top+e.height/2)}while(b[a<0?"previousNode":"nextNode"]());return this.moveToLineEnd(a)},moveByWord:function(a){var b,c=a<0?/\b(\S*\s+|\S+)$/:/^(\s+\S*|\S+)\b/,d="";if(this.textNode&&(d=a<0?this.textNode.nodeValue.substr(0,this.offset):this.textNode.nodeValue.slice(this.offset),(b=c.test(d))&&RegExp.$1.length!==d.length))return this.moveToText(this.textNode,this.offset+a*RegExp.$1.length);var e=new o(new n(this.node,Sa|Pa),4);for(e.currentNode=this.textNode||this.element;e[a<0?"previousNode":"nextNode"]();)if(d=a<0?e.currentNode.nodeValue+d:d+e.currentNode.nodeValue,(b=c.test(d))&&RegExp.$1.length!==d.length)return this.moveToText(e.currentNode,a*(RegExp.$1.length-(d.length-e.currentNode.length)));return!(!b||!e.currentNode)&&this.moveToText(e.currentNode,0*-a)},moveByCharacter:function(a){for(var b=oa(this),c=W(this)[0],d=this.offset;;){for(;1===b.currentNode.nodeType||d===M(b.currentNode,0*-a);){if(!b[a<0?"previousNode":"nextNode"]())return!1;var e=new q(this.typer);e.moveToText(b.currentNode),d=(a<0?b.currentNode.length:0)+(e.node!==this.node&&-a)}d+=a;var f=W(O(b.currentNode,d))[0];if(!c||f&&!T(c,f))return this.moveToText(b.currentNode,d)}}}),a.each("moveByLine moveByWord moveByCharacter".split(" "),function(a,b){var c=q.prototype[b];q.prototype[b]=function(a){return pa(this,function(){for(var b=a;b&&c.call(this,a/Math.abs(a));b+=b>0?-1:1);return!a||b!==a})}}),u(k,{remove:function(){var a=this;a.typer.invoke(function(b){b.removeWidget(a)})}}),u(p,{track:function(a){a=F(a,m)||this.typer.getNode(a),a&&this.changes.indexOf(a.widget)<0&&this.changes.push(a.widget)},collect:function(a){this.changes.length&&_a(a)&&a(this.changes.splice(0))}}),!Xa){try{c.designMode="on",c.execCommand("enableObjectResizing",!1,!1),c.execCommand("enableInlineTableEditing",!1,!1)}catch(a){}c.designMode="off"}a(b).bind("focusin focusout",function(a){(Xa?a.relatedTarget:a.target!==b)||(va="focusout"===a.type)}),"undefined"==typeof h&&(h=function(){t(this,"__dataKey__","typer"+Math.random().toString(36).substr(2,8),!0)},u(h,{get:function(a){return a&&a[this.__dataKey__]},set:function(a,b){a[this.__dataKey__]=b},has:function(a){return a&&this.__dataKey__ in a},delete:function(a){delete a[this.__dataKey__]}})),ta=new h,ua=new r,"undefined"==typeof Ya&&(Ya=function(){return c.caretPositionFromPoint?function(a,b){var d=c.caretPositionFromPoint(a,b);return O(d.offsetNode,d.offset)}:function(d,e){function f(a){var b=a.left>d?a.left-d:Math.min(0,a.right-d),c=a.top>e?a.top-e:Math.min(0,a.bottom-e);return b&&c?1/0:Math.abs(b||c)}function g(a,b){for(;10===a.nodeValue.charCodeAt(b)&&--b;);var c;if(32===a.nodeValue.charCodeAt(b)&&b?(c=W(O(a,b-1))[0],c=c&&{top:c.top,left:c.right,right:c.right,bottom:c.bottom}):c=W(O(a,b))[0],c){var f=c.left>d?c.left-d:Math.min(0,c.right-d),g=c.top>e?c.top-e:Math.min(0,c.bottom-e);return g?g>0?1/0:-(1/0):f}}function h(a){for(var b=0,c=a.length;c-b>1;){var d=c+b>>1,e=g(a,d)<0;b=e?d:b,c=e?c:d}return Math.abs(g(a,b))<Math.abs(g(a,c))?b:c}function i(c){var f,g;return a(c).children().each(function(a,c){var h=b.getComputedStyle(c,null);if("none"!==h.pointerEvents&&"inline"!==h.display&&V(d,e,c.getBoundingClientRect())){var i="static"===h.position?void 0:parseInt(h.zIndex)||0;(void 0===f||i>f)&&(f=i,g=c)}}),g}for(var j=b.ActiveXObject?c.body:c.elementFromPoint(d,e),k=j;k;j=k||j)k=i(j);for(var l,m,n=e,o=j;o&&1===o.nodeType;j=o||j)l=1/0,o=null,a(j).contents().each(function(b,c){var d;3===c.nodeType?d=W(c):1===c.nodeType&&"none"!==a(c).css("pointer-events")&&(d=[c.getBoundingClientRect()]);for(var h=0,i=(d||"").length;h<i;h++){if(d[h].top<=e&&d[h].bottom>=e)return o=c,n=e,l=0,1===c.nodeType||g(c,c.length-1)<0;m=l,l=Math.min(l,f(d[h])),l<m&&(o=c,n=1===c.nodeType?e:d[h].top+d[h].height/2)}});return 3===j.nodeType?(e=n,O(j,h(j))):O(j,-0)}}());var cb;c.addEventListener("keypress",sa,!0),c.addEventListener("textInput",sa,!0)}(jQuery,window,document,String,Node,Range,DocumentFragment,window.WeakMap,Array.prototype),function(a,b){"use strict";b.presets={},b.preset=function(c,d,e){var f,g=b.presets[d],h={};e={inline:!0,accept:"text",defaultOptions:!1,disallowedElement:"*",widgets:{},__preset__:a.extend({},e)},a.each(g,function(a,b){("function"==typeof b||"options"===a||"commands"===a?h:e)[a]=b}),a.each(e.__preset__,function(a,b){"function"!=typeof b&&h.options&&a in h.options||(e[a]=b,delete e.__preset__[a])});var i=e.init;return e.init=function(b){f=b.typer.getStaticWidget("__preset__"),a.each(g.overrides,function(a,c){b.typer[a]=function(a){return c.call(this,f,a)}}),"function"==typeof i&&i.call(e,b)},e.widgets.__preset__=h,h.inline=!0,new b(c,e)},a.fn.typer=function(a){return this.each(function(c,d){new b(d,a)})}}(jQuery,window.Typer),function(a,b,c,d,e,f){"use strict";function g(){return Math.random().toString(36).substr(2,8)}function h(a){return"string"==typeof a&&a}function i(a){return a=String(a||""),a.charAt(0).toUpperCase()+a.slice(1)}function j(a){return a=String(a||""),a.charAt(0).toLowerCase()+a.slice(1)}function k(a,b){var c={};for(var d in a)d in b||(c[d]=a[d]);return c}function l(a,b){var c=ha[b]||(ha[b]=new d("(?:^|\\s)("+b.replace(/\s+/g,"|")+")(?=$|\\s)"));return c.test(String(a||""))&&d.$1}function m(a,b){for(var c in a)if(!l(b[c],a[c]))return!1;return!0}function n(a,b){if(b in a)for(var d=a;d;d=c.getPrototypeOf(d))if(d.hasOwnProperty(b))return X(d,b)}function o(a,b,c){Y(a,b,{configurable:!0,writable:!0,value:c})}function p(b,d,e){var f=new Function("fn","return function "+(b||"")+"() { return fn.apply(this, arguments); }")(function(b){if(!(this instanceof f)){var d=c.create(f.prototype);return f.apply(d,arguments),d}return V(e)?void e.apply(this,arguments):a.extend(this,b)}),g=function(){};return g.prototype=ga,f.prototype=new g,c.getOwnPropertyNames(d||{}).forEach(function(a){Y(f.prototype,a,X(d,a))}),o(f.prototype,"constructor",f),f}function q(a,b,c){var d=n(a,b)||{enumerable:!0,value:a[b]};Y(a,b,{enumerable:d.enumerable,configurable:!1,get:function(){return d.get?d.get.call(a):d.value},set:function(e){e!==this[b]&&(d.set?d.set.call(a,e):d.value=e,c.call(this,b,e))}})}function r(a){var b=/^([\w-:]*)(?:\(([^}]+)\))?$/.exec(a),c=null;try{c=b[2]&&JSON.parse(("{"+b[2]+"}").replace(/([{:,])\s*([^\s:,}]+)/g,'$1"$2"'))}catch(a){}return{name:b[1],params:c||{}}}function s(a,b){var c=e.getComputedStyle(a,b||null);return l(c.position,"absolute fixed relative")&&"auto"!==c.zIndex?parseInt(c.zIndex):-1}function t(a){var c=-1,d=f.createTreeWalker(f.body,1,function(d){if(b.comparePosition(d,a,!0))return 2;var e=s(d);return e>=0?(c=Math.max(c,e),2):(c=Math.max(c,s(d,"::before"),s(d,"::after")),1)},!1);return b.iterate(d),c+1}function u(a){return(a||f.documentElement).getBoundingClientRect()}function v(a,b){b?a.data("original-display")?a.css("display",a.data("original-display")):a.show():("none"!==a.css("display")&&a.data("original-display",a.css("display")),a.hide())}function w(){var b=u();a.each(ka,function(c,d){var e=a(d.element).find(".typer-ui-dialog")[0],f=u(e),g=u(d.reference),h={};a(d.element).css({top:g.top,left:g.left,width:g.width,height:g.height});"bottom"!==d.direction&&"top"!==d.direction||(h.left=g.left+g.width/2<f.width/2,h.right=b.width-g.left-g.width/2<f.width/2),"left"!==d.direction&&"right"!==d.direction||(h.top=g.top+g.height/2<f.height/2,h.bottom=b.height-g.top-g.height/2<f.height/2),a.each(["left","right","top","bottom"],function(a,c){e.style[c]=h[c]?-(Math.abs(b[c]-g[c])-10)+"px":""}),B(d.control,"positionUpdate",{element:d.element,position:g,stick:h})})}function x(b){var c=u(b);return c.width&&c.height?c:(c=a.extend({},c),a(b).children().each(function(a,b){var d=u(b);c.top=Math.min(c.top,d.top),c.left=Math.min(c.left,d.left),c.right=Math.max(c.right,d.right),c.bottom=Math.max(c.bottom,d.bottom)}),c.width=c.right-c.left,c.height=c.bottom-c.top,c)}function y(c,d,e,g){for(var h=0;h<la.length;h++)if(la[h].control!==c&&!la[h].control.parentOf(c)){z(la[h].control);break}a(d).appendTo(f.body).css({position:"fixed",zIndex:t(la[0]?la[0].element:f.body)});var i={control:c,element:d,focusedElement:b.is(f.activeElement,S)};if(e.getBoundingClientRect){var j=l(g,"left right")||"left",k=l(g,"top bottom")||"bottom",m=u(e);i[j]=m.left,i[k]=m.top,i[Z[j]]=m.right,i[Z[k]]=m.bottom}else i.left=i.right=e.x,i.top=i.bottom=e.y;var n=u(),o=x(d);a(d).css({left:(i.left+o.width>n.width?i.right-o.width:i.left)+"px",top:(i.top+o.height>n.height?i.bottom-o.height:i.top)+"px"}),la.unshift(i),B(c,"afterShow",i)}function z(b){var c=la.length-1;if(b)for(;c>=0&&b!==la[c].control&&!b.parentOf(la[c].control);c--);a.each(la.splice(0,c+1),function(b,c){a.when(B(c.control,"beforeHide",c)).done(function(){a(c.element).detach()})})}function A(a,b,c){var d=l(b,U)?a.ui:a;if(V(d[b]))try{return ja.unshift(d),d[b](a.ui,a,c)}finally{ja.shift()}}function B(a,b,c){var d=ea[a.ui.theme];if(V(d[b]))try{return ja.unshift(a),d[b](a.ui,a,c)}finally{ja.shift()}}function C(a,b,c){A(a,b,c),a.ui===a||l(b,U)?B(a,b,c):B(a,a.type+i(b),c)}function D(b,d,e,f,g){f=f||b.all||b.contextualParent.all,f._cache||o(f,"_cache",{}),e=e||b.defaultNS,g=g||{},b.name&&f!==b.contextualParent.all&&(g[b.name]=!0);var h=(e||"*")+"/"+d;b!==b.ui&&f===ba&&(h=[b.ui.type||"*",b.type,h].join("/"));var i=f._cache[h];if(i)return c.keys(k(i.include,a.extend(g,i.exclude)));var j={},l={};return String(d||"").replace(/(?:^|\s)(-?)((?:([\w-:]+|\*):)?(?:[\w-]+|\*|(?=\()))(\([^)]+\))?(?=$|\s)/g,function(b,c,d,g,h){var i={},n=(g||e||"").replace(/.$/,"$&:");d&&"*"!==d.slice(-1)?(d=d.indexOf(":")<0?n+d:d,f[d]&&(i[d]=!0)):a.each(f,function(a){("*"===g||a.substr(0,n.length)===n&&a.indexOf(":",n.length)<0)&&(i[a]=!0)}),h&&(h=r(h).params,a.each(i,function(a){m(h,f[a])||delete i[a]})),c?(a.extend(j,i),l=k(l,i)):a.extend(l,i)}),f._cache[h]={include:l,exclude:j},c.keys(k(l,a.extend(g,j)))}function E(b){var c={};a.each(b,function(a,b){c[b.name]=a}),b.sort(function(a,b){function d(a,b,c,d){return a[c]?D(a.contextualParent,a[c],a.name.substr(0,a.name.lastIndexOf(":"))).indexOf(b.name)>=0?d:-d:0}var e=d(a,b,"after",1),f=d(a,b,"before",-1),g=d(b,a,"after",-1),h=d(b,a,"before",1);return(!e&&!f)^(!g&&!h)?e||f||g||h:e+f+g+h||c[a.name]-c[b.name]})}function F(b,d,e){var f=b.ui;d=b instanceof na.group?d||f:b,e=e||{},V(b.controls)&&(b.controls=b.controls(f,b)),h(b.controls)&&(b.controls=D(b,b.controls,null,ba,e),a.each(b.controls,function(a,b){e[b]=!0})),void 0!==b.controls&&(d.all=d.all||{}),b.controls=a.map(b.controls||[],function(i,j){var k=c.create(h(i)?ba[i]:i),l=k.name||h(i)||g();return l.indexOf(":")<0&&b.defaultNS&&(l=b.defaultNS+":"+l),a.extend(k,{ui:f,name:l,parent:b,contextualParent:d,defaultNS:h(k.defaultNS)||l,icon:h(k.icon)||l,label:h(k.label)||l}),!h(k.shortcut)&&h(k.execute)&&(k.shortcut=na.getShortcut(k.execute)),d.all[l]=k,F(k,d,(b===f||b===d)&&a.extend({},e)),k}),E(b.controls)}function G(b,c){function d(c,d){d=V(ea[j.theme]["bind"+i(c)])?B(b,"bind"+i(c),d):B(b,"bind",d),a.each(k[c],function(b,c){"_"===c[1]?a(c[0]).html(d||""):l(c[1],T)?a(c[0]).prop(c[1],!!d&&"false"!==d):d?a(c[0]).attr(c[1],d):a(c[0]).removeAttr(c[1])})}function e(c){a(c).find("*").andSelf().filter("[x\\:bind]").each(function(c,e){var f=r(a(e).attr("x:bind"));a.each(f.params,function(a,c){k[c]||(k[c]=[],q(b,c,d)),k[c].push([e,a])})}).removeAttr("x:bind")}function f(c){var d=a(ea[j.theme][c]||'<div><br x:t="children"></div>')[0];return e(d),a("[x\\:t]",d).each(function(c,d){var g,h=r(a(d).attr("x:t"));if(V(ea[j.theme][h.name]))g=a(ea[j.theme][h.name](j,b,h.params)),e(g);else if("children"===h.name){var i=b.controls;for(var k in h.params){i=i.filter(m.bind(null,h.params));break}g=i.map(function(a){return G(a,h.params)})}else g=f(h.name);a(d).replaceWith(g)}),d}function g(c){a(c.target).is(":checkbox")?setImmediate(function(){j.execute(b,!!c.target.checked)}):j.execute(b)}var j=b.ui,k={};b.element=f(b.renderAs||b.type),a(b.element).attr("role",b.name),a.each(k,function(a,c){d(a,b[a])});var n=ea[j.theme][b.type+"ExecuteOn"];return h(n)?a(b.element).bind(n,g):n&&a(n.of,b.element).bind(n.on,g),b.element}function H(b,c){var d=b.all||b.contextualParent.all,e=D(b,c,null,d);return e.length?a.map(e,function(a){return d[a]}):a.map(b.controls,function(a){return H(a,c)})}function I(a){var b=a.ui;return!(!b.typer&&(a.requireTyper||a.requireWidget||a.requireWidgetEnabled||a.requireCommand))&&(!(a.requireCommand&&!b.typer.hasCommand(a.requireCommand)||a.requireWidgetEnabled&&!b.typer.widgetEnabled(a.requireWidgetEnabled))&&(!(a.requireWidget===!0&&!c.getOwnPropertyNames(b._widgets)[0]||a.requireWidget&&!a.widget)&&(!(a.requireChildControls===!0&&!a.controls.some(I))&&(a.enabled!==!1&&A(a,"enabled")!==!1))))}function J(a){return a.active===!0||!!A(a,"active")}function K(b,c){var d,e=b.ui;(b.requireWidget||b.requireWidgetEnabled)&&(b.widget=e._widgets[b.requireWidget||b.requireWidgetEnabled]||e.widget,d=!b.widget),d||(b.validateOnChange&&N(b),C(b,"stateChange"));var f=!I(b),g=!(b.hiddenWhenDisabled&&f||b.visible===!1||A(b,"visible")===!1),h=a(b.element),i=ea[e.theme];h.is(":input")&&h.prop("disabled",f),i.controlDisabledClass&&h.toggleClass(i.controlDisabledClass,f),i.controlActiveClass&&h.toggleClass(i.controlActiveClass,J(b)),i.controlHiddenClass?h.toggleClass(i.controlHiddenClass,!g):v(h,g),c&&b.parent!==b.ui&&ja.indexOf(b.parent)<0&&K(b.parent)}function L(b,c,d){try{if(c(b,d),ia.indexOf(b)>0)return ia[0].promise}finally{if(ia[0]===b)for(;"pending"!==a.when(ia[0].promise).state()&&ia.shift()&&ia[0];);}}function M(a){var b=a.ui;b.typer?V(a.execute)?b.typer.invoke(function(c){a.execute(b,a,c,a.value)}):b.typer.hasCommand(a.execute)&&b.typer.invoke(a.execute,a.value):V(a.execute)&&a.execute(b,a,null,a.value),C(a,"executed")}function N(b,c){var d=!0;return!c&&I(b)&&C(b,"validate",{get isFailed(){return d},fail:function(){d=!1}}),b.validateOnChange=!d,a(b.element).toggleClass(na.themes[b.ui.theme].controlErrorClass,!d),d}function O(b,d,e,f){a.each(c.keys(b.all).reverse(),function(a,c){c=b.all[c],c.all&&O(c,d,e,f),d(c,e,f)})}function P(b){var c=b.ui,d=a.Deferred(),e=function(e,f){if(c.validate()){f=f||b.getControl(b.resolveBy);var g=a.when(V(b.submit)&&b.submit(c,b,f));"pending"===g.state()&&c.trigger(b,"waiting",f),g.done(function(a){c.trigger(b,"success",a),d.resolve(e)}),g.fail(function(a){c.trigger(b,"error",a),na.focus(b.element,!0)})}else c.trigger(b,"validateError"),na.focus(b.element,!0)},f=function(){var a=b.getControl(b.resolveWith)||b;e(c.getValue(a),this)},g=function(){d.reject()};return a.each(b.resolve(b.resolveBy),function(a,b){b.execute=f}),a.each(b.resolve(b.rejectBy),function(a,b){b.execute=g}),V(b.setup)&&b.setup(c,b,e,g),{promise:d.promise(),resolve:f,reject:g}}var Q,R=":text, :password, :checkbox, :radio, textarea, [contenteditable]",S=":input, [contenteditable], a[href], area[href], iframe",T="checked selected disabled readonly multiple ismap",U="executing executed cancelled",V=a.isFunction,W=a.isPlainObject,X=c.getOwnPropertyDescriptor,Y=c.defineProperty,Z={left:"right",right:"left",top:"bottom",bottom:"top"},$={percentX:0,percentY:0,offsetX:0,offsetY:0},_={center:.5,right:1,bottom:1},aa={ctrl:"⌘",alt:"⌥",shift:"⇧",enter:"↩",tab:"ℵ",pageUp:"⇞",pageDown:"⇟",backspace:"⌫",escape:"⎋",leftArrow:"⭠",upArrow:"⭡",rightArrow:"⭢",downArrow:"⭣",home:"⭦",end:"⭨"},ba={},ca={},da={},ea={},fa={},ga={},ha={},ia=[],ja=[],ka=[],la=[],ma=navigator.userAgent.indexOf("Macintosh")>=0,na=b.ui=p("TyperUI",{language:"en"},function(b,d){h(b)&&(b={controls:b});var e=ja[0]||ia[0];e&&a.extend(b,{theme:e.ui.theme,typer:e.ui.typer,widget:e.ui.widget,parent:e.ui,parentControl:e});var f=a.extend(this,b);f.ui=f,f.theme=f.theme||c.keys(ea)[0],f.all={},F(f),G(f),a(f.element).addClass("typer-ui typer-ui-"+f.theme),a(f.element).mousedown(function(){na.focus(f.element)}),f.typer&&f.typer.retainFocus(f.element),O(f,C,"init"),C(f,"init"),W(d)&&a.each(d,function(a,b){f.setValue(a,b)})});a.extend(na.prototype,{update:function(){var b=this;b._widgets={},b.widget?b._widgets[b.widget.id]=b.widget:b.typer&&a.each(b.typer.getSelection().getWidgets().concat(b.typer.getStaticWidgets()),function(a,c){b._widgets[c.id]=c}),O(this,K)},destroy:function(){O(this,C,"destroy")},resolve:function(a){return H(this.getExecutingControl()||this,a)},trigger:function(a,b,c){h(a)&&(a=this.getControl(a)||{}),C(a,b,c)},show:function(a,b,c,d){h(a)&&(a=this.getControl(a)||{}),a.ui===this?y(a,b,c,d):y(this,this.element,a,b)},hide:function(a){h(a)&&(a=this.getControl(a)||{}),z(a||this)},enabled:function(a){return h(a)&&(a=this.getControl(a)),a&&I(a)},active:function(a){return h(a)&&(a=this.getControl(a)),a&&J(a)},getIcon:function(a){return(ca[a.icon]||ca[a.name]||ca[a]||"")[this.iconset||ea[this.theme].iconset]||""},getLabel:function(a){if(a=(a||"").label||a,da[a]){if(this.language in da[a])return da[a][this.language];for(var b in da[a])return da[a][b]}return a},getExecutingControl:function(){for(var a=0,b=ja.length;a<b;a++)if(ja[a].ui===this)return ja[a]},validate:function(){var a;return O(this,function(b){a|=!N(b)}),!a},reset:function(){var a=this;O(a,function(a){N(a,!0),C(a,"reset")}),a.update()},execute:function(b,c){var d=this;if(h(b)?b=d.getControl(b):b||(b=d.controls[0]),b&&ia.indexOf(b)<0&&I(b)){if(void 0!==c&&d.setValue(b,c),ia.unshift(b),C(b,"executing"),V(b.dialog)){var e=b.promise=a.when(b.dialog(d,b));return e.done(function(a){L(b,function(){d.setValue(b,a),M(b)})}),e.fail(function(){L(b,C,"cancelled")}),e}return L(b,M)}}}),a.extend(na,{controls:ba,themes:ea,controlExtensions:ga,matchWSDelim:l,getZIndex:s,getZIndexOver:t,listen:q,define:function(b,c,d){return W(b)?void a.each(b,na.define):(c=c||{},d=d||(X(c,"constructor")||"").value,c.type=b,void(na[b]=p("TyperUI"+i(b),c,d)))},getShortcut:function(a){var b=fa._map[a];return b&&b[0]},addControls:function(b,c){var d=h(b)?b+":":"";a.each(c||b,function(a,b){ba[d+a]=b})},addIcons:function(b,c,d){var e=h(c)?c+":":"";a.each(d||c,function(a,c){a=e+a,ca[a]||(ca[a]={}),ca[a][b]=c})},addLabels:function(b,c,d){var e=h(c)?c+":":"";a.each(d||c,function(a,c){a=e+a,da[a]||(da[a]={}),da[a][b]=c})},addHook:function(b,c){return W(b)?void a.each(b,na.addHook):void(b||"").replace(/\S+/g,function(a){fa[a]=fa[a]||[],fa[a].push({hook:c})})},setShortcut:function(b,c){if(W(b))return void a.each(b,na.setShortcut);b=r(b),fa._map=fa._map||{};var d=fa._map[b.name]=fa._map[b.name]||[],e=d.slice(0);(c||"").replace(/\S+/g,function(a){var c=e.indexOf(a);c>=0?e.splice(c,1):(d[d.length]=a,fa[a]=fa[a]||[],fa[a].push({command:b.name,value:(b.params||"").value}))}),a.each(e,function(c,e){d.splice(d.indexOf(e),1),a.each(fa[e],function(a,c){if(c.command===b.name&&c.value===(b.params||"").value)return fa[e].splice(a,1),!1})})},setZIndex:function(b,c){b.style.zIndex=t(c),"static"===a(b).css("position")&&(b.style.position="relative")},pin:function(a,b,c,d){ka.push({control:a,element:b,reference:c,direction:d}),w()},unpin:function(b){a.each(ka,function(a,c){if(c.control===b)return ka.splice(a,1),!1})},focus:function(b,c){(!a.contains(b,f.activeElement)||c&&!a(f.activeElement).is(R))&&a(c?R:S,b).not(":disabled, :hidden").andSelf().eq(0).focus()},alert:function(a){return na("dialog:prompt -dialog:input -dialog:buttonCancel",{message:a}).execute()},confirm:function(a){return na("dialog:prompt -dialog:input",{message:a}).execute()},prompt:function(a,b){return na("dialog:prompt",{message:a,input:b}).execute()},getWheelDelta:function(a){a=a.originalEvent||a;var b=-a.wheelDeltaY||-a.wheelDelta||a.detail;return b/Math.abs(b)*(ma?-1:1)},parseOrigin:function(b){return/(left|center|right)?(?:((?:^|\s|[+-]?)\d+(?:\.\d+)?)(px|%))?(?:\s+(top|center|bottom)?(?:((?:^|\s|[+-]?)\d+(?:\.\d+)?)(px|%))?)?/g.test(b)?{percentX:(_[d.$1]||0)+("%"===d.$3&&+d.$2),percentY:(_[d.$4||!d.$5&&d.$1]||0)+("%"===d.$6&&+d.$5),offsetX:+("px"===d.$3&&+d.$2),offsetY:+("px"===d.$6&&+d.$5)}:a.extend({},$)}}),a.extend(ga,{buttonsetGroup:"left",hiddenWhenDisabled:!1,markdown:!1,renderAs:"",requireChildControls:!1,requireTyper:!1,requireWidget:"",requireWidgetEnabled:"",showButtonLabel:!0,hideCalloutOnExecute:!0,is:function(a){return l(this.type,a)},parentOf:function(a){for(;a;a=a.parent)if(this===a)return!0;return!1},set:function(a,b){if(h(a))this[a]=b;else for(var c in a)this[c]=a[c];K(this,!0)},resolve:function(a){return H(this,a)},getControl:function(a){return this.resolve(a)[0]},getValue:function(c){var d=this;if(h(c)?c=d.getControl(c):c&&b.is(c.ui,na)||(c=d===d.ui?d.controls[0]:d),c){if(!c.valueMap)return c.value;var e={};return a.each(c.valueMap,function(a,b){e[a]=c.getValue(b)}),e}},setValue:function(c,d){var e=this;h(c)?c=e.getControl(c):void 0!==c&&null!==c&&b.is(c.ui,na)||(d=c,c=e===e.ui?e.controls[0]:e),c&&(c.valueMap?a.each(d||{},function(a,b){c.setValue(c.valueMap[a],b)}):c.value=d,K(c,!0))}}),na.theme=p("TyperUITheme"),na.themeExtensions=na.theme.prototype,a.extend(na.themeExtensions,{bind:function(a,b,c){if(c=a.getLabel(c)||"",b.markdown)return new showdown.Converter({simplifiedAutoLink:!0,excludeTrailingPunctuationFromURLs:!0,simpleLineBreaks:!0}).makeHtml(String(c));var d=f.createElement("div");return d.textContent=c,d.innerHTML},bindIcon:function(a,b,c){return a.getIcon(c)},bindShortcut:function(a,b,c){var d={},e=(c||"").replace(/ctrl|alt|shift/gi,function(a){return ma?(d[a.toLowerCase()]=aa[a.toLowerCase()],""):i(a)+"+"});return ma?(d.alt||"")+(d.shift||"")+(d.ctrl||"")+(aa[j(e)]||e):e}}),na.define({group:{hiddenWhenDisabled:!0,requireChildControls:!0,controls:"*",constructor:function(b,c){h(b)?(this.controls=b,h(c)?this.type=c:a.extend(this,c)):a.extend(this,b)}},dropdown:{optionFilter:"(type:button) -(dropdownOption:exclude)",defaultEmpty:!1,allowEmpty:!1,selectedIndex:-1,requireChildControls:!0,controls:"*",get value(){return this.selectedValue},set value(b){var c=this;c.selectedIndex=-1,a.each(c.resolve(c.optionFilter),function(a,d){if(d.value===b)return c.selectedIndex=a,c.selectedText=d.label||d.name,c.selectedValue=d.value,!1}),c.selectedIndex===-1&&(c.selectedValue="",c.selectedText=c.label||c.name),O(c,K)},init:function(b,c){c.selectedText=c.label||c.name,a.each(c.resolve(c.optionFilter),function(a,d){d.active=function(){return c.selectedIndex===a},d.execute=function(){c.value=d.value,b.execute(c)}}),a(c.element).click(function(){I(c)&&B(c,"showCallout")})},stateChange:function(a,b){var c=b.resolve(b.optionFilter);(b.selectedIndex<0||!I(c[b.selectedIndex]))&&(b.defaultEmpty?b.selectedIndex>=0&&(b.value=""):b.value=(c.filter(I)[0]||"").value)},validate:function(a,b,c){!b.allowEmpty&&b.selectedIndex<0&&c.fail()},reset:function(a,b){b.value=b.defaultEmpty?"":(b.resolve(b.optionFilter).filter(I)[0]||"").value}},callout:{allowButtonMode:!1,controls:"*",init:function(b,c){a(c.element).click(function(){I(c)&&(!c.allowButtonMode||c.resolve("*:*").filter(I).length>1)&&B(c,"showCallout")})},stateChange:function(a,b){if(b.allowButtonMode){var d=b.resolve("*:*").filter(I);if(1===d.length)b.icon=d[0].icon,b.label=d[0].label;else{var e=c.getPrototypeOf(b);b.icon=e.icon||b.name,b.label=e.label||b.name}}},execute:function(a,b){if(b.allowButtonMode){var c=b.resolve("*:*").filter(I);1===c.length&&a.execute(c[0])}}},label:{get value(){return this.label},set value(a){this.label=a}},button:{},file:{},textbox:{preset:"textbox"},textboxCombo:{controls:function(a,b){var c=[];return b.valueMap={},(b.format||"").replace(/\{([^}]+)\}|[^{]+/g,function(a,d){var e=d?na.textbox(b[d]):na.label(a);e.name=b.name+":"+(d||g()),c.push(e),d&&(b.valueMap[d]=e.name)}),c}},checkbox:{reset:function(a,b){b.value=!1}},dialog:{pinnable:!1,keyboardResolve:!0,keyboardReject:!0,resolveBy:"dialog:buttonOK",rejectBy:"dialog:buttonCancel",dialog:function(a,b){var c=Q,d=f.activeElement,e=P(b);return a.update(),a.trigger(b,"open"),setImmediate(na.focus,b.element),e.promise.always(function(){a.trigger(b,"close"),a.destroy(),Q=c,d&&d.focus()}),na.setZIndex(a.element,f.body),Q={element:b.element,keyboardResolve:b.keyboardResolve&&e.resolve,keyboardReject:b.keyboardReject&&e.reject},e.promise}}}),na.addControls("dialog",{buttonset:na.group("(type:button)",{type:"buttonset",defaultNS:"dialog"}),buttonOK:na.label({type:"button",buttonsetGroup:"right"}),buttonCancel:na.label({type:"button",buttonsetGroup:"right"}),message:na.label({markdown:!0}),input:na.textbox(),prompt:na.dialog({pinnable:!0,defaultNS:"dialog",controls:"message input buttonset",resolveWith:"input"})}),na.addLabels("en","dialog",{input:"",buttonOK:"OK",buttonCancel:"Cancel"}),na.addIcons("material","dialog",{buttonOK:"",buttonCancel:""}),b.defaultOptions.shortcut=!0,b.widgets.shortcut={keystroke:function(b){b.isDefaultPrevented()||a.each(fa[b.data]||[],function(a,c){return c.hook&&c.hook(b.typer)?(b.preventDefault(),!1):b.typer.hasCommand(c.command)?(b.typer.invoke(c.command,c.value),b.preventDefault(),!1):void 0})}},a(function(){a(e).keydown(function(b){!Q||13!==b.which&&27!==b.which||(Q[13===b.which?"keyboardResolve":"keyboardReject"]||a.noop)()}),a(e).focusin(function(b){Q&&b.relatedTarget&&!a.contains(Q.element,b.target)&&setImmediate(na.focus,Q.element)}),a(e).bind("resize scroll orientationchange",function(a){w()}),a(f.body).on("click","label",function(b){a(S,b.currentTarget).not(":disabled, :hidden").eq(0).focus()}),a(f.body).mousedown(function(c){a.each(la.slice(0),function(a,d){b.containsOrEquals(d.element,c.target)||d.focusedElement&&b.containsOrEquals(d.focusedElement,c.target)||z(d.control)})})})}(jQuery,window.Typer,Object,RegExp,window,document),function(a,b){"use strict";function c(b){return b.filter(function(c){return!b.some(function(b){return a.contains(b,c)})})}function d(b){var c=a(b).css("text-align"),d=a(b).css("direction");switch(c){case"-webkit-left":return"left";case"-webkit-right":return"right";case"start":return"ltr"===d?"left":"right";case"end":return"ltr"===d?"right":"left";default:return c}}function e(b,c){var e;return a(b).each(function(b,f){var g;g="textAlign"===c?d(f):"inlineClass"===c?a(f).attr("class")||"":a(f).css(c),e=""===e||e&&e!==g?"":g}),e||""}function f(a,b){return a=a.toLowerCase(),b=b.toLowerCase(),a===b||t.test(a)&&t.test(b)}function g(a,c){var d=b.createElement(a);return c&&(d.className=c),d}function h(b){a(b.selection.getParagraphElements()).attr("align",p[b.commandName]),b.trackChange(b.selection.focusNode.element)}function i(a){a.selection.isCaret?a.insertHtml(g(q[a.commandName])):(a.widget.subscript&&"superscript"===a.commandName?a.execCommand("subscript"):a.widget.superscript&&"subscript"===a.commandName&&a.execCommand("superscript"),
a.execCommand(a.commandName),a.trackChange(a.selection.focusNode.element))}function j(c,d){var e="insertOrderedList"===c.commandName||d?"ol":"ul",f="<"+e+(d||"").replace(/^.+/,' type="$&"')+">",g=function(c,f){return b.is(f,e)&&(a(f).attr("type")||"")===(d||"")},h=[];a.each(c.selection.getParagraphElements(),function(d,e){if(a(e).is("ol>li,ul>li"))a(e.parentNode).filter(g)[0]?a(e).is("li")&&a.inArray(e.parentNode,h)<0&&l(c,[e]):(c.replaceElement(e.parentNode,a(f)[0]),h.push(e.parentNode));else{var i=a(e).prev().filter(g)[0]||a(e).next().filter(g)[0]||a(f).insertAfter(e)[0];a(e)[b.comparePosition(e,i)<0?"prependTo":"appendTo"](i),c.replaceElement(e,"li"),h.push(i)}}),c.trackChange(c.selection.focusNode.element)}function k(d,e){e=e||c(d.selection.getParagraphElements()),a.each(e,function(c,e){var f=a(e).parent("ul,ol")[0]||a(e).prev("ul,ol")[0]||a("<ul>").insertBefore(e)[0],g=f;if(g===e.parentNode){var h=a(e).prev("li")[0]||a("<li>").insertBefore(e)[0];g=a(h).children("ul,ol")[0]||a(f.cloneNode(!1)).appendTo(h)[0]}a(d.replaceElement(e,"li")).appendTo(g),a(g).parent("li")[0]&&a(b.createTextNode(" ")).insertBefore(g),f.children[0]||d.removeElement(f)})}function l(d,e){e=e||c(d.selection.getParagraphElements()),a.each(e,function(c,e){var f=a(e).parent("ul,ol")[0],g=a(f).parent("li")[0];a(e).next("li")[0]&&(g?a(f.cloneNode(!1)).append(a(e).nextAll()).appendTo(e):(a(f.cloneNode(!1)).append(a(e).nextAll()).insertAfter(f),a(e).children("ul,ol").insertAfter(f))),g?(a(e).insertAfter(g),b.trim(d.typer.extractText(g))||d.removeElement(g)):a(d.replaceElement(e,"p")).insertAfter(f),f.children[0]||d.removeElement(f)}),d.trackChange(d.selection.focusNode.element)}function m(a,c){var d=a.typer.getSelection();return!!(c?d.startNode.nodeType&(b.NODE_PARAGRAPH|b.NODE_EDITABLE_PARAGRAPH|b.NODE_INLINE):d.getParagraphElements()[0])}function n(a,c){return b.ui.button({requireWidget:c,requireCommand:a,execute:a,active:function(b,c){return c.widget&&c.widget[a]},enabled:function(a){return m(a,"inlineStyle"===c)}})}function o(c,d){return b.ui.button({name:r[c],annotation:d,requireWidgetEnabled:"list",value:c,execute:function(a,b,d){d.insertWidget("list",c)},active:function(b,d){return d.widget&&a(d.widget.element).attr("type")===c}})}var p={justifyLeft:"left",justifyRight:"right",justifyCenter:"center",justifyFull:"justify"},q={bold:"b",italic:"i",underline:"u",strikeThrough:"strike",superscript:"sup",subscript:"sub"},r={1:"decimal",A:"upper-alpha",a:"lower-alpha",I:"upper-roman",i:"lower-roman"},s=/^([a-z\d]*)(?:\.(.+))?/i,t=/^(p|h[1-6])(?:\.(.+))?$/i;b.widgets.inlineStyle={inline:!0,beforeStateChange:function(c){var d=c.typer.getSelection().getSelectedElements();a.extend(c.widget,{bold:b.ui.matchWSDelim(e(d,"fontWeight"),"bold 700"),italic:"italic"===e(d,"fontStyle"),underline:"underline"===e(d,"textDecoration"),strikeThrough:"line-through"===e(d,"textDecoration"),superscript:!!a(d).filter("sup")[0],subscript:!!a(d).filter("sub")[0],inlineClass:e(d,"inlineClass")})},commands:{bold:i,italic:i,underline:i,strikeThrough:i,superscript:i,subscript:i,applyClass:function(c,d){var e=c.selection.isCaret,f=g("span",d);c.selection.isCaret?(c.insertHtml(f),f.appendChild(b.createTextNode())):a(c.selection.getSelectedTextNodes()).wrap(f);var h=a(c.selection.getSelectedElements());h.filter("span:has(span)").each(function(b,c){a(c).contents().unwrap().filter(function(a,b){return 3===b.nodeType}).wrap(g("span",c.className))}),h.filter('span[class=""],span:not([class])').contents().unwrap(),h.filter("span+span").each(function(c,d){b.is(d.previousSibling,"span."+d.className)&&(a(d).contents().appendTo(d.previousSibling),a(d).remove())}),e&&c.selection.select(f,-0),c.trackChange(c.selection.focusNode.element)}}},b.widgets.formatting={beforeStateChange:function(b){var c=b.typer.getSelection(),d=c.getParagraphElements().slice(-1)[0];a(d).is("li")&&(d=a(d).closest("ol, ul")[0]||d);var f=d&&d.tagName.toLowerCase(),g=f+(a(d).attr("class")||"").replace(/^(.)/,".$1"),h=e(c.getSelectedElements(),"textAlign");a.extend(b.widget,{justifyLeft:"left"===h,justifyCenter:"center"===h,justifyRight:"right"===h,justifyFull:"justify"===h,formatting:f,formattingWithClassName:g})},enter:function(a){a.typer.widgetEnabled("lineBreak")&&b.is(a.typer.getSelection().startNode,b.NODE_EDITABLE_PARAGRAPH)?a.typer.invoke("insertLineBreak"):a.typer.invoke("insertLine")},commands:{justifyCenter:h,justifyFull:h,justifyLeft:h,justifyRight:h,formatting:function(c,d){var e=/^([a-z\d]*)(?:\.(.+))?/i.exec(d)||[];"ol"===e[1]||"ul"===e[1]?c.insertWidget("list","ol"===e[1]&&"1"):a(c.selection.getParagraphElements()).not("li").each(function(a,d){e[1]&&!b.is(d,e[1])&&f(e[1],d.tagName)?c.replaceElement(d,g(e[1]||"p",e[2])):(d.className=e[2]||"",c.trackChange(d))})},insertLine:function(a){a.insertText("\n\n")}}},b.widgets.lineBreak={inline:!0,enter:function(a){a.typer.invoke("insertLineBreak")},shiftEnter:function(a){a.typer.invoke("insertLineBreak")},commands:{insertLineBreak:function(a){a.insertHtml("<br>")}}},b.widgets.list={element:"ul,ol",editable:"ul,ol",insert:j,textFlow:!0,remove:"keepText",tab:function(a){a.typer.invoke("indent")},shiftTab:function(a){a.typer.invoke("outdent")},init:function(c){a(c.widget.element).filter("ol").attr("type-css-value",r[a(c.widget.element).attr("type")]||"decimal"),a(c.widget.element).parent("li")[0]&&!c.widget.element.previousSibling&&a(b.createTextNode()).insertBefore(c.widget.element)},contentChange:function(b){a(b.widget.element).children("li")[0]||b.typer.invoke(function(a){a.removeElement(b.widget.element)})},commands:{indent:k,outdent:l}},a.each("formatting list inlineStyle lineBreak".split(" "),function(a,c){b.defaultOptions[c]=!0}),b.ui.addControls("typer:toolbar",{formatting:b.ui.group("* -inlineStyleOptions -inlineStyleClear",{requireTyper:!0,defaultNS:"typer:formatting"})}),b.ui.addControls("typer:formatting",{paragraph:b.ui.dropdown({requireWidget:"formatting",requireCommand:"formatting",hiddenWhenDisabled:!0,controls:function(c){var d=a.map(Object.keys(c.options.formattings||{}),function(a){return b.ui.button({hiddenWhenDisabled:!0,value:a,label:c.options.formattings[a],enabled:function(a,b){var c=a.typer.getSelection(),d=(c.startNode===c.endNode?c.startNode:c.focusNode).element;return!s.test(b.value)||f(d.tagName,RegExp.$1)}})}),e=b.ui.button({requireWidget:"formatting",hiddenWhenDisabled:!0,enabled:function(a,b){for(var c=0,e=d.length;c<e;c++)if(d[c].value===b.widget.formatting)return!1;return b.label="typer:formatting:tagname:"+(s.exec(b.widget.formatting)||[])[1],b.value=b.widget.formatting,!0}});return d.concat(e)},execute:"formatting",enabled:function(a){return m(a,!1)},stateChange:function(a,b){for(var c=0,d=b.controls.length;c<d;c++)if(b.controls[c].value===b.widget.formattingWithClassName)return void(b.value=b.widget.formattingWithClassName);b.value=b.widget.formatting}}),inlineStyle:b.ui.dropdown({requireWidget:"inlineStyle",requireCommand:"applyClass",hiddenWhenDisabled:!0,defaultNS:"typer:formatting",controls:"inlineStyleOptions inlineStyleClear",execute:"applyClass",enabled:function(a){return m(a,!0)},stateChange:function(a,b){b.value=b.widget.inlineClass}}),inlineStyleOptions:b.ui.group({controls:function(c){return a.map(Object.keys(c.options.inlineClass||{}),function(a){return b.ui.button({value:a,label:c.options.inlineClass[a]})})}}),inlineStyleClear:b.ui.button({dropdownOption:"exclude",requireWidget:"inlineStyle",execute:"applyClass"}),bold:n("bold","inlineStyle"),italic:n("italic","inlineStyle"),underline:n("underline","inlineStyle"),strikeThrough:n("strikeThrough","inlineStyle"),unorderedList:b.ui.button({requireWidgetEnabled:"list",execute:function(a,b,c){c.insertWidget("list","")},active:function(a,c){return c.widget&&b.is(c.widget.element,"ul")},enabled:function(a){return m(a,!1)}}),orderedList:b.ui.callout({requireWidgetEnabled:"list",controls:[o("1","1, 2, 3, 4"),o("a","a, b, c, d"),o("A","A, B, C, D"),o("i","i, ii, iii, iv"),o("I","I, II, III, IV")],active:function(a,c){return c.widget&&b.is(c.widget.element,"ol")},enabled:function(a){return m(a,!1)}}),indent:n("indent","list"),outdent:n("outdent","list"),justifyLeft:n("justifyLeft","formatting"),justifyCenter:n("justifyCenter","formatting"),justifyRight:n("justifyRight","formatting"),justifyFull:n("justifyFull","formatting")}),b.ui.addLabels("en","typer:formatting",{bold:"Bold",italic:"Italic",underline:"Underlined",strikeThrough:"Strikethrough",unorderedList:"Bullet list",orderedList:"Numbered list",indent:"Indent",outdent:"Outdent",justifyLeft:"Align left",justifyCenter:"Align center",justifyRight:"Align right",justifyFull:"Align justified",paragraph:"Formatting",inlineStyle:"Text style",inlineStyleClear:"Clear style"}),b.ui.addLabels("en","typer:formatting:orderedList",{decimal:"Decimal numbers","lower-alpha":"Alphabetically ordered list, lowercase","upper-alpha":"Alphabetically ordered list, uppercase","lower-roman":"Roman numbers, lowercase","upper-roman":"Roman numbers, uppercase"}),b.ui.addLabels("en","typer:formatting:tagname",{p:"Paragraph",h1:"Header 1",h2:"Header 2",h3:"Header 3",h4:"Header 4",h5:"Header 5",h6:"Header 6",table:"Table",td:"Table cell",th:"Table header",ul:"Unordered list",ol:"Ordered list",li:"List item",blockquote:"Blockquote"}),b.ui.addIcons("material","typer:formatting",{bold:"",italic:"",underline:"",strikeThrough:"",unorderedList:"",orderedList:"",indent:"",outdent:"",justifyLeft:"",justifyCenter:"",justifyRight:"",justifyFull:""}),b.ui.setShortcut({bold:"ctrlB",italic:"ctrlI",underline:"ctrlU",justifyLeft:"ctrlShiftL",justifyCenter:"ctrlShiftE",justifyRight:"ctrlShiftR"}),b.ui.addHook("tab",function(a){if(a.widgetEnabled("list"))return a.invoke(k),!0})}(jQuery,window.Typer),function(a,b){"use strict";function c(a){var b=document.createElement("A");return b.href=a||"",location.protocol===b.protocol&&location.hostname===b.hostname&&(location.port===b.port||""===location.port&&b.port===("https:"===location.protocol?"443":"80"))?b.pathname.replace(/^(?!\/)/,"/")+b.search+b.hash:a}b.widgets.link={element:"a[href]",inline:!0,insert:function(b,d){if(d=c(d||/^[a-z]+:\/\//g.test(b.selection.getSelectedText())&&RegExp.input),b.selection.isCaret){var e=a("<a>").text(d).attr("href",d)[0];b.insertHtml(e)}else b.execCommand("createLink",d),b.selection.collapse("end"),b.trackChange(b.selection.startElement)},remove:"keepText",ctrlClick:function(a){window.open(a.widget.element.href)},commands:{setURL:function(a,b){a.widget.element.href=c(b),a.trackChange(a.widget.element)},unlink:function(a){a.removeWidget(a.widget)}}},b.defaultOptions.link=!0,b.ui.addControls("typer",{"toolbar:link":b.ui.button({after:"insert",requireWidgetEnabled:"link",hiddenWhenDisabled:!0,dialog:function(c,d){var e=d.widget||c.typer.getSelection().getSelectedText(),f={href:d.widget?a(d.widget.element).attr("href"):/^[a-z]+:\/\//g.test(e)?e:"",text:d.widget?a(d.widget.element).text():e,blank:!!d.widget&&"_blank"===a(d.widget.element).attr("target")};return"function"==typeof c.options.selectLink?c.options.selectLink(f):b.ui("typer:link:selectLink",{"typer:link:selectLink":f}).execute()},execute:function(c,d,e,f){if(!f)return null;var g=f.href||f,h=f.text||g;if(d.widget)a(d.widget.element).text(h),e.typer.invoke("setURL",g),f.blank?a(d.widget.element).attr("target","_blank"):a(d.widget.element).removeAttr("target"),e.trackChange(d.widget.element);else{var i=b.createTextNode(h);e.insertHtml(i),e.selection.select(i),e.insertWidget("link",g),"link"===e.selection.focusNode.widget.id&&(f.blank?a(e.selection.focusNode.widget.element).attr("target","_blank"):a(e.selection.focusNode.widget.element).removeAttr("target"))}},active:function(a,b){return b.widget}}),"contextmenu:link":b.ui.group("typer:link:*(type:button)"),"link:open":b.ui.button({requireWidget:"link",hiddenWhenDisabled:!0,shortcut:"ctrlClick",execute:function(a,b){window.open(b.widget.element.href)}}),"link:unlink":b.ui.button({hiddenWhenDisabled:!0,requireWidget:"link",execute:"unlink"}),"link:selectLink:text":b.ui.textbox(),"link:selectLink:url":b.ui.textbox(),"link:selectLink:blank":b.ui.checkbox(),"link:selectLink":b.ui.dialog({controls:"* dialog:buttonset",valueMap:{text:"text",href:"url",blank:"blank"}})}),b.ui.addLabels("en","typer",{"toolbar:link":"Insert hyperlink","link:url":"Link URL","link:blank":"Open in new window","link:open":"Open hyperlink","link:unlink":"Remove hyperlink","link:selectLink":"Create hyperlink","link:selectLink:text":"Text","link:selectLink:url":"URL","link:selectLink:blank":"Open in new window"}),b.ui.addIcons("material","typer",{"toolbar:link":"","link:url":""}),b.ui.addHook("space",function(a){if(a.widgetEnabled("link")){var b=a.getSelection().clone();b.getCaret("start").moveByWord(-1)&&"link"!==b.focusNode.widget.id&&/^[a-z]+:\/\//g.test(b.getSelectedText())&&(a.snapshot(!0),a.getSelection().select(b),a.invoke(function(a){a.insertWidget("link")}),a.getSelection().collapse("end"))}})}(jQuery,window.Typer),function(a,b){"use strict";function c(a){return b.ui.button({requireWidgetEnabled:"media",hiddenWhenDisabled:!0,dialog:function(b){return"function"==typeof b.options.selectMedia?b.options.selectMedia(a):b.prompt("typer:media:selectImage")},execute:function(a,b,c,d){c.insertWidget("media",d)}})}var d=/\.(?:(jpg|jpeg|png|gif|webp)|(mp4|ogg|webm)|(mp3))(?:\?.*)?$/i;b.widgets.media={element:"img,audio,video,a:has(>img)",text:function(a){return a.element.src},insert:function(c,e){var f=b.createElement(d.test(e.src||e)?RegExp.$2?"video":RegExp.$3?"audio":"img":"img");f.src=e.src||e,b.is(f,"video")&&a(f).attr("controls",""),c.insertHtml(f)}},b.defaultOptions.media=!0,b.ui.addControls("typer",{"widget:media":b.ui.group("typer:media:*"),"insert:image":c("image"),"insert:video":c("video"),"media:filePicker":b.ui.button({requireWidget:"media",stateChange:function(b,c){c.value=a(c.widget.element).attr("src"),c.label=(/(?:^|\/)([^\/?#]+)(?:\?.+)?$/.exec(c.value)||[])[1]||""},dialog:function(a,c){if("function"==typeof a.options.selectMedia){var e=d.exec(c.label)&&(RegExp.$1?"image":RegExp.$2?"video":"audio");return a.options.selectMedia(e,c.value)}return b.ui.prompt("dialog:selectImage",c.value)},execute:function(b,c,d,e){a(c.widget.element).attr("src",e.src||e),d.trackChange(c.widget.element)}}),"media:altText":b.ui.textbox({requireWidget:"media",hiddenWhenDisabled:!0,stateChange:function(b,c){c.value=a(c.widget.element).attr("alt")},execute:function(b,c,d){a(c.widget.element).attr("alt",c.value).attr("title",c.value),d.trackChange(c.widget.element)}})}),b.ui.addLabels("en","typer",{"insert:image":"Image","insert:video":"Video","media:altText":"Alternate text","media:selectImage":"Enter image URL"}),b.ui.addIcons("material","typer",{"insert:image":"","insert:video":"","media:altText":""})}(jQuery,window.Typer),function(a,b){"use strict";function c(a,b){return new Array(b+1).join(a)}function d(c){var d=[],e=[];return b.iterate(c.createTreeWalker(b.NODE_EDITABLE|b.NODE_EDITABLE_PARAGRAPH),function(b){d[d.length]=a(b.element).parent().index(),e[e.length]=a(b.element).index()}),{minRow:Math.min.apply(null,d),maxRow:Math.max.apply(null,d),minColumn:Math.min.apply(null,e),maxColumn:Math.max.apply(null,e)}}function e(b,c,d){if(b.isSingleEditable){var e=a(b.focusNode.element)[c]()[0]||a(b.focusNode.element).parent()[c]().children(d)[0];e&&b.moveToText(e,-0)}}function f(b){a("td,th",b).css({outline:"1px dotted black",minWidth:"3em"})}var g="<td></td>",h="<th></th>",i="<tr>%</tr>";b.ui.define("tableGrid",{type:"tableGrid"}),b.widgets.table={element:"table",editable:"th,td",insert:function(b,d){d=a.extend({rows:2,columns:2},d),b.insertHtml("<table>"+c(i.replace("%",c(g,d.columns)),d.rows)+"</table>")},init:function(a){f(a.widget.element)},tab:function(a){e(a.typer.getSelection(),"next",":first-child")},shiftTab:function(a){e(a.typer.getSelection(),"prev",":last-child")},ctrlEnter:function(a){a.typer.invoke(function(a){a.selection.select(a.widget.element,b.COLLAPSE_START_OUTSIDE),a.insertText("")})},commands:{addColumnBefore:function(b){var c=d(b.selection);a(b.widget.element).find(">tbody>tr>th:nth-child("+(c.minColumn+1)+")").before(h),a(b.widget.element).find(">tbody>tr>td:nth-child("+(c.minColumn+1)+")").before(g),f(b.widget.element),b.trackChange(b.widget.element)},addColumnAfter:function(b){var c=d(b.selection);a(b.widget.element).find(">tbody>tr>th:nth-child("+(c.maxColumn+1)+")").after(h),a(b.widget.element).find(">tbody>tr>td:nth-child("+(c.maxColumn+1)+")").after(g),f(b.widget.element),b.trackChange(b.widget.element)},addRowAbove:function(b){var e=d(b.selection),h=a(b.widget.element).find(">tbody>tr")[e.minRow];a(h).before(i.replace("%",c(g,h.childElementCount))),f(b.widget.element),b.trackChange(b.widget.element)},addRowBelow:function(b){var e=d(b.selection),h=a(b.widget.element).find(">tbody>tr")[e.maxRow];a(h).after(i.replace("%",c(g,h.childElementCount))),f(b.widget.element),b.trackChange(b.widget.element)},removeColumn:function(b){var c=d(b.selection);a(b.widget.element).find(">tbody>tr").each(function(b,d){a(a(d).children().splice(c.minColumn,c.maxColumn-c.minColumn+1)).remove()}),b.trackChange(b.widget.element)},removeRow:function(b){var c=d(b.selection);a(a(b.widget.element).find(">tbody>tr").splice(c.minRow,c.maxRow-c.minRow+1)).remove(),b.trackChange(b.widget.element)},toggleTableHeader:function(b){if(a(b.widget.element).find("th")[0])a(b.widget.element).find("th").wrapInner("<p>").each(function(a,c){b.replaceElement(c,"td")});else{var d=a(b.widget.element).find(">tbody>tr")[0].childElementCount;a(b.widget.element).find("tbody").prepend(i.replace("%",c(h,d))),a(b.widget.element).find("th").text(function(a,b){return"Column "+(a+1)})}f(b.widget.element),b.trackChange(b.widget.element)}}},a.extend(b.ui.themeExtensions,{tableGrid:'<div class="typer-ui-grid"><div class="typer-ui-grid-wrapper"></div><br x:t="label"/></div>',tableGridExecuteOn:"click",tableGridInit:function(b,d){var e=c('<div class="typer-ui-grid-row">'+c('<div class="typer-ui-grid-cell"></div>',7)+"</div>",7);a(d.element).find(".typer-ui-grid-wrapper").append(e),a(d.element).find(".typer-ui-grid-cell").mouseover(function(){d.value.rows=a(this).parent().index()+1,d.value.columns=a(this).index()+1,d.label=d.value.rows+" × "+d.value.columns,a(d.element).find(".typer-ui-grid-cell").removeClass("active"),a(d.element).find(".typer-ui-grid-row:lt("+d.value.rows+")").find(".typer-ui-grid-cell:nth-child("+d.value.columns+")").prevAll().andSelf().addClass("active")}),d.label="0 × 0",d.value={}}}),b.ui.addControls("typer",{"insert:table":b.ui.callout({requireWidgetEnabled:"table",hiddenWhenDisabled:!0}),"insert:table:create":b.ui.tableGrid({execute:function(a,b,c){c.insertWidget("table",b.value)}}),"contextmenu:table":b.ui.callout({requireWidget:"table",hiddenWhenDisabled:!0,defaultNS:"typer:table"}),"selection:selectTable":b.ui.button({requireWidget:"table",hiddenWhenDisabled:!0,execute:function(a,b){var c=a.typer.getSelection();c.select(b.widget.element),c.focus()}}),"table:toggleTableHeader":b.ui.checkbox({requireWidget:"table",execute:"toggleTableHeader",stateChange:function(b,c){c.value=!!a(c.widget.element).find("th")[0]}}),"table:style":b.ui.callout({requireWidget:"table",controls:function(c,d){var e=a.map(Object.keys(c.options.tableStyles||{}),function(a){return b.ui.button({requireWidget:"table",value:a,label:c.options.tableStyles[a],execute:function(b,c,d){c.widget.element.className=a,d.trackChange(c.widget.element)}})}),f=b.ui.button({requireWidget:"table",label:"typer:table:styleDefault",execute:function(a,b,c){b.widget.element.className="",c.trackChange(b.widget.element)}});return e.concat(f)}}),"table:tableWidth":b.ui.callout(),"table:tableWidth:fitContent":b.ui.button({requireWidget:"table",execute:function(b,c,d){a(c.widget.element).removeAttr("width"),d.trackChange(c.widget.element)}}),"table:tableWidth:fullWidth":b.ui.button({requireWidget:"table",execute:function(b,c,d){a(c.widget.element).attr("width","100%"),d.trackChange(c.widget.element)}}),"table:addRemoveCell":b.ui.group(),"table:addRemoveCell:addColumnBefore":b.ui.button({requireWidget:"table",execute:"addColumnBefore"}),"table:addRemoveCell:addColumnAfter":b.ui.button({requireWidget:"table",execute:"addColumnAfter"}),"table:addRemoveCell:addRowAbove":b.ui.button({requireWidget:"table",execute:"addRowAbove"}),"table:addRemoveCell:addRowBelow":b.ui.button({requireWidget:"table",execute:"addRowBelow"}),"table:addRemoveCell:removeColumn":b.ui.button({requireWidget:"table",execute:"removeColumn"}),"table:addRemoveCell:removeRow":b.ui.button({requireWidget:"table",execute:"removeRow"})}),b.ui.addLabels("en","typer",{"insert:table":"Table","contextmenu:table":"Modify table","selection:selectTable":"Select table","table:toggleTableHeader":"Show header","table:columnWidth":"Set column width","table:tableWidth":"Set table width","table:style":"Set table style","table:styleDefault":"Default","table:addRemoveCell:addColumnBefore":"Add column before","table:addRemoveCell:addColumnAfter":"Add column after","table:addRemoveCell:addRowAbove":"Add row above","table:addRemoveCell:addRowBelow":"Add row below","table:addRemoveCell:removeColumn":"Remove column","table:addRemoveCell:removeRow":"Remove row","table:tableWidth:fitContent":"Fit to content","table:tableWidth:fullWidth":"Full width"})}(jQuery,window.Typer),function(a,b){"use strict";function c(b){if(c.value===!1)b();else if(!c.value){var d=function(){c.value=!0};a(document).one("paste",d),setTimeout(function(){a(document).unbind("paste",d),c.value||(c.value=!1,b())})}}function d(c,d){if(c.update(),c.widget||!c.options.container){clearTimeout(h),g!==c&&(e(),g=c,a(c.element).appendTo(document.body),b.ui.setZIndex(c.element,c.typer.element));var f=a(c.element).height();if(d)c.position="fixed";else if("fixed"!==c.position){var i=(c.widget||c.typer).element.getBoundingClientRect();d={position:"fixed",left:i.left,top:Math.max(0,i.top-f-10)}}if(d){var j=c.typer.getSelection().getRange();if(j){var k=j.getClientRects()[0]||j.getBoundingClientRect();k.top>=d.top&&k.top<=d.top+f&&(d.top=k.bottom+10)}a(c.element).css(d)}}}function e(b){!g||b&&g!==b||(a(g.element).detach(),g.position="",g=null)}function f(c,e,f,g){var h=b.ui({type:g||"toolbar",typer:c,widget:f||null,theme:e.theme,defaultNS:"typer",controls:"contextmenu"===g?"contextmenu":f?"widget":"toolbar",options:e,showButtonLabel:"contextmenu"===g,executed:function(a,b){b.is("button dropdown")&&a.typer.getSelection().focus()}}),i=a(h.element);return e.container?i.appendTo(e.container):(i.addClass("typer-ui-float"),i.mousedown(function(b){var c=i.position();if(b.target===h.element){var e=function(a){d(h,{top:c.top+(a.clientY-b.clientY),left:c.left+(a.clientX-b.clientX)})};a(document.body).mousemove(e),a(document.body).mouseup(function(){a(document.body).unbind("mousemove",e)})}})),"contextmenu"===g&&a(c.element).bind("contextmenu",function(a){a.preventDefault(),h.update(),h.show({x:a.clientX,y:a.clientY})}),h}var g,h;b.widgets.toolbar={inline:!0,options:{container:"",theme:"material",formattings:{p:"Paragraph",h1:"Heading 1",h2:"Heading 2",h3:"Heading 3",h4:"Heading 4"},inlineClasses:{}},init:function(a){a.widget.toolbar=f(a.typer,a.widget.options),a.widget.contextmenu=f(a.typer,a.widget.options,null,"contextmenu"),a.widget.widgets={}},focusin:function(a){d(a.widget.toolbar)},focusout:function(a){e(a.widget.toolbar)},widgetFocusin:function(a){a.widget.widgets[a.targetWidget.id]||b.ui.controls["typer:widget:"+a.targetWidget.id]&&(a.widget.widgets[a.targetWidget.id]=f(a.typer,a.widget.options,a.targetWidget)),a.widget.widgets[a.targetWidget.id]&&(a.widget.widgets[a.targetWidget.id].widget=a.targetWidget,d(a.widget.widgets[a.targetWidget.id]))},widgetFocusout:function(a){d(a.widget.toolbar)},widgetDestroy:function(a){g&&g.typer===a.typer&&d(a.widget.toolbar)},stateChange:function(a){g&&g.typer===a.typer&&d(g)}},a(window).scroll(function(){g&&d(g)}),b.ui.addControls("typer",{contextmenu:b.ui.group("history selection clipboard *"),"contextmenu:history":b.ui.group("typer:history:*"),"contextmenu:selection":b.ui.group("typer:selection:*"),"contextmenu:clipboard":b.ui.group("typer:clipboard:*"),toolbar:b.ui.group(),"toolbar:insert":b.ui.callout({before:"*",controls:"typer:insert:*",enabled:function(a){return a.typer.getNode(a.typer.element).nodeType!==b.NODE_EDITABLE_INLINE}}),widget:b.ui.group({requireWidget:!0,controls:function(a,b){return a.widget.id+" delete"}}),"history:undo":b.ui.button({before:"*",shortcut:"ctrlZ",execute:function(a){a.typer.undo()},enabled:function(a){return a.typer.canUndo()}}),"history:redo":b.ui.button({before:"*",shortcut:"ctrlShiftZ",execute:function(a){a.typer.redo()},enabled:function(a){return a.typer.canRedo()}}),"widget:delete":b.ui.button({after:"*",requireWidget:!0,execute:function(a){a.widget.remove()}}),"selection:selectAll":b.ui.button({before:"*",shortcut:"ctrlA",execute:function(a){var b=a.typer.getSelection();b.selectAll(),b.focus()}}),"selection:selectParagraph":b.ui.button({before:"*",hiddenWhenDisabled:!0,execute:function(a){var b=a.typer.getSelection();b.select(b.startNode.element,"contents"),b.focus()},enabled:function(a){return a.typer.getSelection().isCaret}}),"clipboard:cut":b.ui.button({before:"*",shortcut:"ctrlX",execute:function(a){a.typer.getSelection().focus(),document.execCommand("cut")}}),"clipboard:copy":b.ui.button({before:"*",shortcut:"ctrlC",execute:function(a){a.typer.getSelection().focus(),document.execCommand("copy")}}),"clipboard:paste":b.ui.button({before:"*",shortcut:"ctrlV",execute:function(a){a.typer.getSelection().focus(),document.execCommand("paste"),c(function(){b.ui.alert("typer:clipboard:inaccessible")})}})}),b.ui.addLabels("en","typer",{"toolbar:insert":"Insert widget","history:undo":"Undo","history:redo":"Redo","selection:selectAll":"Select all","selection:selectParagraph":"Select paragraph","clipboard:cut":"Cut","clipboard:copy":"Copy","clipboard:paste":"Paste","clipboard:inaccessible":"Unable to access clipboard due to browser security. Please use Ctrl+V or [Paste] from browser's menu.","widget:delete":"Delete"}),b.ui.addIcons("material","typer",{"toolbar:insert":"","history:undo":"","history:redo":"","selection:selectAll":"","clipboard:cut":"","clipboard:copy":"","clipboard:paste":"","widget:delete":""})}(jQuery,window.Typer),function(a,b){"use strict";b.widgets.validation={inline:!0,init:function(a){var b=a.widget.options;b.invalidChars&&(b.invalidCharsRegex=new RegExp("["+b.invalidChars.replace(/[\[\]\\^]/g,"\\$&")+"]","g")),b.allowChars&&(b.invalidCharsRegex=new RegExp("[^"+b.allowChars.replace(/[\[\]\\^]/g,"\\$&")+"]","g"))},textInput:function(a){var b=a.widget.options,c=a.data;if(b.invalidCharsRegex){c=c.replace(b.invalidCharsRegex,"")}if(b.maxlength){var d=b.maxlength-a.typer.extractText().length;c.length>d&&(c=c.substr(0,d))}c!==a.data&&(a.preventDefault(),c&&a.typer.invoke(function(a){a.insertText(c)}))}}}(jQuery,window.Typer),function(a,b,c,d){function e(){var b='.has-N:focus{outline:none;}.has-N::selection,.has-N ::selection{background-color:transparent;}.has-N::-moz-selection,.has-N ::-moz-selection{background-color:transparent;}.N{position:fixed;pointer-events:none;width:100%;height:100%;font-family:monospace;font-size:10px;}.N>div{position:fixed;box-sizing:border-box;}.N>.border{border:1px solid rgba(0,31,81,0.2);}.N>.fill{background-color:rgba(0,31,81,0.2);}.N>.fill-margin{border:solid rgba(255,158,98,0.2);}@supports (clip-path:polygon(0 0,0 0)) or (-webkit-clip-path:polygon(0 0,0 0)){.N>.bl-r:before,.N>.tl-r:before,.N>.br-r:after,.N>.tr-r:after{content:"";display:block;position:absolute;background-color:rgba(0,31,81,0.2);width:4px;height:4px;-webkit-clip-path:polygon(100% 100%,100% 0,96.6% 25.9%,86.6% 50%,70.7% 70.7%,50% 86.6%,25.9% 96.6%,0 100%);clip-path:polygon(100% 100%,100% 0,96.6% 25.9%,86.6% 50%,70.7% 70.7%,50% 86.6%,25.9% 96.6%,0 100%);}}.N>.bl{border-bottom-left-radius:4px;}.N>.tl{border-top-left-radius:4px;}.N>.br{border-bottom-right-radius:4px;}.N>.tr{border-top-right-radius:4px;}.N>.bl-r:before{right:100%;bottom:0;}.N>.tl-r:before{right:100%;top:0;-webkit-transform:flipY();transform:flipY();}.N>.br-r:after{left:100%;bottom:0;-webkit-transform:flipX();transform:flipX();}.N>.tr-r:after{left:100%;top:0;-webkit-transform:rotate(180deg);transform:rotate(180deg);}.N>.newline:before{content:"\\0021a9";position:absolute;top:50%;left:2px;margin-top:-0.5em;line-height:1;background-color:white;box-shadow:0 0 1px black;opacity:0.5;padding:0 0.25em;}.N>.elm:before{content:attr(elm);box-shadow:0 0 1px white;background-color:rgba(0,31,81,0.8);color:white;padding:0 0.25em;position:absolute;bottom:100%;white-space:nowrap}';a(d.body).append("<style>"+b.replace(/N/g,"typer-visualizer")+"</style>"),s=a('<div class="typer-ui typer-visualizer">').appendTo(d.body)[0],a(c).bind("scroll resize orientationchange focus",function(){D=a(c).width(),E=a(c).height(),n()}),a(d.body).bind("mousewheel",n),a(d.body).bind("mousemove",function(a){q=a.clientX,r=a.clientY,o(q,r)})}function f(a){return{top:0|a.top,left:0|a.left,right:0|(a.right||a.left+a.width),bottom:0|(a.bottom||a.top+a.height)}}function g(a){return{top:a.top,left:a.left,right:D-(a.right||a.left+a.width),bottom:E-(a.bottom||a.top+a.height)}}function h(a){var c=t.getNode(a),d=[];do d.unshift(c.element.tagName.toLowerCase()+c.element.className.replace(/^(?=.)|\s+/,".")),c=c.parentNode;while(b.is(c,b.NODE_ANY_ALLOWTEXT));return d.join(" > ")}function i(a){if(b.is(a,b.NODE_ANY_INLINE))for(;!b.is(a,b.NODE_PARAGRAPH|b.NODE_EDITABLE_PARAGRAPH)&&a.parentNode;a=a.parentNode);return a}function j(b){var c=b.commonAncestorContainer,d=(1===c.nodeType?c:c.parentNode).getBoundingClientRect(),e=a.map(b.getClientRects(),f),g=[];return e.sort(function(a,b){return a.top-b.top||a.left-b.left||b.bottom-a.bottom||b.right-a.right}),a.each(e,function(a,b){var c=g[0];if(c&&(b.left>=c.right&&b.top<c.bottom?(g.shift(),b.top=Math.min(b.top,c.top),b.left=c.left,b.bottom=Math.max(b.bottom,c.bottom),c=g[0]):b.top>=c.bottom&&(c.right=d.left+d.width)),c){if(y(c,b))return;b.top>c.top&&b.top-c.bottom<b.bottom-b.top&&(c.bottom=b.top),g[1]&&c.left===g[1].left&&c.right===g[1].right&&(c.top=g.splice(1,1)[0].top)}g.unshift(b)}),g}function k(b,c,d){var e;a.each(b,function(a,b){if(null===b.element&&(e=b),b.element===c)return b.type=d,e=!0,!1}),"object"==typeof e?(e.element=c,e.type=d):e||(b[b.length]={element:c,type:d})}function l(b){a.each(b,function(b,c){c.type="none",a.contains(d,c.element)||(c.element=null)})}function m(d){a.each(d,function(d,e){function f(b,c,d){var e=i[k]=i[k]||C.pop()||a("<div>")[0];return e.className=b,e.removeAttribute("style"),a(e).css(c||"",d),k++,e}var i=e.dom=e.dom||[],k=0;if("text"===e.type.substr(0,4)){var l=b.createRange(e.element);"text-fill"===e.type&&c.getSelection().rangeCount&&(l=b.createRange(l,c.getSelection().getRangeAt(0)));var m=j(l),n=e.type;a.each(m,function(a,b){var c=m[a-1]||w,d=m[a+1]||w,e=f("text-fill"===n?"fill":"border",g(b));e.className+=[b.left<c.left||b.left>c.right?" bl":b.left>c.left&&b.left<c.right?" bl-r":"",b.left<d.left||b.left>d.right?" tl":b.left>d.left&&b.left<d.right?" tl-r":"",b.right>c.right||b.right<c.left?" br":b.right<c.right&&b.right>c.left?" br-r":"",b.right>d.right||b.right<d.left?" tr":b.right<d.right&&b.right>d.left?" tr-r":""].join("")}),"text"===e.type&&f("elm",m[m.length-1]).setAttribute("elm",h(e.element))}else if("block"===e.type.substr(0,5)){var o=e.element.getBoundingClientRect();if(f("border",o),"block"===e.type)f("elm",o).setAttribute("elm",h(e.element));else if("block-fill"===e.type)f("fill",o);else if("block-margin"===e.type){var p=c.getComputedStyle(e.element),q=g(o);q.margin=[-parseFloat(p.marginTop),-parseFloat(p.marginRight),-parseFloat(p.marginBottom),-parseFloat(p.marginLeft),""].join("px "),q.borderWidth=[p.marginTop,p.marginRight,p.marginBottom,p.marginLeft].join(" "),f("fill-margin",q),a("br",e.element).each(function(a,b){f("newline",b.getBoundingClientRect())});
}}i.length>k&&C.push.apply(C,i.splice(k)),a(i).appendTo(s)}),a(C).detach()}function n(){if(t){var a=t.element.getBoundingClientRect();v&&x(v,a)||(v=a,m(A))}}function o(a,c){if(l(B),t){var d=t.nodeFromPoint(a,c);d&&d.element!==t.element&&(b.is(d,b.NODE_WIDGET)?k(B,d.widget.element,"block"):k(B,d.element,b.is(d,b.NODE_ANY_INLINE)?"text":"block"))}m(B)}function p(a){var c=t.getSelection();l(A),c.isCaret?a.layout&&c.startNode&&b.is(c.startNode,b.NODE_ANY_ALLOWTEXT)&&k(A,i(c.startNode).element,"block-margin"):b.iterate(c.createTreeWalker(-1,function(c){if(b.is(c,b.NODE_ANY_ALLOWTEXT)||a.layout&&u&&c.element===u.element)return k(A,c.element,c.nodeType&b.NODE_ANY_ALLOWTEXT?"text-fill":"block-fill"),2})),m(A)}var q,r,s,t,u,v,w={left:1e4,right:-1e4},x=b.rectEquals,y=b.rectCovers,z=!c.ActiveXObject,A=[],B=[],C=[],D=a(c).width(),E=a(c).height();b.widgets.visualizer={inline:!0,options:{layout:!0},init:function(b){a(b.typer.element).addClass("has-typer-visualizer"),z&&!e.init&&(e(),e.init=!0)},focusin:function(a){t=a.typer,b.ui.setZIndex(s,t.element)},focusout:function(b){t=null,a(s).children().detach()},widgetFocusin:function(a){a.targetWidget.typer===t&&(u=a.targetWidget,z&&p(a.widget.options))},widgetFocusout:function(a){u=null},stateChange:function(a){z&&a.typer===t&&(p(a.widget.options),o(q,r))}},b.defaultOptions.visualizer=z}(jQuery,window.Typer,window,document),function(a,b,c){"use strict";function d(a){return a.getFullYear()}function e(a){return a.getMonth()}function f(a){return a.getDate()}function g(a){return a.getHours()}function h(a){return a.getMinutes()}function i(a,b){return new Array(b+1).join(a)}function j(a,b){return d(a)===d(b)&&e(a)===e(b)}function k(a){return"string"==typeof a&&/^today|([+-]\d+)(day|week|month|year)?$/g.test(a)?RegExp.$1?n(RegExp.$2||"day",new c,+RegExp.$1):new c:(a=null===a?void 0:a instanceof c?a:new c(a),isNaN(a)?void 0:a)}function l(a,b){var d=new c;return d.setHours(a,b,0,0),d}function m(a,b){var d=k(a.min),e=k(a.max);switch(b=new c(+(b<d?d:b>e?e:b)),a.mode||a){case"week":b.setDate(f(b)-b.getDay());break;case"month":b.setDate(1)}return"datetime"!==(a.mode||a)?b.setHours(0,0,0,0):b.setSeconds(0,0),b}function n(a,b,g,i){switch(a){case"minute":var j=g/Math.abs(g);return new c(+b+6e4*(((j>0?i:0)-h(b)%i||i*j)+i*(g-j)));case"day":return new c(+b+s*g);case"week":return new c(+b+7*s*g);case"month":return new c(d(b),e(b)+g,f(b));case"year":return new c(d(b)+g,e(b),f(b))}}function o(a,b){switch(a.mode){case"month":return t[e(b)]+" "+d(b);case"week":var c=n("day",b,6);return t[e(b)]+" "+f(b)+" - "+(e(c)!==e(b)?t[e(c)]+" ":"")+f(c)+", "+d(b)}var i=t[e(b)]+" "+f(b)+", "+d(b);return"datetime"===a.mode?i+" "+(g(b)||12)+":"+("0"+h(b)).slice(-2)+" "+(g(b)>=12?"PM":"AM"):i}function p(){r=b.ui({type:"contextmenu",controls:[b.ui.datepicker()],executed:function(a,b){b.is("calendar clock")&&(q.setValue(a.getValue()),b.is("calendar")&&a.hide())}})}var q,r,s=864e5,t="January February March April May June July August September October November December".split(" "),u="Su Mo Tu We Th Fr Sa".split(" ");b.ui.define("calendar",{type:"calendar",defaultNS:"calendar",controls:"*",showButtonLabel:!1,mode:"day",min:null,max:null,get value(){return m(this,this.selectedDate)},set value(a){this.selectedDate=m(this,a),this.ui.trigger(this,"showMonth",this.selectedDate)},init:function(f,g){var h=a("table",g.element);a(i("<tr></tr>",7)).appendTo(h),a(i("<th></th>",7)).appendTo(h.find("tr:first")),a(i("<td></td>",7)).appendTo(h.find("tr+tr")),a("<button>").appendTo(h.find("td")),h.find("th").text(function(a){return u[a]}),h.bind("mousewheel",function(a){f.trigger(g,"showMonth",b.ui.getWheelDelta(a)),a.preventDefault()}),h.find("td").click(function(){var b=a(this).hasClass("prev")?-1:a(this).hasClass("next")?1:0;f.execute(g,new c(d(g.currentMonth),e(g.currentMonth)+b,+this.textContent))})},stateChange:function(a,b){a.trigger(b,"showMonth",b.currentMonth||b.value||new c)},showMonth:function(b,g,h){if(!isNaN(+h)){"number"==typeof h&&(h=n("month",g.currentMonth,h));var i=k(g.min),l=k(g.max),o=m({mode:"month",min:i,max:l},h),p=o.getDay(),q=a("td",g.element).removeClass("selected disabled");if(!g.currentMonth||!j(o,g.currentMonth)){var r=d(o),s=e(o),t=new c(r,s+1,0).getDate(),u=new c(r,s,0).getDate();q.removeClass("prev cur next today"),q.each(function(b,c){b<p?a(c).children().text(b+1-p+u).end().addClass("prev"):b>=t+p?a(c).children().text(b+1-p-t).end().addClass("next"):a(c).children().text(b+1-p).end().addClass("cur")});var v=new c;j(o,v)&&q.eq(f(v)+p-1).addClass("today"),a("tr:last",g.element).toggle(p+t>35);var w=g.getControl("year"),x=g.getControl("month");a.each(w.controls,function(a,b){b.label=b.value=r+a-5}),w.value=r,x.value=s,g.currentMonth=o}i&&j(o,i)&&q.slice(0,f(i)+p-1).addClass("disabled"),l&&j(o,l)&&q.slice(f(l)+p).addClass("disabled");var y=j(o,g.value);if(y||"week"===g.mode&&j(o,n("day",g.value,6)))switch(g.mode){case"day":q.eq(f(g.value)+p-1).addClass("selected");break;case"week":q.slice(y?f(g.value)+p-1:0).slice(0,7).addClass("selected");break;case"month":q.filter("td.cur").addClass("selected")}a(g.element).toggleClass("select-range","day"!==g.mode)}}}),b.ui.define("clock",{type:"clock",defaultNS:"clock",controls:"*",step:1,init:function(d,e){60%e.step>0&&(e.step=1);var f=a(".typer-ui-clock-face",e.element);a(i("<i></i>",12)).appendTo(f).each(function(b,c){a(c).css("transform","rotate("+30*b+"deg)")}),a("s",e.element).mousedown(function(b){var c=b.target,f=c.parentNode.getBoundingClientRect();f={top:(f.top+f.bottom)/2,left:(f.left+f.right)/2};var i={mousemove:function(a){if(1!==a.which)return i.mouseup();var b=Math.atan2(a.clientY-f.top,a.clientX-f.left)/Math.PI,j=h(e.value),k=g(e.value);if("m"===c.getAttribute("hand")){var m=Math.round((30*b+75)/e.step)*e.step%60;if(m!==j){var n=Math.floor(Math.abs(j-m)/30)*(m>j?-1:1);e.setValue(l(k+n,m))}}else{var o=Math.round(6*b+15)%12+("am"===d.getValue("meridiem")?0:12);o!==k&&e.setValue(l(o,j))}},mouseup:function(){a(document.body).unbind(i),d.execute(e)}};1===b.which&&a(document.body).bind(i)});var j;a(e.element).bind("mousewheel",function(a){e.setValue(n("minute",e.value,b.ui.getWheelDelta(a),e.step)),a.preventDefault(),clearImmediate(j),j=setImmediate(function(){d.execute(e)})}),e.setValue(new c)},stateChange:function(b,c){var d=c.value;c.getControl("minute").presetOptions.step=c.step,c.setValue("hour",g(d)),c.setValue("minute",h(d)),c.setValue("meridiem",g(d)>=12?"pm":"am"),a('s[hand="h"]',c.element).css("transform","rotate("+(30*g(d)+.5*h(d)-90)+"deg)"),a('s[hand="m"]',c.element).css("transform","rotate("+(6*h(d)-90)+"deg)")}}),b.ui.define("datepicker",{renderAs:"buttonset",mode:"day",minuteStep:1,min:null,max:null,controls:[b.ui.calendar({name:"calendar"}),b.ui.clock({name:"clock",hiddenWhenDisabled:!0,enabled:function(a,b){return"datetime"===b.contextualParent.mode}})],get value(){var a=new c(+this.getValue("calendar"));if(this.ui.enabled("clock")){var b=this.getValue("clock");a.setHours(g(b),h(b),0,0)}return a},set value(a){a=new c("string"==typeof a?a:+a),isNaN(+a)&&(a=new c),this.setValue("calendar",a),this.setValue("clock",a)},stateChange:function(a,b){b.getControl("calendar").set({mode:"datetime"===b.mode?"day":b.mode,min:b.min,max:b.max}),b.getControl("clock").set("step",b.minuteStep)}}),b.ui.addControls("calendar",{year:b.ui.dropdown({controls:function(){for(var a=[],c=0;c<11;c++)a[c]=b.ui.button();return a},execute:function(a,b){a.trigger(b.contextualParent,"showMonth",new c(b.value,a.getValue("calendar:month")))}}),month:b.ui.dropdown({execute:function(a,b){a.trigger(b.contextualParent,"showMonth",new c(a.getValue("calendar:year"),b.value))}}),prev:b.ui.button({buttonsetGroup:"right",execute:function(a,b){a.trigger(b.contextualParent,"showMonth",-1)}}),today:b.ui.button({buttonsetGroup:"right",execute:function(a,b){a.setValue(b.contextualParent,new c)}}),next:b.ui.button({buttonsetGroup:"right",execute:function(a,b){a.trigger(b.contextualParent,"showMonth",1)}})}),b.ui.addControls("clock",{hour:b.ui.textbox({preset:"number",presetOptions:{min:0,max:23,loop:!0},execute:function(a,b){a.execute(b.contextualParent,l(b.value,a.getValue("clock:minute")))}}),timeSeperator:b.ui.label({value:":"}),minute:b.ui.textbox({preset:"number",presetOptions:{min:0,max:59,digits:"fixed",loop:!0},execute:function(a,b){a.execute(b.contextualParent,l(a.getValue("clock:hour"),b.value))}}),meridiem:b.ui.button({execute:function(a,b){a.setValue(b,"am"===b.value?"pm":"am"),a.execute(b.contextualParent,l(a.getValue("clock:hour")%12+("am"===b.value?0:12),a.getValue("clock:minute")))},stateChange:function(a,b){b.label="clock:meridiem:"+b.value}})}),b.ui.addIcons("material","calendar",{today:"",prev:"",next:""}),b.ui.addLabels("en","calendar",{today:"Today",prev:"Previous month",next:"Next month"}),b.ui.addLabels("en","clock:meridiem",{am:"AM",pm:"PM"});for(var v={},w={},x=0;x<12;x++)v[t[x].toLowerCase()]=t[x],w[t[x].toLowerCase()]=b.ui.button({value:x});b.ui.addControls("calendar:month",w),b.ui.addLabels("en","calendar:month",v),a.extend(b.ui.themeExtensions,{calendar:'<div class="typer-ui-calendar"><div class="typer-ui-calendar-header"><br x:t="buttonset"/></div><div class="typer-ui-calendar-body"><table></table></div></div>',clock:'<div class="typer-ui-clock"><div class="typer-ui-clock-face"><s hand="h"></s><s hand="m"></s></div><br x:t="buttonset"/></div>'}),b.presets.datepicker={options:{mode:"day",minuteStep:1,min:null,max:null,required:!1},overrides:{getValue:function(a){return a.selectedDate?m(a.options,a.selectedDate):null},setValue:function(a,b){b=b?m(a.options,b):null,(b&&+b)!==(a.selectedDate&&+a.selectedDate)&&(a.selectedDate=b,this.invoke(function(c){c.selection.select(this.element,"contents"),c.insertText(b?o(a.options,b):"")}),this===q&&r.setValue(b||new c))},hasContent:function(a){return!!a.selectedDate},validate:function(a){return!a.options.required||!!a.selectedDate}},commands:{step:function(a,b){var d=a.widget.options,e=n("datetime"===d.mode?"minute":d.mode,a.typer.getValue()||new c,b,d.minuteStep);a.typer.setValue(e)}},contentChange:function(a){if(a.typer===q&&"script"!==a.data){var b=new c(a.typer.extractText());isNaN(+b)||r.setValue(m(a.widget.options,b))}},click:function(a){a.typer===q&&r.show(a.typer.element)},mousewheel:function(a){a.typer.invoke("step",a.data),a.preventDefault()},upArrow:function(a){a.typer.invoke("step",-1)},downArrow:function(a){a.typer.invoke("step",1)},focusin:function(a){r||p(),a.typer.retainFocus(r.element),q=a.typer;var b=a.widget.options;r.getControl("(type:datepicker)").set({mode:b.mode,minuteStep:b.minuteStep,min:b.min,max:b.max}),r.setValue(a.typer.getValue()||new c),r.show(a.typer.element)},focusout:function(a){a.typer===q&&(q=null,r.hide())}}}(jQuery,window.Typer,Date),function(a,b){"use strict";function c(a){var b=document.createTextNode(a.replace(/\s/g," ")),c=document.createElement("div");return c.appendChild(b),c.innerHTML}function d(a,b){var c={};a.forEach(function(a){c[a]=!0}),b.forEach(function(a){delete c[a]});for(var d in c)return!0}function e(a,b){a=String(a||"");for(var d=[],e=a.toLowerCase(),f=0,g=-1,h=0;h<b.length;h++){var i=b.charAt(h).toLowerCase();if(" "!=i){if(f=e.indexOf(i,f),f==-1)return{firstIndex:1/0,consecutiveMatches:-1,formattedText:a};d[d.length]=f-g-1,g=f++}}var j=d[0],k=/^(0+)/.test(d.slice(0).sort().join(""))&&RegExp.$1.length,l="";for(f=0,h=0;h<d.length;h++)l+=c(a.substr(f,d[h]))+"<b>"+c(a[f+d[h]])+"</b>",f+=d[h]+1;return l+=c(a.slice(f)),{firstIndex:j,consecutiveMatches:k,formattedText:l.replace(/<\/b><b>/g,"")}}function f(b,c,d){return b=b.filter(function(b){a.extend(b,e(b.displayText,c));var d=e(b.value,c);return b.firstIndex=Math.min(b.firstIndex,d.firstIndex),b.consecutiveMatches=Math.max(b.consecutiveMatches,d.consecutiveMatches),b.matches&&b.matches.forEach(function(a){var d=e(a,c);b.firstIndex=Math.min(b.firstIndex,d.firstIndex),b.consecutiveMatches=Math.max(b.consecutiveMatches,d.consecutiveMatches)}),b.firstIndex!==1/0}),b.sort(function(a,b){return b.consecutiveMatches-a.consecutiveMatches+(a.firstIndex-b.firstIndex)||a.value.localeCompare(b.value)}),b.slice(0,d)}function g(b){var d=b.typer.extractText(),e=b.options.suggestions||b.options.allowedValues||[];a.isFunction(e)&&(e=e(d)),a.when(e).done(function(e){e=e.map(function(a){return"string"==typeof a?{value:a,displayText:a}:a}),e.forEach(function(a){b.knownValues[a.value]=a.displayText});var g=b.typer.getValue();e=e.filter(function(a){return g.indexOf(a.value)<0}),e=f(e,d,b.options.suggestionCount),d&&b.options.allowFreeInput&&e.push({value:d,displayText:d,formattedText:"<i>"+c(d)+"</i>"}),b.suggestions=e;var h;h=e.length?"<button>"+e.map(function(a){return a.formattedText}).join("</button><button>")+"</button>":'<button class="disabled">No suggestions</button>',a(".typer-ui-buttonlist",b.callout.element).html(h)}),setTimeout(function(){b.typer.focused()&&b.callout.show(b.typer.element)})}function h(a,b){return(a.options.allowFreeInput||a.knownValues[b])&&a.options.validate(b)}b.presets.keyword={options:{required:!1,allowFreeInput:!0,allowedValues:null,suggestionCount:5,suggestions:!1,validate:function(){return!0}},overrides:{getValue:function(b){return a("span",this.element).map(function(b,c){return a(c).data("value")}).get()},setValue:function(b,c){c=(a.isArray(c)?c:String(c).split(/\s+/)).filter(function(a){return a}),d(c,this.getValue())&&this.invoke(function(a){a.selection.select(a.typer.element,"contents"),a.insertText(""),c.forEach(function(b){a.typer.invoke("add",b)})})},hasContent:function(){return!(!a("span",this.element)[0]&&!this.extractText())},validate:function(b){var c=this.getValue();return!(b.options.required&&!c.length)&&!a(".invalid",this.element)[0]}},widgets:{tag:{element:"span",inline:!0,editable:"none",insert:function(a,b){a.insertHtml('<span class="typer-ui-keyword" data-value="'+c(b.value)+'">'+c(b.displayText)+"<i>delete</i></span>")},click:function(a){a.target!==a.widget.element&&a.widget.remove()}}},commands:{add:function(c,d){if(d&&!(c.typer.getValue().indexOf(d.value||d)>=0)){"string"==typeof d&&(d={value:d,displayText:c.widget.knownValues[d]||d});var e=a("span:last",c.typer.element)[0];e?c.selection.select(e,!1):c.selection.select(c.typer.element,0),c.insertWidget("tag",d),e=a("span:last",c.typer.element)[0],c.selection.select(b.createRange(e,!1),b.createRange(c.typer.element,-0)),c.insertText(""),h(c.widget,d.value)||a(e).addClass("invalid")}}},init:function(c){c.typer.getSelection().moveToText(c.typer.element,-0),c.widget.knownValues={},c.widget.suggestions=[],c.widget.callout=b.ui({type:"contextmenu",typer:c.typer}),a(c.widget.callout.element).on("click","button",function(b){c.typer.invoke("add",c.widget.suggestions[a(this).index()]),c.typer.getSelection().focus(),g(c.widget)})},click:function(a){a.widget.selectedIndex=-1},focusin:function(a){g(a.widget)},focusout:function(a){a.widget.selectedIndex=-1,a.widget.callout.hide(),a.typer.invoke("add",a.typer.extractText())},upArrow:function(b){b.widget.selectedIndex>=0&&a("button",b.widget.callout.element).removeClass("active").eq(b.widget.selectedIndex--).prev().addClass("active")},downArrow:function(b){b.widget.selectedIndex<a("button",b.widget.callout.element).length-1&&a("button",b.widget.callout.element).removeClass("active").eq(++b.widget.selectedIndex).addClass("active")},enter:function(a){a.widget.selectedIndex>=0?(a.typer.invoke("add",a.widget.suggestions[a.widget.selectedIndex]),a.widget.selectedIndex=-1):a.typer.invoke("add",a.typer.extractText())},keystroke:function(b){"escape"===b.data&&a.contains(document.body,b.widget.callout)&&(b.widget.selectedIndex=-1,b.widget.callout.hide(),b.preventDefault())},contentChange:function(a){"textInput"!==a.data&&"keystroke"!==a.data||g(a.widget)}}}(jQuery,window.Typer),function(a,b){"use strict";b.presets.number={validation:{allowChars:"0-9"},options:{max:null,min:null,digits:"auto",step:1,loop:!1},overrides:{getValue:function(a){return parseInt(this.extractText())},setValue:function(a,b){b=+b||0;var c=a.options.min,d=a.options.max,e=a.options.loop&&null!==c&&null!==d;if(e&&b<c||!e&&null!==d&&b>d?b=d:(e&&b>d||!e&&null!==c&&b<c)&&(b=c),b=String(+b||0),"fixed"===a.options.digits){var f=String(+a.options.max||0).length;b=(new Array(f+1).join("0")+b).substr(-f)}b!==this.extractText()&&this.invoke(function(a){a.selection.select(this.element,"contents"),a.insertText(String(b))})},hasContent:function(){return!!this.extractText()},validate:function(a){return!0}},focusout:function(a){var b=parseInt(a.typer.extractText())||0;a.typer.setValue(b)},mousewheel:function(a){a.typer.setValue(a.typer.getValue()-a.data*a.widget.options.step),a.preventDefault()},upArrow:function(a){var b=parseInt(a.typer.extractText())||0;a.typer.setValue(b+a.widget.options.step)},downArrow:function(a){var b=parseInt(a.typer.extractText())||0;a.typer.setValue(b-a.widget.options.step)},contentChange:function(a){if("keystroke"!==a.data){var b=parseInt(a.typer.extractText())||0;a.typer.setValue(b)}}}}(jQuery,window.Typer),function(a,b){"use strict";b.presets.textbox={options:{required:!1},overrides:{getValue:function(a){return this.extractText()},setValue:function(a,b){b!==this.getValue()&&this.invoke(function(a){a.selection.select(this.element,"contents"),a.insertText(b)})},hasContent:function(){return!!this.getValue()},validate:function(a){var b=this.getValue();return!(a.options.required&&!b)}},init:function(a){a.typer.getSelection().moveToText(a.typer.element,-0)}}}(jQuery,window.Typer),function(a,b,c,d){"use strict";function e(b){var d=a(".typer-ui-float",b)[0],e=(!!a(b).parents(".typer-ui-float")[0],d.getBoundingClientRect());e.bottom>a(c).height()?a(d).removeClass("float-top float-bottom").addClass("float-top"):e.top<0&&a(d).removeClass("float-top float-bottom").addClass("float-bottom"),e.right>a(c).width()?a(d).removeClass("float-left float-right").addClass("float-left"):e.left<0&&a(d).removeClass("float-left float-right").addClass("float-right")}function f(b){b.callout=a('<div class="typer-ui typer-ui-material">').append(a(b.element).children(".typer-ui-float").addClass("is-"+b.type))[0],b.ui.typer&&b.ui.typer.retainFocus(b.callout)}var g="animationend oanimationend webkitAnimationEnd",h="transitionend otransitionend webkitTransitionEnd";b.ui.themes.material=b.ui.theme({resources:["https://fonts.googleapis.com/css?family=Roboto:400,500,700","https://fonts.googleapis.com/icon?family=Material+Icons","https://cdn.rawgit.com/misonou/jquery-typer/master/css/jquery.typer.material.css"],controlActiveClass:"active",controlDisabledClass:"disabled",controlHiddenClass:"hidden",controlPinActiveClass:"pin-active",controlErrorClass:"error",iconset:"material",label:'<span class="typer-ui-label"><br x:t="labelIcon"/><br x:t="labelText"/></span>',labelText:function(a,b){return b.is("textbox")?"":(b.contextualParent||a).is("callout")||!a.getIcon(b)||b.showButtonLabel&&b.contextualParent.showButtonLabel&&a.showButtonLabel?'<span x:bind="(_:label)"></span>':""},labelIcon:function(a,b){return(b.contextualParent||a).is("dropdown")||b.is("checkbox")||!a.getIcon(b)?"":'<i class="material-icons" x:bind="(_:icon)"></i>'},buttonset:'<div class="typer-ui-buttonset"><br x:t="children(buttonsetGroup:left)"/><div class="typer-ui-buttonset-pad"></div><br x:t="children(buttonsetGroup:right)"/></div>',buttonlist:'<div class="typer-ui-buttonlist"><br x:t="children"/></div>',form:'<div class="typer-ui-form"><br x:t="children"/></div>',menupane:'<div class="typer-ui-float"><div class="typer-ui-buttonlist"><br x:t="children"/></div></div>',toolbar:'<div class="typer-ui-buttonset is-toolbar"><br x:t="children"/></div>',contextmenu:'<div class="typer-ui-float is-contextmenu"><div class="typer-ui-buttonlist"><br x:t="children"/></div></div>',group:'<div class="typer-ui-group"><br x:t="children"/></div>',groupStateChange:function(b,c){setImmediate(function(){a(c.element).toggleClass("sep-before",!!a(c.element).prevAll(":not(.hidden)")[0]),a(c.element).toggleClass("sep-after",!!a(c.element).nextAll(":not(.hidden):first:not(.typer-ui-group)")[0])})},button:'<button x:bind="(title:label)"><br x:t="label"/><span class="typer-ui-label-annotation" role="shortcut" x:bind="(_:shortcut)"></span><span class="typer-ui-label-annotation" x:bind="(_:annotation)"></span></button>',buttonExecuteOn:"click",file:'<label class="has-clickeffect" x:bind="(title:label)"><input type="file"/><br x:t="label"/></label>',fileInit:function(b,c){a(c.element).find(":file").change(function(e){c.value=e.target.files,b.execute(c),setImmediate(function(){var b=d.createElement("form");b.appendChild(e.target),b.reset(),a(e.target).prependTo(c.element)})})},callout:'<label class="typer-ui-callout" x:bind="(title:label)"><br x:t="button"/><br x:t="menupane"/></label>',calloutExecuteOn:"click",calloutInit:function(a,b){b.contextualParent.is("callout contextmenu")||f(b)},dropdown:'<button class="typer-ui-dropdown" x:bind="(title:label)"><span class="typer-ui-label"><br x:t="labelIcon"/><span x:bind="(_:selectedText)"></span></span><br x:t="menupane"/></button>',dropdownInit:function(a,b){b.contextualParent.is("callout contextmenu")||f(b)},checkbox:'<button class="typer-ui-checkbox" x:bind="(title:label)"><br x:t="label"/></button>',checkboxInit:function(b,c){a(c.element).click(function(){c.value=a(this).toggleClass("checked").hasClass("checked"),b.execute(c)})},checkboxStateChange:function(b,c){a(c.element).toggleClass("checked",!!c.value)},textboxInner:'<div class="typer-ui-textbox-inner"><div contenteditable spellcheck="false"></div><div class="typer-ui-textbox-placeholder" x:bind="(_:label)"></div><div class="typer-ui-textbox-error"></div></div>',textboxCombo:'<label class="typer-ui-textbox typer-ui-textbox-combo" x:bind="(title:label)"><br x:t="label"/><div class="typer-ui-textbox-wrapper"><br x:t="children(textbox:textboxInner)"/></div></label>',textbox:'<label class="typer-ui-textbox" x:bind="(title:label)"><br x:t="label"/><div class="typer-ui-textbox-wrapper"><br x:t="textboxInner"/></div></label>',textboxInit:function(d,e){var f=a("[contenteditable]",e.element)[0];e.preset=b.preset(f,e.preset,a.extend({},e.presetOptions,{focusin:function(b){a(e.element).addClass("focused")},focusout:function(b){a(e.element).removeClass("focused")},stateChange:function(a){var b=a.typer.element,d=c.getComputedStyle(b);if("nowrap"===d.whiteSpace&&"hidden"===d.overflow){var e=b.getBoundingClientRect(),f=a.typer.getSelection().extendCaret.getRange().getBoundingClientRect();f.left>e.right?b.style.textIndent=parseInt(d.textIndent)-(f.left-e.right+5)+"px":f.left<e.left&&(b.style.textIndent=Math.min(0,parseInt(d.textIndent)+(e.left-f.left+5))+"px")}},contentChange:function(b){e.value=e.preset.getValue(),a(e.element).toggleClass("empty",!e.preset.hasContent()),b.typer.focused()&&d.execute(e)}})),e.preset.parentControl=e,e.presetOptions=e.preset.getStaticWidget("__preset__").options,a(e.element).toggleClass("empty",!e.preset.hasContent())},textboxValidate:function(a,b,c){b.preset.validate()||c.fail()},textboxStateChange:function(a,b){b.preset.setValue(b.value||"")},textboxReset:function(a,b){b.preset.setValue(""),b.value=b.preset.getValue()},dialog:'<div class="typer-ui-dialog-wrapper"><div class="typer-ui-dialog-pin"></div><div class="typer-ui-dialog"><div class="typer-ui-dialog-content typer-ui-form"><br x:t="children"></div></div></div>',dialogOpen:function(c,e){var f=e.getControl(e.resolveBy),h=a(c.element).find(".typer-ui-dialog-wrapper"),i=a(c.element).find(".typer-ui-dialog-content");a(c.element).appendTo(d.body),h.click(function(a){a.target===h[0]&&i.addClass("pop")}),i.bind(g,function(){i.removeClass("pop")}),f&&a(f.element).addClass("pin-active"),setImmediate(function(){a(e.element).addClass("open"),e.pinnable&&c.parentControl&&b.ui.matchWSDelim(c.parentControl.pinDirection,"left right top bottom")&&(h.addClass("pinned pinned-"+c.parentControl.pinDirection),a(c.parentControl.element).addClass("pin-active"),b.ui.pin(e,h[0],c.parentControl.element,c.parentControl.pinDirection))})},dialogWaiting:function(b,c){a(c.element).addClass("loading")},dialogError:function(b,c){a(c.element).removeClass("loading")},dialogClose:function(c,d){a(d.element).addClass("closing").one(h,function(){a(c.element).remove(),d.pinnable&&c.parentControl&&(a(c.parentControl.element).removeClass("pin-active"),b.ui.unpin(d))})},showCallout:function(a,b){b.callout&&a.show(b,b.callout,b.element,"left bottom")},afterShow:function(b,c,d){c.is("dialog contextmenu")&&a(d.element).removeClass("closing").addClass("open")},beforeHide:function(b,c,d){if(c.is("dialog contextmenu")){var e=a.Deferred();return a(d.element).addClass("closing").one(h,function(){a(this).hasClass("closing")&&(a(this).removeClass("open closing"),e.resolve())}),e.promise()}},positionUpdate:function(b,c,d){a.each(["left","right","top","bottom"],function(b,c){a(d.element).toggleClass("stick-"+c,!!d.stick[c])})},executed:function(a,b){b.is("button")&&b.contextualParent.is("callout dropdown contextmenu")&&b.contextualParent.hideCalloutOnExecute!==!1&&a.hide(b.contextualParent)}}),a(function(){var b=".typer-ui-material button:not(.typer-ui-checkbox), .typer-ui-material .has-clickeffect";a(d.body).on("mousedown",b,function(b){var c=b.currentTarget.getBoundingClientRect(),d=a('<div class="typer-ui-clickeffect"><i></i></div>').appendTo(b.currentTarget).children().css({top:b.clientY-c.top,left:b.clientX-c.left}),e=Math.pow(b.clientY-c.top,2)+Math.pow(b.clientX-c.left,2),f=Math.pow(b.clientY-c.top,2)+Math.pow(b.clientX-c.right,2),g=Math.pow(b.clientY-c.bottom,2)+Math.pow(b.clientX-c.left,2),h=Math.pow(b.clientY-c.bottom,2)+Math.pow(b.clientX-c.right,2),i=.5+2*Math.sqrt(Math.max(e,f,g,h))/parseFloat(d.css("font-size"));setImmediate(function(){d.css("transform",d.css("transform")+" scale("+i+")").addClass("animate-in")}),d.parent().css("border-radius",a(b.currentTarget).css("border-radius"))}),a(d.body).on("mouseup mouseleave",b,function(b){var c=a(".typer-ui-clickeffect",b.currentTarget);c.children().addClass("animate-out").bind(h,function(){c.remove()})}),a(d.body).on("mouseover",".typer-ui-callout:has(>.typer-ui-float)",function(a){e(a.currentTarget)})})}(jQuery,window.Typer,window,document),function(a,b){"use strict";function c(a){"function"!=typeof a&&(a=new Function(""+a));for(var b=new Array(arguments.length-1),c=0;c<b.length;c++)b[c]=arguments[c+1];var d={callback:a,args:b};return o[n]=d,m(n),n++}function d(a){delete o[a]}function e(a){var c=a.callback,d=a.args;switch(d.length){case 0:c();break;case 1:c(d[0]);break;case 2:c(d[0],d[1]);break;case 3:c(d[0],d[1],d[2]);break;default:c.apply(b,d)}}function f(a){if(p)setTimeout(f,0,a);else{var b=o[a];if(b){p=!0;try{e(b)}finally{d(a),p=!1}}}}function g(){m=function(a){process.nextTick(function(){f(a)})}}function h(){if(a.postMessage&&!a.importScripts){var b=!0,c=a.onmessage;return a.onmessage=function(){b=!1},a.postMessage("","*"),a.onmessage=c,b}}function i(){var b="setImmediate$"+Math.random()+"$",c=function(c){c.source===a&&"string"==typeof c.data&&0===c.data.indexOf(b)&&f(+c.data.slice(b.length))};a.addEventListener?a.addEventListener("message",c,!1):a.attachEvent("onmessage",c),m=function(c){a.postMessage(b+c,"*")}}function j(){var a=new MessageChannel;a.port1.onmessage=function(a){var b=a.data;f(b)},m=function(b){a.port2.postMessage(b)}}function k(){var a=q.documentElement;m=function(b){var c=q.createElement("script");c.onreadystatechange=function(){f(b),c.onreadystatechange=null,a.removeChild(c),c=null},a.appendChild(c)}}function l(){m=function(a){setTimeout(f,0,a)}}if(!a.setImmediate){var m,n=1,o={},p=!1,q=a.document,r=Object.getPrototypeOf&&Object.getPrototypeOf(a);r=r&&r.setTimeout?r:a,"[object process]"==={}.toString.call(a.process)?g():h()?i():a.MessageChannel?j():q&&"onreadystatechange"in q.createElement("script")?k():l(),r.setImmediate=c,r.clearImmediate=d}}("undefined"==typeof self?"undefined"==typeof global?this:global:self),function(){function a(a){"use strict";var b={omitExtraWLInCodeBlocks:{defaultValue:!1,describe:"Omit the default extra whiteline added to code blocks",type:"boolean"},noHeaderId:{defaultValue:!1,describe:"Turn on/off generated header id",type:"boolean"},prefixHeaderId:{defaultValue:!1,describe:"Specify a prefix to generated header ids",type:"string"},ghCompatibleHeaderId:{defaultValue:!1,describe:"Generate header ids compatible with github style (spaces are replaced with dashes, a bunch of non alphanumeric chars are removed)",type:"boolean"},headerLevelStart:{defaultValue:!1,describe:"The header blocks level start",type:"integer"},parseImgDimensions:{defaultValue:!1,describe:"Turn on/off image dimension parsing",type:"boolean"},simplifiedAutoLink:{defaultValue:!1,describe:"Turn on/off GFM autolink style",type:"boolean"},excludeTrailingPunctuationFromURLs:{defaultValue:!1,describe:"Excludes trailing punctuation from links generated with autoLinking",type:"boolean"},literalMidWordUnderscores:{defaultValue:!1,describe:"Parse midword underscores as literal underscores",type:"boolean"},literalMidWordAsterisks:{defaultValue:!1,describe:"Parse midword asterisks as literal asterisks",type:"boolean"},strikethrough:{defaultValue:!1,describe:"Turn on/off strikethrough support",type:"boolean"},tables:{defaultValue:!1,describe:"Turn on/off tables support",type:"boolean"},tablesHeaderId:{defaultValue:!1,describe:"Add an id to table headers",type:"boolean"},ghCodeBlocks:{defaultValue:!0,describe:"Turn on/off GFM fenced code blocks support",type:"boolean"},tasklists:{defaultValue:!1,describe:"Turn on/off GFM tasklist support",type:"boolean"},smoothLivePreview:{defaultValue:!1,describe:"Prevents weird effects in live previews due to incomplete input",type:"boolean"},smartIndentationFix:{defaultValue:!1,description:"Tries to smartly fix indentation in es6 strings",type:"boolean"},disableForced4SpacesIndentedSublists:{defaultValue:!1,description:"Disables the requirement of indenting nested sublists by 4 spaces",type:"boolean"},simpleLineBreaks:{defaultValue:!1,description:"Parses simple line breaks as <br> (GFM Style)",type:"boolean"},requireSpaceBeforeHeadingText:{defaultValue:!1,description:"Makes adding a space between `#` and the header text mandatory (GFM Style)",type:"boolean"},ghMentions:{defaultValue:!1,description:"Enables github @mentions",type:"boolean"},ghMentionsLink:{defaultValue:"https://github.com/{u}",description:"Changes the link generated by @mentions. Only applies if ghMentions option is enabled.",type:"string"},encodeEmails:{defaultValue:!0,description:"Encode e-mail addresses through the use of Character Entities, transforming ASCII e-mail addresses into its equivalent decimal entities",type:"boolean"},openLinksInNewWindow:{defaultValue:!1,description:"Open all links in new windows",type:"boolean"}};if(!1===a)return JSON.parse(JSON.stringify(b));var c={};for(var d in b)b.hasOwnProperty(d)&&(c[d]=b[d].defaultValue);return c}function b(a,b){"use strict";var c=b?"Error in "+b+" extension->":"Error in unnamed extension",e={valid:!0,error:""};d.helper.isArray(a)||(a=[a]);for(var f=0;f<a.length;++f){var g=c+" sub-extension "+f+": ",h=a[f];if("object"!=typeof h)return e.valid=!1,e.error=g+"must be an object, but "+typeof h+" given",e;if(!d.helper.isString(h.type))return e.valid=!1,e.error=g+'property "type" must be a string, but '+typeof h.type+" given",e;var i=h.type=h.type.toLowerCase();if("language"===i&&(i=h.type="lang"),"html"===i&&(i=h.type="output"),"lang"!==i&&"output"!==i&&"listener"!==i)return e.valid=!1,e.error=g+"type "+i+' is not recognized. Valid values: "lang/language", "output/html" or "listener"',e;if("listener"===i){if(d.helper.isUndefined(h.listeners))return e.valid=!1,e.error=g+'. Extensions of type "listener" must have a property called "listeners"',e}else if(d.helper.isUndefined(h.filter)&&d.helper.isUndefined(h.regex))return e.valid=!1,e.error=g+i+' extensions must define either a "regex" property or a "filter" method',e;if(h.listeners){if("object"!=typeof h.listeners)return e.valid=!1,
e.error=g+'"listeners" property must be an object but '+typeof h.listeners+" given",e;for(var j in h.listeners)if(h.listeners.hasOwnProperty(j)&&"function"!=typeof h.listeners[j])return e.valid=!1,e.error=g+'"listeners" property must be an hash of [event name]: [callback]. listeners.'+j+" must be a function but "+typeof h.listeners[j]+" given",e}if(h.filter){if("function"!=typeof h.filter)return e.valid=!1,e.error=g+'"filter" must be a function, but '+typeof h.filter+" given",e}else if(h.regex){if(d.helper.isString(h.regex)&&(h.regex=new RegExp(h.regex,"g")),!(h.regex instanceof RegExp))return e.valid=!1,e.error=g+'"regex" property must either be a string or a RegExp object, but '+typeof h.regex+" given",e;if(d.helper.isUndefined(h.replace))return e.valid=!1,e.error=g+'"regex" extensions must implement a replace string or function',e}}return e}function c(a,b){"use strict";return"¨E"+b.charCodeAt(0)+"E"}var d={},e={},f={},g=a(!0),h="vanilla",i={github:{omitExtraWLInCodeBlocks:!0,simplifiedAutoLink:!0,excludeTrailingPunctuationFromURLs:!0,literalMidWordUnderscores:!0,strikethrough:!0,tables:!0,tablesHeaderId:!0,ghCodeBlocks:!0,tasklists:!0,disableForced4SpacesIndentedSublists:!0,simpleLineBreaks:!0,requireSpaceBeforeHeadingText:!0,ghCompatibleHeaderId:!0,ghMentions:!0},original:{noHeaderId:!0,ghCodeBlocks:!1},ghost:{omitExtraWLInCodeBlocks:!0,parseImgDimensions:!0,simplifiedAutoLink:!0,excludeTrailingPunctuationFromURLs:!0,literalMidWordUnderscores:!0,strikethrough:!0,tables:!0,tablesHeaderId:!0,ghCodeBlocks:!0,tasklists:!0,smoothLivePreview:!0,simpleLineBreaks:!0,requireSpaceBeforeHeadingText:!0,ghMentions:!1,encodeEmails:!0},vanilla:a(!0),allOn:function(){"use strict";var b=a(!0),c={};for(var d in b)b.hasOwnProperty(d)&&(c[d]=!0);return c}()};d.helper={},d.extensions={},d.setOption=function(a,b){"use strict";return g[a]=b,this},d.getOption=function(a){"use strict";return g[a]},d.getOptions=function(){"use strict";return g},d.resetOptions=function(){"use strict";g=a(!0)},d.setFlavor=function(a){"use strict";if(!i.hasOwnProperty(a))throw Error(a+" flavor was not found");d.resetOptions();var b=i[a];h=a;for(var c in b)b.hasOwnProperty(c)&&(g[c]=b[c])},d.getFlavor=function(){"use strict";return h},d.getFlavorOptions=function(a){"use strict";if(i.hasOwnProperty(a))return i[a]},d.getDefaultOptions=function(b){"use strict";return a(b)},d.subParser=function(a,b){"use strict";if(d.helper.isString(a)){if(void 0===b){if(e.hasOwnProperty(a))return e[a];throw Error("SubParser named "+a+" not registered!")}e[a]=b}},d.extension=function(a,c){"use strict";if(!d.helper.isString(a))throw Error("Extension 'name' must be a string");if(a=d.helper.stdExtName(a),d.helper.isUndefined(c)){if(!f.hasOwnProperty(a))throw Error("Extension named "+a+" is not registered!");return f[a]}"function"==typeof c&&(c=c()),d.helper.isArray(c)||(c=[c]);var e=b(c,a);if(!e.valid)throw Error(e.error);f[a]=c},d.getAllExtensions=function(){"use strict";return f},d.removeExtension=function(a){"use strict";delete f[a]},d.resetExtensions=function(){"use strict";f={}},d.validateExtension=function(a){"use strict";var c=b(a,null);return!!c.valid||(console.warn(c.error),!1)},d.hasOwnProperty("helper")||(d.helper={}),d.helper.isString=function(a){"use strict";return"string"==typeof a||a instanceof String},d.helper.isFunction=function(a){"use strict";var b={};return a&&"[object Function]"===b.toString.call(a)},d.helper.isArray=function(a){"use strict";return a.constructor===Array},d.helper.isUndefined=function(a){"use strict";return void 0===a},d.helper.forEach=function(a,b){"use strict";if(d.helper.isUndefined(a))throw new Error("obj param is required");if(d.helper.isUndefined(b))throw new Error("callback param is required");if(!d.helper.isFunction(b))throw new Error("callback param must be a function/closure");if("function"==typeof a.forEach)a.forEach(b);else if(d.helper.isArray(a))for(var c=0;c<a.length;c++)b(a[c],c,a);else{if("object"!=typeof a)throw new Error("obj does not seem to be an array or an iterable object");for(var e in a)a.hasOwnProperty(e)&&b(a[e],e,a)}},d.helper.stdExtName=function(a){"use strict";return a.replace(/[_?*+\/\\.^-]/g,"").replace(/\s/g,"").toLowerCase()},d.helper.escapeCharactersCallback=c,d.helper.escapeCharacters=function(a,b,d){"use strict";var e="(["+b.replace(/([\[\]\\])/g,"\\$1")+"])";d&&(e="\\\\"+e);var f=new RegExp(e,"g");return a=a.replace(f,c)};var j=function(a,b,c,d){"use strict";var e,f,g,h,i,j=d||"",k=j.indexOf("g")>-1,l=new RegExp(b+"|"+c,"g"+j.replace(/g/g,"")),m=new RegExp(b,j.replace(/g/g,"")),n=[];do for(e=0;g=l.exec(a);)if(m.test(g[0]))e++||(f=l.lastIndex,h=f-g[0].length);else if(e&&!--e){i=g.index+g[0].length;var o={left:{start:h,end:f},match:{start:f,end:g.index},right:{start:g.index,end:i},wholeMatch:{start:h,end:i}};if(n.push(o),!k)return n}while(e&&(l.lastIndex=f));return n};d.helper.matchRecursiveRegExp=function(a,b,c,d){"use strict";for(var e=j(a,b,c,d),f=[],g=0;g<e.length;++g)f.push([a.slice(e[g].wholeMatch.start,e[g].wholeMatch.end),a.slice(e[g].match.start,e[g].match.end),a.slice(e[g].left.start,e[g].left.end),a.slice(e[g].right.start,e[g].right.end)]);return f},d.helper.replaceRecursiveRegExp=function(a,b,c,e,f){"use strict";if(!d.helper.isFunction(b)){var g=b;b=function(){return g}}var h=j(a,c,e,f),i=a,k=h.length;if(k>0){var l=[];0!==h[0].wholeMatch.start&&l.push(a.slice(0,h[0].wholeMatch.start));for(var m=0;m<k;++m)l.push(b(a.slice(h[m].wholeMatch.start,h[m].wholeMatch.end),a.slice(h[m].match.start,h[m].match.end),a.slice(h[m].left.start,h[m].left.end),a.slice(h[m].right.start,h[m].right.end))),m<k-1&&l.push(a.slice(h[m].wholeMatch.end,h[m+1].wholeMatch.start));h[k-1].wholeMatch.end<a.length&&l.push(a.slice(h[k-1].wholeMatch.end)),i=l.join("")}return i},d.helper.regexIndexOf=function(a,b,c){"use strict";if(!d.helper.isString(a))throw"InvalidArgumentError: first parameter of showdown.helper.regexIndexOf function must be a string";if(b instanceof RegExp==0)throw"InvalidArgumentError: second parameter of showdown.helper.regexIndexOf function must be an instance of RegExp";var e=a.substring(c||0).search(b);return e>=0?e+(c||0):e},d.helper.splitAtIndex=function(a,b){"use strict";if(!d.helper.isString(a))throw"InvalidArgumentError: first parameter of showdown.helper.regexIndexOf function must be a string";return[a.substring(0,b),a.substring(b)]},d.helper.encodeEmailAddress=function(a){"use strict";var b=[function(a){return"&#"+a.charCodeAt(0)+";"},function(a){return"&#x"+a.charCodeAt(0).toString(16)+";"},function(a){return a}];return a=a.replace(/./g,function(a){if("@"===a)a=b[Math.floor(2*Math.random())](a);else{var c=Math.random();a=c>.9?b[2](a):c>.45?b[1](a):b[0](a)}return a})},"undefined"==typeof console&&(console={warn:function(a){"use strict";alert(a)},log:function(a){"use strict";alert(a)},error:function(a){"use strict";throw a}}),d.helper.regexes={asteriskAndDash:/([*_])/g},d.Converter=function(a){"use strict";function c(a,c){if(c=c||null,d.helper.isString(a)){if(a=d.helper.stdExtName(a),c=a,d.extensions[a])return console.warn("DEPRECATION WARNING: "+a+" is an old extension that uses a deprecated loading method.Please inform the developer that the extension should be updated!"),void e(d.extensions[a],a);if(d.helper.isUndefined(f[a]))throw Error('Extension "'+a+'" could not be loaded. It was either not found or is not a valid extension.');a=f[a]}"function"==typeof a&&(a=a()),d.helper.isArray(a)||(a=[a]);var g=b(a,c);if(!g.valid)throw Error(g.error);for(var h=0;h<a.length;++h){switch(a[h].type){case"lang":m.push(a[h]);break;case"output":n.push(a[h])}if(a[h].hasOwnProperty("listeners"))for(var i in a[h].listeners)a[h].listeners.hasOwnProperty(i)&&j(i,a[h].listeners[i])}}function e(a,c){"function"==typeof a&&(a=a(new d.Converter)),d.helper.isArray(a)||(a=[a]);var e=b(a,c);if(!e.valid)throw Error(e.error);for(var f=0;f<a.length;++f)switch(a[f].type){case"lang":m.push(a[f]);break;case"output":n.push(a[f]);break;default:throw Error("Extension loader error: Type unrecognized!!!")}}function j(a,b){if(!d.helper.isString(a))throw Error("Invalid argument in converter.listen() method: name must be a string, but "+typeof a+" given");if("function"!=typeof b)throw Error("Invalid argument in converter.listen() method: callback must be a function, but "+typeof b+" given");o.hasOwnProperty(a)||(o[a]=[]),o[a].push(b)}function k(a){var b=a.match(/^\s*/)[0].length,c=new RegExp("^\\s{0,"+b+"}","gm");return a.replace(c,"")}var l={},m=[],n=[],o={},p=h;!function(){a=a||{};for(var b in g)g.hasOwnProperty(b)&&(l[b]=g[b]);if("object"!=typeof a)throw Error("Converter expects the passed parameter to be an object, but "+typeof a+" was passed instead.");for(var e in a)a.hasOwnProperty(e)&&(l[e]=a[e]);l.extensions&&d.helper.forEach(l.extensions,c)}(),this._dispatch=function(a,b,c,d){if(o.hasOwnProperty(a))for(var e=0;e<o[a].length;++e){var f=o[a][e](a,b,this,c,d);f&&void 0!==f&&(b=f)}return b},this.listen=function(a,b){return j(a,b),this},this.makeHtml=function(a){if(!a)return a;var b={gHtmlBlocks:[],gHtmlMdBlocks:[],gHtmlSpans:[],gUrls:{},gTitles:{},gDimensions:{},gListLevel:0,hashLinkCounts:{},langExtensions:m,outputModifiers:n,converter:this,ghCodeBlocks:[]};return a=a.replace(/¨/g,"¨T"),a=a.replace(/\$/g,"¨D"),a=a.replace(/\r\n/g,"\n"),a=a.replace(/\r/g,"\n"),a=a.replace(/\u00A0/g," "),l.smartIndentationFix&&(a=k(a)),a="\n\n"+a+"\n\n",a=d.subParser("detab")(a,l,b),a=a.replace(/^[ \t]+$/gm,""),d.helper.forEach(m,function(c){a=d.subParser("runExtension")(c,a,l,b)}),a=d.subParser("hashPreCodeTags")(a,l,b),a=d.subParser("githubCodeBlocks")(a,l,b),a=d.subParser("hashHTMLBlocks")(a,l,b),a=d.subParser("hashCodeTags")(a,l,b),a=d.subParser("stripLinkDefinitions")(a,l,b),a=d.subParser("blockGamut")(a,l,b),a=d.subParser("unhashHTMLSpans")(a,l,b),a=d.subParser("unescapeSpecialChars")(a,l,b),a=a.replace(/¨D/g,"$$"),a=a.replace(/¨T/g,"¨"),d.helper.forEach(n,function(c){a=d.subParser("runExtension")(c,a,l,b)}),a},this.setOption=function(a,b){l[a]=b},this.getOption=function(a){return l[a]},this.getOptions=function(){return l},this.addExtension=function(a,b){b=b||null,c(a,b)},this.useExtension=function(a){c(a)},this.setFlavor=function(a){if(!i.hasOwnProperty(a))throw Error(a+" flavor was not found");var b=i[a];p=a;for(var c in b)b.hasOwnProperty(c)&&(l[c]=b[c])},this.getFlavor=function(){return p},this.removeExtension=function(a){d.helper.isArray(a)||(a=[a]);for(var b=0;b<a.length;++b){for(var c=a[b],e=0;e<m.length;++e)m[e]===c&&m[e].splice(e,1);for(;0<n.length;++e)n[0]===c&&n[0].splice(e,1)}},this.getAllExtensions=function(){return{language:m,output:n}}},d.subParser("anchors",function(a,b,c){"use strict";a=c.converter._dispatch("anchors.before",a,b,c);var e=function(a,e,f,g,h,i,j){if(d.helper.isUndefined(j)&&(j=""),f=f.toLowerCase(),a.search(/\(<?\s*>? ?(['"].*['"])?\)$/m)>-1)g="";else if(!g){if(f||(f=e.toLowerCase().replace(/ ?\n/g," ")),g="#"+f,d.helper.isUndefined(c.gUrls[f]))return a;g=c.gUrls[f],d.helper.isUndefined(c.gTitles[f])||(j=c.gTitles[f])}g=g.replace(d.helper.regexes.asteriskAndDash,d.helper.escapeCharactersCallback);var k='<a href="'+g+'"';return""!==j&&null!==j&&(j=j.replace(/"/g,"&quot;"),j=j.replace(d.helper.regexes.asteriskAndDash,d.helper.escapeCharactersCallback),k+=' title="'+j+'"'),b.openLinksInNewWindow&&(k+=' target="¨E95Eblank"'),k+=">"+e+"</a>"};return a=a.replace(/\[((?:\[[^\]]*]|[^\[\]])*)] ?(?:\n *)?\[(.*?)]()()()()/g,e),a=a.replace(/\[((?:\[[^\]]*]|[^\[\]])*)]()[ \t]*\([ \t]?<([^>]*)>(?:[ \t]*((["'])([^"]*?)\5))?[ \t]?\)/g,e),a=a.replace(/\[((?:\[[^\]]*]|[^\[\]])*)]()[ \t]*\([ \t]?<?([\S]+?(?:\([\S]*?\)[\S]*?)?)>?(?:[ \t]*((["'])([^"]*?)\5))?[ \t]?\)/g,e),a=a.replace(/\[([^\[\]]+)]()()()()()/g,e),b.ghMentions&&(a=a.replace(/(^|\s)(\\)?(@([a-z\d\-]+))(?=[.!?;,[\]()]|\s|$)/gim,function(a,c,e,f,g){if("\\"===e)return c+f;if(!d.helper.isString(b.ghMentionsLink))throw new Error("ghMentionsLink option must be a string");return c+'<a href="'+b.ghMentionsLink.replace(/\{u}/g,g)+'">'+f+"</a>"})),a=c.converter._dispatch("anchors.after",a,b,c)});var k=/\b(((https?|ftp|dict):\/\/|www\.)[^'">\s]+\.[^'">\s]+)()(?=\s|$)(?!["<>])/gi,l=/\b(((https?|ftp|dict):\/\/|www\.)[^'">\s]+\.[^'">\s]+?)([.!?,()\[\]]?)(?=\s|$)(?!["<>])/gi,m=/<(((https?|ftp|dict):\/\/|www\.)[^'">\s]+)()>/gi,n=/(^|\s)(?:mailto:)?([A-Za-z0-9!#$%&'*+-\/=?^_`{|}~.]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)(?=$|\s)/gim,o=/<()(?:mailto:)?([-.\w]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)>/gi,p=function(a){"use strict";return function(b,c,d,e,f){var g=c,h="",i="";return/^www\./i.test(c)&&(c=c.replace(/^www\./i,"http://www.")),a.excludeTrailingPunctuationFromURLs&&f&&(h=f),a.openLinksInNewWindow&&(i=' target="¨E95Eblank"'),'<a href="'+c+'"'+i+">"+g+"</a>"+h}},q=function(a,b){"use strict";return function(c,e,f){var g="mailto:";return e=e||"",f=d.subParser("unescapeSpecialChars")(f,a,b),a.encodeEmails?(g=d.helper.encodeEmailAddress(g+f),f=d.helper.encodeEmailAddress(f)):g+=f,e+'<a href="'+g+'">'+f+"</a>"}};d.subParser("autoLinks",function(a,b,c){"use strict";return a=c.converter._dispatch("autoLinks.before",a,b,c),a=a.replace(m,p(b)),a=a.replace(o,q(b,c)),a=c.converter._dispatch("autoLinks.after",a,b,c)}),d.subParser("simplifiedAutoLinks",function(a,b,c){"use strict";return b.simplifiedAutoLink?(a=c.converter._dispatch("simplifiedAutoLinks.before",a,b,c),a=b.excludeTrailingPunctuationFromURLs?a.replace(l,p(b)):a.replace(k,p(b)),a=a.replace(n,q(b,c)),a=c.converter._dispatch("simplifiedAutoLinks.after",a,b,c)):a}),d.subParser("blockGamut",function(a,b,c){"use strict";return a=c.converter._dispatch("blockGamut.before",a,b,c),a=d.subParser("blockQuotes")(a,b,c),a=d.subParser("headers")(a,b,c),a=d.subParser("horizontalRule")(a,b,c),a=d.subParser("lists")(a,b,c),a=d.subParser("codeBlocks")(a,b,c),a=d.subParser("tables")(a,b,c),a=d.subParser("hashHTMLBlocks")(a,b,c),a=d.subParser("paragraphs")(a,b,c),a=c.converter._dispatch("blockGamut.after",a,b,c)}),d.subParser("blockQuotes",function(a,b,c){"use strict";return a=c.converter._dispatch("blockQuotes.before",a,b,c),a=a.replace(/((^ {0,3}>[ \t]?.+\n(.+\n)*\n*)+)/gm,function(a,e){var f=e;return f=f.replace(/^[ \t]*>[ \t]?/gm,"¨0"),f=f.replace(/¨0/g,""),f=f.replace(/^[ \t]+$/gm,""),f=d.subParser("githubCodeBlocks")(f,b,c),f=d.subParser("blockGamut")(f,b,c),f=f.replace(/(^|\n)/g,"$1  "),f=f.replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(a,b){var c=b;return c=c.replace(/^  /gm,"¨0"),c=c.replace(/¨0/g,"")}),d.subParser("hashBlock")("<blockquote>\n"+f+"\n</blockquote>",b,c)}),a=c.converter._dispatch("blockQuotes.after",a,b,c)}),d.subParser("codeBlocks",function(a,b,c){"use strict";a=c.converter._dispatch("codeBlocks.before",a,b,c),a+="¨0";var e=/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=¨0))/g;return a=a.replace(e,function(a,e,f){var g=e,h=f,i="\n";return g=d.subParser("outdent")(g,b,c),g=d.subParser("encodeCode")(g,b,c),g=d.subParser("detab")(g,b,c),g=g.replace(/^\n+/g,""),g=g.replace(/\n+$/g,""),b.omitExtraWLInCodeBlocks&&(i=""),g="<pre><code>"+g+i+"</code></pre>",d.subParser("hashBlock")(g,b,c)+h}),a=a.replace(/¨0/,""),a=c.converter._dispatch("codeBlocks.after",a,b,c)}),d.subParser("codeSpans",function(a,b,c){"use strict";return a=c.converter._dispatch("codeSpans.before",a,b,c),void 0===a&&(a=""),a=a.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,function(a,e,f,g){var h=g;return h=h.replace(/^([ \t]*)/g,""),h=h.replace(/[ \t]*$/g,""),h=d.subParser("encodeCode")(h,b,c),e+"<code>"+h+"</code>"}),a=c.converter._dispatch("codeSpans.after",a,b,c)}),d.subParser("detab",function(a,b,c){"use strict";return a=c.converter._dispatch("detab.before",a,b,c),a=a.replace(/\t(?=\t)/g,"    "),a=a.replace(/\t/g,"¨A¨B"),a=a.replace(/¨B(.+?)¨A/g,function(a,b){for(var c=b,d=4-c.length%4,e=0;e<d;e++)c+=" ";return c}),a=a.replace(/¨A/g,"    "),a=a.replace(/¨B/g,""),a=c.converter._dispatch("detab.after",a,b,c)}),d.subParser("encodeAmpsAndAngles",function(a,b,c){"use strict";return a=c.converter._dispatch("encodeAmpsAndAngles.before",a,b,c),a=a.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;"),a=a.replace(/<(?![a-z\/?$!])/gi,"&lt;"),a=a.replace(/</g,"&lt;"),a=a.replace(/>/g,"&gt;"),a=c.converter._dispatch("encodeAmpsAndAngles.after",a,b,c)}),d.subParser("encodeBackslashEscapes",function(a,b,c){"use strict";return a=c.converter._dispatch("encodeBackslashEscapes.before",a,b,c),a=a.replace(/\\(\\)/g,d.helper.escapeCharactersCallback),a=a.replace(/\\([`*_{}\[\]()>#+.!~=|-])/g,d.helper.escapeCharactersCallback),a=c.converter._dispatch("encodeBackslashEscapes.after",a,b,c)}),d.subParser("encodeCode",function(a,b,c){"use strict";return a=c.converter._dispatch("encodeCode.before",a,b,c),a=a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/([*_{}\[\]\\=~-])/g,d.helper.escapeCharactersCallback),a=c.converter._dispatch("encodeCode.after",a,b,c)}),d.subParser("escapeSpecialCharsWithinTagAttributes",function(a,b,c){"use strict";a=c.converter._dispatch("escapeSpecialCharsWithinTagAttributes.before",a,b,c);var e=/(<[a-z\/!$]("[^"]*"|'[^']*'|[^'">])*>|<!(--.*?--\s*)+>)/gi;return a=a.replace(e,function(a){return a.replace(/(.)<\/?code>(?=.)/g,"$1`").replace(/([\\`*_~=|])/g,d.helper.escapeCharactersCallback)}),a=c.converter._dispatch("escapeSpecialCharsWithinTagAttributes.after",a,b,c)}),d.subParser("githubCodeBlocks",function(a,b,c){"use strict";return b.ghCodeBlocks?(a=c.converter._dispatch("githubCodeBlocks.before",a,b,c),a+="¨0",a=a.replace(/(?:^|\n)```(.*)\n([\s\S]*?)\n```/g,function(a,e,f){var g=b.omitExtraWLInCodeBlocks?"":"\n";return f=d.subParser("encodeCode")(f,b,c),f=d.subParser("detab")(f,b,c),f=f.replace(/^\n+/g,""),f=f.replace(/\n+$/g,""),f="<pre><code"+(e?' class="'+e+" language-"+e+'"':"")+">"+f+g+"</code></pre>",f=d.subParser("hashBlock")(f,b,c),"\n\n¨G"+(c.ghCodeBlocks.push({text:a,codeblock:f})-1)+"G\n\n"}),a=a.replace(/¨0/,""),c.converter._dispatch("githubCodeBlocks.after",a,b,c)):a}),d.subParser("hashBlock",function(a,b,c){"use strict";return a=c.converter._dispatch("hashBlock.before",a,b,c),a=a.replace(/(^\n+|\n+$)/g,""),a="\n\n¨K"+(c.gHtmlBlocks.push(a)-1)+"K\n\n",a=c.converter._dispatch("hashBlock.after",a,b,c)}),d.subParser("hashCodeTags",function(a,b,c){"use strict";a=c.converter._dispatch("hashCodeTags.before",a,b,c);var e=function(a,e,f,g){var h=f+d.subParser("encodeCode")(e,b,c)+g;return"¨C"+(c.gHtmlSpans.push(h)-1)+"C"};return a=d.helper.replaceRecursiveRegExp(a,e,"<code\\b[^>]*>","</code>","gim"),a=c.converter._dispatch("hashCodeTags.after",a,b,c)}),d.subParser("hashElement",function(a,b,c){"use strict";return function(a,b){var d=b;return d=d.replace(/\n\n/g,"\n"),d=d.replace(/^\n/,""),d=d.replace(/\n+$/g,""),d="\n\n¨K"+(c.gHtmlBlocks.push(d)-1)+"K\n\n"}}),d.subParser("hashHTMLBlocks",function(a,b,c){"use strict";a=c.converter._dispatch("hashHTMLBlocks.before",a,b,c);for(var e=["pre","div","h1","h2","h3","h4","h5","h6","blockquote","table","dl","ol","ul","script","noscript","form","fieldset","iframe","math","style","section","header","footer","nav","article","aside","address","audio","canvas","figure","hgroup","output","video","p"],f=function(a,b,d,e){var f=a;return-1!==d.search(/\bmarkdown\b/)&&(f=d+c.converter.makeHtml(b)+e),"\n\n¨K"+(c.gHtmlBlocks.push(f)-1)+"K\n\n"},g=0;g<e.length;++g)for(var h,i=new RegExp("^ {0,3}<"+e[g]+"\\b[^>]*>","im"),j="<"+e[g]+"\\b[^>]*>",k="</"+e[g]+">";-1!==(h=d.helper.regexIndexOf(a,i));){var l=d.helper.splitAtIndex(a,h),m=d.helper.replaceRecursiveRegExp(l[1],f,j,k,"im");if(m===l[1])break;a=l[0].concat(m)}return a=a.replace(/(\n {0,3}(<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,d.subParser("hashElement")(a,b,c)),a=d.helper.replaceRecursiveRegExp(a,function(a){return"\n\n¨K"+(c.gHtmlBlocks.push(a)-1)+"K\n\n"},"^ {0,3}<!--","-->","gm"),a=a.replace(/(?:\n\n)( {0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,d.subParser("hashElement")(a,b,c)),a=c.converter._dispatch("hashHTMLBlocks.after",a,b,c)}),d.subParser("hashHTMLSpans",function(a,b,c){"use strict";function d(a){return"¨C"+(c.gHtmlSpans.push(a)-1)+"C"}return a=c.converter._dispatch("hashHTMLSpans.before",a,b,c),a=a.replace(/<[^>]+?\/>/gi,function(a){return d(a)}),a=a.replace(/<([^>]+?)>[\s\S]*?<\/\1>/g,function(a){return d(a)}),a=a.replace(/<([^>]+?)\s[^>]+?>[\s\S]*?<\/\1>/g,function(a){return d(a)}),a=a.replace(/<[^>]+?>/gi,function(a){return d(a)}),a=c.converter._dispatch("hashHTMLSpans.after",a,b,c)}),d.subParser("unhashHTMLSpans",function(a,b,c){"use strict";a=c.converter._dispatch("unhashHTMLSpans.before",a,b,c);for(var d=0;d<c.gHtmlSpans.length;++d){for(var e=c.gHtmlSpans[d],f=0;/¨C(\d+)C/.test(e);){var g=RegExp.$1;if(e=e.replace("¨C"+g+"C",c.gHtmlSpans[g]),10===f)break;++f}a=a.replace("¨C"+d+"C",e)}return a=c.converter._dispatch("unhashHTMLSpans.after",a,b,c)}),d.subParser("hashPreCodeTags",function(a,b,c){"use strict";a=c.converter._dispatch("hashPreCodeTags.before",a,b,c);var e=function(a,e,f,g){var h=f+d.subParser("encodeCode")(e,b,c)+g;return"\n\n¨G"+(c.ghCodeBlocks.push({text:a,codeblock:h})-1)+"G\n\n"};return a=d.helper.replaceRecursiveRegExp(a,e,"^ {0,3}<pre\\b[^>]*>\\s*<code\\b[^>]*>","^ {0,3}</code>\\s*</pre>","gim"),a=c.converter._dispatch("hashPreCodeTags.after",a,b,c)}),d.subParser("headers",function(a,b,c){"use strict";function e(a){var e;if(b.customizedHeaderId){var f=a.match(/\{([^{]+?)}\s*$/);f&&f[1]&&(a=f[1])}return e=d.helper.isString(b.prefixHeaderId)?b.prefixHeaderId+a:!0===b.prefixHeaderId?"section "+a:a,e=g?e.replace(/ /g,"-").replace(/&amp;/g,"").replace(/¨T/g,"").replace(/¨D/g,"").replace(/[&+$,\/:;=?@"#{}|^¨~\[\]`\\*)(%.!'<>]/g,"").toLowerCase():e.replace(/[^\w]/g,"").toLowerCase(),c.hashLinkCounts[e]?e=e+"-"+c.hashLinkCounts[e]++:c.hashLinkCounts[e]=1,e}a=c.converter._dispatch("headers.before",a,b,c);var f=isNaN(parseInt(b.headerLevelStart))?1:parseInt(b.headerLevelStart),g=b.ghCompatibleHeaderId,h=b.smoothLivePreview?/^(.+)[ \t]*\n={2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n=+[ \t]*\n+/gm,i=b.smoothLivePreview?/^(.+)[ \t]*\n-{2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n-+[ \t]*\n+/gm;a=a.replace(h,function(a,g){var h=d.subParser("spanGamut")(g,b,c),i=b.noHeaderId?"":' id="'+e(g)+'"',j=f,k="<h"+j+i+">"+h+"</h"+j+">";return d.subParser("hashBlock")(k,b,c)}),a=a.replace(i,function(a,g){var h=d.subParser("spanGamut")(g,b,c),i=b.noHeaderId?"":' id="'+e(g)+'"',j=f+1,k="<h"+j+i+">"+h+"</h"+j+">";return d.subParser("hashBlock")(k,b,c)});var j=b.requireSpaceBeforeHeadingText?/^(#{1,6})[ \t]+(.+?)[ \t]*#*\n+/gm:/^(#{1,6})[ \t]*(.+?)[ \t]*#*\n+/gm;return a=a.replace(j,function(a,g,h){var i=h;b.customizedHeaderId&&(i=h.replace(/\s?\{([^{]+?)}\s*$/,""));var j=d.subParser("spanGamut")(i,b,c),k=b.noHeaderId?"":' id="'+e(h)+'"',l=f-1+g.length,m="<h"+l+k+">"+j+"</h"+l+">";return d.subParser("hashBlock")(m,b,c)}),a=c.converter._dispatch("headers.after",a,b,c)}),d.subParser("horizontalRule",function(a,b,c){"use strict";a=c.converter._dispatch("horizontalRule.before",a,b,c);var e=d.subParser("hashBlock")("<hr />",b,c);return a=a.replace(/^ {0,2}( ?-){3,}[ \t]*$/gm,e),a=a.replace(/^ {0,2}( ?\*){3,}[ \t]*$/gm,e),a=a.replace(/^ {0,2}( ?_){3,}[ \t]*$/gm,e),a=c.converter._dispatch("horizontalRule.after",a,b,c)}),d.subParser("images",function(a,b,c){"use strict";function e(a,b,e,f,g,h,i,j){var k=c.gUrls,l=c.gTitles,m=c.gDimensions;if(e=e.toLowerCase(),j||(j=""),a.search(/\(<?\s*>? ?(['"].*['"])?\)$/m)>-1)f="";else if(""===f||null===f){if(""!==e&&null!==e||(e=b.toLowerCase().replace(/ ?\n/g," ")),f="#"+e,d.helper.isUndefined(k[e]))return a;f=k[e],d.helper.isUndefined(l[e])||(j=l[e]),d.helper.isUndefined(m[e])||(g=m[e].width,h=m[e].height)}b=b.replace(/"/g,"&quot;").replace(d.helper.regexes.asteriskAndDash,d.helper.escapeCharactersCallback),f=f.replace(d.helper.regexes.asteriskAndDash,d.helper.escapeCharactersCallback);var n='<img src="'+f+'" alt="'+b+'"';return j&&(j=j.replace(/"/g,"&quot;").replace(d.helper.regexes.asteriskAndDash,d.helper.escapeCharactersCallback),n+=' title="'+j+'"'),g&&h&&(g="*"===g?"auto":g,h="*"===h?"auto":h,n+=' width="'+g+'"',n+=' height="'+h+'"'),n+=" />"}a=c.converter._dispatch("images.before",a,b,c);var f=/!\[([^\]]*?)][ \t]*()\([ \t]?<?([\S]+?(?:\([\S]*?\)[\S]*?)?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(["'])([^"]*?)\6)?[ \t]?\)/g,g=/!\[([^\]]*?)][ \t]*()\([ \t]?<([^>]*)>(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(?:(["'])([^"]*?)\6))?[ \t]?\)/g,h=/!\[([^\]]*?)] ?(?:\n *)?\[(.*?)]()()()()()/g,i=/!\[([^\[\]]+)]()()()()()/g;return a=a.replace(h,e),a=a.replace(g,e),a=a.replace(f,e),a=a.replace(i,e),a=c.converter._dispatch("images.after",a,b,c)}),d.subParser("italicsAndBold",function(a,b,c){"use strict";function e(a,e,f){return b.simplifiedAutoLink&&(a=d.subParser("simplifiedAutoLinks")(a,b,c)),e+a+f}return a=c.converter._dispatch("italicsAndBold.before",a,b,c),b.literalMidWordUnderscores?(a=a.replace(/\b___(\S[\s\S]*)___\b/g,function(a,b){return e(b,"<strong><em>","</em></strong>")}),a=a.replace(/\b__(\S[\s\S]*)__\b/g,function(a,b){return e(b,"<strong>","</strong>")}),a=a.replace(/\b_(\S[\s\S]*?)_\b/g,function(a,b){return e(b,"<em>","</em>")})):(a=a.replace(/___(\S[\s\S]*?)___/g,function(a,b){return/\S$/.test(b)?e(b,"<strong><em>","</em></strong>"):a}),a=a.replace(/__(\S[\s\S]*?)__/g,function(a,b){return/\S$/.test(b)?e(b,"<strong>","</strong>"):a}),a=a.replace(/_([^\s_][\s\S]*?)_/g,function(a,b){return/\S$/.test(b)?e(b,"<em>","</em>"):a})),b.literalMidWordAsterisks?(a=a.trim().replace(/(?:^| +)\*{3}(\S[\s\S]*?)\*{3}(?: +|$)/g,function(a,b){return e(b," <strong><em>","</em></strong> ")}),a=a.trim().replace(/(?:^| +)\*{2}(\S[\s\S]*?)\*{2}(?: +|$)/g,function(a,b){return e(b," <strong>","</strong> ")}),a=a.trim().replace(/(?:^| +)\*{1}(\S[\s\S]*?)\*{1}(?: +|$)/g,function(a,b){return e(b," <em>","</em>"+(" "===a.slice(-1)?" ":""))})):(a=a.replace(/\*\*\*(\S[\s\S]*?)\*\*\*/g,function(a,b){return/\S$/.test(b)?e(b,"<strong><em>","</em></strong>"):a}),a=a.replace(/\*\*(\S[\s\S]*?)\*\*/g,function(a,b){return/\S$/.test(b)?e(b,"<strong>","</strong>"):a}),a=a.replace(/\*([^\s*][\s\S]*?)\*/g,function(a,b){return/\S$/.test(b)?e(b,"<em>","</em>"):a})),a=c.converter._dispatch("italicsAndBold.after",a,b,c)}),d.subParser("lists",function(a,b,c){"use strict";function e(a,e){c.gListLevel++,a=a.replace(/\n{2,}$/,"\n"),a+="¨0";var f=/(\n)?(^ {0,3})([*+-]|\d+[.])[ \t]+((\[(x|X| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(¨0| {0,3}([*+-]|\d+[.])[ \t]+))/gm,g=/\n[ \t]*\n(?!¨0)/.test(a);return b.disableForced4SpacesIndentedSublists&&(f=/(\n)?(^ {0,3})([*+-]|\d+[.])[ \t]+((\[(x|X| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(¨0|\2([*+-]|\d+[.])[ \t]+))/gm),a=a.replace(f,function(a,e,f,h,i,j,k){k=k&&""!==k.trim();var l=d.subParser("outdent")(i,b,c),m="";return j&&b.tasklists&&(m=' class="task-list-item" style="list-style-type: none;"',l=l.replace(/^[ \t]*\[(x|X| )?]/m,function(){var a='<input type="checkbox" disabled style="margin: 0px 0.35em 0.25em -1.6em; vertical-align: middle;"';return k&&(a+=" checked"),a+=">"})),l=l.replace(/^([-*+]|\d\.)[ \t]+[\S\n ]*/g,function(a){return"¨A"+a}),e||l.search(/\n{2,}/)>-1?(l=d.subParser("githubCodeBlocks")(l,b,c),l=d.subParser("blockGamut")(l,b,c)):(l=d.subParser("lists")(l,b,c),l=l.replace(/\n$/,""),l=d.subParser("hashHTMLBlocks")(l,b,c),l=l.replace(/\n\n+/g,"\n\n"),l=l.replace(/\n\n/g,"¨B"),l=g?d.subParser("paragraphs")(l,b,c):d.subParser("spanGamut")(l,b,c),l=l.replace(/¨B/g,"\n\n")),l=l.replace("¨A",""),l="<li"+m+">"+l+"</li>\n"}),a=a.replace(/¨0/g,""),c.gListLevel--,e&&(a=a.replace(/\s+$/,"")),a}function f(a,c,d){var f=b.disableForced4SpacesIndentedSublists?/^ ?\d+\.[ \t]/gm:/^ {0,3}\d+\.[ \t]/gm,g=b.disableForced4SpacesIndentedSublists?/^ ?[*+-][ \t]/gm:/^ {0,3}[*+-][ \t]/gm,h="ul"===c?f:g,i="";return-1!==a.search(h)?function a(b){var j=b.search(h);-1!==j?(i+="\n<"+c+">\n"+e(b.slice(0,j),!!d)+"</"+c+">\n",c="ul"===c?"ol":"ul",h="ul"===c?f:g,a(b.slice(j))):i+="\n<"+c+">\n"+e(b,!!d)+"</"+c+">\n"}(a):i="\n<"+c+">\n"+e(a,!!d)+"</"+c+">\n",i}return a=c.converter._dispatch("lists.before",a,b,c),a+="¨0",a=c.gListLevel?a.replace(/^(( {0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(¨0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,function(a,b,c){return f(b,c.search(/[*+-]/g)>-1?"ul":"ol",!0)}):a.replace(/(\n\n|^\n?)(( {0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(¨0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,function(a,b,c,d){return f(c,d.search(/[*+-]/g)>-1?"ul":"ol",!1)}),a=a.replace(/¨0/,""),a=c.converter._dispatch("lists.after",a,b,c)}),d.subParser("outdent",function(a,b,c){"use strict";return a=c.converter._dispatch("outdent.before",a,b,c),a=a.replace(/^(\t|[ ]{1,4})/gm,"¨0"),a=a.replace(/¨0/g,""),a=c.converter._dispatch("outdent.after",a,b,c)}),d.subParser("paragraphs",function(a,b,c){"use strict";a=c.converter._dispatch("paragraphs.before",a,b,c),a=a.replace(/^\n+/g,""),a=a.replace(/\n+$/g,"");for(var e=a.split(/\n{2,}/g),f=[],g=e.length,h=0;h<g;h++){var i=e[h];i.search(/¨(K|G)(\d+)\1/g)>=0?f.push(i):i.search(/\S/)>=0&&(i=d.subParser("spanGamut")(i,b,c),i=i.replace(/^([ \t]*)/g,"<p>"),i+="</p>",f.push(i))}for(g=f.length,h=0;h<g;h++){for(var j="",k=f[h],l=!1;/¨(K|G)(\d+)\1/.test(k);){var m=RegExp.$1,n=RegExp.$2;j="K"===m?c.gHtmlBlocks[n]:l?d.subParser("encodeCode")(c.ghCodeBlocks[n].text,b,c):c.ghCodeBlocks[n].codeblock,j=j.replace(/\$/g,"$$$$"),k=k.replace(/(\n\n)?¨(K|G)\d+\2(\n\n)?/,j),/^<pre\b[^>]*>\s*<code\b[^>]*>/.test(k)&&(l=!0)}f[h]=k}return a=f.join("\n"),a=a.replace(/^\n+/g,""),a=a.replace(/\n+$/g,""),c.converter._dispatch("paragraphs.after",a,b,c)}),d.subParser("runExtension",function(a,b,c,d){"use strict";if(a.filter)b=a.filter(b,d.converter,c);else if(a.regex){var e=a.regex;e instanceof RegExp||(e=new RegExp(e,"g")),b=b.replace(e,a.replace)}return b}),d.subParser("spanGamut",function(a,b,c){"use strict";return a=c.converter._dispatch("spanGamut.before",a,b,c),a=d.subParser("codeSpans")(a,b,c),a=d.subParser("escapeSpecialCharsWithinTagAttributes")(a,b,c),a=d.subParser("encodeBackslashEscapes")(a,b,c),a=d.subParser("images")(a,b,c),a=d.subParser("anchors")(a,b,c),a=d.subParser("autoLinks")(a,b,c),a=d.subParser("italicsAndBold")(a,b,c),a=d.subParser("strikethrough")(a,b,c),a=d.subParser("simplifiedAutoLinks")(a,b,c),a=d.subParser("hashHTMLSpans")(a,b,c),a=d.subParser("encodeAmpsAndAngles")(a,b,c),a=b.simpleLineBreaks?a.replace(/\n/g,"<br />\n"):a.replace(/  +\n/g,"<br />\n"),a=c.converter._dispatch("spanGamut.after",a,b,c)}),d.subParser("strikethrough",function(a,b,c){"use strict";function e(a){return b.simplifiedAutoLink&&(a=d.subParser("simplifiedAutoLinks")(a,b,c)),"<del>"+a+"</del>"}return b.strikethrough&&(a=c.converter._dispatch("strikethrough.before",a,b,c),a=a.replace(/(?:~){2}([\s\S]+?)(?:~){2}/g,function(a,b){return e(b)}),a=c.converter._dispatch("strikethrough.after",a,b,c)),a}),d.subParser("stripLinkDefinitions",function(a,b,c){"use strict";var e=/^ {0,3}\[(.+)]:[ \t]*\n?[ \t]*<?([^>\s]+)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*\n?[ \t]*(?:(\n*)["|'(](.+?)["|')][ \t]*)?(?:\n+|(?=¨0))/gm;return a+="¨0",a=a.replace(e,function(a,e,f,g,h,i,j){return e=e.toLowerCase(),c.gUrls[e]=d.subParser("encodeAmpsAndAngles")(f,b,c),i?i+j:(j&&(c.gTitles[e]=j.replace(/"|'/g,"&quot;")),b.parseImgDimensions&&g&&h&&(c.gDimensions[e]={width:g,height:h}),"")}),a=a.replace(/¨0/,"")}),d.subParser("tables",function(a,b,c){"use strict";function e(a){return/^:[ \t]*--*$/.test(a)?' style="text-align:left;"':/^--*[ \t]*:[ \t]*$/.test(a)?' style="text-align:right;"':/^:[ \t]*--*[ \t]*:$/.test(a)?' style="text-align:center;"':""}function f(a,e){var f="";return a=a.trim(),b.tableHeaderId&&(f=' id="'+a.replace(/ /g,"_").toLowerCase()+'"'),a=d.subParser("spanGamut")(a,b,c),"<th"+f+e+">"+a+"</th>\n"}function g(a,e){return"<td"+e+">"+d.subParser("spanGamut")(a,b,c)+"</td>\n"}function h(a,b){for(var c="<table>\n<thead>\n<tr>\n",d=a.length,e=0;e<d;++e)c+=a[e];for(c+="</tr>\n</thead>\n<tbody>\n",e=0;e<b.length;++e){c+="<tr>\n";for(var f=0;f<d;++f)c+=b[e][f];c+="</tr>\n"}return c+="</tbody>\n</table>\n"}if(!b.tables)return a;var i=/^ {0,3}\|?.+\|.+\n[ \t]{0,3}\|?[ \t]*:?[ \t]*(?:-|=){2,}[ \t]*:?[ \t]*\|[ \t]*:?[ \t]*(?:-|=){2,}[\s\S]+?(?:\n\n|¨0)/gm;
return a=c.converter._dispatch("tables.before",a,b,c),a=a.replace(/\\(\|)/g,d.helper.escapeCharactersCallback),a=a.replace(i,function(a){var b,c=a.split("\n");for(b=0;b<c.length;++b)/^ {0,3}\|/.test(c[b])&&(c[b]=c[b].replace(/^ {0,3}\|/,"")),/\|[ \t]*$/.test(c[b])&&(c[b]=c[b].replace(/\|[ \t]*$/,""));var i=c[0].split("|").map(function(a){return a.trim()}),j=c[1].split("|").map(function(a){return a.trim()}),k=[],l=[],m=[],n=[];for(c.shift(),c.shift(),b=0;b<c.length;++b)""!==c[b].trim()&&k.push(c[b].split("|").map(function(a){return a.trim()}));if(i.length<j.length)return a;for(b=0;b<j.length;++b)m.push(e(j[b]));for(b=0;b<i.length;++b)d.helper.isUndefined(m[b])&&(m[b]=""),l.push(f(i[b],m[b]));for(b=0;b<k.length;++b){for(var o=[],p=0;p<l.length;++p)d.helper.isUndefined(k[b][p]),o.push(g(k[b][p],m[p]));n.push(o)}return h(l,n)}),a=c.converter._dispatch("tables.after",a,b,c)}),d.subParser("unescapeSpecialChars",function(a,b,c){"use strict";return a=c.converter._dispatch("unescapeSpecialChars.before",a,b,c),a=a.replace(/¨E(\d+)E/g,function(a,b){var c=parseInt(b);return String.fromCharCode(c)}),a=c.converter._dispatch("unescapeSpecialChars.after",a,b,c)});var r=this;"undefined"!=typeof module&&module.exports?module.exports=d:"function"==typeof define&&define.amd?define(function(){"use strict";return d}):r.showdown=d}.call(this);
//# sourceMappingURL=jquery.typer.min.js.map
