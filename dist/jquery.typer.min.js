/*! jQuery Typer Plugin v0.10.7 | https://github.com/misonou/jquery-typer | The MIT License (MIT) */

!function(a,b,c,d,e,f,g,h,i,j){"use strict";function k(a,b){var c=this;c.typer=a,c.baseCaret=new r(a,c),c.extendCaret=new r(a,c),b&&c.select(b)}function l(a,b,c,d){var e=this;e.typer=a,e.id=b,e.element=c||null,e.options=d||{}}function m(a,b,c,d,e){var f=nb(this,e);f.eventName=a,f.source=qb[qb.length-1][1],f.timestamp=+new Date,f.typer=b,f.widget=c||null,f.data=void 0!==d?d:null}function n(a,b,c){var d=this;d.childNodes=[],d.nodeType=a,d.element=b,d.widget=c}function o(a,b,c){var d=this;d.whatToShow=b,d.filter=c||null,d.currentNode=a,d.root=a}function p(a,b,c){var d=this;d.whatToShow=b,d.filter=c||null,ra(d,H(a,o)||new o(a,Ra|cb))}function q(a){this.typer=a,this.changes=[]}function r(a,b){this.typer=a,this.selection=b||null}function s(){this.weakMap=new h}function t(a){return function b(c,d,e){var f=b.executing;try{return b.executing=!0,c.apply(e||this,d)}finally{b.executing=f,!b.executing&&a&&a()}}}function u(b,c,d,e,f){var g=qb.length,h=qb[g-1]||(qb.push([b,c||"script"]),qb[g]);h[0]&&b&&h[0]!==b?qb.push([b,"script"]):h===qb[0]&&Ka.indexOf(c)>Ka.indexOf(h[1])&&(h[1]=c);try{return(d||a.noop).apply(f||null,e)}finally{g?qb.splice(g):(h[0]=null,setImmediate(function(){qb.splice(g)}))}}function v(a,b,c,d){Object.defineProperty(a,b,{configurable:!d,writable:!0,value:c})}function w(a,b){a.prototype=b,v(b,"constructor",a)}function x(a,b,c){return i.slice.call(a||{},b||0,c)}function y(a){return y[a]=y[a]||function(b){return b[a]},y[a]}function z(b,c){var d;return a.each(b,function(a,b){return d=c.call(this,b)&&b,!d}),d}function A(a,b){return b=b||a.currentNode,b&&a.whatToShow&(H(a,o)?b.nodeType:1<<b.nodeType-1)?a.filter?(a.filter.acceptNode||a.filter).call(a.filter,b):1:3}function B(b,c,d,e){switch(b.currentNode=d=d||b.currentNode,c=c||a.noop,A(b)){case 2:return;case 1:c(d)}for(var f;(f=b.nextNode())&&(!e||(mb(e)?e(f):f!==e||void c(f)));c(f));}function C(b,c,d,e){var f=[];return B(b,i.push.bind(f),d,e),c?a.map(f,c):f}function D(a){return d(a||"").replace(/^[\s\u200b]+|[\s\u200b]+$/g,"")}function E(a){return a=d(a||""),a.charAt(0).toUpperCase()+a.slice(1)}function F(a){return a=d(a||""),a.charAt(0).toLowerCase()+a.slice(1)}function G(a){return a&&a.tagName&&a.tagName.toLowerCase()}function H(b,c){return!(!b||!c)&&(c.prototype?b instanceof c&&b:c.toFixed?b.nodeType&c&&b:("*"===c||G(b)===c||a(b).is(c))&&b)}function I(a){return a&&1===a.nodeType&&a}function J(a){return a&&3===a.nodeType&&a}function K(a,b,c){var d=a.data;return c>=0&&(b===a.length||d.slice(b)===La)?1:c<=0&&(!b||d.slice(0,b)===La)?-1:0}function L(a,b){for(;a.parentNode&&!H(a,b);a=a.parentNode);return a}function M(b){var c={};return a.each(a.makeArray(b&&b.attributes),function(a,b){c[b.nodeName]=b.value}),c}function N(b,c){var d=M(b),e=M(c);return a.each(e,function(a,b){b===d[a]&&(delete d[a],delete e[a])}),!Object.keys(d)[0]&&!Object.keys(e)[0]}function O(a,b,c){if(a===b)return 0;var d=a&&b&&kb.call(a,b);return 2&d?c&&8&d||1&d?NaN:1:4&d?c&&16&d||1&d?NaN:-1:NaN}function P(a,b){return a&&b&&!(1&kb.call(a.commonAncestorContainer||a,b.commonAncestorContainer||b))}function Q(b,c){return b===c||a.contains(b,c)}function R(a,b){for(b=b||a;a&&a!==b&&20!==kb.call(a,b);a=a.parentNode);return a}function S(a,b){var c=a.length||a.childNodes.length;return b===c||0===b&&1/b===-(1/0)?c:(c+b)%c||0}function T(a,b){for(var c,d=new p(new o(a,cb|Za),5),e=0;(c=d.nextNode())&&c!==b;e+=c.length||0);return e}function U(a,b,d,g){if(a&&mb(a.getRange))return a.getRange();var h;if(H(a,e)?(h=c.createRange(),+b!==b?(h["contents"!==b&&a.parentNode?"selectNode":"selectNodeContents"](a),"boolean"==typeof b&&h.collapse(b)):h.setStart(a,S(a,b)),H(d,e)&&P(a,d)&&h.setEnd(d,S(d,g))):H(a,f)&&(h=a.cloneRange(),h.collapsed||"boolean"!=typeof b||h.collapse(b)),H(b,f)&&P(h,b)){var i=h.collapsed&&b.collapsed?-1:1;lb.call(h,0,b)*i<0&&h.setStart(b.startContainer,b.startOffset),lb.call(h,2,b)*i>0&&h.setEnd(b.endContainer,b.endOffset)}return h}function V(a,b){return a=H(a,f)||U(a),b=H(b,f)||U(b),P(a,b)&&lb.call(a,3,b)<=0&&lb.call(a,1,b)>=0}function W(a,b){return a=H(a,f)||U(a),b=H(b,f)||U(b),P(a,b)&&lb.call(a,0,b)<=0&&lb.call(a,2,b)>=0}function X(a,b){return a=H(a,f)||U(a),b=H(b,f)||U(b),P(a,b)&&0===lb.call(a,0,b)&&0===lb.call(a,2,b)}function Y(a,b,c){a=H(a,f)||U(a),b=H(b,f)||U(b);var d=P(a,b)?lb.call(a,0,b)+lb.call(a,2,b):NaN;return c&&(0!==d&&V(a,b)||0===d&&!X(a,b))?NaN:d&&d/Math.abs(d)}function Z(a,b){function c(c){return Math.abs(a[c]-b[c])<1}return c("left")&&c("top")&&c("bottom")&&c("right")}function $(a,b){return b.left>=a.left&&b.right<=a.right&&b.top>=a.top&&b.bottom<=a.bottom}function _(a,b,c){return a>=c.left&&a<=c.right&&b>=c.top&&b<=c.bottom}function aa(a){var b=H(a,f)||U(a,"contents"),c=b.collapsed&&J(b.startContainer)&&!b.startContainer.length;c&&(b.startContainer.data=La);try{if(b.collapsed&&b.startOffset===b.startContainer.length){b.setStart(b.startContainer,b.startOffset-1);var d=b.getClientRects()[0];if(d)return[{top:d.top,left:d.right,right:d.right,bottom:d.bottom,width:0,height:d.height}]}return b.getClientRects()}finally{c&&(b.startContainer.data="")}}function ba(a){if(ob.rangeCount){var b=ob.getRangeAt(0);return Q(a,b.commonAncestorContainer)&&b}}function ca(b,d,e){var f=jb.call(c,b,d);if(f&&e&&e!==c.body&&_(b,d,e.getBoundingClientRect())){var g=[];try{for(var h;O(e,h=f.commonAncestorContainer,!0);){var i=a(h).parentsUntil(R(e,h)).slice(-1)[0]||h;if(i===g[g.length-1])return null;i.style.pointerEvents="none",g[g.length]=i,f=jb.call(c,b,d)}}finally{a(g).css("pointer-events","")}}return f}function da(b){return H(b,g)||a(c.createDocumentFragment()).append(b)[0]}function ea(a){return c.createTextNode(a||La)}function fa(a){return c.createElement(a)}function ga(a,b){return c.createNodeIterator(a,b,null,!1)}function ha(b,c){c!==!1&&B(ga(b,1),function(a){Da.update(a,b.parentNode)}),a(b).remove()}function ia(b,c){return a.each(c,function(c,d){b=a(d.cloneNode(!1)).append(b)[0]}),H(b,e)||da(b)}function ja(a){try{ob.removeAllRanges()}catch(a){var b=c.body.createTextRange();b.collapse(),b.select(),ob.removeAllRanges()}try{ob.addRange(a)}catch(b){ob.rangeCount||(ob.addRange(U(c.body)),ob.removeAllRanges(),ob.addRange(a))}}function ka(b,d){a(b).bind("input textinput",function(a){if(a.stopPropagation(),"textinput"===a.type||d){var e=c.createEvent("Event");e.initEvent("input"===a.type?"input":"textInput",!0,!1),e.data=a.data,(d||b).dispatchEvent(e)}})}function la(j,s){function v(){}function A(a){switch(a){case eb:return xa.concat(ua.getWidgets().slice(0,-1));case fb:return xa;case gb:return ua.getWidgets().reverse().concat(xa);case hb:return ua.focusNode.widget}}function K(a){return z(A(gb),function(b){var c=ya[b.id];return c.commands&&mb(c.commands[a])})}function O(b,c){return Array.isArray(b)||(b=a.makeArray(H(b,l)||A(b))),!!z(b,function(a){return!a.destroyed&&mb(ya[a.id][c])})}function P(b,c,d,e,f){var g,h=a.makeArray(H(c,l)||A(c));return O(h,d)&&$a(b,function(){a.each(h,function(a,b){var h=ya[b.id];if(!b.destroyed&&mb(h[d]))return g=!0,h[d].call(h,new m(d,va,b,e,f)),c!==gb})}),H(c,l)&&O(fb,"widget"+E(d))&&setImmediate(function(){P(b,fb,"widget"+E(d),null,{targetWidget:c})}),g}function R(b,c,d,e,f){return f=f||a.Event(d),P(b,c,d,e,{preventDefault:f.preventDefault.bind(f),isDefaultPrevented:function(){return f.isDefaultPrevented()}}),f.isDefaultPrevented()}function S(c,d){function e(a,b){if(b.parentNode!==a&&b!==a){b.parentNode&&f(b,!0);for(var c=a.childNodes.length;c&&Y(b.element,a.childNodes[c-1].element)<0;c--);b.parentNode=a,b.previousSibling=a.childNodes[c-1],b.nextSibling=a.childNodes[c],(b.previousSibling||{}).nextSibling=b,(b.nextSibling||{}).previousSibling=b,a.childNodes.splice(c,0,b)}}function f(a,b){if(a.parentNode){var c=a.parentNode.childNodes.indexOf(a);c>=0&&(d&&!b&&a.widget.element===a.element&&(a.widget.destroyed=!0,P(null,a.widget,"destroy")),a.parentNode.childNodes.splice(c,1),a.parentNode=null,(a.previousSibling||{}).nextSibling=a.nextSibling,(a.nextSibling||{}).previousSibling=a.previousSibling)}}function k(b){var e=b.parentNode||u.get(c);if(H(e,Ra)||b.widget&&H(b.element,ya[b.widget.id].element)||(d&&b.widget&&b.widget.element===b.element&&(b.widget.destroyed=!0,b.widget.id!==Qa&&P(null,b.widget,"destroy")),a.each(ya,function(a,c){if(H(b.element,c.element))return b.widget=new l(x,a,b.element,c.options),d&&b.widget.id!==Qa&&P(null,b.widget,"init"),!1})),b.widget&&b.widget.destroyed&&delete b.widget,b.widget&&b.widget.id===Qa&&!H(e,cb))b.widget=e.widget,b.nodeType=Ra;else{b.widget=b.widget||e.widget;var f=ya[b.widget.id];b.widget!==e.widget||H(e,Ra)?H(b.element,f.editable)||f.inline&&!f.editable?b.nodeType=f.inline?Ya:H(b.element,Ja)?Ta:Sa:b.nodeType=f.inline&&b.widget!==e.widget&&H(e,cb)?Xa:Ra:b.nodeType=H(b.element,Ja)?Ua:Wa}}function m(b){a.each(b.childNodes.slice(0),function(a,b){Q(c,b.element)||(f(b),u.delete(b.element))})}function o(b,c){var d=[u.get(b)];m(d[0]);var f=(c?a(b).children():a(b).children().find("*").andSelf()).not("br");f.each(function(a,b){for(;!Q(d[0].element,b);)d.shift();var f=!u.has(b),g=u.get(b)||new n(0,b);e(d[0],g),m(g),k(g),u.set(b,g),c&&f&&(o(b),ib&&ka(b,j)),d.unshift(g)})}function p(b){var c=a.map(b,function(a){return(a.addedNodes[0]||a.removedNodes[0])&&"br"!==G(a.target)?a.target:null});i.push.apply(v,c)}function q(){t?p(t.takeRecords()):(clearImmediate(q.handle),q.handle=setImmediate(function(){v.push(null)})),null===v[0]?o(v.splice(0)&&c):v[0]&&a(c.parentNode||c).find(a.unique(v.splice(0))).each(function(a,b){o(b,!!t)})}function r(a){if(q(),(J(a)||"br"===G(a))&&(a=a.parentNode||a),Q(c,a)){for(var b=a;!u.has(b);b=b.parentNode);return b!==a&&o(b),u.get(a)}}var t,u=new h,v=[],w={},x=Q(j,c)?va:w;return c.parentNode||(c=H(c,g)||da(c)),b.MutationObserver&&d&&(t=new MutationObserver(p),t.observe(c,{subtree:!0,childList:!0})),u.set(c,new n(wa,c,new l(x,Pa,j,s))),v.push(null),nb(w,{getNode:r,getEditableNode:function(a){var b=r(a)||u.get(c);return H(b,Ra)?r(b.widget.element):b}})}function Z(a,b){var c=new r(va);return c.moveToText(a,b),c.getRange()}function $(b){return H(b,Sa)&&!b.firstChild?(a(b.element).html("<p>"+(D(b.element.textContent)||Ma)+"</p>"),!0):H(b,Ta)&&!b.element.firstChild?(a(ea()).appendTo(b.element),!0):void 0}function _(a){var b=ua.baseCaret,c=ua.extendCaret;if(a===b.textNode||a===c.textNode)return!0;if(ib){var d=b.textNode&&(a===b.textNode.previousSibling&&0===b.offset||a===b.textNode.nextSibling&&b.offset===b.textNode.length),e=c.textNode&&(a===c.textNode.previousSibling&&0===c.offset||a===c.textNode.nextSibling&&c.offset===c.textNode.length);return d||e}}function aa(b){b=H(b,f)||U(j,"contents"),$a("script",function(){B(new k(va,b).createTreeWalker(cb|Sa|Za),function(b){if(!$(b)){var c=b.element;if(H(b,Sa))return void a(c).contents().each(function(b,d){if(d.parentNode===c){for(var e=[];d&&(J(d)||"br"===G(d)||H(va.getNode(d),bb));d=d.nextSibling)(e.length||I(d)||D(d.data))&&e.push(d);e.length&&a(e).wrap("<p>")}});if(H(b,Ua|Ta)){var d=a(">br:last-child",c)[0];d&&!d.nextSibling&&(a(ea()).insertBefore(d),ha(d));var e=a(">br:first-child",c)[0];e&&!e.previousSibling&&ha(e)}H(b,cb)&&(a(">br",c).each(function(b,c){J(c.nextSibling)||a(ea()).insertAfter(c)}),a(c).contents().each(function(a,b){if(J(b)&&!_(b)){var c=b.nextSibling;/\b\u00a0$/.test(b.data)&&J(c)&&!/^[^\S\u00a0]/.test(c.data)&&(b.data=b.data.slice(0,-1)+" "),b.data=b.data.replace(/(?=.)\u200b+(?=.)/g,"").replace(/\b\u00a0\b/g," ")||La,J(c)&&!_(c)&&(c.data=b.data+c.data,ha(b))}}),H(b,Wa)&&c!==ua.startElement&&c!==ua.endElement&&G(c.previousSibling)===G(c)&&N(c,c.previousSibling)&&(a(c).contents().appendTo(c.previousSibling),ha(c)))}}),a('br[type="_moz"]',j).remove()})}function ma(b,d,h){var i=H(b,k)?b.direction:1;b=H(b,f)||U(b);var l="cut"===d?"extractContents":"paste"===d?"deleteContents":"cloneContents",m="paste"!==d,n="copy"!==d,o=c.createDocumentFragment(),p=new k(va,b),q=p.isSingleEditable||(p.startNode.widget.id===Pa||ya[p.startNode.widget.id].textFlow)&&(p.endNode.widget.id===Pa||ya[p.endNode.widget.id].textFlow);return $a(null,function(){if(!b.collapsed){var c=[[j,o]];B(p.createTreeWalker(db,function(d){var f,h=d.element;if(d===p.focusNode&&H(d,Sa))return 3;for(;H(h,e)&&!Q(c[0][0],h);)c.shift();if(W(b,h))return m&&(f=h.cloneNode(!0),a(c[0][1]).append(h===j?f.childNodes:f)),n&&(H(d,Sa)?(a(h).html(Na),Aa.track(d)):H(d,Ta)?(a(h).html(Ma),Aa.track(d)):ha(h)),2;if(H(d,cb)&&(f=U(h,b)[l]()),m){if(h!==j&&(!H(d,Ua|Wa)||f&&G(f.firstChild)!==G(h))){var i=h.cloneNode(!1);c[0][1].appendChild(i),H(i,g)||c.unshift([h,i])}f&&c[0][1].appendChild(f)}return n&&Aa.track(d),H(d,cb)?2:1}))}if(mb(h)){var d=U(b,!!q||i>0),f=q?U(b,!1):d,r=new k(va,U(d,f));H(r.startNode,_a)&&r.startNode===r.endNode&&$(r.startNode)&&(r=new k(va,U(r.startNode.element,"contents"))),Y(d,r.startNode.element)<0&&(d=U(r.startNode.element,0)),h(r,d,f)}}),o}function na(b,c){c=H(c,e)||a.parseHTML(d(c||"").replace(/\u000d/g,"").replace(/</g,"&lt;").replace(/\n{2,}/g,"</p><p>").replace(/\n/g,"<br>").replace(/.*/,"<p>$&</p>")),c=x(da(c).childNodes),ma(b,"paste",function(b,d){var e,f=("__root__ "+(ya[b.focusNode.widget.id].allowedWidgets||"*")).split(" "),g=d.cloneRange(),h=H(b.startNode,Ta),i=H(b.startNode,cb),j=!0,k=[],l=va.getNode(b.startElement);if(H(l,bb)){for(;l!==b.startNode;l=l.parentNode)H(l,Wa)&&k.push(l.element);k.push(b.startNode.element)}else H(l,Ua)?k[0]=b.startNode.element:H(l,Ta)||(k[0]=fa("p"));if(c.forEach(function(b){var c=va.getEditableNode(g.startContainer),l=new n(Wa,b),m="br"===G(b);if(I(b)&&!m&&(d.insertNode(b),l=va.getNode(b),ha(b),(l.widget.id===Qa||H(c,Ta)&&!ya[l.widget.id].inline||"*"!==f[1]&&f.indexOf(l.widget.id)<0)&&(b=ea(l.widget.id===Qa?b.textContent:oa(b)),l=new n(Wa,b))),m&&!H(c,Ua|Ta)||!H(l,cb|bb)||!H(l,bb)&&!j){for(var p=c;!H(p.parentNode,m?Ua:_a);)p=p.parentNode;var q=U(p.element,!1),r=U(g,q).extractContents();r.firstChild||(r=da(ia(ea(),k)));var s=r.firstChild;q.insertNode(r),Aa.track(q.startContainer);for(var t=va.getNode(s);t&&!/\S/.test(t.element.textContent);t=t.firstChild)if(H(t,Xa|Ya)){t.element.firstChild?a(t.element).contents().unwrap():a(t.element).remove();break}if(H(p,cb)&&!p.element.firstChild&&a(ea()).appendTo(p.element)," "===p.element.textContent.slice(-1)){var u=C(ga(p.element,4)).filter(y("data")).slice(-1)[0];u.data=u.data.slice(0,-1)+" "}if(" "===s.textContent.charAt(0)){var v=C(ga(s,4)).filter(y("data"))[0];v.data=v.data.slice(1)}if(m)g=U(q,!0);else{for(var w=new o(va.getNode(s),cb);w.firstChild(););g=U(w.currentNode.element,0),j=!0,e=!0}}i=i&&H(l,cb|bb),m||(H(l,bb)&&!i?b=ia(b,k):!H(l,bb)&&i&&j&&(b=da(b.childNodes)));var x=da(b).lastChild;if(i)x&&(g.insertNode(b),m||H(l,Xa)?(g=U(x,!1),g.insertNode(ea()),g.collapse(!1)):g=U(x,-0)),j=h;else{var z=va.getEditableNode(g.startContainer);H(z,_a)?g.insertNode(b):U(z.element,!0).insertNode(b),i=h||H(l,cb|bb),g=i?U(x,-0):U(x,!1),j=h||!i,e=!0}Aa.track(g.startContainer)}),!e&&b.startNode!==b.endNode&&H(b.startNode,Ua)&&H(b.endNode,Ua)){if(g){var m=L(va.getNode(g.startContainer),-1&~bb);g=U(m.element,-0)}else g=U(b.startNode.element,-0);g.insertNode(U(b.endNode.element,"contents").extractContents()),g.collapse(!0),ha(b.endNode.element),Aa.track(b.endNode),Aa.track(b.startNode)}ua.select(g)})}function oa(a){var b,c,d=U(a||j),e="",f=new p(new k(va,d).createTreeWalker(db),5,function(a){return V(d,U(a,"contents"))?1:2});return B(f,function(a){var f=va.getNode(a),g=ya[f.widget.id];if(f!==b&&(H(b,ab)&&H(f,ab)&&"\n\n"!==e.slice(-2)&&(e+="\n\n"),f.widget!==c&&mb(g.text)&&(e+=g.text(f.widget)),b=f,c=f.widget),H(f,cb)&&!mb(g.text))if(J(a)){var h=a.data;a===d.endContainer&&(h=h.slice(0,d.endOffset)),a===d.startContainer&&(h=h.slice(d.startOffset)),e+=h}else"br"===G(a)&&(e+="\n")}),D(e).replace(/\u200b/g,"").replace(/[^\S\n\u00a0]+|\u00a0/g," ")}function pa(){function b(){setImmediate(function(){P(null,eb,"beforeStateChange"),P(null,eb,"stateChange")})}function c(){var a=D(j.innerHTML.replace(/\s+(style|x-typer-(start|end))(="[^"]*")?|(?!>)\u200b(?!<\/)/g,""));if(a!==k)return k=a,!0}function d(b,c,d){J(b)?a(b.parentNode).attr(i[+d],T(va.getNode(b),b)+c):b&&a(b).attr(i[+d],"")}function e(b){var c=i[+b],d=Va.find("["+c+"]")[0]||Va.filter("["+c+"]")[0],e=parseInt(a(d).attr(c));if(d)return a(d).removeAttr(c),+e===e?Z(d,e):U(d,!!b)}function f(){b(),d(ua.startTextNode||ua.startElement,ua.startOffset,!0),ua.isCaret||d(ua.endTextNode||ua.endElement,ua.endOffset,!1);var a=j.outerHTML;if(a!==l[0]){var e=c();l.splice(0,m+!e,a),l.splice(la.historyLevel),m=0}Va.find("[x-typer-start], [x-typer-end]").andSelf().removeAttr("x-typer-start x-typer-end")}function g(d){var f=a.parseHTML(d)[0];Va.empty().append(f.childNodes).attr(M(f)),ua.select(e(!0),e(!1)),b(),c()}var h,i=["x-typer-end","x-typer-start"],k=D(j.innerHTML),l=[],m=0;nb(Ba,{getValue:function(){return $a.needSnapshot&&($a.needSnapshot=!1,f()),k},canUndo:function(){return m<l.length-1},canRedo:function(){return m>0},undo:function(){Ba.canUndo()&&g(l[++m])},redo:function(){Ba.canRedo()&&g(l[--m])},snapshot:function(a){clearImmediate(h),+a!==a&&ua?a!==!0&&$a.executing?($a.needSnapshot=!0,b()):($a.needSnapshot=!1,f()):h=setImmediate(f,a)}})}function qa(){function e(a,b){return F((a.ctrlKey||a.metaKey?"Ctrl":"")+(a.altKey?"Alt":"")+(a.shiftKey?"Shift":"")+E(b))}function f(a){var b=t;t&&!t.destroyed&&(t=null,P(a,b,"focusout"))}function g(a,b,c){var d={clientX:(c||b).clientX,clientY:(c||b).clientY,target:b.target};P(a,gb,e(b,"click"),null,d)}function h(a){u(va,a,ua.focus,null,ua)}function i(){var a=ba(j);if(!Ca.has(va)&&a&&!X(a,U(ua))){ua.select(a),ua.focusNode.widget!==t&&f("textInput");var b=+new Date;setImmediate(function(){Ba.snapshot(b-v<200?200:0),v=b})}}function k(a){if(ua.isCaret){var b=ua.clone();b.extendCaret.moveByCharacter("backspace"===a.data?-1:1)&&$a("keystroke",function(){na(b,"")})}else $a("keystroke",function(){na(ua,"")})}function l(a,b){return!(!a||!R("textInput",eb,"textInput",a))||(!b&&ua.startTextNode&&ua.isCaret?void setImmediate(function(){i(),A(hb).id!==Pa&&P("textInput",hb,"contentChange","textInput"),P("textInput",fb,"contentChange","textInput")}):($a("textInput",function(){na(ua,a)}),!0))}var m,n,o,p,q,r,s,t,v=0;Va.mousedown(function(b){var d={mousemove:function(a){return!a.which&&m?void d.mouseup():(ua.extendCaret.moveToPoint(a.clientX,a.clientY),setImmediate(function(){h("mouse")}),void a.preventDefault())},mouseup:function(){m=!1,a(c.body).unbind(d)}};1===b.which&&((b.shiftKey?ua.extendCaret:ua).moveToPoint(b.clientX,b.clientY),h("mouse"),a(c.body).bind(d),m=!0),b.preventDefault()}),Va.bind("compositionstart compositionupdate compositionend",function(a){if(a.stopPropagation(),n="d"!==a.type.slice(-1))l("");else{var b=ba(j);U(b.startContainer,b.startOffset-a.originalEvent.data.length,b.startContainer,b.startOffset).deleteContents(),i(),l(a.originalEvent.data,!0)}}),Va.bind("keydown keypress keyup",function(b){if(n)return void b.stopImmediatePropagation();r=!0,setImmediate(function(){r=!1});var c=a.inArray(b.keyCode,[16,17,18,91,93])>=0,f=!c&&Ia[b.keyCode]!==d.fromCharCode(b.keyCode).toLowerCase();if("keydown"===b.type){if(o=b.ctrlKey+b.shiftKey+b.altKey+b.metaKey+!c,o*=f||(o>2||o>1&&!b.shiftKey)&&!c,p=b.keyCode,o){var g=e(b,Ia[p]||d.fromCharCode(b.charCode));P("keystroke",gb,g)&&b.preventDefault(),(R("keystroke",eb,"keystroke",g,b)||/ctrl(?![acfnprstvwx]|f5|shift[nt]$)|enter/i.test(g))&&b.preventDefault()}q=b.isDefaultPrevented(),q||($a.suppressTextEvent=!1),setImmediate(function(){n||q||i()})}else"keypress"===b.type?b.charCode||b.stopImmediatePropagation():((b.keyCode===p||c)&&o--&&b.stopImmediatePropagation(),q||c||n||i())}),Va.bind("keypress input textInput",function(a){$a.executing||$a.suppressTextEvent||"textInput"!==a.type&&Ga||l(a.originalEvent.data||d.fromCharCode(a.charCode)||"")&&a.preventDefault()}),Va.bind("dragstart",function(a){var b=U(ua),c={drop:function(a){$a("drop",function(){var d=ca(a.originalEvent.clientX,a.originalEvent.clientY),e=ma(b,a.ctrlKey?"copy":"cut");na(d,e),a.preventDefault(),Va.unbind(c)})}};Va.bind(c)}),Va.bind("cut copy",function(c){var d=c.originalEvent.clipboardData||b.clipboardData;$a("cut",function(){pb.content=ma(ua,c.type),pb.textContent=oa(ua)}),b.clipboardData?d.setData("Text",pb.textContent):(d.setData("text/plain",pb.textContent),d.setData("text/html",a('<div id="Typer">').append(pb.content.cloneNode(!0))[0].outerHTML),d.setData("application/x-typer","true")),c.preventDefault()}),Va.bind("paste",function(c){var d=c.originalEvent.clipboardData||b.clipboardData,e="text"!==ya[ua.focusNode.widget.id].accept;if(e&&a.inArray("application/x-typer",d.types)>=0){var f=d.getData("text/html"),g=da(a(f).filter("#Typer").contents());$a("paste",function(){na(ua,g)})}else{var h=d.getData(b.clipboardData?"Text":"text/plain");e&&h===pb.textContent?$a("paste",function(){na(ua,pb.content.cloneNode(!0))}):R("paste",eb,"textInput",h)||$a("paste",function(){na(ua,h)})}if(c.preventDefault(),ib){var i=ua.clone();setImmediate(function(){ua.select(i)})}}),Va.bind("mousedown mouseup mscontrolselect",function(a){var b=va.getNode(a.target);t!==b.widget&&f("mouse"),H(b,Ra|Xa)&&(setImmediate(function(){h("mouse")}),ua.select(b.widget.element),t!==b.widget&&(t=b.widget,P("mouse",b.widget,"focusin")))}),Va.bind("touchstart touchmove touchend",function(a){"touchend"===a.type&&s&&(ua.moveToPoint(s.clientX,s.clientY),h("touch"),g("touch",a,s),a.preventDefault());var b=a.originalEvent.touches;s="touchstart"===a.type&&!b[1]&&b[0]}),Va.bind("contextmenu",function(a){var b=ca(a.clientX,a.clientY,j);!ua.isCaret&&V(ua,b)||ua.select(b)}),Va.bind("click",function(a){g("mouse",a),a.preventDefault()}),Va.bind("dblclick",function(a){P("mouse",gb,"dblclick")||ua.select("word"),a.preventDefault()}),Va.bind("mousewheel",function(a){Ka&&R("mouse",gb,"mousewheel",la.ui.getWheelDelta(a))&&a.preventDefault()}),Va.bind("focusin",function(a){Ka||$a.executing&&!Fa||(Fa=!1,Ea=!1,Ca.has(va)||(Ka=!0,P(null,eb,"focusin"),m||ua.focus()),Ca.delete(va))}),Va.bind("focusout",function(a){if(c.activeElement!==j&&Ka){if(void 0===a.relatedTarget)return;for(var b=a.relatedTarget;b;b=b.parentNode)if(za.has(b))return void Ca.set(va,b);Ka=!1,f(),P(null,eb,"focusout"),aa(),Q(j,c.activeElement)&&(a.relatedTarget?a.relatedTarget.focus():j.blur())}});var w={ctrlZ:Ba.undo,ctrlY:Ba.redo,ctrlShiftZ:Ba.redo,backspace:k,delete:k,escape:function(){j.blur(),ba(j)&&ob.removeAllRanges()}};a.each({moveByLine:"upArrow downArrow shiftUpArrow shiftDownArrow",moveByWord:"ctrlLeftArrow ctrlRightArrow ctrlShiftLeftArrow ctrlShiftRightArrow",moveToLineEnd:"home end shiftHome shiftEnd",moveByCharacter:"leftArrow rightArrow shiftLeftArrow shiftRightArrow"},function(b,c){a.each(c.split(" "),function(a,c){var d=1&a?1:-1,e=!!(2&a);w[c]=function(){e||ua.isCaret?(e?ua.extendCaret:ua)[b](d):ua.collapse(d<0?"start":"end")}})}),ya.__core__.keystroke=function(a){!a.isDefaultPrevented()&&a.data in w&&(a.preventDefault(),w[a.data](a))},ka(j)}function ra(a,b){(s[a]||(s.widgets||"")[a])&&(ya[a]=Object.create(b),ya[a].options=nb(Object.create(b.options||null),s[a]),b.element||xa.push(new l(va,a,null,ya[a].options)))}function sa(){xa[0]=new l(va,Pa),a.each(s.widgets||{},ra),a.each(la.widgets,ra),xa[xa.length]=new l(va,Oa),ya[Pa]=s,ya[Oa]={},ya[Qa]={element:s.disallowedElement||":not("+Ja+",br,b,em,i,u,strike,small,strong,sub,sup,ins,del,mark,span)"}}function ta(b){var c=b.relatedTarget||Ha;Q(b.currentTarget,c)||(Ca.get(va)===b.currentTarget&&Ca.delete(va),j===c?ua.focus():Va.trigger(a.Event("focusout",{relatedTarget:b.relatedTarget})))}H(j,e)||(s=j,j=j.element),s=nb(!0,{},(!s||s.defaultOptions!==!1)&&la.defaultOptions,s);var ua,va=this,wa=s.inline||H(j,Ja)?Ta:Sa,xa=[],ya={},za=new h,Aa=new q(va),Ba={},Ka=!1,Va=a(j),$a=function(){var b=t(function(){var b=qb[qb.length-1][1];$a.executing=!1,($a.needSnapshot||Aa.changes[0])&&Ba.snapshot(),setImmediate(function(){$a.suppressTextEvent=!1,Aa.collect(function(c){$a(b,function(){a.each(c,function(a,c){aa(c.element),c.id!==Pa&&P(b,c,"contentChange",b)}),P(b,fb,"contentChange",b)})})})});return function(a,c,d,e){return $a.suppressTextEvent=!0,$a.executing=!0,u(va,a,b,[c,d,e])}}();pa(),sa(),qa(),Va.attr("contenteditable","true"),nb(va,Ba,S(j,!0),{element:j,hasCommand:function(a){return!!K(a)},focused:function(){return Ka},widgetEnabled:function(a){return ya.hasOwnProperty(a)},getWidgetOption:function(a,b){return ya[a]&&ya[a][b]},getStaticWidget:function(a){return z(xa.slice(1,-1),function(b){return b.id===a})},getStaticWidgets:function(){return xa.slice(1,-1)},getSelection:function(){return ua},extractText:function(a){return oa(a)},nodeFromPoint:function(a,b){var c=ca(a,b,j);return c&&va.getNode(c.commonAncestorContainer)},retainFocus:function(b){za.has(b)||(za.set(b,!0),a(b).bind("focusout",ta))},releaseFocus:function(b){za.delete(b),a(b).unbind("focusout",ta)},invoke:function(a,b){var c=new v;"string"==typeof a&&(c.commandName=a,c.widget=K(a),a=c.widget&&ya[c.widget.id].commands[a]),mb(a)&&$a("script",function(){a.call(va,c,b),Ka&&!Ca.has(va)&&ua.focus()})}}),w(v,{typer:va,widget:null,get selection(){return ua},insertText:function(a){na(ua,a)},insertHtml:function(a){na(ua,da(a))},insertWidget:function(a,b){ya[a]&&mb(ya[a].insert)&&ya[a].insert(this,b)},removeWidget:function(a){if(mb(ya[a.id].remove))ya[a.id].remove(this,a);else if("keepText"===ya[a.id].remove){var b=oa(a.element);na(U(a.element,!0),b),ha(a.element)}else na(U(a.element),"")},replaceElement:function(b,c){return c=H(c,e)||fa(c),a(c).append(b.childNodes).insertBefore(b),Da.update(b,c),ha(b,!1),Aa.track(c.parentNode),c},removeElement:function(a){Aa.track(a.parentNode),ha(a)},trackChange:function(a){Aa.track(a)},execCommand:function(b,d){var e,f;a.each(ua.getEditableRanges(),function(a,g){ja(g),c.execCommand(b,!1,d||""),e=e||ob.getRangeAt(0),f=ob.getRangeAt(0)}),ua.select(U(e,!0),U(f,!1))}}),ua=new k(va,U(j,0)),aa(),P(null,fb,"init")}function ma(a,b){return b&&(a.whatToShow&Za||!H(b,Ra|_a))&&(a.whatToShow&$a||H(b.element,":visible"))&&b}function na(a,b,c){return c&&b!==a.root&&!ma(a,b)?2:H(b,Ra)&&H(b.parentNode,Ra)?3:A(a,b)}function oa(a,b,c){if(na.returnValue=na(a,b,c),1===na.returnValue)return a.currentNode=b,!0}function pa(a,b,c){for(var d=a.currentNode[b];d;){if(oa(a,d,!0))return d;if(3===na.returnValue&&d[b])d=d[b];else{for(;!d[c];)if(d=ma(a,d.parentNode),!d||d===a.root||d===a.currentNode)return null;d=d[c]}}}function qa(a,b,c){for(var d=a.currentNode;d&&d!==a.root;){for(var e=d[c];e;){if(oa(a,e))return e;e=2!==na.returnValue&&e[b]?e[b]:e[c]}if(d=ma(a,d.parentNode),!d||d===a.root||1===na(a,d,!0))return null}}function ra(a,b){var d=b.currentNode.widget.typer,e=c.createTreeWalker(b.root.element,1|a.whatToShow,function(c){return 1!==na(b,d.getNode(c),!0)?3:1|A(a,c)},!1);v(a,"iterator",e)}function sa(a,b,c){var d=U(a);return new o(a.focusNode,b|Za,function(a){return V(a.element,d)?c?c(a):1:2})}function ta(a){var b=a.getCaret("start"),c=a.getCaret("end"),d=b.textNode===c.textNode;if(c.textNode&&!K(c.textNode,c.offset,1)&&c.textNode.splitText(c.offset),b.textNode&&!K(b.textNode,b.offset,-1)){var e=b.offset;va(a,function(){if(e===b.textNode.length){var a=wa(b);a.nextNode()?Aa(b,a.currentNode,0):Aa(b,b.element,!1)}else ya(b,b.node,b.element,b.textNode.splitText(b.offset),0);d&&ya(c,c.node,c.element,b.textNode,c.offset-e)})}}function ua(a){a.direction=Y(a.extendCaret.getRange(),a.baseCaret.getRange())||0,a.isCaret=!a.direction;for(var b=0,c=a.getCaret("start"),d=a.getCaret("end");b<4;b++)a[ua.NAMES[b+4]]=c[ua.NAMES[b]],a[ua.NAMES[b+8]]=d[ua.NAMES[b]]}function va(a,b,c,d){return a._lock=a._lock||t(function(){delete a._lock,ua(a),a===a.typer.getSelection()&&(a.typer.focused()&&!Ca.has(a.typer)&&a.focus(),a.typer.snapshot())}),a._lock(b,c,d)}function wa(a,b,c){var d=new p(new o(H(b,n)||a.typer.getNode(b||a.typer.element),cb|Za),4|c);return d.currentNode=a.textNode||a.element,d}function xa(a,b){return a.selection?va(a.selection,b,null,a):b.call(a)}function ya(a,b,c,d,e){return xa(a,function(){a.selection&&a.selection===a.typer.getSelection()&&(a.node!==b&&a.node.element!==a.element&&Da.unlisten(a,a.node.element),a.element!==c&&a.element!==a.node.element&&Da.unlisten(a,a.element),Da.listen(a,b.element),Da.listen(a,c)),a.node=b,a.element=c,a.textNode=d||null,a.offset=e,a.wholeTextOffset=(d?a.offset:0)+T(b,d||c)}),!0}function za(a){return H(a,ab)||L(a,Ua|Ta)}function Aa(b,c,d,e){var f,g;if("br"===G(c)?(g=J(c.nextSibling)||a(ea()).insertAfter(c)[0],c=g.parentNode,d=0):I(c)&&c.firstChild&&(d===c.childNodes.length||e&&I(c.childNodes[(d||1)-1])?(c=c.childNodes[(d||1)-1],d=c.length,e=!0):(c=c.childNodes[d],d=0)),J(c)&&(g=c,c=g.parentNode),f=b.typer.getEditableNode(g||c),g&&(f.element!==g.parentNode?(c=f.element,g=null):H(f,cb)||(f=z(f.childNodes,function(a){return O(g,a.element)<0})||f.lastChild||f,c=f.element,g=null,e=!0)),!g&&H(f,cb)){var h=new p(f,4);for(h.currentNode=c;h.nextNode()&&e;);g=J(h.currentNode)||a(ea())[e?"appendTo":"prependTo"](c)[0],d=e?g.length:0}if(g)for(var i=function(e,f,h,i){var j=K(g,d,e)&&I(g[f]);if(j&&"br"!==G(j)&&H(b.typer.getNode(j),cb))return c=j,g=J(c[h])||a(ea())[i](c)[0],d=S(g,0*e),!0};i(-1,"previousSibling","lastChild","appendTo")||i(1,"nextSibling","firstChild","prependTo"););return ya(b,za(f),c,g,g?d:!e)}function Ba(a){var b=Ba;b.keypressed="keypress"===a.type,b.data=a.data,b.keypressed&&setImmediate(function(){Ga=!b.keypressed&&null!==b.data,c.removeEventListener("keypress",Ba,!0),c.removeEventListener("textInput",Ba,!0)})}var Ca,Da,Ea,Fa,Ga,Ha,Ia=JSON.parse('{"8":"backspace","9":"tab","13":"enter","16":"shift","17":"ctrl","18":"alt","19":"pause","20":"capsLock","27":"escape","32":"space","33":"pageUp","34":"pageDown","35":"end","36":"home","37":"leftArrow","38":"upArrow","39":"rightArrow","40":"downArrow","45":"insert","46":"delete","48":"0","49":"1","50":"2","51":"3","52":"4","53":"5","54":"6","55":"7","56":"8","57":"9","65":"a","66":"b","67":"c","68":"d","69":"e","70":"f","71":"g","72":"h","73":"i","74":"j","75":"k","76":"l","77":"m","78":"n","79":"o","80":"p","81":"q","82":"r","83":"s","84":"t","85":"u","86":"v","87":"w","88":"x","89":"y","90":"z","91":"leftWindow","92":"rightWindowKey","93":"select","96":"numpad0","97":"numpad1","98":"numpad2","99":"numpad3","100":"numpad4","101":"numpad5","102":"numpad6","103":"numpad7","104":"numpad8","105":"numpad9","106":"multiply","107":"add","109":"subtract","110":"decimalPoint","111":"divide","112":"f1","113":"f2","114":"f3","115":"f4","116":"f5","117":"f6","118":"f7","119":"f8","120":"f9","121":"f10","122":"f11","123":"f12","144":"numLock","145":"scrollLock","186":"semiColon","187":"equalSign","188":"comma","189":"dash","190":"period","191":"forwardSlash","192":"backtick","219":"openBracket","220":"backSlash","221":"closeBracket","222":"singleQuote"}'),Ja=("area base br col command embed hr img input keygen link meta param source track wbr".split(" "),"h1,h2,h3,h4,h5,h6,p,q,blockquote,pre,code,li,caption,figcaption,summary,dt,th"),Ka="script keystroke textInput mouse touch cut paste".split(" "),La="​",Ma="&#8203;",Na="<p>&#8203;</p>",Oa="__core__",Pa="__root__",Qa="__unknown__",Ra=1,Sa=2,Ta=32,Ua=4,Va=8,Wa=16,Xa=64,Ya=128,Za=4096,$a=8192,_a=Sa|Ta,ab=Ra|Ua|_a,bb=Wa|Xa|Ya,cb=Ua|Ta|Wa|Ya,db=-1&~$a,eb=1,fb=2,gb=3,hb=4,ib=!!b.ActiveXObject||void 0!==c.documentElement.style.msTouchAction||void 0!==c.documentElement.style.msUserSelect,jb=ib?void 0:c.caretRangeFromPoint,kb=c.compareDocumentPosition,lb=f.prototype.compareBoundaryPoints,mb=a.isFunction,nb=a.extend,ob=b.getSelection(),pb={},qb=[];if(b.Typer=la,nb(la,{NODE_WIDGET:Ra,NODE_PARAGRAPH:Ua,NODE_EDITABLE:Sa,NODE_EDITABLE_PARAGRAPH:Ta,NODE_INLINE:Wa,NODE_INLINE_WIDGET:Xa,NODE_INLINE_EDITABLE:Ya,NODE_OUTER_PARAGRAPH:Va,NODE_SHOW_EDITABLE:Za,NODE_ANY_ALLOWTEXT:cb,NODE_ANY_BLOCK_EDITABLE:_a,NODE_ANY_INLINE:bb,ZWSP:La,ZWSP_ENTITIY:Ma,is:H,trim:D,iterate:B,iterateToArray:C,compareAttrs:N,comparePosition:O,compareRangePosition:Y,containsOrEquals:Q,createElement:fa,createTextNode:ea,createRange:U,rangeIntersects:V,rangeCovers:W,rangeEquals:X,rectEquals:Z,rectCovers:$,pointInRect:_,caretRangeFromPoint:ca,historyLevel:100,
defaultOptions:{disallowedWidgets:"keepText",widgets:{}},widgets:{}}),w(la,{hasContent:function(){return!!this.getValue()},setValue:function(a){this.selectAll(),this.invoke(function(b){b.insertHtml(a)})},select:function(a,b,c,d){this.getSelection().select(a,b,c,d)},selectAll:function(){this.getSelection().selectAll()}}),w(n,{get firstChild(){return this.childNodes[0]||null},get lastChild(){return this.childNodes.slice(-1)[0]||null}}),w(o,{previousSibling:function(){return qa(this,"lastChild","previousSibling")},nextSibling:function(){return qa(this,"firstChild","nextSibling")},firstChild:function(){return pa(this,"firstChild","nextSibling")},lastChild:function(){return pa(this,"lastChild","previousSibling")},parentNode:function(){for(var a=this.currentNode;a&&a!==this.root;a=a.parentNode)if(oa(this,a.parentNode,!0))return a.parentNode},previousNode:function(){for(var a=this,b=a.currentNode;b&&b!==a.root;){for(var c=b.previousSibling;c;c=b.previousSibling){b=c;for(var d=na(a,c);2!==d&&ma(a,b.firstChild);)b=b.lastChild,d=na(a,b,!0);if(1===d)return a.currentNode=b,b}if(b=ma(a,b.parentNode),!b||b===a.root)return null;if(oa(a,b,!0))return b}},nextNode:function(){for(var a=this,b=1,c=a.currentNode;c;){for(;2!==b&&c.firstChild;){if(c=c.firstChild,oa(a,c,!0))return c;b=na.returnValue}for(;c&&c!==a.root&&!c.nextSibling;)c=ma(a,c.parentNode);if(!c||c===a.root)return null;if(c=c.nextSibling,oa(a,c,!0))return c;b=na.returnValue}}}),w(p,{get currentNode(){return this.iterator.currentNode},set currentNode(a){this.iterator.currentNode=a},previousNode:function(){return this.iterator.previousNode()},nextNode:function(){return this.iterator.nextNode()}}),ua.NAMES="node element textNode offset startNode startElement startTextNode startOffset endNode endElement endTextNode endOffset".split(" "),w(k,{get isSingleEditable(){return this.isCaret||!sa(this,_a).nextNode()},get focusNode(){var a=this.typer.getEditableNode(R(this.baseCaret.element,this.extendCaret.element));return L(a,Ra|Xa|_a|Ya)},getCaret:function(a){var b=this.baseCaret,c=this.extendCaret;switch(a){case"extend":return c;case"start":return this.direction<0?c:b;case"end":return this.direction<0?b:c;default:return b}},getRange:function(a){var b=this.baseCaret,c=this.extendCaret;return void 0!==a||this.isCaret?(a!==!1?b:c).getRange():U(b.getRange(),c.getRange())},getEditableRanges:function(){var b=this,c=U(b);if(b.isCaret||H(b.focusNode,bb))return[c];var d=C(sa(b,Ua|Ta),function(a){return U(c,U(a.element))});return a.grep(d,function(a,b){return!b||!z(d.slice(0,b),function(b){return W(b,a)})})},getWidgets:function(){for(var a=[],b=this.focusNode;b;b=b.parentNode)a.unshift(b.widget),b=this.typer.getNode(b.widget.element);return a},getParagraphElements:function(){var a=this;return a.startNode===a.endNode?H(a.startNode,Ua)?[a.startNode.element]:[]:C(new o(a.focusNode,Ua|Za),y("element"),a.startNode,a.endNode)},getSelectedElements:function(){var a=this;if(a.isCaret)return[a.startElement];var b=R(a.startElement,a.endElement);return C(sa(a,cb|Xa),y("element")).filter(function(a){return Q(b,a)})},getSelectedText:function(){return this.typer.extractText(this.getRange())},getSelectedTextNodes:function(){var a=this;return a.isCaret?[]:(ta(a),C(new p(sa(a,cb),4),null,a.startTextNode||a.startElement,function(b){return O(b,a.endTextNode||a.endElement)<=0}))},createTreeWalker:function(a,b){return sa(this,a,b)},collapse:function(a){return a=this.getCaret(a),(a===this.baseCaret?this.extendCaret:this.baseCaret).moveTo(a)},select:function(a,b,c,d){var e=this;return va(e,function(){if("word"===a)return e.getCaret("start").moveByWord(-1)+e.getCaret("end").moveByWord(1)>0;var f=U(a,b,c,d);return e.baseCaret.moveTo(U(f,!0))+e.extendCaret.moveTo(U(f,!1))>0})},selectAll:function(){return this.select(this.typer.element,"contents")},focus:function(){var a=this.typer.element;Q(c,a)&&(Fa=!0,ja(U(this)),ib||c.activeElement===a||a.focus())},clone:function(){var a=this,b=new k(a.typer);return va(b,function(){b.baseCaret.moveTo(a.baseCaret),b.extendCaret.moveTo(a.extendCaret)}),b},widgetAllowed:function(a){var b=this;if(H(b.focusNode,Ta)&&!b.typer.getWidgetOption(b.focusNode.widget.id,"inline"))return!1;var c=b.typer.getWidgetOption(b.focusNode.widget.id,"allowedWidgets");return!c||"*"===c||(" __root__ "+c+" ").indexOf(" "+a+" ")>=0}}),a.each("moveToPoint moveToText moveByLine moveToLineEnd moveByWord moveByCharacter".split(" "),function(a,b){k.prototype[b]=function(){return va(this,function(){return r.prototype[b].apply(this.extendCaret,arguments)+this.collapse("extend")>0},x(arguments))}}),w(s,{listen:function(a,b){var c=this.weakMap,d=c.get(b)||(c.set(b,[]),c.get(b));d.indexOf(a)<0&&d.push(a)},unlisten:function(a,b){var c=this.weakMap.get(b);c&&c.indexOf(a)>=0&&c.splice(c.indexOf(a),1)},update:function(a,b){var c=this.weakMap.get(a);c&&c.length&&va(c[0].selection,function(){c.forEach(function(c){var d=c.node.element===a?c.typer.getNode(b):c.node,e=c.element===a?b:c.element,f=Q(b,c.textNode)?c.textNode:null;d===c.node&&e===c.element||ya(c,d,e,f,!f||c.offset)})})}}),w(r,{getRange:function(){var b=this,c=b.textNode||b.element;return(!Q(b.typer.element,c)||J(c)&&b.offset>c.length)&&(b.moveToText(b.node.element,b.wholeTextOffset),c=b.textNode||b.element),ib&&b.offset===c.length&&I(c.nextSibling)&&!/inline/.test(a(c.nextSibling).css("display"))&&(c.data.slice(-1)===La?b.offset--:c.data+=La),c===b.typer.element?U(c,b.offset?0:-0):U(c,b.offset)},clone:function(){var a=new r(this.typer);return a.moveTo(this),a},moveTo:function(a,b){var c=H(a,f)||U(a,b);if(c){var d=this.selection,e=d&&this===d.extendCaret&&Y(d.baseCaret,c)<0;return Aa(this,c.startContainer,c.startOffset,e)}return!1},moveToPoint:function(a,b){var c=ca(a,b,this.typer.element),d=this.typer.getNode(c.startContainer);return H(d,Ra)&&(_(a,b,d.widget.element.getBoundingClientRect())||(c=U(d.widget.element,!1))),this.moveTo(c)},moveToText:function(a,b){if(3!==a.nodeType){var c=new p(new o(this.typer.getNode(a),cb|Za),4);if(b)for(;c.nextNode()&&b>c.currentNode.length;b-=c.currentNode.length);else if(1/b<0)for(;c.nextNode(););a=c.currentNode}return!!a&&Aa(this,a,S(a,b))},moveToLineEnd:function(b){var c=this,d=wa(c,c.node),e=aa(c)[0],f=e.left;do a.each(aa(d.currentNode),function(a,c){c.top<=e.bottom&&c.bottom>=e.top&&(f=Math[b<0?"min":"max"](f,b<0?c.left:c.right))});while(d[b<0?"previousNode":"nextNode"]());return c.moveToPoint(f,e.top+e.height/2)},moveByLine:function(a){var b=this,c=wa(b),d=aa(b)[0];do{var e=aa(c.currentNode),f=z(a<0?x(e).reverse():e,function(b){return a<0?b.bottom<=d.top:b.top>=d.bottom});if(f)return b.moveToPoint(d.left,f.top+f.height/2)}while(c[a<0?"previousNode":"nextNode"]());return b.moveToLineEnd(a)},moveByWord:function(a){var b,c=this,d=c.textNode,e=a<0?/\b(\S*\s+|\S+)$/:/^(\s+\S*|\S+)\b/,f="";if(d&&(f=a<0?d.data.substr(0,c.offset):d.data.slice(c.offset),(b=e.test(f))&&j.$1.length!==f.length))return c.moveToText(d,c.offset+a*j.$1.length);for(var g=wa(c,c.node),h=g.currentNode,i=b&&j.$1.length;d=g[a<0?"previousNode":"nextNode"]();){if(f=a<0?d.data+f:f+d.data,(b=e.test(f))&&j.$1.length!==f.length)return j.$1.length===i?c.moveToText(h,0*-a):c.moveToText(d,a*(j.$1.length-(f.length-d.length)));h=d,i=j.$1.length}return!(!b||!d&&!i)&&c.moveToText(d||h,0*-a)},moveByCharacter:function(a){for(var b=this,c=aa(b)[0],d=wa(b,null,5),e=J(d.currentNode),f=b.offset,g=!1;;){if(!e||f===S(e,0*-a)){for(;!(e=d[a<0?"previousNode":"nextNode"]())||!e.length;){if(!e)return!1;g|="br"===G(e)}f=(a<0?e.length:0)+((g||za(b.typer.getNode(e))!==b.node)&&-a)}f+=a;var h=e.data.charAt(f)!==La&&aa(U(e,f))[0];if(!c||h&&!Z(c,h))return b.moveToText(e,f)}}}),a.each("moveByLine moveByWord moveByCharacter".split(" "),function(a,b){var c=r.prototype[b];r.prototype[b]=function(a){return xa(this,function(){for(var b=a;b&&c.call(this,a/Math.abs(a));b+=b>0?-1:1);return!a||b!==a})}}),w(l,{remove:function(){var a=this;a.typer.invoke(function(b){b.removeWidget(a)})}}),w(q,{track:function(a){a=H(a,n)||this.typer.getNode(a),a&&this.changes.indexOf(a.widget)<0&&this.changes.push(a.widget)},collect:function(a){var b=this.changes.splice(0);b[0]&&mb(a)&&a(b)}}),!ib){try{c.designMode="on",c.execCommand("enableObjectResizing",!1,!1),c.execCommand("enableInlineTableEditing",!1,!1)}catch(a){}c.designMode="off"}a(b).bind("focusin focusout",function(a){(ib?a.relatedTarget:a.target!==b)||(Ea="focusout"===a.type)});var rb={mouse:"mousedown mouseup click",keystroke:"keydown keyup keypress",touch:"touchstart touchmove touchend"};a(function(){a.each(rb,function(b,d){a(c.body).bind(d,function(){u(null,b)})}),a(c.body).bind("touchstart mousedown",function(a){Ha=a.target})}),"undefined"==typeof h&&(h=function(){v(this,"__dataKey__","typer"+Math.random().toString(36).substr(2,8),!0)},w(h,{get:function(a){return a&&a[this.__dataKey__]},set:function(a,b){a[this.__dataKey__]=b},has:function(a){return a&&this.__dataKey__ in a},delete:function(a){delete a[this.__dataKey__]}})),Ca=new h,Da=new s,"undefined"==typeof jb&&(jb=function(){return c.caretPositionFromPoint?function(a,b){var d=c.caretPositionFromPoint(a,b);return U(d.offsetNode,d.offset)}:function(d,e){function f(a){var b=a.left>d?a.left-d:Math.min(0,a.right-d),c=a.top>e?a.top-e:Math.min(0,a.bottom-e);return b&&c?1/0:Math.abs(b||c)}function g(a,b){for(;10===a.data.charCodeAt(b)&&--b;);var c;if(32===a.data.charCodeAt(b)&&b?(c=aa(U(a,b-1))[0],c=c&&{top:c.top,left:c.right,right:c.right,bottom:c.bottom}):c=aa(U(a,b))[0],c){var f=c.left>d?c.left-d:Math.min(0,c.right-d),g=c.top>e?c.top-e:Math.min(0,c.bottom-e);return g?g>0?1/0:-(1/0):f}}function h(a){for(var b=0,c=a.length;c-b>1;){var d=c+b>>1,e=g(a,d)<0;b=e?d:b,c=e?c:d}return Math.abs(g(a,b))<Math.abs(g(a,c))?b:c}function i(c){var f,g;return a(c).children().each(function(a,c){var h=b.getComputedStyle(c,null);if("none"!==h.pointerEvents&&"inline"!==h.display&&_(d,e,c.getBoundingClientRect())){var i="static"===h.position?void 0:parseInt(h.zIndex)||0;(void 0===f||i>f)&&(f=i,g=c)}}),g}for(var j=b.ActiveXObject?c.body:c.elementFromPoint(d,e),k=j;k;j=k||j)k=i(j);for(var l,m,n=e,o=j;I(o);j=o||j)l=1/0,o=null,a(j).contents().each(function(b,c){var d;J(c)?d=aa(c):I(c)&&"none"!==a(c).css("pointer-events")&&(d=[c.getBoundingClientRect()]);for(var h=0,i=(d||"").length;h<i;h++){if(d[h].top<=e&&d[h].bottom>=e)return o=c,n=e,l=0,I(c)||g(c,c.length-1)<0;m=l,l=Math.min(l,f(d[h])),l<m&&(o=c,n=I(c)?e:d[h].top+d[h].height/2)}});return J(j)?(e=n,U(j,h(j))):U(j,-0)}}()),c.addEventListener("keypress",Ba,!0),c.addEventListener("textInput",Ba,!0)}(jQuery,window,document,String,Node,Range,DocumentFragment,window.WeakMap,Array.prototype,RegExp),function(a,b){"use strict";function c(a){var c=a.element,d=window.getComputedStyle(c);if("nowrap"===d.whiteSpace&&"hidden"===d.overflow){var e=b.ui.getRect(c),f=b.ui.getRect(a.getSelection().extendCaret.getRange());f.left-e.right>=1?c.style.textIndent=parseInt(d.textIndent)-(f.left-e.right+5)+"px":e.left-f.left>=1&&(c.style.textIndent=Math.min(0,parseInt(d.textIndent)+(e.left-f.left+5))+"px")}}b.presets={},b.preset=function(d,e,f){var g,h=b.presets[e],i={};f={inline:!0,accept:"text",defaultOptions:!1,disallowedElement:"*",widgets:{},stateChange:function(a){c(a.typer)},__preset__:a.extend({},f)},a.each(h,function(a,b){("function"==typeof b||"options"===a||"commands"===a?i:f)[a]=b}),a.each(f.__preset__,function(a,b){i.options&&a in i.options||(f[a]=b,delete f.__preset__[a])});var j=f.init;return f.init=function(b){g=b.typer.getStaticWidget("__preset__"),a.each(h.overrides,function(a,c){b.typer[a]=function(a){return c.call(this,g,a)}}),"function"==typeof j&&j.call(f,b)},f.widgets.__preset__=i,i.inline=!0,new b(d,f)},a.fn.typer=function(a){return this.each(function(c,d){new b(d,a)})}}(jQuery,window.Typer),function(a,b,c,d,e,f,g){"use strict";function h(){return Math.random().toString(36).substr(2,8)}function i(a){return"string"==typeof a&&a}function j(a){return a=String(a||""),a.charAt(0).toUpperCase()+a.slice(1)}function k(a){return a=String(a||""),a.charAt(0).toLowerCase()+a.slice(1)}function l(a){clearImmediate(a._timeout),a._timeout=setImmediate(a.bind.apply(a,arguments))}function m(a,b){var c={};for(var d in a)d in b||(c[d]=a[d]);return c}function n(a,b){var c=ya[b]||(ya[b]=new d("(?:^|\\s)("+b.replace(/\s+/g,"|")+")(?=$|\\s)"));return c.test(String(a||""))&&d.$1}function o(a,b){for(var c in a)if(!n(b[c],a[c]))return!1;return!0}function p(a,b){if(b in a)for(var d=a;d;d=c.getPrototypeOf(d))if(d.hasOwnProperty(b))return pa(d,b)}function q(a,b,d,e,f){var g={};g.configurable=d.indexOf("c")>=0,g.enumerable=d.indexOf("e")>=0,d.indexOf("g")>=0?(g.get=e,g.set=f||null):(g.writable=!0,g.value=e),c.defineProperty(a,b,g)}function r(a,b){var c=a[b];q(a,b,"ceg",function(){var a=this.contextualParent;return a?a[b]:c},function(a){q(this,b,"ce",a)})}function s(b,d,e){var f=new Function("fn","return function "+(b||"")+"() { return fn.apply(this, arguments); }")(function(b){if(!(this instanceof f)){var d=c.create(f.prototype);return f.apply(d,arguments),d}return na(e)?void e.apply(this,arguments):a.extend(this,b)}),g=function(){};return g.prototype=xa,f.prototype=new g,c.getOwnPropertyNames(d||{}).forEach(function(a){c.defineProperty(f.prototype,a,pa(d,a))}),q(f.prototype,"constructor","c",f),f}function t(a,b,c){var d=p(a,b)||{value:a[b]};q(a,b,d.enumerable!==!1?"eg":"g",function(){return d.get?d.get.call(a):d.value},function(e){e!==this[b]&&(d.set?d.set.call(a,e):d.value=e,c.call(this,b,e))})}function u(a){var b=/^([\w-:]*)(?:\(([^}]+)\))?$/.exec(a),c=null;try{c=b[2]&&JSON.parse(("{"+b[2]+"}").replace(/([{:,])\s*([^\s:,}]+)/g,'$1"$2"'))}catch(a){}return{name:b[1],params:c||{}}}function v(a,b){var c=new d("(^|\\s)\\s*"+b+"(?:-(\\S+)|\\b)$","ig"),e=[!1];return(a.className||"").replace(c,function(a,b){e[b?e.length:0]=b||!0}),e[1]?e.slice(1):e[0]}function w(a,b,c){var e=new d("(^|\\s)\\s*"+b+"(?:-(\\S+)|\\b)|\\s*$","ig"),f=0;a.className=(a.className||"").replace(e,function(){return f++||!c||0===c.length?"":" "+b+(c[0]?[""].concat(c).join(" "+b+"-"):"")})}function x(a,b){var c=f.getComputedStyle(a,b||null);return n(c.position,"absolute fixed relative")&&"auto"!==c.zIndex?parseInt(c.zIndex):-1}function y(a){var c=-1,d=g.createTreeWalker(g.body,1,function(d){if(b.comparePosition(d,a,!0))return 2;var e=x(d);return e>=0?(c=Math.max(c,e),2):(c=Math.max(c,x(d,"::before"),x(d,"::after")),1)},!1);return b.iterate(d),c+1}function z(b){var c=a.extend({},(b||g.documentElement).getBoundingClientRect());return delete c.x,delete c.y,delete c.toJSON,c}function A(a,c,d,f){f=b.is(f||d,e);var g=z(f||aa),h=z(f),i=n(d||c,"left right")||"left",j=n(d||c,"top bottom")||"top",k={};return c=(0|(a.top||a.clientY||a.y||c))-g.top,a=(0|(a.left||a.clientX||a.x||a))-g.left,k[i]=("left"===i?a:h.width-a)+"px",k[j]=("top"===j?c:h.height-c)+"px",k[ia[i]]="auto",k[ia[j]]="auto",k}function B(a){var b=A(a);return b.width=(0|(a.width||a.right-a.left))+"px",b.height=(0|(a.height||a.bottom-a.top))+"px",b}function C(b,d,e,g){var h=oa(d)||!d?{}:z(d);"left"in h||(h.left=h.right=0|(d.left||d.clientX||d.x),h.top=h.bottom=0|(d.right||d.clientY||d.y));var i=n(e,"inset-x inset-y inset")||"inset-x",j="inset"===i?h:z(g),k=z(b),l=f.getComputedStyle(b),m={},o={},p=function(a,b,c,d){if(!ia[a]){var e=h[ia[c]]+h[c];return a=e-2*j[c]<k[d]?c:2*j[ia[c]]-e<k[d]?ia[c]:"",o[c]=(a?j[a]:e/2)+m[a||c],a}var f=b?ia[a]:a;if(h[a]*ka[f]+k[d]<=j[f]*ka[f])o[c]=h[a]+m[ia[f]];else{if(!(h[ia[a]]*ka[f]-k[d]>j[ia[f]]*ka[f]))return o[c]=j[a]+m[a],a;a=ia[a],o[c]=h[a]+m[f]}return b?a:ia[a]};c.keys(ia).forEach(function(a){m[a]=(parseFloat(l[ja[a]])||0)*ka[a],j[a]-=m[a]});var q=n(e,"left right center")||"left",r=n(e,"top bottom center")||"bottom",s=p(q,ia[r]&&"inset-x"===i,"left","width"),t=p(r,ia[q]&&"inset-y"===i,"top","height"),u=A(o,s+" "+t);u.position="fixed",u.transform=ha[!t<<1|!s],a(b).css(u)}function D(){Ba.forEach(function(a){b.is(a.ref,":visible")&&!b.rectEquals(z(a.ref),a.rect||{})&&(a.list.forEach(function(c){b.is(c.elm,":visible")&&C(c.elm,a.ref,c.dir)}),a.rect=z(a.ref))})}function E(c,d,e,f){for(var h=0;h<Ca.length;h++)if(Ca[h].control!==c&&!Ca[h].control.parentOf(c)){F(Ca[h].control);break}var i=Ca[0];i&&i.control===c||(i={},Ca.unshift(i)),a.when(i.promise).always(function(){a(d).appendTo(g.body).css({position:"fixed",zIndex:y(c.element)}),i.control=c,i.element=d,i.focusedElement=b.is(g.activeElement,ca),(oa(e)?C:Da.snap)(d,e,f||"left bottom"),i.promise=a.when(I(c,"afterShow",i))})}function F(b){for(var c=Ca.length-1;c>=0&&b!==Ca[c].control&&!b.parentOf(Ca[c].control);c--);a.each(Ca.slice(0,c+1),function(b,c){"pending"===c.promise.state()||c.isClosing||(Da.unsnap(c.element),c.isClosing=!0,c.promise=a.when(I(c.control,"beforeHide",c)).done(function(){Ca.splice(Ca.indexOf(c),1),a(c.element).detach()}))})}function G(a,b){try{return Aa.unshift(a),b()}finally{Aa.shift()}}function H(a,b,c,d,e){return e=e||a,na(e[b])?G(a,function(){return e[b](a.ui,a,c,d)}):void 0}function I(a,b,c){return H(a,b,c,null,va[a.ui.theme])}function J(a,b,c){if(a.ui===a||n(b,ea))H(a,b,c,null,a.ui),I(a,b,c);else{var d=a.constructor.prototype;a[b]!==d[b]&&H(a,b,c,null,d),H(a,b,c),I(a,a.type+j(b),c)}}function K(b,d,e,f,g){f=f||b.all||b.contextualParent.all,f._cache||q(f,"_cache","c",{}),e=e||b.defaultNS,g=g||{},b.name&&f!==b.contextualParent.all&&(g[b.name]=!0);var h=(e||"*")+"/"+d;b!==b.ui&&f===sa&&(h=[b.ui.type||"*",b.type,h].join("/"));var i=f._cache[h];if(i)return c.keys(m(i.include,a.extend(g,i.exclude)));var j={},k={};return String(d||"").replace(/(?:^|\s)(-?)((?:([\w-:]+|\*):)?(?:[\w-]+|\*|(?=\()))(\([^)]+\))?(?=$|\s)/g,function(b,c,d,g,h){var i={},l=(g||e||"").replace(/.$/,"$&:");d&&"*"!==d.slice(-1)?(d=d.indexOf(":")<0?l+d:d,f[d]&&(i[d]=!0)):a.each(f,function(a){("*"===g||a.substr(0,l.length)===l&&a.indexOf(":",l.length)<0)&&(i[a]=!0)}),h&&(h=u(h).params,a.each(i,function(a){o(h,f[a])||delete i[a]})),c?(a.extend(j,i),k=m(k,i)):a.extend(k,i)}),f._cache[h]={include:k,exclude:j},c.keys(m(k,a.extend(g,j)))}function L(b){var c={};a.each(b,function(a,b){c[b.name]=a}),b.sort(function(a,b){function d(a,b,c,d){return a[c]?K(a.contextualParent,a[c],a.name.substr(0,a.name.lastIndexOf(":"))).indexOf(b.name)>=0?d:-d:0}var e=d(a,b,"after",1),f=d(a,b,"before",-1),g=d(b,a,"after",-1),h=d(b,a,"before",1);return(!e&&!f)^(!g&&!h)?e||f||g||h:e+f+g+h||c[a.name]-c[b.name]})}function M(b,d,e){var f=b.ui;d=b instanceof Da.group?d||f:b,e=e||{},na(b.controls)&&(b.controls=b.controls(f,b)),i(b.controls)&&(b.controls=K(b,b.controls,null,sa,e),a.each(b.controls,function(a,b){e[b]=!0})),void 0!==b.controls&&(d.all=d.all||{}),b.controls=a.map(b.controls||[],function(g,j){var k=c.create(i(g)?sa[g]:g),l=k.name||i(g)||h();return l.indexOf(":")<0&&b.defaultNS&&(l=b.defaultNS+":"+l),a.extend(k,{ui:f,name:l,parent:b,contextualParent:d,defaultNS:i(k.defaultNS)||l,icon:i(k.icon)||l,label:i(k.label)||l}),!i(k.shortcut)&&i(k.execute)&&(k.shortcut=Da.getShortcut(k.execute)),d.all[l]=k,M(k,d,(b===f||b===d)&&a.extend({},e)),k}),L(b.controls)}function N(b,c){function d(c,d){d=na(va[g.theme]["bind"+j(c)])?I(b,"bind"+j(c),d):I(b,"bind",d),a.each(h[c],function(b,c){"_"===c[1]?a(c[0]).html(d||""):n(c[1],da)?a(c[0]).prop(c[1],!!d&&"false"!==d):d?a(c[0]).attr(c[1],d):a(c[0]).removeAttr(c[1])})}function e(c){a(c).find("*").andSelf().filter("[x\\:bind]").each(function(c,e){var f=u(a(e).attr("x:bind"));a.each(f.params,function(a,c){h[c]||(h[c]=[],t(b,c,d)),h[c].push([e,a])})}).removeAttr("x:bind")}function f(c){var d=a(va[g.theme][c]||'<div><br x:t="children"></div>')[0];return e(d),a("[x\\:t]",d).each(function(c,d){var h,i=u(a(d).attr("x:t"));if(na(va[g.theme][i.name]))h=a(va[g.theme][i.name](g,b,i.params)),e(h);else if("children"===i.name){var j=b.controls;for(var k in i.params){j=j.filter(o.bind(null,i.params));break}h=j.map(function(a){return N(a,i.params)})}else h=f(i.name);a(d).replaceWith(h)}),d}var g=b.ui,h={};return b.element=f(b.renderAs||b.type),a(b.element).attr("role",b.name).addClass(b.cssClass).data("typerControl",b),a.each(h,function(a,c){d(a,b[a])}),b.element}function O(b,c){var d=b.all||b.contextualParent.all,e=K(b,c,null,d);return e.length?a.map(e,function(a){return d[a]}):a.map(b.controls,function(a){return O(a,c)})}function P(a){var b=a.ui;return!(!b.typer&&(a.requireTyper||a.requireWidget||a.requireWidgetEnabled||a.requireCommand))&&(!(a.requireCommand&&!b.typer.hasCommand(a.requireCommand)||a.requireWidgetEnabled&&!b.typer.widgetEnabled(a.requireWidgetEnabled))&&(!(a.requireWidget===!0&&!c.getOwnPropertyNames(b._widgets)[0]||a.requireWidget&&!a.widget)&&(!(a.requireChildControls===!0&&!a.controls.some(P))&&(a.enabled!==!1&&H(a,"enabled")!==!1))))}function Q(a){return a.active===!0||!!H(a,"active")}function R(a){var b,c=a.ui,d=va[c.theme];(a.requireWidget||a.requireWidgetEnabled)&&(a.widget=c._widgets[a.requireWidget||a.requireWidgetEnabled]||c.widget,b=!a.widget),!b&&Aa.indexOf(a,1)<0&&(a.getState(d.controlErrorClass||"error")&&U(a),J(a,"stateChange"));var e=!P(a);void 0!==a.element.disabled&&(a.element.disabled=e),a.setState(d.controlDisabledClass||"disabled",e),a.setState(d.controlActiveClass||"active",Q(a)),a.setState(d.controlHiddenClass||"hidden",e&&a.hiddenWhenDisabled||a.visible===!1||H(a,"visible")===!1)}function S(b,c,d){try{if(c(b,d),za.indexOf(b)>0)return za[0].promise}finally{if(za[0]===b)for(;"pending"!==a.when(za[0].promise).state()&&za.shift()&&za[0];);}}function T(a){var b=a.ui.typer;b?na(a.execute)?b.invoke(function(b){H(a,"execute",b,a.getValue())}):b.hasCommand(a.execute)&&b.invoke(a.execute,a.getValue()):H(a,"execute",null,a.getValue()),J(a,"executed")}function U(a){var b=[],d={};return H(a,"validate",function(a,c,e){a||(c=c||"generic",d[c]=!0,b.push({type:c,description:e||""}))}),w(a.element,va[a.ui.theme].controlErrorClass||"error",c.keys(d)),I(a,"validate",b),b[0]&&a}function V(b,d,e,f){a.each(c.keys(b.all).reverse(),function(a,c){c=b.all[c],c.all&&V(c,d,e,f),d(c,e,f)})}function W(b){var c=b.ui,d=a.Deferred(),e=function(e,f){if(c.validate()){f=f||c.resolveOne(b.resolveBy);var g=a.when(H(b,"submit",f));"pending"===g.state()&&J(b,"waiting",f),g.done(function(a){J(b,"success",a),d.resolve(e)}),g.fail(function(a){J(b,"error",a),Da.focus(b.element,!0)})}},f=function(){var a=c.resolveOne(b.resolveWith)||b;e(a.getValue(),this)},g=function(){d.reject()};return b.resolve(b.resolveBy).forEach(function(a){a.execute=f}),b.resolve(b.rejectBy).forEach(function(a){a.execute=g}),H(b,"setup",e,g),{promise:d.promise(),resolve:f,reject:g}}function X(a,b){return i(b)?a.resolveOne(b):b||a.controls[0]}function Y(a,b,c){wa[a]=wa[a]||{hooks:[],commands:[]},wa[a][b].push(c)}function Z(b){var c=[b.element];return V(b,function(b){if(!qa(b.element,b.parent.element)&&qa(g.body,b.element)){for(var d=b.element;d.parentNode&&!a.contains(d.parentNode,c[0]);d=d.parentNode);c[c.length]=d}}),a.unique(c)}function $(a,b){return Z(a).some(function(a){return qa(a,b)})}var _,aa,ba=":text, :password, :checkbox, :radio, textarea, [contenteditable]",ca=":input, [contenteditable], a[href], area[href], iframe",da="checked selected disabled readonly multiple ismap",ea="executing executed cancelled",fa=navigator.userAgent.indexOf("Macintosh")>=0,ga="ontouchstart"in f,ha="none translate(-50%,0) translate(0,-50%) translate(-50%,-50%)".split(" "),ia={top:"bottom",left:"right",right:"left",bottom:"top"},ja={top:"marginTop",left:"marginLeft",right:"marginRight",bottom:"marginBottom"},ka={top:-1,left:-1,right:1,bottom:1},la={ctrl:"⌘",alt:"⌥",shift:"⇧",enter:"↩",tab:"ℵ",pageUp:"⇞",pageDown:"⇟",backspace:"⌫",escape:"⎋",leftArrow:"⭠",upArrow:"⭡",rightArrow:"⭢",downArrow:"⭣",home:"⭦",end:"⭨"},ma=a._data,na=a.isFunction,oa=a.isPlainObject,pa=c.getOwnPropertyDescriptor,qa=b.containsOrEquals,ra=g.createElement("div"),sa={},ta={},ua={},va={},wa={},xa={},ya={},za=[],Aa=[],Ba=[],Ca=[],Da=b.ui=s("TyperUI",null,function(b,d){i(b)&&(b={controls:b});var e=Aa[0]||za[0];e&&a.extend(b,{theme:e.ui.theme,typer:e.ui.typer,widget:e.ui.widget,parent:e.ui,parentControl:e});var f=a.extend(this,b);f.ui=f,f.theme=f.theme||c.keys(va)[0],f.all={},M(f),N(f),a(f.element).addClass("typer-ui typer-ui-"+f.theme),a(f.element).mousedown(function(){Da.focus(f.element)}),V(f,J,"init"),J(f,"init"),f.typer&&f.retainFocus(f.typer),oa(d)&&a.each(d,function(a,b){f.setValue(a,b)})});a.extend(Da.prototype,{language:"en",update:function(){var b=this;b._widgets={},b.widget?b._widgets[b.widget.id]=b.widget:b.typer&&a.each(b.typer.getSelection().getWidgets().concat(b.typer.getStaticWidgets()),function(a,c){b._widgets[c.id]=c}),V(this,R)},destroy:function(){var b=this;V(b,J,"destroy"),Da.unsnap(b.element),a(b.element).remove()},getControl:function(b){var c=a(b).parents("[role]").addBack("[role]").get().reverse();return a.map(c,function(b){return a(b).data("typerControl")})[0]},resolve:function(a){var b=Aa[0];return O(b&&b.ui===this?b:this,a)},trigger:function(a,b,c){a=X(this,a),J(a,b,c)},show:function(a,b,c,d){a&&a.ui===this?(a=X(this,a),E(a,b,c,d)):E(this,this.element,a,b)},hide:function(a){return a=void 0===a?this:X(this,a),a&&F(a)},enabled:function(a){return a=X(this,a),a&&P(a)},active:function(a){return a=X(this,a),a&&Q(a)},getIcon:function(a){return(ta[a.icon]||ta[a.name]||ta[a]||"")[this.iconset||va[this.theme].iconset]||""},getLabel:function(a){if(a=(a||"").label||a,ua[a]){if(this.language in ua[a])return ua[a][this.language];for(var b in ua[a])return ua[a][b]}return a},validate:function(){var a,b;return V(this,function(c){c.validate&&P(c)&&(b=U(c)),a=a||b}),a&&Da.focus(a.element,!0),!a},reset:function(){var a=this,b=va[a.theme].controlErrorClass||"error";V(a,function(a){a.validate&&a.setState(b,!1),J(a,"reset")}),a.update()},getValue:function(a){return a=X(this,a),a&&a.getValue()},setValue:function(a,b){return arguments.length<2?this.setValue(this.controls[0],a):(a=X(this,a),a&&a.setValue(b))},getState:function(a,b){return a=X(this,a),a&&a.getState(b)},setState:function(a,b,c){this.resolve(a).forEach(function(a){a.setState(b,c)})},set:function(a,b,c){this.resolve(a).forEach(function(a){a.set(b,c)})},execute:function(b,c){if(b=X(this,b),b&&za.indexOf(b)<0&&P(b)){if(void 0!==c&&b.setValue(c),za.unshift(b),J(b,"executing"),na(b.dialog)){var d=b.promise=a.when(H(b,"dialog"));return d.done(function(a){S(b,function(){b.setValue(a),T(b)})}),d.fail(function(){S(b,J,"cancelled")}),d}return S(b,T)}},focus:function(){Da.focus((X(this)||this).element)},retainFocus:function(a){var b=Z(this);b.forEach(a.retainFocus.bind(a))}}),a.extend(Da,{isTouchDevice:ga,controls:sa,themes:va,controlExtensions:xa,matchWSDelim:n,getZIndex:x,getZIndexOver:y,getRect:z,listen:t,cssFromPoint:A,cssFromRect:B,getState:v,setState:w,define:function(b,c,d){return oa(b)?void a.each(b,Da.define):(c=c||{},d=d||(pa(c,"constructor")||"").value,c.type=b,void(Da[b]=s("TyperUI"+j(b),c,d)))},getShortcut:function(a){var b=wa._map[a];return b&&b[0]},addControls:function(b,c){var d=i(b)?b+":":"";a.each(c||b,function(a,b){sa[d+a]=b})},addIcons:function(b,c,d){var e=i(c)?c+":":"";a.each(d||c,function(a,c){a=e+a,ta[a]||(ta[a]={}),ta[a][b]=c})},addLabels:function(b,c,d){var e=i(c)?c+":":"";a.each(d||c,function(a,c){a=e+a,ua[a]||(ua[a]={}),ua[a][b]=c})},addHook:function(b,c){return oa(b)?void a.each(b,Da.addHook):void(b||"").replace(/\S+/g,function(a){Y(a,"hooks",c)})},setShortcut:function(b,c){if(oa(b))return void a.each(b,Da.setShortcut);b=u(b),wa._map=wa._map||{};var d=wa._map[b.name]=wa._map[b.name]||[],e=d.slice(0);(c||"").replace(/\S+/g,function(a){var c=e.indexOf(a);c>=0?e.splice(c,1):(d[d.length]=a,Y(a,"commands",{command:b.name,value:(b.params||"").value}))}),a.each(e,function(c,e){d.splice(d.indexOf(e),1),a.each(wa[e],function(a,c){if(c.command===b.name&&c.value===(b.params||"").value)return wa[e].splice(a,1),!1})})},setZIndex:function(b,c){b.style.zIndex=y(c),"static"===a(b).css("position")&&(b.style.position="relative")},snap:function(a,c,d){Da.unsnap(a),c=b.is(c,e)||g.documentElement;var f=ma(c).typerSnaps||(ma(c).typerSnaps=Ba[Ba.push({ref:c,list:[]})-1]);f.list.push({elm:a,dir:d}),C(a,c,d)},unsnap:function(a){for(var b=Ba.length-1;b>=0;b--){for(var c=Ba[b].list.length-1;c>=0;c--)qa(a,Ba[b].list[c].elm)&&Ba[b].list.splice(c,1);Ba[b].list[0]||delete ma(Ba.splice(b,1)[0].ref).typerSnaps}},focus:function(b,c){(!a.contains(b,g.activeElement)||c&&!a(g.activeElement).is(ba))&&a(c?ba:ca,b).not(":disabled, :hidden").andSelf()[0].focus()},alert:function(a){return Da("dialog:prompt -dialog:input -dialog:buttonCancel",{message:a}).execute()},confirm:function(a){return Da("dialog:prompt -dialog:input",{message:a}).execute()},prompt:function(a,b){return Da("dialog:prompt",{message:a,input:b}).execute()},hint:function(a){return Da("dialog:hint",{message:a}).execute()},getWheelDelta:function(a){a=a.originalEvent||a;var b=-a.wheelDeltaY||-a.wheelDelta||a.detail;return b/Math.abs(b)*(fa?-1:1)}}),a.extend(xa,{buttonsetGroup:"left",cssClass:"",hiddenWhenDisabled:!1,pinDirection:"none",renderAs:"",requireChildControls:!1,requireTyper:!1,requireWidget:"",requireWidgetEnabled:"",showButtonLabel:!0,hideCalloutOnExecute:!0,is:function(a){return":"===a.charAt(0)?v(this.element,a):n(this.type,a)},parentOf:function(a){for(;a;a=a.parent)if(this===a)return!0;return!1},resolve:function(a){return O(this,a)},resolveOne:function(a){return this.resolve(a)[0]},set:function(a,b){var c=this;G(c,function(){if(i(a))c[a]=b;else for(var d in a)c[d]=a[d]}),R(c)},getValue:function(){var b=this;return G(b,function(){if(b.valueMap){var c={};return a.each(b.valueMap,function(a,d){c[a]=b.ui.getValue(d)}),c}return b.value})},setValue:function(b){var c=this;G(c,function(){c.valueMap?a.each(c.valueMap,function(a,d){c.ui.setValue(d,(b||"")[a])}):c.value=b}),R(c)},getState:function(a){return v(this.element,a)},setState:function(a,b){return w(this.element,a,b)}}),Da.theme=s("TyperUITheme"),Da.themeExtensions=Da.theme.prototype,a.extend(Da.themeExtensions,{textboxPresetOptions:null,bind:function(a,b,c){return ra.textContent=a.getLabel(c)||"",ra.innerHTML.replace(/(^|\s)\*\*(.+)\*\*(?=\s|$)/g,"$1<b>$2</b>").replace("\n","<br>")},bindIcon:function(a,b,c){return a.getIcon(c)},bindShortcut:function(a,b,c){var d={},e=(c||"").replace(/ctrl|alt|shift/gi,function(a){return fa?(d[a.toLowerCase()]=la[a.toLowerCase()],""):j(a)+"+"});return fa?(d.alt||"")+(d.shift||"")+(d.ctrl||"")+(la[k(e)]||e):e}}),r(xa,"pinDirection"),Da.define({group:{hiddenWhenDisabled:!0,requireChildControls:!0,controls:"*",constructor:function(b,c){i(b)?(this.controls=b,i(c)?this.type=c:a.extend(this,c)):a.extend(this,b)}},dropdown:{optionFilter:"(type:button) -(dropdownOption:exclude)",defaultEmpty:!1,allowEmpty:!1,selectedIndex:-1,requireChildControls:!0,controls:"*",get value(){return this.selectedValue},set value(b){var c=this;c.selectedIndex=-1,a.each(c.resolve(c.optionFilter),function(a,d){if(d.value===b)return c.selectedIndex=a,c.selectedText=d.label||d.name,c.selectedValue=d.value,!1}),c.selectedIndex===-1&&(c.selectedValue="",c.selectedText=c.label||c.name),V(c,R)},init:function(b,c){c.selectedText=c.label||c.name,a.each(c.resolve(c.optionFilter),function(a,d){d.active=function(){return c.selectedIndex===a},d.execute=function(){c.value=d.value,b.execute(c)}}),a(c.element).click(function(){P(c)&&I(c,"showCallout")})},stateChange:function(a,b){var c=b.resolve(b.optionFilter);(b.selectedIndex<0||!P(c[b.selectedIndex]))&&(b.defaultEmpty?b.selectedIndex>=0&&(b.value=""):b.value=(c.filter(P)[0]||"").value)},validate:function(a,b,c){c(b.allowEmpty||b.selectedIndex>=0,"required")},reset:function(a,b){b.value=b.defaultEmpty?"":(b.resolve(b.optionFilter).filter(P)[0]||"").value}},callout:{allowButtonMode:!1,controls:"*",stateChange:function(a,b){if(b.allowButtonMode){var d=b.resolve("*:*").filter(P);if(1===d.length)b.icon=d[0].icon,b.label=d[0].label;else{var e=c.getPrototypeOf(b);b.icon=e.icon||b.name,b.label=e.label||b.name}}},execute:function(a,b){if(b.allowButtonMode){var c=b.resolve("*:*").filter(P);if(1===c.length)return void a.execute(c[0])}I(b,"showCallout")}},label:{get value(){return this.label;
},set value(a){this.label=a}},button:{},link:{},file:{},textbox:{preset:"textbox",get value(){return this.preset.getValue()},set value(a){this.preset.setValue(a)},validate:function(a,b,c){b.preset.validate(c)},reset:function(a,b){b.preset.setValue("")},init:function(c,d){var e=a(va[c.theme].textboxElement,d.element)[0],f=a.extend({},va[c.theme].textboxPresetOptions,d.presetOptions,{contentChange:function(a){U(d),a.typer.focused()&&c.execute(d)}});d.preset=b.preset(e,d.preset,f),d.preset.parentControl=d,d.presetOptions=d.preset.getStaticWidget("__preset__").options}},checkbox:{required:!1,validate:function(a,b,c){c(!b.required||b.value,"required")},reset:function(a,b){b.value=!1}},dialog:{pinnable:!1,modal:!0,keyboardResolve:!0,keyboardReject:!0,resolveBy:"dialog:buttonOK",rejectBy:"dialog:buttonCancel",dialog:function(b,c){var d=_,e=g.activeElement,f=W(c),h={control:c,element:c.element};return b.update(),a(b.element).appendTo(g.body),setImmediate(function(){I(c,"afterShow",h),Da.focus(c.element)}),f.promise.always(function(){a.when(I(c,"beforeHide",h)).always(function(){b.destroy()}),_=d,e&&e.focus()}),Da.setZIndex(b.element,g.body),_={control:c,clickReject:!c.modal&&f.reject,keyboardResolve:c.keyboardResolve&&f.resolve,keyboardReject:c.keyboardReject&&f.reject},f.promise}}}),Da.addControls("dialog",{buttonset:Da.group("(type:button)",{type:"buttonset",defaultNS:"dialog"}),buttonOK:Da.label({type:"button",buttonsetGroup:"right"}),buttonCancel:Da.label({type:"button",buttonsetGroup:"right"}),message:Da.label(),input:Da.textbox(),prompt:Da.dialog({pinnable:!0,defaultNS:"dialog",controls:"message input buttonset",resolveWith:"input"}),hint:Da.dialog({pinnable:!0,modal:!1,defaultNS:"dialog",controls:"message"})}),Da.addLabels("en","dialog",{input:"",buttonOK:"OK",buttonCancel:"Cancel"}),Da.addIcons("material","dialog",{buttonOK:"",buttonCancel:""}),b.defaultOptions.shortcut=!0,b.widgets.shortcut={keystroke:function(b){var c=wa[b.data]||{};!b.isDefaultPrevented()&&c.commands&&a.each(c.commands,function(a,c){if(b.typer.hasCommand(c.command))return b.typer.invoke(c.command,c.value),b.preventDefault(),!1}),a.each(c.hooks||[],function(a,c){c(b)})}},a(function(){if(a(f).keydown(function(b){!_||13!==b.which&&27!==b.which||(_[13===b.which?"keyboardResolve":"keyboardReject"]||a.noop)()}),a(f).focusin(function(a){_&&a.relatedTarget&&!$(_.control,a.target)&&setImmediate(Da.focus,_.control.element)}),a(f).bind("resize scroll orientationchange",function(){l(D)}),a(g.body).bind("mousemove mousewheel keyup touchend",function(){l(D)}),a(g.body).on("click","label",function(b){a(ca,b.currentTarget).not(":disabled, :hidden").eq(0).focus()}),a(g.body).bind(ga?"touchstart":"mousedown",function(b){_&&_.clickReject&&!$(_.control,b.target)&&_.clickReject(),a.each(Ca.slice(0),function(a,c){$(c.control,b.target)||c.focusedElement&&qa(c.focusedElement,b.target)||F(c.control)})}),ga){var b;a(g.body).bind("focusin focusout",function(a){b="focusin"===a.type?a.target:null}),a(g.body).bind("touchend",function(c){b&&!qa(b,c.target)&&(b.blur(),a(b).trigger(a.Event("focusout",{relatedTarget:c.target})))})}aa=a('<div style="position:fixed;top:0;left:0;">').appendTo(g.body)[0]})}(jQuery,window.Typer,Object,RegExp,Node,window,document),function(a,b){"use strict";function c(b){return b.filter(function(c){return!b.some(function(b){return a.contains(b,c)})})}function d(b){var c=a(b).css("text-align"),d=a(b).css("direction");switch(c){case"-webkit-left":return"left";case"-webkit-right":return"right";case"start":return"ltr"===d?"left":"right";case"end":return"ltr"===d?"right":"left";default:return c}}function e(b,c){var e;return a(b).each(function(b,f){var g;g="textAlign"===c?d(f):"inlineClass"===c?a(f).attr("class")||"":a(f).css(c),e=""===e||e&&e!==g?"":g}),e||""}function f(a,b){return a=a.toLowerCase(),b=b.toLowerCase(),a===b||t.test(a)&&t.test(b)}function g(a,c){var d=b.createElement(a);return c&&(d.className=c),d}function h(b){a(b.selection.getParagraphElements()).attr("align",p[b.commandName]),b.trackChange(b.selection.focusNode.element)}function i(a){a.selection.isCaret?a.insertHtml(g(q[a.commandName])):(a.widget.subscript&&"superscript"===a.commandName?a.execCommand("subscript"):a.widget.superscript&&"subscript"===a.commandName&&a.execCommand("superscript"),a.execCommand(a.commandName),a.trackChange(a.selection.focusNode.element))}function j(c,d){var e="insertOrderedList"===c.commandName||d?"ol":"ul",f="<"+e+(d||"").replace(/^.+/,' type="$&"')+">",g=function(c,f){return b.is(f,e)&&(a(f).attr("type")||"")===(d||"")},h=[];a.each(c.selection.getParagraphElements(),function(d,e){if(a(e).is("ol>li,ul>li"))a(e.parentNode).filter(g)[0]?a(e).is("li")&&a.inArray(e.parentNode,h)<0&&l(c,[e]):(c.replaceElement(e.parentNode,a(f)[0]),h.push(e.parentNode));else{var i=a(e).prev().filter(g)[0]||a(e).next().filter(g)[0]||a(f).insertAfter(e)[0];a(e)[b.comparePosition(e,i)<0?"prependTo":"appendTo"](i),c.replaceElement(e,"li"),h.push(i)}}),c.trackChange(c.selection.focusNode.element)}function k(d,e){e=e||c(d.selection.getParagraphElements()),a.each(e,function(c,e){var f=a(e).parent("ul,ol")[0]||a(e).prev("ul,ol")[0]||a("<ul>").insertBefore(e)[0],g=f;if(g===e.parentNode){var h=a(e).prev("li")[0]||a("<li>").insertBefore(e)[0];g=a(h).children("ul,ol")[0]||a(f.cloneNode(!1)).appendTo(h)[0]}a(d.replaceElement(e,"li")).appendTo(g),a(g).parent("li")[0]&&a(b.createTextNode(" ")).insertBefore(g),f.children[0]||d.removeElement(f)})}function l(d,e){e=e||c(d.selection.getParagraphElements()),a.each(e,function(c,e){var f=a(e).parent("ul,ol")[0],g=a(f).parent("li")[0];a(e).next("li")[0]&&(g?a(f.cloneNode(!1)).append(a(e).nextAll()).appendTo(e):(a(f.cloneNode(!1)).append(a(e).nextAll()).insertAfter(f),a(e).children("ul,ol").insertAfter(f))),g?(a(e).insertAfter(g),b.trim(d.typer.extractText(g))||d.removeElement(g)):a(d.replaceElement(e,"p")).insertAfter(f),f.children[0]||d.removeElement(f)}),d.trackChange(d.selection.focusNode.element)}function m(a,c){var d=a.typer.getSelection();return!!(c?d.startNode.nodeType&(b.NODE_PARAGRAPH|b.NODE_EDITABLE_PARAGRAPH|b.NODE_INLINE):d.getParagraphElements()[0])}function n(a,c){return b.ui.button({requireWidget:c,requireCommand:a,execute:a,active:function(b,c){return c.widget&&c.widget[a]},enabled:function(a){return m(a,"inlineStyle"===c)}})}function o(c,d){return b.ui.button({name:r[c],annotation:d,requireWidgetEnabled:"list",value:c,execute:function(a,b,d){d.insertWidget("list",c)},active:function(b,d){return d.widget&&a(d.widget.element).attr("type")===c}})}var p={justifyLeft:"left",justifyRight:"right",justifyCenter:"center",justifyFull:"justify"},q={bold:"b",italic:"i",underline:"u",strikeThrough:"strike",superscript:"sup",subscript:"sub"},r={1:"decimal",A:"upper-alpha",a:"lower-alpha",I:"upper-roman",i:"lower-roman"},s=/^([a-z\d]*)(?:\.(.+))?/i,t=/^(p|h[1-6])(?:\.(.+))?$/i;b.widgets.inlineStyle={beforeStateChange:function(c){var d=c.typer.getSelection().getSelectedElements();a.extend(c.widget,{bold:!!b.ui.matchWSDelim(e(d,"fontWeight"),"bold 700"),italic:"italic"===e(d,"fontStyle"),underline:"underline"===e(d,"textDecoration"),strikeThrough:"line-through"===e(d,"textDecoration"),superscript:!!a(d).filter("sup")[0],subscript:!!a(d).filter("sub")[0],inlineClass:e(a(d).filter("span"),"inlineClass")})},commands:{bold:i,italic:i,underline:i,strikeThrough:i,superscript:i,subscript:i,applyClass:function(c,d){var e=c.selection.isCaret,f=g("span",d);c.selection.isCaret?(c.insertHtml(f),f.appendChild(b.createTextNode())):a(c.selection.getSelectedTextNodes()).wrap(f);var h=a(c.selection.getSelectedElements());h.filter("span:has(span)").each(function(b,c){a(c).contents().unwrap().filter(function(a,b){return 3===b.nodeType}).wrap(g("span",c.className))}),h.filter('span[class=""],span:not([class])').contents().unwrap(),h.filter("span+span").each(function(c,d){b.is(d.previousSibling,"span."+d.className)&&(a(d).contents().appendTo(d.previousSibling),a(d).remove())}),e&&c.selection.select(f,-0),c.trackChange(c.selection.focusNode.element)}}},b.widgets.formatting={beforeStateChange:function(b){var c=b.typer.getSelection(),d=c.getParagraphElements().slice(-1)[0];a(d).is("li")&&(d=a(d).closest("ol, ul")[0]||d);var f=d&&d.tagName.toLowerCase(),g=f+(a(d).attr("class")||"").replace(/^(.)/,".$1"),h=e(c.getSelectedElements(),"textAlign");a.extend(b.widget,{justifyLeft:"left"===h,justifyCenter:"center"===h,justifyRight:"right"===h,justifyFull:"justify"===h,formatting:f,formattingWithClassName:g})},enter:function(a){a.typer.widgetEnabled("lineBreak")&&b.is(a.typer.getSelection().startNode,b.NODE_EDITABLE_PARAGRAPH)?a.typer.invoke("insertLineBreak"):a.typer.invoke("insertLine")},commands:{justifyCenter:h,justifyFull:h,justifyLeft:h,justifyRight:h,formatting:function(c,d){var e=/^([a-z\d]*)(?:\.(.+))?/i.exec(d)||[];"ol"===e[1]||"ul"===e[1]?c.insertWidget("list","ol"===e[1]&&"1"):a(c.selection.getParagraphElements()).not("li").each(function(a,d){e[1]&&!b.is(d,e[1])&&f(e[1],d.tagName)?c.replaceElement(d,g(e[1]||"p",e[2])):(d.className=e[2]||"",c.trackChange(d))})},insertLine:function(a){a.insertText("\n\n")}}},b.widgets.lineBreak={enter:function(a){a.typer.invoke("insertLineBreak")},shiftEnter:function(a){a.typer.invoke("insertLineBreak")},commands:{insertLineBreak:function(a){a.insertHtml("<br>")}}},b.widgets.list={element:"ul,ol",editable:"ul,ol",insert:j,textFlow:!0,remove:"keepText",tab:function(a){a.typer.invoke("indent")},shiftTab:function(a){a.typer.invoke("outdent")},init:function(c){a(c.widget.element).filter("ol").attr("type-css-value",r[a(c.widget.element).attr("type")]||"decimal"),a(c.widget.element).parent("li")[0]&&!c.widget.element.previousSibling&&a(b.createTextNode()).insertBefore(c.widget.element)},contentChange:function(b){a(b.widget.element).children("li")[0]||b.typer.invoke(function(a){a.removeElement(b.widget.element)})},commands:{indent:k,outdent:l}},a.each("formatting list inlineStyle lineBreak".split(" "),function(a,c){b.defaultOptions[c]=!0}),b.ui.addControls("typer:toolbar",{formatting:b.ui.group("* -inlineStyleOptions -inlineStyleClear",{requireTyper:!0,defaultNS:"typer:formatting"})}),b.ui.addControls("typer:formatting",{paragraph:b.ui.dropdown({requireWidget:"formatting",requireCommand:"formatting",hiddenWhenDisabled:!0,controls:function(c){var d=a.map(Object.keys(c.options.formattings||{}),function(a){return b.ui.button({hiddenWhenDisabled:!0,value:a,label:c.options.formattings[a],enabled:function(a,b){var c=a.typer.getSelection(),d=(c.startNode===c.endNode?c.startNode:c.focusNode).element;return!s.test(b.value)||f(d.tagName,RegExp.$1)}})}),e=b.ui.button({requireWidget:"formatting",hiddenWhenDisabled:!0,enabled:function(a,b){for(var c=0,e=d.length;c<e;c++)if(d[c].value===b.widget.formatting)return!1;return b.label="typer:formatting:tagname:"+(s.exec(b.widget.formatting)||[])[1],b.value=b.widget.formatting,!0}});return d.concat(e)},execute:"formatting",enabled:function(a){return m(a,!1)},stateChange:function(a,b){for(var c=0,d=b.controls.length;c<d;c++)if(b.controls[c].value===b.widget.formattingWithClassName)return void(b.value=b.widget.formattingWithClassName);b.value=b.widget.formatting}}),inlineStyle:b.ui.dropdown({allowEmpty:!0,requireWidget:"inlineStyle",requireCommand:"applyClass",hiddenWhenDisabled:!0,defaultNS:"typer:formatting",controls:"inlineStyleOptions inlineStyleClear",execute:"applyClass",enabled:function(a){return m(a,!0)},stateChange:function(a,b){b.value=b.widget.inlineClass}}),inlineStyleOptions:b.ui.group({controls:function(c){return a.map(Object.keys(c.options.inlineClass||{}),function(a){return b.ui.button({value:a,label:c.options.inlineClass[a]})})}}),inlineStyleClear:b.ui.button({dropdownOption:"exclude",requireWidget:"inlineStyle",execute:"applyClass"}),bold:n("bold","inlineStyle"),italic:n("italic","inlineStyle"),underline:n("underline","inlineStyle"),strikeThrough:n("strikeThrough","inlineStyle"),unorderedList:b.ui.button({requireWidgetEnabled:"list",execute:function(a,b,c){c.insertWidget("list","")},active:function(a,c){return c.widget&&b.is(c.widget.element,"ul")},enabled:function(a){return m(a,!1)&&a.typer.getSelection().widgetAllowed("list")}}),orderedList:b.ui.callout({requireWidgetEnabled:"list",controls:[o("1","1, 2, 3, 4"),o("a","a, b, c, d"),o("A","A, B, C, D"),o("i","i, ii, iii, iv"),o("I","I, II, III, IV")],active:function(a,c){return c.widget&&b.is(c.widget.element,"ol")},enabled:function(a){return m(a,!1)&&a.typer.getSelection().widgetAllowed("list")}}),indent:n("indent","list"),outdent:n("outdent","list"),justifyLeft:n("justifyLeft","formatting"),justifyCenter:n("justifyCenter","formatting"),justifyRight:n("justifyRight","formatting"),justifyFull:n("justifyFull","formatting")}),b.ui.addLabels("en","typer:formatting",{bold:"Bold",italic:"Italic",underline:"Underlined",strikeThrough:"Strikethrough",unorderedList:"Bullet list",orderedList:"Numbered list",indent:"Indent",outdent:"Outdent",justifyLeft:"Align left",justifyCenter:"Align center",justifyRight:"Align right",justifyFull:"Align justified",paragraph:"Formatting",inlineStyle:"Text style",inlineStyleClear:"Clear style"}),b.ui.addLabels("en","typer:formatting:orderedList",{decimal:"Decimal numbers","lower-alpha":"Alphabetically ordered list, lowercase","upper-alpha":"Alphabetically ordered list, uppercase","lower-roman":"Roman numbers, lowercase","upper-roman":"Roman numbers, uppercase"}),b.ui.addLabels("en","typer:formatting:tagname",{p:"Paragraph",h1:"Header 1",h2:"Header 2",h3:"Header 3",h4:"Header 4",h5:"Header 5",h6:"Header 6",table:"Table",td:"Table cell",th:"Table header",ul:"Unordered list",ol:"Ordered list",li:"List item",blockquote:"Blockquote"}),b.ui.addIcons("material","typer:formatting",{bold:"",italic:"",underline:"",strikeThrough:"",unorderedList:"",orderedList:"",indent:"",outdent:"",justifyLeft:"",justifyCenter:"",justifyRight:"",justifyFull:""}),b.ui.setShortcut({bold:"ctrlB",italic:"ctrlI",underline:"ctrlU",justifyLeft:"ctrlShiftL",justifyCenter:"ctrlShiftE",justifyRight:"ctrlShiftR"}),b.ui.addHook("tab",function(a){!a.isDefaultPrevented()&&a.typer.widgetEnabled("list")&&(a.typer.invoke(k),a.preventDefault())})}(jQuery,window.Typer),function(a,b){"use strict";function c(a){var b=document.createElement("A");return b.href=a||"",location.protocol===b.protocol&&location.hostname===b.hostname&&(location.port===b.port||""===location.port&&b.port===("https:"===location.protocol?"443":"80"))?b.pathname.replace(/^(?!\/)/,"/")+b.search+b.hash:a}b.widgets.link={element:"a[href]",inline:!0,insert:function(b,d){if(d=c(d||/^[a-z]+:\/\//g.test(b.selection.getSelectedText())&&RegExp.input),b.selection.isCaret){var e=a("<a>").text(d).attr("href",d)[0];b.insertHtml(e)}else b.execCommand("createLink",d),b.selection.collapse("end"),b.trackChange(b.selection.startElement)},remove:"keepText",ctrlClick:function(a){window.open(a.widget.element.href)},commands:{setURL:function(a,b){a.widget.element.href=c(b),a.trackChange(a.widget.element)},unlink:function(a){a.removeWidget(a.widget)}}},b.defaultOptions.link=!0,b.ui.addControls("typer",{"toolbar:link":b.ui.button({after:"insert",requireWidgetEnabled:"link",hiddenWhenDisabled:!0,dialog:function(c,d){var e=d.widget||c.typer.getSelection().getSelectedText(),f={href:d.widget?a(d.widget.element).attr("href"):/^[a-z]+:\/\//g.test(e)?e:"",text:d.widget?a(d.widget.element).text():e,blank:!!d.widget&&"_blank"===a(d.widget.element).attr("target")};return"function"==typeof c.options.selectLink?c.options.selectLink(f):b.ui("typer:link:selectLink",{"typer:link:selectLink":f}).execute()},execute:function(c,d,e,f){if(!f)return null;var g=f.href||f,h=f.text||g;if(d.widget)a(d.widget.element).text(h),e.typer.invoke("setURL",g),f.blank?a(d.widget.element).attr("target","_blank"):a(d.widget.element).removeAttr("target"),e.trackChange(d.widget.element);else{var i=b.createTextNode(h);e.insertHtml(i),e.selection.select(i),e.insertWidget("link",g),"link"===e.selection.focusNode.widget.id&&(f.blank?a(e.selection.focusNode.widget.element).attr("target","_blank"):a(e.selection.focusNode.widget.element).removeAttr("target"))}},active:function(a,b){return b.widget}}),"contextmenu:link":b.ui.group("typer:link:*(type:button)"),"link:open":b.ui.button({requireWidget:"link",hiddenWhenDisabled:!0,shortcut:"ctrlClick",execute:function(a,b){window.open(b.widget.element.href)}}),"link:unlink":b.ui.button({hiddenWhenDisabled:!0,requireWidget:"link",execute:"unlink"}),"link:selectLink:text":b.ui.textbox({presetOptions:{required:!0}}),"link:selectLink:url":b.ui.textbox({presetOptions:{required:!0}}),"link:selectLink:blank":b.ui.checkbox(),"link:selectLink:buttonset":b.ui.group("dialog:buttonOK dialog:buttonCancel remove","buttonset"),"link:selectLink:buttonset:remove":b.ui.button({hiddenWhenDisabled:!0,buttonsetGroup:"left",cssClass:"warn",enabled:function(a){return!!a.parentControl.widget}}),"link:selectLink":b.ui.dialog({controls:"*",valueMap:{text:"text",href:"url",blank:"blank"},setup:function(a,b,c,d){b.resolveOne("buttonset").resolveOne("remove").execute=function(){a.parentControl.widget.remove(),d()}}})}),b.ui.addLabels("en","typer",{"toolbar:link":"Insert hyperlink","link:url":"Link URL","link:blank":"Open in new window","link:open":"Open hyperlink","link:unlink":"Remove hyperlink","link:selectLink":"Create hyperlink","link:selectLink:text":"Text","link:selectLink:url":"URL","link:selectLink:blank":"Open in new window","link:selectLink:buttonset:remove":"Remove"}),b.ui.addIcons("material","typer",{"toolbar:link":"","link:url":""}),b.ui.addHook("space enter",function(a){if(a.typer.widgetEnabled("link")){var b=a.typer.getSelection().clone(),c=b.clone();if("enter"===a.data&&c.moveByCharacter(-1),c.getCaret("start").moveByWord(-1)&&"link"!==c.focusNode.widget.id&&/^(([a-z]+:)\/\/^s+|\S+@\S+\.\S+)/g.test(c.getSelectedText())){var d=(RegExp.$2||"mailto:")+RegExp.$1;a.typer.snapshot(!0),a.typer.select(c),a.typer.invoke(function(a){a.insertWidget("link",d)}),a.typer.select(b),"space"===a.data&&a.preventDefault()}}})}(jQuery,window.Typer),function(a,b){"use strict";function c(a){return b.ui.button({requireWidgetEnabled:"media",dialog:function(b){return"function"==typeof b.options.selectMedia?b.options.selectMedia(a):b.prompt("typer:media:selectImage")},execute:function(a,b,c,d){c.insertWidget("media",d)},enabled:function(a){return a.typer.getSelection().widgetAllowed("media")},visible:function(a){return a.typer.widgetEnabled("media")}})}var d=/\.(?:(jpg|jpeg|png|gif|webp)|(mp4|ogg|webm)|(mp3))(?:\?.*)?$/i;b.widgets.media={element:"img,audio,video,a:has(>img)",text:function(a){return a.element.src},insert:function(c,e){var f=b.createElement(d.test(e.src||e)?RegExp.$2?"video":RegExp.$3?"audio":"img":"img");f.src=e.src||e,b.is(f,"video")&&a(f).attr("controls",""),c.insertHtml(f)}},b.defaultOptions.media=!0,b.ui.addControls("typer",{"widget:media":b.ui.group("typer:media:*"),"insert:image":c("image"),"insert:video":c("video"),"media:filePicker":b.ui.button({requireWidget:"media",stateChange:function(b,c){c.value=a(c.widget.element).attr("src"),c.label=(/(?:^|\/)([^\/?#]+)(?:\?.+)?$/.exec(c.value)||[])[1]||""},dialog:function(a,c){if("function"==typeof a.options.selectMedia){var e=d.exec(c.label)&&(RegExp.$1?"image":RegExp.$2?"video":"audio");return a.options.selectMedia(e,c.value)}return b.ui.prompt("dialog:selectImage",c.value)},execute:function(b,c,d,e){a(c.widget.element).attr("src",e.src||e),d.trackChange(c.widget.element)}}),"media:altText":b.ui.textbox({requireWidget:"media",hiddenWhenDisabled:!0,stateChange:function(b,c){c.value=a(c.widget.element).attr("alt")},execute:function(b,c,d){a(c.widget.element).attr("alt",c.value).attr("title",c.value),d.trackChange(c.widget.element)}})}),b.ui.addLabels("en","typer",{"insert:image":"Image","insert:video":"Video","media:altText":"Alternate text","media:selectImage":"Enter image URL"}),b.ui.addIcons("material","typer",{"insert:image":"","insert:video":"","media:altText":""})}(jQuery,window.Typer),function(a,b){"use strict";function c(b,c,d){a(b.typer.element).parents(b.options.target).andSelf().eq(0).toggleClass(b.options[c],d)}b.widgets.stateclass={options:{target:null,focused:"focused",empty:"empty"},focusin:function(a){c(a.widget,"focused",!0)},focusout:function(a){c(a.widget,"focused",!1)},contentChange:function(a){c(a.widget,"empty",!a.typer.hasContent())},init:function(a){c(a.widget,"empty",!a.typer.hasContent())}}}(jQuery,window.Typer),function(a,b){"use strict";function c(a,b){return new Array(b+1).join(a)}function d(c){var d=[],e=[];return b.iterate(c.createTreeWalker(b.NODE_EDITABLE|b.NODE_EDITABLE_PARAGRAPH),function(b){d[d.length]=a(b.element).parent().index(),e[e.length]=a(b.element).index()}),{minRow:Math.min.apply(null,d),maxRow:Math.max.apply(null,d),minColumn:Math.min.apply(null,e),maxColumn:Math.max.apply(null,e)}}function e(b,c,d){if(b.isSingleEditable){var e=a(b.focusNode.element)[c]()[0]||a(b.focusNode.element).parent()[c]().children(d)[0];e&&b.moveToText(e,-0)}}function f(b){a("td,th",b).css({outline:"1px dotted black",minWidth:"3em"})}var g="<td></td>",h="<th></th>",i="<tr>%</tr>";b.ui.define("tableGrid",{type:"tableGrid"}),b.widgets.table={element:"table",editable:"th,td",insert:function(b,d){d=a.extend({rows:2,columns:2},d),b.insertHtml("<table>"+c(i.replace("%",c(g,d.columns)),d.rows)+"</table>")},init:function(a){f(a.widget.element)},tab:function(a){e(a.typer.getSelection(),"next",":first-child")},shiftTab:function(a){e(a.typer.getSelection(),"prev",":last-child")},ctrlEnter:function(a){a.typer.invoke(function(a){a.selection.select(a.widget.element,b.COLLAPSE_START_OUTSIDE),a.insertText("")})},commands:{addColumnBefore:function(b){var c=d(b.selection);a(b.widget.element).find(">tbody>tr>th:nth-child("+(c.minColumn+1)+")").before(h),a(b.widget.element).find(">tbody>tr>td:nth-child("+(c.minColumn+1)+")").before(g),f(b.widget.element),b.trackChange(b.widget.element)},addColumnAfter:function(b){var c=d(b.selection);a(b.widget.element).find(">tbody>tr>th:nth-child("+(c.maxColumn+1)+")").after(h),a(b.widget.element).find(">tbody>tr>td:nth-child("+(c.maxColumn+1)+")").after(g),f(b.widget.element),b.trackChange(b.widget.element)},addRowAbove:function(b){var e=d(b.selection),h=a(b.widget.element).find(">tbody>tr")[e.minRow];a(h).before(i.replace("%",c(g,h.childElementCount))),f(b.widget.element),b.trackChange(b.widget.element)},addRowBelow:function(b){var e=d(b.selection),h=a(b.widget.element).find(">tbody>tr")[e.maxRow];a(h).after(i.replace("%",c(g,h.childElementCount))),f(b.widget.element),b.trackChange(b.widget.element)},removeColumn:function(b){var c=d(b.selection);a(b.widget.element).find(">tbody>tr").each(function(b,d){a(a(d).children().splice(c.minColumn,c.maxColumn-c.minColumn+1)).remove()}),b.trackChange(b.widget.element)},removeRow:function(b){var c=d(b.selection);a(a(b.widget.element).find(">tbody>tr").splice(c.minRow,c.maxRow-c.minRow+1)).remove(),b.trackChange(b.widget.element)},toggleTableHeader:function(b){if(a(b.widget.element).find("th")[0])a(b.widget.element).find("th").wrapInner("<p>").each(function(a,c){b.replaceElement(c,"td")});else{var d=a(b.widget.element).find(">tbody>tr")[0].childElementCount;a(b.widget.element).find("tbody").prepend(i.replace("%",c(h,d))),a(b.widget.element).find("th").text(function(a,b){return"Column "+(a+1)})}f(b.widget.element),b.trackChange(b.widget.element)}}},a.extend(b.ui.themeExtensions,{tableGrid:'<div class="typer-ui-grid"><div class="typer-ui-grid-wrapper"></div><br x:t="label"/></div>',tableGridInit:function(b,d){var e=c('<div class="typer-ui-grid-row">'+c('<div class="typer-ui-grid-cell"></div>',7)+"</div>",7);a(d.element).find(".typer-ui-grid-wrapper").append(e),a(d.element).find(".typer-ui-grid-cell").mouseover(function(){d.value.rows=a(this).parent().index()+1,d.value.columns=a(this).index()+1,d.label=d.value.rows+" × "+d.value.columns,a(d.element).find(".typer-ui-grid-cell").removeClass("active"),a(d.element).find(".typer-ui-grid-row:lt("+d.value.rows+")").find(".typer-ui-grid-cell:nth-child("+d.value.columns+")").prevAll().andSelf().addClass("active")}),d.label="0 × 0",d.value={},a(d.element).click(function(){b.execute(d)})}}),b.ui.addControls("typer",{"insert:table":b.ui.callout({requireWidgetEnabled:"table",enabled:function(a){return a.typer.getSelection().widgetAllowed("table")},visible:function(a){return a.typer.widgetEnabled("table")}}),"insert:table:create":b.ui.tableGrid({execute:function(a,b,c){c.insertWidget("table",b.value)}}),"contextmenu:table":b.ui.callout({requireWidget:"table",hiddenWhenDisabled:!0,defaultNS:"typer:table"}),"selection:selectTable":b.ui.button({requireWidget:"table",hiddenWhenDisabled:!0,execute:function(a,b){var c=a.typer.getSelection();c.select(b.widget.element),c.focus()}}),"table:toggleTableHeader":b.ui.checkbox({requireWidget:"table",execute:"toggleTableHeader",stateChange:function(b,c){c.value=!!a(c.widget.element).find("th")[0]}}),"table:style":b.ui.callout({requireWidget:"table",controls:function(c,d){var e=a.map(Object.keys(c.options.tableStyles||{}),function(a){return b.ui.button({requireWidget:"table",value:a,label:c.options.tableStyles[a],execute:function(b,c,d){c.widget.element.className=a,d.trackChange(c.widget.element)}})}),f=b.ui.button({requireWidget:"table",label:"typer:table:styleDefault",execute:function(a,b,c){b.widget.element.className="",c.trackChange(b.widget.element)}});return e.concat(f)}}),"table:tableWidth":b.ui.callout(),"table:tableWidth:fitContent":b.ui.button({requireWidget:"table",execute:function(b,c,d){a(c.widget.element).removeAttr("width"),d.trackChange(c.widget.element)}}),"table:tableWidth:fullWidth":b.ui.button({requireWidget:"table",execute:function(b,c,d){a(c.widget.element).attr("width","100%"),d.trackChange(c.widget.element)}}),"table:addRemoveCell":b.ui.group(),"table:addRemoveCell:addColumnBefore":b.ui.button({requireWidget:"table",execute:"addColumnBefore"}),"table:addRemoveCell:addColumnAfter":b.ui.button({requireWidget:"table",execute:"addColumnAfter"}),"table:addRemoveCell:addRowAbove":b.ui.button({requireWidget:"table",execute:"addRowAbove"}),"table:addRemoveCell:addRowBelow":b.ui.button({requireWidget:"table",execute:"addRowBelow"}),"table:addRemoveCell:removeColumn":b.ui.button({requireWidget:"table",execute:"removeColumn"}),"table:addRemoveCell:removeRow":b.ui.button({requireWidget:"table",execute:"removeRow"})}),b.ui.addLabels("en","typer",{"insert:table":"Table","contextmenu:table":"Modify table","selection:selectTable":"Select table","table:toggleTableHeader":"Show header","table:columnWidth":"Set column width","table:tableWidth":"Set table width","table:style":"Set table style","table:styleDefault":"Default","table:addRemoveCell:addColumnBefore":"Add column before","table:addRemoveCell:addColumnAfter":"Add column after","table:addRemoveCell:addRowAbove":"Add row above","table:addRemoveCell:addRowBelow":"Add row below","table:addRemoveCell:removeColumn":"Remove column","table:addRemoveCell:removeRow":"Remove row","table:tableWidth:fitContent":"Fit to content","table:tableWidth:fullWidth":"Full width"})}(jQuery,window.Typer),function(a,b){"use strict";function c(b){if(c.value===!1)b();else if(!c.value){var d=function(){c.value=!0};a(document).one("paste",d),setTimeout(function(){a(document).unbind("paste",d),c.value||(c.value=!1,b())})}}function d(c,d){if(c.update(),c.widget||!c.options.container){clearTimeout(h),g!==c&&(e(),g=c,a(c.element).appendTo(document.body),b.ui.setZIndex(c.element,c.typer.element));var f=a(c.element).height();if(d)c.position="fixed";else if("fixed"!==c.position){var i=b.ui.getRect((c.widget||c.typer).element);if(0===i.left&&0===i.top&&0===i.width&&0===i.height)return;d={position:"fixed",left:i.left,top:Math.max(0,i.top-f-10)}}if(d){var j=c.typer.getSelection().getRange();if(j){var k=j.getClientRects()[0]||b.ui.getRect(j);k.top>=d.top&&k.top<=d.top+f&&(d.top=k.bottom+10)}a(c.element).css(d)}}}function e(b){!g||b&&g!==b||(a(g.element).detach(),g.position="",g=null)}function f(c,e,f,g){var h=b.ui({type:g||"toolbar",typer:c,widget:f||null,theme:e.theme,defaultNS:"typer",controls:"contextmenu"===g?"contextmenu":f?"widget":"toolbar",options:e,showButtonLabel:"contextmenu"===g,executed:function(a,b){b.is("button dropdown")&&a.typer.getSelection().focus()}}),i=a(h.element);return e.container?i.appendTo(e.container):(i.addClass("typer-ui-float"),i.mousedown(function(b){var c=i.position();if(b.target===h.element){var e=function(a){d(h,{top:c.top+(a.clientY-b.clientY),left:c.left+(a.clientX-b.clientX)})};a(document.body).mousemove(e),a(document.body).mouseup(function(){a(document.body).unbind("mousemove",e)})}})),"contextmenu"===g&&(a(c.element).bind("contextmenu",function(a){a.preventDefault(),h.update(),h.show({x:a.clientX,y:a.clientY}),setTimeout(function(){h.element.focus()})}),a(c.element).bind("click",function(a){1===a.which&&h.hide()})),h}var g,h;b.widgets.toolbar={inline:!0,options:{container:"",theme:"material",formattings:{p:"Paragraph",h1:"Heading 1",h2:"Heading 2",h3:"Heading 3",h4:"Heading 4"},inlineClasses:{}},init:function(a){a.widget.toolbar=f(a.typer,a.widget.options),a.widget.contextmenu=f(a.typer,a.widget.options,null,"contextmenu"),a.widget.widgets={}},focusin:function(a){d(a.widget.toolbar)},focusout:function(a){e(a.widget.toolbar)},widgetFocusin:function(a){a.widget.widgets[a.targetWidget.id]||b.ui.controls["typer:widget:"+a.targetWidget.id]&&(a.widget.widgets[a.targetWidget.id]=f(a.typer,a.widget.options,a.targetWidget)),a.widget.widgets[a.targetWidget.id]&&(a.widget.widgets[a.targetWidget.id].widget=a.targetWidget,d(a.widget.widgets[a.targetWidget.id]))},widgetFocusout:function(a){d(a.widget.toolbar)},widgetDestroy:function(a){g&&g.typer===a.typer&&d(a.widget.toolbar)},stateChange:function(a){g&&g.typer===a.typer&&d(g)}},a(window).scroll(function(){g&&d(g)}),b.ui.addControls("typer",{contextmenu:b.ui.group("history selection clipboard *"),"contextmenu:history":b.ui.group("typer:history:*"),"contextmenu:selection":b.ui.group("typer:selection:*"),"contextmenu:clipboard":b.ui.group("typer:clipboard:*"),toolbar:b.ui.group(),"toolbar:insert":b.ui.callout({before:"*",controls:"typer:insert:*",enabled:function(a){return a.typer.getNode(a.typer.element).nodeType!==b.NODE_EDITABLE_INLINE}}),widget:b.ui.group({requireWidget:!0,controls:function(a,b){return a.widget.id+" delete"}}),"history:undo":b.ui.button({before:"*",shortcut:"ctrlZ",execute:function(a){a.typer.undo()},enabled:function(a){return a.typer.canUndo()}}),"history:redo":b.ui.button({before:"*",shortcut:"ctrlShiftZ",execute:function(a){a.typer.redo()},enabled:function(a){return a.typer.canRedo()}}),"widget:delete":b.ui.button({after:"*",requireWidget:!0,execute:function(a){a.widget.remove()}}),"selection:selectAll":b.ui.button({before:"*",shortcut:"ctrlA",execute:function(a){var b=a.typer.getSelection();b.selectAll(),b.focus()}}),"selection:selectParagraph":b.ui.button({before:"*",hiddenWhenDisabled:!0,execute:function(a){var b=a.typer.getSelection();b.select(b.startNode.element,"contents"),b.focus()},enabled:function(a){return a.typer.getSelection().isCaret}}),"clipboard:cut":b.ui.button({before:"*",shortcut:"ctrlX",execute:function(a){a.typer.getSelection().focus(),document.execCommand("cut")}}),"clipboard:copy":b.ui.button({before:"*",shortcut:"ctrlC",execute:function(a){a.typer.getSelection().focus(),document.execCommand("copy")}}),"clipboard:paste":b.ui.button({before:"*",shortcut:"ctrlV",execute:function(a){a.typer.getSelection().focus(),document.execCommand("paste"),c(function(){b.ui.alert("typer:clipboard:inaccessible")})}})}),b.ui.addLabels("en","typer",{"toolbar:insert":"Insert widget","history:undo":"Undo","history:redo":"Redo","selection:selectAll":"Select all","selection:selectParagraph":"Select paragraph","clipboard:cut":"Cut","clipboard:copy":"Copy","clipboard:paste":"Paste","clipboard:inaccessible":"Unable to access clipboard due to browser security. Please use Ctrl+V or [Paste] from browser's menu.",
"widget:delete":"Delete"}),b.ui.addIcons("material","typer",{"toolbar:insert":"","history:undo":"","history:redo":"","selection:selectAll":"","clipboard:cut":"","clipboard:copy":"","clipboard:paste":"","widget:delete":""})}(jQuery,window.Typer),function(a,b){"use strict";b.widgets.validation={init:function(a){var b=a.widget.options;b.invalidChars&&(b.invalidCharsRegex=new RegExp("["+b.invalidChars.replace(/[\[\]\\^]/g,"\\$&")+"]","g")),b.allowChars&&(b.invalidCharsRegex=new RegExp("[^"+b.allowChars.replace(/[\[\]\\^]/g,"\\$&")+"]","g"))},textInput:function(a){var b=a.widget.options,c=a.data;if(b.invalidCharsRegex){c=c.replace(b.invalidCharsRegex,"")}if(b.maxlength){var d=b.maxlength-a.typer.extractText().length;c.length>d&&(c=c.substr(0,d))}c!==a.data&&(a.preventDefault(),c&&a.typer.invoke(function(a){a.insertText(c)}))}}}(jQuery,window.Typer),function(a,b,c,d){function e(){var b='.has-N:focus{outline:none;}.has-N::selection,.has-N ::selection{background-color:transparent;}.has-N::-moz-selection,.has-N ::-moz-selection{background-color:transparent;}.N{position:fixed;pointer-events:none;width:100%;height:100%;font-family:monospace;font-size:10px;}.N>div{position:fixed;}.N>.border{box-sizing:border-box;border:1px solid rgba(0,31,81,0.2);}.N>.fill{background-color:rgba(0,31,81,0.2);}.N>.fill-margin{border:solid rgba(255,158,98,0.2);}@supports (clip-path:polygon(0 0,0 0)) or (-webkit-clip-path:polygon(0 0,0 0)){.N>.bl-r:before,.N>.tl-r:before,.N>.br-r:after,.N>.tr-r:after{content:"";display:block;position:absolute;background-color:rgba(0,31,81,0.2);width:4px;height:4px;-webkit-clip-path:polygon(100% 100%,100% 0,96.6% 25.9%,86.6% 50%,70.7% 70.7%,50% 86.6%,25.9% 96.6%,0 100%);clip-path:polygon(100% 100%,100% 0,96.6% 25.9%,86.6% 50%,70.7% 70.7%,50% 86.6%,25.9% 96.6%,0 100%);}}.N>.bl{border-bottom-left-radius:4px;}.N>.tl{border-top-left-radius:4px;}.N>.br{border-bottom-right-radius:4px;}.N>.tr{border-top-right-radius:4px;}.N>.bl-r:before{right:100%;bottom:0;}.N>.tl-r:before{right:100%;top:0;-webkit-transform:flipY();transform:flipY();}.N>.br-r:after{left:100%;bottom:0;-webkit-transform:flipX();transform:flipX();}.N>.tr-r:after{left:100%;top:0;-webkit-transform:rotate(180deg);transform:rotate(180deg);}.N>.newline:before{content:"\\0021a9";position:absolute;top:50%;left:2px;margin-top:-0.5em;line-height:1;background-color:white;box-shadow:0 0 1px black;opacity:0.5;padding:0 0.25em;}.N>.elm:before{content:attr(elm);box-shadow:0 0 1px white;background-color:rgba(0,31,81,0.8);color:white;padding:0 0.25em;position:absolute;bottom:100%;white-space:nowrap}';a(d.body).append("<style>"+b.replace(/N/g,"typer-visualizer")+"</style>"),q=a('<div class="typer-ui typer-visualizer">').appendTo(d.body)[0],a(c).bind("scroll resize orientationchange focus",function(){B=a(c).width(),C=a(c).height(),l()}),a(d.body).bind("mousewheel",l),a(d.body).bind("mousemove",function(a){o=a.clientX,p=a.clientY,m(o,p)})}function f(a){var c=r.getNode(a),d=[];do d.unshift(c.element.tagName.toLowerCase()+c.element.className.replace(/^(?=.)|\s+/,".")),c=c.parentNode;while(b.is(c,b.NODE_ANY_ALLOWTEXT));return d.join(" > ")}function g(a){if(b.is(a,b.NODE_ANY_INLINE))for(;!b.is(a,b.NODE_PARAGRAPH|b.NODE_EDITABLE_PARAGRAPH)&&a.parentNode;a=a.parentNode);return a}function h(c){var d=c.commonAncestorContainer,e=b.ui.getRect(1===d.nodeType?d:d.parentNode),f=a.map(c.getClientRects(),function(a){return{top:a.top,left:a.left,right:a.right,bottom:a.bottom}}),g=[];return f.sort(function(a,b){return a.top-b.top||a.left-b.left||b.bottom-a.bottom||b.right-a.right}),a.each(f,function(a,b){var c=g[0];if(c&&(b.left>=c.right&&b.top<c.bottom?(g.shift(),b.top=Math.min(b.top,c.top),b.left=c.left,b.bottom=Math.max(b.bottom,c.bottom),c=g[0]):b.top>=c.bottom&&(c.right=e.left+e.width)),c){if(w(c,b))return;b.top>c.top&&b.top-c.bottom<b.bottom-b.top&&(c.bottom=b.top),g[1]&&c.left===g[1].left&&c.right===g[1].right&&(c.top=g.splice(1,1)[0].top)}g.unshift(b)}),g}function i(b,c,d){var e;a.each(b,function(a,b){if(null===b.element&&(e=b),b.element===c)return b.type=d,e=!0,!1}),"object"==typeof e?(e.element=c,e.type=d):e||(b[b.length]={element:c,type:d})}function j(b){a.each(b,function(b,c){c.type="none",a.contains(d,c.element)||(c.element=null)})}function k(d){a.each(d,function(d,e){function g(c,d,e){var f=i[j]=i[j]||A.pop()||a("<div>")[0];return f.className=c,f.removeAttribute("style"),a(f).css(b.ui.cssFromRect(d)).css(e||{}),j++,f}var i=e.dom=e.dom||[],j=0;if("text"===e.type.substr(0,4)){var k=b.createRange(e.element);"text-fill"===e.type&&c.getSelection().rangeCount&&(k=b.createRange(k,c.getSelection().getRangeAt(0)));var l=h(k),m=e.type;a.each(l,function(a,b){var c=l[a-1]||u,d=l[a+1]||u,e=g("text-fill"===m?"fill":"border",b);e.className+=[b.left<c.left||b.left>c.right?" bl":b.left>c.left&&b.left<c.right?" bl-r":"",b.left<d.left||b.left>d.right?" tl":b.left>d.left&&b.left<d.right?" tl-r":"",b.right>c.right||b.right<c.left?" br":b.right<c.right&&b.right>c.left?" br-r":"",b.right>d.right||b.right<d.left?" tr":b.right<d.right&&b.right>d.left?" tr-r":""].join("")}),"text"===e.type&&g("elm",l[l.length-1]).setAttribute("elm",f(e.element))}else if("block"===e.type.substr(0,5)){var n=b.ui.getRect(e.element);if(g("border",n),"block"===e.type)g("elm",n).setAttribute("elm",f(e.element));else if("block-fill"===e.type)g("fill",n);else if("block-margin"===e.type){var o=c.getComputedStyle(e.element),p={};p.margin=[-parseFloat(o.marginTop),-parseFloat(o.marginRight),-parseFloat(o.marginBottom),-parseFloat(o.marginLeft),""].join("px "),p.borderWidth=[o.marginTop,o.marginRight,o.marginBottom,o.marginLeft].join(" "),g("fill-margin",n,p),a("br",e.element).each(function(a,c){g("newline",b.ui.getRect(c))})}}i.length>j&&A.push.apply(A,i.splice(j)),a(i).appendTo(q)}),a(A).detach()}function l(){if(r){var a=b.ui.getRect(r.element);t&&v(t,a)||(t=a,k(y))}}function m(a,c){if(j(z),r){var d=r.nodeFromPoint(a,c);d&&d.element!==r.element&&(b.is(d,b.NODE_WIDGET)?i(z,d.widget.element,"block"):i(z,d.element,b.is(d,b.NODE_ANY_INLINE)?"text":"block"))}k(z)}function n(a){var c=r.getSelection();j(y),c.isCaret?a.layout&&c.startNode&&b.is(c.startNode,b.NODE_ANY_ALLOWTEXT)&&i(y,g(c.startNode).element,"block-margin"):b.iterate(c.createTreeWalker(-1,function(c){if(b.is(c,b.NODE_ANY_ALLOWTEXT)||a.layout&&s&&c.element===s.element)return i(y,c.element,c.nodeType&b.NODE_ANY_ALLOWTEXT?"text-fill":"block-fill"),2})),k(y)}var o,p,q,r,s,t,u={left:1e4,right:-1e4},v=b.rectEquals,w=b.rectCovers,x=!c.ActiveXObject,y=[],z=[],A=[],B=a(c).width(),C=a(c).height();b.widgets.visualizer={options:{layout:!0},init:function(b){a(b.typer.element).addClass("has-typer-visualizer"),x&&!e.init&&(e(),e.init=!0)},focusin:function(a){r=a.typer,b.ui.setZIndex(q,r.element)},focusout:function(b){r=null,a(q).children().detach()},widgetFocusin:function(a){a.targetWidget.typer===r&&(s=a.targetWidget,x&&n(a.widget.options))},widgetFocusout:function(a){s=null},stateChange:function(a){x&&a.typer===r&&(n(a.widget.options),m(o,p))}},b.defaultOptions.visualizer=x}(jQuery,window.Typer,window,document),function(a,b,c){"use strict";function d(a){return a.getFullYear()}function e(a){return a.getMonth()}function f(a){return a.getDate()}function g(a){return a.getHours()}function h(a){return a.getMinutes()}function i(a,b){return new Array(b+1).join(a)}function j(a,b){return d(a)===d(b)&&e(a)===e(b)}function k(a){return"string"==typeof a&&/^today|([+-]\d+)(day|week|month|year)?$/g.test(a)?RegExp.$1?n(RegExp.$2||"day",new c,+RegExp.$1):new c:(a=null===a?void 0:a instanceof c?a:new c(a),isNaN(a)?void 0:a)}function l(a,b){var d=new c;return d.setHours(a,b,0,0),d}function m(a,b){var d=k(a.min),e=k(a.max);switch(b=new c(+(b<d?d:b>e?e:b)),a.mode||a){case"week":b.setDate(f(b)-b.getDay());break;case"month":b.setDate(1)}return"datetime"!==(a.mode||a)?b.setHours(0,0,0,0):b.setSeconds(0,0),b}function n(a,b,g,i){switch(a){case"minute":var j=g/Math.abs(g);return new c(+b+6e4*(((j>0?i:0)-h(b)%i||i*j)+i*(g-j)));case"day":return new c(+b+s*g);case"week":return new c(+b+7*s*g);case"month":return new c(d(b),e(b)+g,f(b));case"year":return new c(d(b)+g,e(b),f(b))}}function o(a,b){switch(a){case"month":return t[e(b)]+" "+d(b);case"week":var c=n("day",b,6);return t[e(b)]+" "+f(b)+" - "+(e(c)!==e(b)?t[e(c)]+" ":"")+f(c)+", "+d(b)}var i=t[e(b)]+" "+f(b)+", "+d(b);return"datetime"===a?i+" "+(g(b)||12)+":"+("0"+h(b)).slice(-2)+" "+(g(b)>=12?"PM":"AM"):i}function p(){r=b.ui({type:"contextmenu",controls:[b.ui.datepicker()],executed:function(a,b){q&&b.is("calendar clock")&&(q.setValue(a.getValue()),b.is("calendar")&&a.hide())}})}var q,r,s=864e5,t="January February March April May June July August September October November December".split(" "),u="Su Mo Tu We Th Fr Sa".split(" ");b.ui.define("calendar",{type:"calendar",defaultNS:"calendar",controls:"*",showButtonLabel:!1,mode:"day",min:null,max:null,get value(){return m(this,this.selectedDate)},set value(a){this.selectedDate=m(this,a),this.ui.trigger(this,"showMonth",this.selectedDate)},init:function(f,g){var h=a("table",g.element);a(i("<tr></tr>",7)).appendTo(h),a(i("<th></th>",7)).appendTo(h.find("tr:first")),a(i("<td></td>",7)).appendTo(h.find("tr+tr")),a("<button>").appendTo(h.find("td")),h.find("th").text(function(a){return u[a]}),h.bind("mousewheel",function(a){f.trigger(g,"showMonth",b.ui.getWheelDelta(a)),a.preventDefault()}),h.find("td").click(function(){var b=a(this).hasClass("prev")?-1:a(this).hasClass("next")?1:0;f.execute(g,new c(d(g.currentMonth),e(g.currentMonth)+b,+this.textContent))})},stateChange:function(a,b){a.trigger(b,"showMonth",b.currentMonth||b.value||new c)},showMonth:function(b,g,h){if(!isNaN(+h)){"number"==typeof h&&(h=n("month",g.currentMonth,h));var i=k(g.min),l=k(g.max),o=m({mode:"month",min:i,max:l},h),p=o.getDay(),q=a("td",g.element).removeClass("selected disabled");if(!g.currentMonth||!j(o,g.currentMonth)){var r=d(o),s=e(o),t=new c(r,s+1,0).getDate(),u=new c(r,s,0).getDate();q.removeClass("prev cur next today"),q.each(function(b,c){b<p?a(c).children().text(b+1-p+u).end().addClass("prev"):b>=t+p?a(c).children().text(b+1-p-t).end().addClass("next"):a(c).children().text(b+1-p).end().addClass("cur")});var v=new c;j(o,v)&&q.eq(f(v)+p-1).addClass("today"),a("tr:last",g.element).toggle(p+t>35);var w=b.resolveOne("year"),x=b.resolveOne("month");a.each(w.controls,function(a,b){b.label=b.value=r+a-5}),w.value=r,x.value=s,g.currentMonth=o}i&&j(o,i)&&q.slice(0,f(i)+p-1).addClass("disabled"),l&&j(o,l)&&q.slice(f(l)+p).addClass("disabled");var y=j(o,g.value);if(y||"week"===g.mode&&j(o,n("day",g.value,6)))switch(g.mode){case"day":q.eq(f(g.value)+p-1).addClass("selected");break;case"week":q.slice(y?f(g.value)+p-1:0).slice(0,7).addClass("selected");break;case"month":q.filter("td.cur").addClass("selected")}a(g.element).toggleClass("select-range","day"!==g.mode)}}}),b.ui.define("clock",{type:"clock",defaultNS:"clock",controls:"*",step:1,init:function(d,e){60%e.step>0&&(e.step=1);var f=a(".typer-ui-clock-face",e.element);a(i("<i></i>",12)).appendTo(f).each(function(b,c){a(c).css("transform","rotate("+30*b+"deg)")}),a("s",e.element).bind("mousedown touchstart",function(c){var f=c.target,i=b.ui.getRect(f.parentNode);i={top:(i.top+i.bottom)/2,left:(i.left+i.right)/2};var j="touchstart"===c.type,k={};k[j?"touchmove":"mousemove"]=function(a){if(!j&&1!==a.which)return k.mouseup();var b=j?a.originalEvent.touches[0]:a,c=Math.atan2(b.clientY-i.top,b.clientX-i.left)/Math.PI,m=h(e.value),n=g(e.value);if("m"===f.getAttribute("hand")){var o=Math.round((30*c+75)/e.step)*e.step%60;if(o!==m){var p=Math.floor(Math.abs(m-o)/30)*(o>m?-1:1);e.setValue(l(n+p,o))}}else{var q=Math.round(6*c+15)%12+("am"===d.getValue("meridiem")?0:12);q!==n&&e.setValue(l(q,m))}},k[j?"touchend":"mouseup"]=function(){a(document.body).unbind(k),d.execute(e)},1!==c.which&&1!==(c.originalEvent.touches||"").length||a(document.body).bind(k)});var j;a(e.element).bind("mousewheel",function(a){e.setValue(n("minute",e.value,b.ui.getWheelDelta(a),e.step)),a.preventDefault(),clearImmediate(j),j=setImmediate(function(){d.execute(e)})}),e.setValue(new c)},stateChange:function(b,c){var d=c.value;b.resolveOne("minute").presetOptions.step=c.step,b.setValue("hour",g(d)),b.setValue("minute",h(d)),b.setValue("meridiem",g(d)>=12?"pm":"am"),a('s[hand="h"]',c.element).css("transform","rotate("+(30*g(d)+.5*h(d)-90)+"deg)"),a('s[hand="m"]',c.element).css("transform","rotate("+(6*h(d)-90)+"deg)")}}),b.ui.define("datepicker",{renderAs:"buttonset",mode:"day",minuteStep:1,min:null,max:null,controls:[b.ui.calendar({name:"calendar"}),b.ui.clock({name:"clock",hiddenWhenDisabled:!0,enabled:function(a,b){return"datetime"===b.contextualParent.mode}})],get value(){var a=this.ui.getValue("calendar");if(this.ui.enabled("clock")){var b=this.ui.getValue("clock");a.setHours(g(b),h(b),0,0)}return a},set value(a){a=new c("string"==typeof a?a:+a),isNaN(+a)&&(a=new c),this.ui.setValue("calendar",a),this.ui.setValue("clock",a)},stateChange:function(a,b){a.set("calendar",{mode:"datetime"===b.mode?"day":b.mode,min:b.min,max:b.max}),a.set("clock","step",b.minuteStep)}}),b.ui.addControls("calendar",{year:b.ui.dropdown({controls:function(){for(var a=[],c=0;c<11;c++)a[c]=b.ui.button();return a},execute:function(a,b){a.trigger(b.contextualParent,"showMonth",new c(b.value,e(b.contextualParent.currentMonth)))}}),month:b.ui.dropdown({execute:function(a,b){a.trigger(b.contextualParent,"showMonth",new c(d(b.contextualParent.currentMonth),b.value))}}),prev:b.ui.button({buttonsetGroup:"right",execute:function(a,b){a.trigger(b.contextualParent,"showMonth",-1)}}),today:b.ui.button({buttonsetGroup:"right",execute:function(a,b){a.setValue(b.contextualParent,new c)}}),next:b.ui.button({buttonsetGroup:"right",execute:function(a,b){a.trigger(b.contextualParent,"showMonth",1)}})}),b.ui.addControls("clock",{hour:b.ui.textbox({preset:"number",presetOptions:{min:0,max:23,loop:!0},execute:function(a,b){a.execute(b.contextualParent,l(b.value,a.getValue("clock:minute")))}}),timeSeperator:b.ui.label({value:":"}),minute:b.ui.textbox({preset:"number",presetOptions:{min:0,max:59,digits:"fixed",loop:!0},execute:function(a,b){a.execute(b.contextualParent,l(a.getValue("clock:hour"),b.value))}}),meridiem:b.ui.button({execute:function(a,b){a.setValue(b,"am"===b.value?"pm":"am"),a.execute(b.contextualParent,l(a.getValue("clock:hour")%12+("am"===b.value?0:12),a.getValue("clock:minute")))},stateChange:function(a,b){b.label="clock:meridiem:"+b.value}})}),b.ui.addIcons("material","calendar",{today:"",prev:"",next:""}),b.ui.addLabels("en","calendar",{today:"Today",prev:"Previous month",next:"Next month"}),b.ui.addLabels("en","clock:meridiem",{am:"AM",pm:"PM"});for(var v={},w={},x=0;x<12;x++)v[t[x].toLowerCase()]=t[x],w[t[x].toLowerCase()]=b.ui.button({value:x});b.ui.addControls("calendar:month",w),b.ui.addLabels("en","calendar:month",v),a.extend(b.ui.themeExtensions,{calendar:'<div class="typer-ui-calendar"><div class="typer-ui-calendar-header"><br x:t="buttonset"/></div><div class="typer-ui-calendar-body"><table></table></div></div>',clock:'<div class="typer-ui-clock"><div class="typer-ui-clock-face"><s hand="h"></s><s hand="m"></s></div><br x:t="buttonset"/></div>',formatDate:null}),b.presets.datepicker={options:{mode:"day",minuteStep:1,min:null,max:null,required:!1,formatDate:null},overrides:{getValue:function(a){return a.selectedDate?m(a.options,a.selectedDate):null},setValue:function(d,e){d.selectedDate=e?m(d.options,e):null,d.softSelectedDate=null;var f="";if(e){var g=function(b){return a.isFunction(b)&&b(d.options.mode,e)};f=g(d.options.formatDate)||g(d.typer.parentControl&&b.ui.themes[d.typer.parentControl.ui.theme].formatDate)||g(o)}f!==this.extractText()&&(this.invoke(function(a){a.selection.selectAll(),a.insertText(f)}),this===q&&r.setValue(d.selectedDate||new c))},hasContent:function(a){return!!this.extractText()},validate:function(a,b){b(!a.options.required||!!a.selectedDate,"required")}},commands:{step:function(a,b){var d=a.widget.options,e=n("datetime"===d.mode?"minute":d.mode,a.typer.getValue()||new c,b,d.minuteStep);a.typer.setValue(e)}},contentChange:function(a){if(a.typer===q&&"script"!==a.data){var b=new c(a.typer.extractText());isNaN(+b)||r.setValue(m(a.widget.options,b)),a.widget.softSelectedDate=b}},click:function(a){a.typer===q&&r.show(a.typer.element)},mousewheel:function(a){a.typer.invoke("step",a.data),a.preventDefault()},upArrow:function(a){a.typer.invoke("step",-1)},downArrow:function(a){a.typer.invoke("step",1)},focusin:function(a){r||p(),r.retainFocus(a.typer),q=a.typer;var d=a.widget.options;r.set("(type:datepicker)",{mode:d.mode,minuteStep:d.minuteStep,min:d.min,max:d.max}),r.setValue(a.typer.getValue()||new c),r.show(a.typer.element),b.ui.isTouchDevice&&setImmediate(function(){a.typer===q&&r.focus()})},focusout:function(a){setImmediate(function(){a.typer===q&&(q=null,r.hide())}),a.typer===q&&a.widget.softSelectedDate&&a.typer.setValue(isNaN(+a.widget.softSelectedDate)?a.widget.selectedDate:a.widget.softSelectedDate)}}}(jQuery,window.Typer,Date),function(a,b){"use strict";function c(a){var b=document.createTextNode(a.replace(/\s/g," ")),c=document.createElement("div");return c.appendChild(b),c.innerHTML}function d(a,b){var c={};a.forEach(function(a){c[a]=!0}),b.forEach(function(a){delete c[a]});for(var d in c)return!0}function e(a,b){a=String(a||"");for(var d=[],e=a.toLowerCase(),f=0,g=-1,h=0;h<b.length;h++){var i=b.charAt(h).toLowerCase();if(" "!=i){if(f=e.indexOf(i,f),f==-1)return{firstIndex:1/0,consecutiveMatches:-1,formattedText:a};d[d.length]=f-g-1,g=f++}}var j=d[0],k=/^(0+)/.test(d.slice(0).sort().join(""))&&RegExp.$1.length,l="";for(f=0,h=0;h<d.length;h++)l+=c(a.substr(f,d[h]))+"<b>"+c(a[f+d[h]])+"</b>",f+=d[h]+1;return l+=c(a.slice(f)),{firstIndex:j,consecutiveMatches:k,formattedText:l.replace(/<\/b><b>/g,"")}}function f(b,c,d){return b=b.filter(function(b){a.extend(b,e(b.displayText,c));var d=e(b.value,c);return b.firstIndex=Math.min(b.firstIndex,d.firstIndex),b.consecutiveMatches=Math.max(b.consecutiveMatches,d.consecutiveMatches),b.matches&&b.matches.forEach(function(a){var d=e(a,c);b.firstIndex=Math.min(b.firstIndex,d.firstIndex),b.consecutiveMatches=Math.max(b.consecutiveMatches,d.consecutiveMatches)}),b.firstIndex!==1/0}),b.sort(function(a,b){return b.consecutiveMatches-a.consecutiveMatches+(a.firstIndex-b.firstIndex)||a.value.localeCompare(b.value)}),b.slice(0,d)}function g(b){var d=b.typer.extractText(),e=b.options.suggestions||b.options.allowedValues||[];a.isFunction(e)&&(e=e(d)),a.when(e).done(function(e){e=e.map(function(a){return"string"==typeof a?{value:a,displayText:a}:a}),e.forEach(function(a){b.knownValues[a.value]=a.displayText});var g=b.typer.getValue();e=e.filter(function(a){return g.indexOf(a.value)<0}),e=f(e,d,b.options.suggestionCount),d&&b.options.allowFreeInput&&e.push({value:d,displayText:d,formattedText:"<i>"+c(d)+"</i>"}),b.suggestions=e;var h;h=e.length?"<button>"+e.map(function(a){return a.formattedText}).join("</button><button>")+"</button>":'<button class="disabled">No suggestions</button>',a(".typer-ui-buttonlist",b.callout.element).html(h)}),setTimeout(function(){b.typer.focused()&&b.callout.show(b.typer.element)})}function h(a,b){return(a.options.allowFreeInput||a.knownValues[b])&&a.options.validate(b)}b.presets.keyword={options:{required:!1,allowFreeInput:!0,allowedValues:null,suggestionCount:5,suggestions:!1,validate:function(){return!0}},overrides:{getValue:function(b){return a("span",this.element).map(function(b,c){return String(a(c).data("value"))}).get()},setValue:function(b,c){c=(a.isArray(c)?c:String(c).split(/\s+/)).filter(function(a){return a}),d(c,this.getValue())&&this.invoke(function(a){a.selection.select(a.typer.element,"contents"),a.insertText(""),c.forEach(function(b){a.typer.invoke("add",b)})})},hasContent:function(){return!(!a("span",this.element)[0]&&!this.extractText())},validate:function(b,c){c(!b.options.required||this.getValue().length,"required"),c(!a(".invalid",this.element)[0],"invalid-value")}},widgets:{tag:{element:"span",inline:!0,editable:"none",insert:function(a,b){a.insertHtml('<span class="typer-ui-keyword" data-value="'+c(b.value)+'">'+c(b.displayText)+"<i>delete</i></span>")},click:function(a){a.target!==a.widget.element&&a.widget.remove()}}},commands:{add:function(c,d){if(d&&!(c.typer.getValue().indexOf(d.value||d)>=0)){"string"==typeof d&&(d={value:d,displayText:c.widget.knownValues[d]||d});var e=a("span:last",c.typer.element)[0];e?c.selection.select(e,!1):c.selection.select(c.typer.element,0),c.insertWidget("tag",d),e=a("span:last",c.typer.element)[0],c.selection.select(b.createRange(e,!1),b.createRange(c.typer.element,-0)),c.insertText(""),h(c.widget,d.value)||a(e).addClass("invalid")}}},init:function(c){c.typer.getSelection().moveToText(c.typer.element,-0),c.widget.knownValues={},c.widget.suggestions=[],c.widget.callout=b.ui({type:"contextmenu",typer:c.typer}),a(c.widget.callout.element).on("click","button",function(b){c.typer.invoke("add",c.widget.suggestions[a(this).index()]),c.typer.getSelection().focus(),g(c.widget)})},click:function(a){a.widget.selectedIndex=-1},focusin:function(a){g(a.widget)},focusout:function(a){a.widget.selectedIndex=-1,a.widget.callout.hide(),a.typer.invoke("add",a.typer.extractText())},upArrow:function(b){b.widget.selectedIndex>=0&&a("button",b.widget.callout.element).removeClass("active").eq(b.widget.selectedIndex--).prev().addClass("active")},downArrow:function(b){b.widget.selectedIndex<a("button",b.widget.callout.element).length-1&&a("button",b.widget.callout.element).removeClass("active").eq(++b.widget.selectedIndex).addClass("active")},enter:function(a){a.widget.selectedIndex>=0?(a.typer.invoke("add",a.widget.suggestions[a.widget.selectedIndex]),a.widget.selectedIndex=-1):a.typer.invoke("add",a.typer.extractText())},keystroke:function(b){"escape"===b.data&&a.contains(document.body,b.widget.callout)&&(b.widget.selectedIndex=-1,b.widget.callout.hide(),b.preventDefault())},contentChange:function(a){"textInput"!==a.data&&"keystroke"!==a.data||g(a.widget)}}}(jQuery,window.Typer),function(a,b){"use strict";b.presets.number={validation:{allowChars:"0-9"},options:{max:null,min:null,digits:"auto",step:1,loop:!1},overrides:{getValue:function(a){return parseInt(this.extractText())},setValue:function(a,b){b=+b||0;var c=a.options.min,d=a.options.max,e=a.options.loop&&null!==c&&null!==d;if(e&&b<c||!e&&null!==d&&b>d?b=d:(e&&b>d||!e&&null!==c&&b<c)&&(b=c),b=String(+b||0),"fixed"===a.options.digits){var f=String(+a.options.max||0).length;b=(new Array(f+1).join("0")+b).substr(-f)}b!==this.extractText()&&this.invoke(function(a){a.selection.selectAll(),a.insertText(b)})},hasContent:function(){return!!this.extractText()},validate:function(a){return!0}},focusout:function(a){var b=parseInt(a.typer.extractText())||0;a.typer.setValue(b)},mousewheel:function(a){a.typer.setValue(a.typer.getValue()-a.data*a.widget.options.step),a.preventDefault()},upArrow:function(a){var b=parseInt(a.typer.extractText())||0;a.typer.setValue(b+a.widget.options.step)},downArrow:function(a){var b=parseInt(a.typer.extractText())||0;a.typer.setValue(b-a.widget.options.step)},contentChange:function(a){if("keystroke"!==a.data){var b=parseInt(a.typer.extractText())||0;a.typer.setValue(b)}}}}(jQuery,window.Typer),function(a,b){"use strict";b.presets.textbox={options:{required:!1},overrides:{getValue:function(a){return this.extractText()},setValue:function(a,b){b!==this.getValue()&&this.invoke(function(a){a.selection.select(this.element,"contents"),a.insertText(b)})},hasContent:function(){return!!this.getValue()},validate:function(a,b){b(!a.options.required||this.getValue(),"required")}},init:function(a){a.typer.getSelection().moveToText(a.typer.element,-0)}}}(jQuery,window.Typer),function(a,b,c,d){"use strict";function e(d){var e=a(".typer-ui-float",d)[0],f=b.ui.getRect(e);f.bottom>a(c).height()?a(e).removeClass("float-top float-bottom").addClass("float-top"):f.top<0&&a(e).removeClass("float-top float-bottom").addClass("float-bottom"),f.right>a(c).width()?a(e).removeClass("float-left float-right").addClass("float-left"):f.left<0&&a(e).removeClass("float-left float-right").addClass("float-right")}function f(b,c){a(c||b.element).click(function(a){var c=b.getControl(a.target);c&&(c.is("checkbox")?b.execute(c,!c.value):c.is("button callout")&&b.execute(c))})}function g(c,d,e){if(!a(c).hasClass(d)){var f=a.Deferred(),g=function(e){a(c).hasClass(d)&&(a(c).toggleClass(d,!b.ui.matchWSDelim(e.type,i)),a(c).unbind(j+" "+i,g),f.resolveWith(e.target))};return a(c).addClass(d).one(j+" "+i,g),f.promise().done(e)}return a.when()}function h(b){b.callout=a(b.element).children(".typer-ui-float").detach().addClass("typer-ui typer-ui-material is-"+b.type)[0],f(b.ui,b.callout)}var i="animationend oanimationend webkitAnimationEnd",j="transitionend otransitionend webkitTransitionEnd";b.ui.themes.material=b.ui.theme({resources:["https://fonts.googleapis.com/css?family=Roboto:400,500,700","https://fonts.googleapis.com/icon?family=Material+Icons","https://cdn.rawgit.com/misonou/jquery-typer/master/css/jquery.typer.material.css"],controlActiveClass:"active",controlDisabledClass:"disabled",controlHiddenClass:"hidden",controlErrorClass:"error",iconset:"material",label:'<span class="typer-ui-label"><br x:t="labelIcon"/><br x:t="labelText"/></span>',labelText:function(a,b){return b.is("textbox")||!b.contextualParent.showButtonLabel&&a.getIcon(b)?"":'<span x:bind="(_:label)"></span>'},labelIcon:function(a,b){return b.contextualParent.is("dropdown")||b.is("checkbox")||!a.getIcon(b)?"":'<i class="material-icons" x:bind="(_:icon)"></i>'},buttonset:'<div class="typer-ui-buttonset"><br x:t="children(buttonsetGroup:left)"/><div class="typer-ui-buttonset-pad"></div><br x:t="children(buttonsetGroup:right)"/></div>',buttonlist:'<div class="typer-ui-buttonlist"><br x:t="children"/></div>',form:'<div class="typer-ui-form"><br x:t="children"/></div>',menupane:'<div class="typer-ui-float"><div class="typer-ui-buttonlist"><br x:t="children"/></div></div>',toolbar:'<div class="typer-ui-buttonset is-toolbar"><br x:t="children"/></div>',contextmenu:'<div class="typer-ui-float is-contextmenu anim-target"><div class="typer-ui-buttonlist"><br x:t="children"/></div></div>',group:'<div class="typer-ui-group"><br x:t="children"/></div>',groupStateChange:function(b,c){setImmediate(function(){c.setState("sep-before",!!a(c.element).prevAll(":not(.hidden)")[0]),c.setState("sep-after",!!a(c.element).nextAll(":not(.hidden):first:not(.typer-ui-group)")[0])})},link:'<label class="has-clickeffect"><a x:bind="(href:value,title:label)"><br x:t="label"/><span class="typer-ui-label-annotation" role="shortcut" x:bind="(_:shortcut)"></span><span class="typer-ui-label-annotation" x:bind="(_:annotation)"></span></a></label>',button:'<button x:bind="(title:label)"><br x:t="label"/><span class="typer-ui-label-annotation" role="shortcut" x:bind="(_:shortcut)"></span><span class="typer-ui-label-annotation" x:bind="(_:annotation)"></span></button>',file:'<label class="has-clickeffect" x:bind="(title:label)"><input type="file"/><br x:t="label"/></label>',fileInit:function(b,c){a(c.element).find(":file").change(function(e){b.execute(c,e.target.files),setImmediate(function(){var b=d.createElement("form");b.appendChild(e.target),b.reset(),a(e.target).prependTo(c.element)})})},callout:'<label class="typer-ui-callout" x:bind="(title:label)"><br x:t="button"/><br x:t="menupane"/></label>',calloutInit:function(a,b){b.contextualParent.is("callout contextmenu")||h(b)},dropdown:'<button class="typer-ui-dropdown" x:bind="(title:label)"><span class="typer-ui-label"><br x:t="labelIcon"/><span x:bind="(_:selectedText)"></span></span><br x:t="menupane"/></button>',dropdownInit:function(a,b){b.contextualParent.is("callout contextmenu")||h(b)},checkbox:'<button class="typer-ui-checkbox" x:bind="(title:label)"><br x:t="label"/></button>',checkboxStateChange:function(a,b){b.setState("checked",!!b.value)},textboxInner:'<div class="typer-ui-textbox-inner"><div contenteditable spellcheck="false"></div><div class="typer-ui-textbox-placeholder" x:bind="(_:label)"></div><div class="typer-ui-textbox-error"></div></div>',textbox:'<label class="typer-ui-textbox" x:bind="(title:label)"><br x:t="label"/><div class="typer-ui-textbox-wrapper"><br x:t="textboxInner"/></div></label>',textboxElement:"[contenteditable]",textboxPresetOptions:{stateclass:{target:".typer-ui-textbox"}},dialog:'<div class="typer-ui-dialog-wrapper"><div class="typer-ui-dialog-pin"></div><div class="typer-ui-dialog"><div class="typer-ui-dialog-inner anim-target"><div class="typer-ui-form"><br x:t="children"></div></div></div></div>',dialogInit:function(a,c){var d=a.parentControl,e=c.pinnable&&d&&b.ui.matchWSDelim(d.pinDirection,"left right top bottom");c.setState("is-modal",!!c.modal),a.setState(c.resolveBy,"pin-active",!0),e&&(c.setState("pinned",e),d.setState("pin-active",!0))},dialogWaiting:function(a,b){b.setState("loading",!0)},dialogError:function(a,b){b.setState("loading",!1)},dialogDestroy:function(a,b){a.parentControl&&a.parentControl.setState("pin-active",!1)},showCallout:function(a,b){b.callout&&a.show(b,b.callout,b.element,"left bottom")},afterShow:function(d,e,f){if(e.is("dialog")){var h=d.parentControl,i=e.pinnable&&h&&b.ui.matchWSDelim(h.pinDirection,"left right top bottom"),j=a(e.element).find(".typer-ui-dialog")[0],k=a(e.element).find(".typer-ui-dialog-pin")[0];i?(b.ui.snap(j,h.element,i+" center"),b.ui.snap(k,h.element,i+" center inset")):b.ui.snap(j,c,"center inset")}return e.is("dialog contextmenu")&&g(a(".anim-target",f.element)[0]||f.element,"open")},beforeHide:function(b,c,d){return c.is("dialog contextmenu")&&g(a(".anim-target",d.element)[0]||d.element,"closing").done(function(){a(this).removeClass("open closing")})},executed:function(a,b){b.is("button")&&b.contextualParent.is("callout dropdown contextmenu")&&b.contextualParent.hideCalloutOnExecute!==!1&&a.hide(b.contextualParent)},init:function(a,b){f(a)}}),a(function(){var c=".typer-ui-material button:not(.typer-ui-checkbox), .typer-ui-material .has-clickeffect";a(d.body).on("mousedown",c,function(c){var d=b.ui.getRect(c.currentTarget),e=a('<div class="typer-ui-clickeffect"><i></i></div>').appendTo(c.currentTarget),f=e.children().css({top:c.clientY-d.top,left:c.clientX-d.left}),g=Math.pow(c.clientY-d.top,2)+Math.pow(c.clientX-d.left,2),h=Math.pow(c.clientY-d.top,2)+Math.pow(c.clientX-d.right,2),i=Math.pow(c.clientY-d.bottom,2)+Math.pow(c.clientX-d.left,2),j=Math.pow(c.clientY-d.bottom,2)+Math.pow(c.clientX-d.right,2),k=.5+2*Math.sqrt(Math.max(g,h,i,j))/parseFloat(e.css("font-size"));setImmediate(function(){f.css("transform",f.css("transform")+" scale("+k+")").addClass("animate-in")}),e.css("border-radius",a(c.currentTarget).css("border-radius"))}),a(d.body).on("mouseup mouseleave",c,function(b){var c=a(".typer-ui-clickeffect",b.currentTarget);g(c.children(":not(.animate-out)"),"animate-out",function(){c.remove()})}),a(d.body).on("mouseover",".typer-ui-callout:has(>.typer-ui-float)",function(a){e(a.currentTarget)}),a(d.body).on("click",".typer-ui-dialog-wrapper",function(b){g(a(b.target).find(".typer-ui-dialog-inner"),"pop")})})}(jQuery,window.Typer,window,document),function(a,b){"use strict";function c(a){"function"!=typeof a&&(a=new Function(""+a));for(var b=new Array(arguments.length-1),c=0;c<b.length;c++)b[c]=arguments[c+1];var d={callback:a,args:b};return o[n]=d,m(n),n++}function d(a){delete o[a]}function e(a){var c=a.callback,d=a.args;switch(d.length){case 0:c();break;case 1:c(d[0]);break;case 2:c(d[0],d[1]);break;case 3:c(d[0],d[1],d[2]);break;default:c.apply(b,d)}}function f(a){if(p)setTimeout(f,0,a);else{var b=o[a];if(b){p=!0;try{e(b)}finally{d(a),p=!1}}}}function g(){m=function(a){process.nextTick(function(){f(a)})}}function h(){if(a.postMessage&&!a.importScripts){var b=!0,c=a.onmessage;return a.onmessage=function(){b=!1},a.postMessage("","*"),a.onmessage=c,b}}function i(){var b="setImmediate$"+Math.random()+"$",c=function(c){
c.source===a&&"string"==typeof c.data&&0===c.data.indexOf(b)&&f(+c.data.slice(b.length))};a.addEventListener?a.addEventListener("message",c,!1):a.attachEvent("onmessage",c),m=function(c){a.postMessage(b+c,"*")}}function j(){var a=new MessageChannel;a.port1.onmessage=function(a){var b=a.data;f(b)},m=function(b){a.port2.postMessage(b)}}function k(){var a=q.documentElement;m=function(b){var c=q.createElement("script");c.onreadystatechange=function(){f(b),c.onreadystatechange=null,a.removeChild(c),c=null},a.appendChild(c)}}function l(){m=function(a){setTimeout(f,0,a)}}if(!a.setImmediate){var m,n=1,o={},p=!1,q=a.document,r=Object.getPrototypeOf&&Object.getPrototypeOf(a);r=r&&r.setTimeout?r:a,"[object process]"==={}.toString.call(a.process)?g():h()?i():a.MessageChannel?j():q&&"onreadystatechange"in q.createElement("script")?k():l(),r.setImmediate=c,r.clearImmediate=d}}("undefined"==typeof self?"undefined"==typeof global?this:global:self);
//# sourceMappingURL=jquery.typer.min.js.map
