/*! jQuery Typer Plugin v0.9.0 | https://github.com/misonou/jquery-typer | The MIT License (MIT) */

!function(a,b,c,d,e,f,g,h,i){"use strict";function j(a,b){this.typer=a,this.baseCaret=new p(a,this),this.extendCaret=new p(a,this),b&&this.select(b)}function k(a,b,c,d){this.typer=a,this.id=b,this.element=c||null,this.options=d||{}}function l(a,b,c,d){this.eventName=a,this.typer=b,this.widget=c||null,this.data=void 0!==d?d:null}function m(a,b,c){this.childNodes=[],this.nodeType=a,this.element=b,this.widget=c}function n(a,b,c){this.whatToShow=b,this.filter=c||null,this.currentNode=a,this.root=a}function o(a,b,c){this.whatToShow=b,this.filter=c||null,this.typerNodeIterator=D(a,n)||new n(a,Ba|Ma)}function p(a,b){this.typer=a,this.selection=b}function q(a,b,c){clearTimeout(q[a.name]),q[a.name]=b&&setTimeout(b,c)}function r(a,b,c,d){Object.defineProperty(a,b,{enumerable:d!==!1,configurable:!0,writable:!0,value:c})}function s(a,b){a.prototype=b,r(b,"constructor",a,!1)}function t(a,b,c){return i.slice.call(a||{},b||0,c)}function u(a){return u[a]=u[a]||function(b){return b[a]},u[a]}function v(b,c){var d;return a.each(b,function(a,b){return d=c.call(this,b)&&b,!d}),d}function w(a,b){var c=(b||a.currentNode||"").nodeType;return a.whatToShow&(D(a,n)?c:1<<c-1)?a.filter?(a.filter.acceptNode||a.filter).call(a.filter,b||a.currentNode):1:3}function x(a,b,c){a.currentNode=c||a.currentNode;var d=w(a);if(2!==d){1===d&&b&&b(a.currentNode);for(var e;e=a.nextNode();b&&b(e));}}function y(b,c,d){var e=[];return x(b,i.push.bind(e),d),c?a.map(e,c):e}function z(a){return d(a||"").replace(/^[\s\u200b]+|[\s\u200b]+$/g,"")}function A(a){return a=d(a||""),a.charAt(0).toUpperCase()+a.slice(1)}function B(a){return a=d(a||""),a.charAt(0).toLowerCase()+a.slice(1)}function C(a){return a&&a.tagName&&a.tagName.toLowerCase()}function D(b,c){return!(!b||!c)&&(c.prototype?b instanceof c&&b:c.toFixed?b.nodeType&c&&b:("*"===c||a(b).is(c))&&b)}function E(b){var c={};return a.each(a.makeArray(b&&b.attributes),function(a,b){c[b.nodeName]=b.value}),c}function F(b,c){var d=E(b),e=E(c);return a.each(e,function(a,b){b===d[a]&&(delete d[a],delete e[a])}),!Object.keys(d)[0]&&!Object.keys(e)[0]}function G(a,b,c){if(a===b)return 0;var d=a&&b&&a.compareDocumentPosition(b);return 2&d?c&&8&d||1&d?NaN:1:4&d?c&&16&d||1&d?NaN:-1:NaN}function H(a,b){return a&&b&&!(1&(a.commonAncestorContainer||a).compareDocumentPosition(b.commonAncestorContainer||b))}function I(b,c){return b===c||a.contains(b,c)}function J(a,b){for(b=b||a;a&&a!==b&&20!==a.compareDocumentPosition(b);a=a.parentNode);return a}function K(a,b){var c=a.length||a.childNodes.length;return b===c||0===b&&1/b===-(1/0)?c:(c+b)%c||0}function L(a,b){for(var c,d=new o(a,4),e=0;(c=d.nextNode())&&c!==b;e+=c.length);return e}function M(a,b,d,g){if(a&&Sa(a.getRange))return a.getRange();var h,i=+b===b;if(D(a,e)?(h=c.createRange(),d?(i?h.setStart(a,K(a,b)):h[b?"setStartBefore":"setStartAfter"](a),D(d,e)&&H(a,d)&&(+g===g?h.setEnd(d,K(d,g)):h[g?"setEndBefore":"setEndAfter"](d))):(h[b===!0||i&&1&b||!a.parentNode?"selectNodeContents":"selectNode"](a),i&&2&b&&h.collapse(!!(4&b)))):D(a,f)&&(h=a.cloneRange(),h.collapsed||("boolean"==typeof b?h.collapse(b):i&&2&b&&h.collapse(!!(4&b)))),D(b,f)&&H(h,b)){var j=h.collapsed&&b.collapsed?-1:1;h.compareBoundaryPoints(0,b)*j<0&&h.setStart(b.startContainer,b.startOffset),h.compareBoundaryPoints(2,b)*j>0&&h.setEnd(b.endContainer,b.endOffset)}return h}function N(a,b){return a=D(a,f)||M(a),b=D(b,f)||M(b),H(a,b)&&a.compareBoundaryPoints(3,b)<=0&&a.compareBoundaryPoints(1,b)>=0}function O(a,b){return a=D(a,f)||M(a),b=D(b,f)||M(b),H(a,b)&&a.compareBoundaryPoints(0,b)<=0&&a.compareBoundaryPoints(2,b)>=0}function P(a,b){return a=D(a,f)||M(a),b=D(b,f)||M(b),H(a,b)&&0===a.compareBoundaryPoints(0,b)&&0===a.compareBoundaryPoints(2,b)}function Q(a,b,c){a=D(a,f)||M(a),b=D(b,f)||M(b);var d=H(a,b)?a.compareBoundaryPoints(0,b)+a.compareBoundaryPoints(2,b):NaN;return c&&(0!==d&&N(a,b)||0===d&&!P(a,b))?NaN:d&&d/Math.abs(d)}function R(a,b){return a.left===b.left&&a.top===b.top&&a.width===b.width&&a.height===b.height}function S(a){pa||setTimeout(function(){pa=!1}),pa=!0,a()}function T(a){if(Ta.rangeCount){var b=Ta.getRangeAt(0);return I(a,b.commonAncestorContainer)&&b}}function U(a,b){function d(c){var d=c.left>a?c.left-a:Math.min(0,c.left+c.width-a),e=c.top>b?c.top-b:Math.min(0,c.top+c.height-b);return d&&e?e>0?1/0:-(1/0):d||e}function e(a,b){return d(M(a,b,!0).getClientRects()[0]||{})}if(c.caretRangeFromPoint)return c.caretRangeFromPoint(a,b);if(c.caretPositionFromPoint){var f=c.caretPositionFromPoint(a,b);return M(f.offsetNode,f.offset,!0)}if(c.body.createTextRange){for(var g,h,i=c.elementFromPoint(a,b);g!==1/0;g=1/0,i=h||i)for(var j=0,k=i.childNodes.length;j<k;j++){var l=i.childNodes[j];if(1===l.nodeType&&"br"!==C(l)){var m=Math.abs(d(l.getBoundingClientRect()));if(m>g)break;g=m,h=l}else if(3===l.nodeType&&e(l,l.length-1)>0){for(var n=0,o=l.length;o-n>1;){var p=o+n>>1,q=e(l,p)<0;n=q?p:n,o=q?o:p}return M(l,Math.abs(e(l,n))<Math.abs(e(l,o))?n:o,!0)}}return M(i,za)}}function V(a){var b=a.startTextNode,c=a.endTextNode,d=b===c;c&&a.endOffset<c.length&&c.splitText(a.endOffset),b&&a.startOffset>0&&(a.startTextNode=b.splitText(a.startOffset),d&&(a.endTextNode=a.startTextNode,a.endOffset-=a.startOffset),a.startOffset=0)}function W(b){return D(b,g)||a(c.createDocumentFragment()).append(b)[0]}function X(a){return c.createTextNode(z(a)||ua)}function Y(a){return c.createElement(a)}function Z(b){a(b).remove()}function $(b,c){return a.each(c,function(c,d){b=a(d.cloneNode(!1)).append(b)[0]}),D(b,e)||W(b)}function _(a){try{Ta.removeAllRanges()}catch(a){var b=c.body.createTextRange();b.collapse(),b.select(),Ta.removeAllRanges()}Ta.addRange(a)}function aa(r,v){function w(){}function G(a){switch(a){case Na:return Fa.concat(la.getWidgets());case Oa:return Fa;case Pa:return la.getWidgets().reverse().concat(Fa);case Qa:return la.getWidgets().slice(-1)}}function H(b){var c;return a.each(G(Pa),function(a,d){return c=Sa((Ua[d.id].commands||{})[b])&&d,!c}),c}function J(b,c,d){var e,f=a.makeArray(D(b,k)||G(b));return a.each(f,function(a,f){var g=Ua[f.id];if(Sa(g[c]))return e=!0,g[c].call(g,new l(c,oa,f,d))!==!1||b!==Pa}),D(b,k)&&setTimeout(function(){J(Oa,"widget"+A(c),b)}),e}function K(c,d){function e(a,b){if(b.parentNode!==a&&b!==a){b.parentNode&&f(b,!0);for(var c=a.childNodes.length;c&&Q(b.element,a.childNodes[c-1].element)<0;c--);b.parentNode=a,b.previousSibling=a.childNodes[c-1],b.nextSibling=a.childNodes[c],(b.previousSibling||{}).nextSibling=b,(b.nextSibling||{}).previousSibling=b,a.childNodes.splice(c,0,b)}}function f(a,b){if(a.parentNode){var c=a.parentNode.childNodes.indexOf(a);c>=0&&(d&&!b&&a.widget.element===a.element&&(a.widget.destroyed=!0,J(a.widget,"destroy")),a.parentNode.childNodes.splice(c,1),a.parentNode=null,(a.previousSibling||{}).nextSibling=a.nextSibling,(a.nextSibling||{}).previousSibling=a.previousSibling)}}function j(b,d){d=d||b.parentNode||w.get(c),D(d,Ba)||b.widget&&D(b.element,Ua[b.widget.id].element)||(delete b.widget,a.each(Ua,function(a,c){if(D(b.element,c.element))return b.widget=new k(oa,a,b.element,c.options),!1})),b.widget=b.widget||d.widget;var e=Ua[b.widget.id];b.widget!==d.widget||D(d,Ba)?D(b.element,e.editable)||e.inline&&!e.editable?b.nodeType=e.inline?Ia:D(b.element,ta)?Da:Ca:b.nodeType=e.inline&&!D(d,Ha)?Ha:Ba:b.nodeType=D(b.element,ta)?Ea:Ga}function l(b){a.each(b.childNodes.slice(0),function(a,b){I(c,b.element)||(f(b),w.delete(b.element))})}function n(b,c){var h=[w.get(b)];l(h[0]);var i=c?a(b).children():D(b,g)?a(b).children().find("*").andSelf():a("*",b);i.each(function(a,b){for(;!I(h[0].element,b);)h.shift();if("br"===C(b))return void(w.has(b)&&D(h[0],Ma)&&(f(w.get(b)),w.delete(b)));var g=!w.has(b),i=w.get(b)||new m(0,b),k=i.widget;e(h[0],i),l(i),j(i),i.widget!==k&&d&&(k&&(k.destroyed=!0,J(k,"destroy")),J(i.widget,"init")),w.set(b,i),c&&g&&n(b),h.unshift(i)})}function o(b){var c=a.map(b,function(b){return a(b.addedNodes).add(b.removedNodes).filter(":not(#Typer_RangeStart,#Typer_RangeEnd)")[0]?b.target:null});i.push.apply(x,c)}function p(a){for(var b=a;!w.has(b);b=b.parentNode);return n(b),w.get(a)}function s(){u?o(u.takeRecords()):q(s,function(){x.push(null)}),null===x[0]?n(x.splice(0)&&c):x[0]&&a(c.parentNode||c).find(a.unique(x.splice(0))).each(function(a,b){n(b,!!u)})}function t(a){if(s(),I(c,a))return 3!==a.nodeType&&"br"!==C(a)||(a=a.parentNode),w.get(a)||p(a)}var u,w=new h,x=[];return c.parentNode||(c=D(c,g)||W(c)),b.MutationObserver&&d&&(u=new MutationObserver(o),u.observe(c,{subtree:!0,childList:!0})),w.set(c,new m(ua,c,new k(oa,"__root__",r,v))),x.push(null),{getNode:t,getEditableNode:function(a){var b=t(a)||w.get(c);return D(b,Ba)?t(b.widget.element):b}}}function R(a,b){var c=new p(oa);return c.moveToText(a,b),c.getRange()}function ba(a){var b=T(r);b&&!P(b,M(la))&&la.select(b),a!==!1&&(J(Na,"beforeStateChange"),J(Na,"stateChange"))}function ca(b){b=D(b,f)||M(b||r,!0),S(function(){var c=new j(oa,b);if(D(c.focusNode,Ca)&&!c.focusNode.childNodes[0])return void a(wa).appendTo(c.focusNode.element);if(D(c.focusNode,Da)&&!c.focusNode.element.childNodes[0])return void a(X()).appendTo(c.focusNode.element);var d=M(la);x(c.createTreeWalker(Ma|Ca|Ja),function(b){if(D(b,Ma)){var c=a("br:last-child",b.element)[0];c&&!c.nextSibling&&(a(X()).insertBefore(c),Z(c));var e=a("br:first-child",b.element)[0];e&&!e.previousSibling&&Z(e),a(b.element).contents().each(function(a,b){/\b\u00a0$/.test(b.nodeValue)&&b.nextSibling&&3===b.nextSibling.nodeType&&!/^[^\S\u00a0]/.test(b.nextSibling.nodeValue)&&(b.nodeValue=b.nodeValue.slice(0,-1)+" ")}),/\S/.test(b.element.textContent)||a(X()).appendTo(b.element)}N(d,b.element)||(b.element.normalize(),a(b.element).contents().each(function(a,b){3===b.nodeType&&(b.nodeValue=b.nodeValue.replace(/(?=.)\u200b+(?=.)|^[^\S\u00a0]+|[^\S\u00a0]+$/g,"").replace(/\b\u00a0\b/g," "))}),D(b,Ga)?C(b.element.previousSibling)===C(b.element)&&F(b.element,b.element.previousSibling)?(a(b.element).contents().appendTo(b.element.previousSibling),Z(b.element)):sa.indexOf(C(b.element))<0&&0===b.element.childElementCount&&!z(b.element.textContent)&&Z(b.element):D(b,Ca)&&(a(b.element).contents().each(function(b,c){3===c.nodeType&&(z(c.nodeValue)?a(c).wrap("<p>"):Z(c))}),b.element.childNodes[0]||a(wa).appendTo(b.element)))}),a('br[type="_moz"]',r).remove(),a(Ra&&"*",r).each(function(b,c){a(c).data("typerIEFix")||(a(c).data("typerIEFix",!0),a(c).bind("input textinput",function(a){pa||Wa.trigger(a)}))})})}function da(b,d,h){b=D(b,f)||M(b);var i="cut"===d?"extractContents":"paste"===d?"deleteContents":"cloneContents",k="paste"!==d,l="copy"!==d,m=c.createDocumentFragment(),n=new j(oa,b),o=n.isSingleEditable;if(!b.collapsed){var p=[[r,m]];x(n.createTreeWalker(-1,function(c){for(;D(c.element,e)&&!I(p[0][0],c.element);)p.shift();if(O(b,c.element))return k&&a(p[0][1]).append(c.element.cloneNode(!0)),l&&(D(c,Ca)?a(c.element).html(wa):D(c,Da)?a(c.element).html(va):Z(c.element)),2;var d=D(c,Ma)&&M(c.element,b)[i]();if(k){if(c.element!==r&&(!D(c,Ea|Ga)||d&&C(d.firstChild)!==C(c.element))){var f=c.element.cloneNode(!1);p[0][1].appendChild(f),D(f,g)||p.unshift([c.element,f])}d&&p[0][1].appendChild(d)}return D(c,Ma)?2:1}))}if(Sa(h)){var q=M(b,!0),s=o?M(b,!1):q,t=new j(oa,M(q,s));D(t.startNode,Ka)&&t.startNode===t.endNode&&(ca(b),t=new j(oa,M(t.startNode.element,!0))),Q(q,t.startNode.element)<0&&(q=M(t.startNode.element,xa)),h(t,q,s)}else ca(b),Va.snapshot();return m}function ea(b,f){D(f,e)||(f=d(f||"").replace(/\u000d/g,"").replace(/</g,"&lt;").replace(/\n{2,}/g,"</p><p>").replace(/\n/g,"<br>").replace(/.*/,"<p>$&</p>")),f=t(W(f).childNodes),da(b,"paste",function(b,d,e){var g,h,i,j=("__root__ "+(Ua[b.focusNode.widget.id].allowedWidgets||"*")).split(" "),k=d.cloneRange(),l=D(b.startNode,Ma),n=!0;for(i=D(b.startNode,Da)?[]:D(b.startNode,Ea)?[b.startNode.element]:D(b.startNode,La)?a(b.startElement).parentsUntil(b.startNode.element).andSelf().get().reverse():[Y("p")];f[0];){var o=f.shift(),p=new m(Ga,o);if(1===o.nodeType&&"br"!==C(o)&&(d.insertNode(o),p=ka.getNode(o),Z(o),("__unknown__"===p.widget.id||"*"!==j[1]&&j.indexOf(p.widget.id)<0)&&(o=X("__unknown__"===p.widget.id?o.textContent:fa(o)),p=new m(Ga,o))),!D(p,Ma)||!D(p,La)&&!n){for(var q=ka.getEditableNode(k.startContainer);!D(q.parentNode,Ka);)q=q.parentNode;var r=M(q.element,Aa),s=M(k,r).extractContents(),t=s.childNodes[0];if(r.insertNode(s),/\S/.test(q.element.textContent)||k.insertNode(X()),/\S/.test(t.textContent)||t.appendChild(X())," "===q.element.textContent.slice(-1)){var v=y(c.createNodeIterator(q.element,4,null,!1)).filter(u("nodeValue")).slice(-1)[0];v.nodeValue=v.nodeValue.slice(0,-1)+" "}if(" "===t.textContent.charAt(0)){var w=y(c.createNodeIterator(t,4,null,!1)).filter(u("nodeValue"))[0];w.nodeValue=" "+w.nodeValue.slice(1)}k=M(t||r,xa),h=h||k.cloneRange(),e=M(r,!1),n=!0,g=!0}if(l=l&&D(p,Ma),D(p,La)?o=$(o,l?i.slice(0,-1):i):l&&n&&(o=W(o.childNodes)),l)k.insertNode(o),k.collapse(!1),n=!1;else{var x=ka.getEditableNode(k.startContainer);D(x,Ka)?k.insertNode(o):M(x.element,ya).insertNode(o),k=M(o,za),l=D(p,Ma),g=!0}}!g&&b.startNode!==b.endNode&&D(b.startNode,Ea)&&D(b.endNode,Ea)&&(M(b.startNode.element,za).insertNode(M(b.endNode.element,!0).extractContents()),Z(b.endNode.element)),ca(M(d,k)),la.select(h||k,!0)})}function fa(b){I(r,b)&&(b=da(b,"copy"));var c="",d=K(b).getNode(b);return a.each(d.childNodes,function(a,b){return D(b,Ba|Ca)&&Sa(Ua[b.widget.id].text)?void(c+=(c&&"\n\n")+Ua[b.widget.id].text(b.widget)):void x(new n(b,Ma|Ja,function(a){return c+=c&&"\n\n",x(new o(a,5,function(a){c+=a.nodeValue||("br"===C(a)?"\n":"")})),2}))}),c}function ga(){function b(){var a=z(r.innerHTML.replace(/\s+x-typer-(start|end)(="\d+")?|(?!>)\u200b(?!<\/)/g,""));if(a!==h)return J(Na,"change",a),h=a,!0}function c(b,c,d){b&&3===b.nodeType?a(b.parentNode).attr(g[+d],L(ka.getNode(b),b)+c):b&&a(b).attr(g[+d],"")}function d(b){var c=g[+b],d=Wa.find("["+c+"]")[0]||Wa.filter("["+c+"]")[0],e=parseInt(a(d).attr(c));if(d)return a(d).removeAttr(c),+e===e?R(d,e):M(d,b?ya:Aa)}function e(){ba(),c(la.startTextNode||la.startElement,la.startOffset,!0),la.isCaret||c(la.endTextNode||la.endElement,la.endOffset,!1);var a=r.outerHTML;if(a!==i[0]){var d=b();i.splice(0,j+!d,a),i.splice(v.historyLevel),j=0}Wa.find("[x-typer-start], [x-typer-end]").andSelf().removeAttr("x-typer-start x-typer-end")}function f(c){var e=a.parseHTML(c)[0];Wa.empty().append(e.childNodes).attr(E(e)),la.select(d(!0),d(!1)),ba(),b()}var g=["x-typer-end","x-typer-start"],h=r.outerHTML,i=[h],j=0;a.extend(Va,{canUndo:function(){return j<i.length-1},canRedo:function(){return j>0},undo:function(){Va.canUndo()&&f(i[++j])},redo:function(){Va.canRedo()&&f(i[--j])},snapshot:function(a){q("snapshot"),a?q("snapshot",e,a):a===!1||ma?ba(!1):e()}})}function ha(){function e(){var a=o;o&&!o.destroyed&&(o=null,J(a,"focusout"))}function f(a){setTimeout(function(){Va.snapshot(a.timeStamp-p<50?50:0),p=a.timeStamp})}function g(a){if(la.isCaret){var b=la.clone();b.moveByCharacter("extend","backspace"===a.eventName?-1:1)&&b.isSingleEditable&&ea(b,"")}else ea(la,"")}function h(a,b){return!(!a||!J(Qa,"textInput",a))||(!b&&la.startTextNode&&la.isCaret?void 0:(ea(la,a),!0))}var i,j,k,l,m,n,o,p=0;Wa.mousedown(function(b){var d={mousemove:function(a){return!a.which&&i?void d.mouseup():(la.moveToPoint("extend",a.clientX,a.clientY),setTimeout(function(){la.focus()}),q(ha,ba),void a.preventDefault())},mouseup:function(){i=!1,a(c.body).unbind(d),q(ha,function(){ca(la.focusNode.element),Va.snapshot()})}};la.moveToPoint(b.clientX,b.clientY),a(c.body).bind(d),i=!0,b.stopPropagation()}),Wa.bind("compositionstart compositionupdate compositionend",function(a){if(a.stopPropagation(),j="d"!==a.type.slice(-1))h("");else{var b=T(r);M(b.startContainer,b.startOffset-a.originalEvent.data.length,b.startContainer,b.startOffset).deleteContents(),ba(!1),h(a.originalEvent.data,!0)}}),Wa.bind("keydown keypress keyup",function(b){if(b.stopPropagation(),j)return void b.stopImmediatePropagation();n=!0,setTimeout(function(){n=!1});var c=a.inArray(b.keyCode,[16,17,18,91,93])>=0,g=!c&&ra[b.keyCode]!==d.fromCharCode(b.keyCode).toLowerCase();if("keydown"===b.type){if(k=b.ctrlKey+b.shiftKey+b.altKey+b.metaKey+!c,k*=g||(k>2||k>1&&!b.shiftKey)&&!c,l=b.keyCode,k){var h=B((b.ctrlKey||b.metaKey?"Ctrl":"")+(b.altKey?"Alt":"")+(b.shiftKey?"Shift":"")+A(ra[l]||d.fromCharCode(b.charCode)));if(J(Pa,h)||/ctrl(?![axcvr]$)|alt|enter/i.test(h))return m=!0,void b.preventDefault()}m=!1,q(ha,function(){j||(ba(),ca(la.focusNode.element),la.focusNode.widget!==o&&e())})}else"keypress"===b.type?!k&&b.charCode||b.stopImmediatePropagation():((b.keyCode===l||c)&&k--&&b.stopImmediatePropagation(),m||c||j||(ba(),f(b)))}),Wa.bind("keypress textInput textinput",function(a){pa||(h(a.originalEvent.data||d.fromCharCode(a.charCode)||"")&&a.preventDefault(),f(a))}),Wa.bind("dragstart",function(a){var b=M(la),c={drop:function(a){var d=U(a.originalEvent.clientX,a.originalEvent.clientY),e=da(b,a.ctrlKey?"copy":"cut");ea(d,e),a.preventDefault(),Wa.unbind(c)}};Wa.bind(c),a.stopPropagation()}),Wa.bind("cut copy",function(c){var d=c.originalEvent.clipboardData||b.clipboardData,e=da(la,c.type),f=fa(e);b.clipboardData?d.setData("Text",f):(d.setData("text/plain",f),d.setData("text/html",a('<div id="Typer">').append(e)[0].outerHTML),d.setData("application/x-typer","true")),c.stopPropagation(),c.preventDefault()}),Wa.bind("paste",function(c){var d=c.originalEvent.clipboardData||b.clipboardData;if(a.inArray("application/x-typer",d.types)>=0){var e=d.getData("text/html"),f=W(a(e).filter("#Typer").contents());ea(la,f)}else a.inArray("text/plain",d.types)>=0?ea(la,d.getData("text/plain")):b.clipboardData&&ea(la,d.getData("Text"));c.stopPropagation(),c.preventDefault(),Ra&&setTimeout(function(){la.focus()})}),Wa.bind("mousedown mouseup mscontrolselect",function(a){var b=ka.getNode(a.target);o!==b.widget&&e(),D(b,Ba|Ha)&&(setTimeout(function(){la.focus()}),la.select(b.widget.element),o!==b.widget&&(o=b.widget,J(b.widget,"focusin")))}),Wa.bind("dblclick",function(a){la.moveToPoint(a.clientX,a.clientY)&&la.expand("word"),a.preventDefault()}),Wa.bind("focusin",function(){setTimeout(function(){na||(J(Na,"focusin"),i||la.focus()),qa=!1,na=null})}),Wa.bind("focusout",function(){setTimeout(function(){qa||na||(e(),J(Na,"focusout"))})}),a.each({moveByLine:"upArrow downArrow shiftUpArrow shiftDownArrow",moveByWord:"ctrlLeftArrow ctrlRightArrow ctrlShiftLeftArrow ctrlShiftRightArrow",moveToLineEnd:"home end shiftHome shiftEnd",moveByCharacter:"leftArrow rightArrow shiftLeftArrow shiftRightArrow"},function(b,c){a.each(c.split(" "),function(a,c){var d=1&a?1:-1,e=!!(2&a);Ua.__core__[c]=function(){e||la.isCaret?(la[b]("extend",d),e||la.collapse("extend")):la.collapse(d<0?"start":"end")}})}),a.extend(Ua.__core__,{ctrlZ:Va.undo,ctrlY:Va.redo,ctrlShiftZ:Va.redo,backspace:g,delete:g,escape:function(){r.blur(),T(r)&&Ta.removeAllRanges()}})}function ia(b,c){!v[b]&&!(v.widgets||"")[b]||!c.inline&&ua!==Ca||(Ua[b]=Object.create(c),Ua[b].options=a.extend(Object.create(c.options||null),v[b]),c.element||Fa.push(new k(oa,b,null,Ua[b].options)))}function ja(){Fa[0]=new k(oa,"__core__"),Fa[1]=new k(oa,"__root__"),a.each(v.widgets||{},ia),a.each(aa.widgets,ia),Ua.__root__=v,Ua.__core__={},Ua.__unknown__={element:v.disallowedElement||":not("+ta+",br,b,em,i,u,strike,small,strong,sub,sup,ins,del,mark,span)"}}D(r,e)||(v=r,r=r.element),v=a.extend(!0,{},(!v||v.defaultOptions!==!1)&&aa.defaultOptions,v);var ka,la,ma,na,oa=this,ua=v.inline||D(r,ta)?Da:Ca,Fa=[],Ua={},Va={},Wa=a(r),Xa={focusin:function(a){na=a.currentTarget},focusout:function(a){var b=a.currentTarget;setTimeout(function(){na!==b||T(r)||(na=null,Wa.trigger("focusout"))})}};ga(),ja(),ha(),Wa.attr("contenteditable","true"),ka=K(r,!0),a.extend(oa,Va,ka,{element:r,hasCommand:function(a){return!!H(a)},widgetEnabled:function(a){return Ua.hasOwnProperty(a)},getStaticWidgets:function(){return Fa.slice(0)},getSelection:function(){return la},nodeFromPoint:function(a,b){return ka.getNode(c.elementFromPoint(a,b))},retainFocus:function(b){a(b).bind(Xa)},invoke:function(a,b){var c=ma,d=la.clone(),e=la.timestamp;try{ma=!0,S(function(){var c=new w;"string"==typeof a&&(c.commandName=a,c.widget=H(a),a=c.widget&&Ua[c.widget.id].commands[a]),Sa(a)&&a.call(oa,c,b)})}finally{e===la.timestamp&&la.select(d),ma=c,Va.snapshot()}}}),s(w,{typer:oa,widget:null,get selection(){return la},insertText:function(a){ea(la,a)},insertHtml:function(a){ea(la,W(a))},insertWidget:function(a,b){Ua[a]&&Sa(Ua[a].insert)&&Ua[a].insert(this,b)},removeWidget:function(b){if(Sa(Ua[b.id].remove))Ua[b.id].remove(this,b);else if("keepText"===Ua[b.id].remove){var c=fa(b.element);a(b.element).replaceWith(X(c))}else Z(b.element)},execCommand:function(b,d){a.each(la.getEditableRanges(),function(a,e){_(e),c.execCommand(b,!1,d||"")}),la.focus()},getSelectedText:function(){var a=da(la,"copy");return fa(a)},getSelectedTextNodes:function(){return V(la),y(la.createDOMNodeIterator(4))}}),la=new j(oa,M(r,xa)),ca(),J(Oa,"init")}function ba(a,b){return b&&(a.whatToShow&Ja||!D(b,Ba|Ka))}function ca(a,b,c){return c&&!ba(a,b)?2:D(b,Ba)&&D(b.parentNode,Ba)?3:w(a,b)}function da(a,b,c){if(ca.returnValue=ca(a,b,c),1===ca.returnValue)return a.currentNode=b,!0}function ea(a,b,c){for(var d=a.currentNode[b];d;){if(da(a,d,!0))return d;if(3===ca.returnValue&&d[b])d=d[b];else{for(;!d[c];)if(d=ba(a,d.parentNode)&&d.parentNode,!d||d===a.root||d===a.currentNode)return null;d=d[c]}}}function fa(a,b,c){for(var d=a.currentNode;d&&d!==a.root;){for(var e=d[c];e;){if(da(a,e))return e;e=2!==ca.returnValue&&e[b]?e[b]:e[c]}if(d=ba(a,d.parentNode)&&d.parentNode,!d||d===a.root||1===ca(a,d,!0))return null}}function ga(a,b){var d=a.typerNodeIterator.currentNode;if(!D(d,Ma))return c.createNodeIterator(d.element,0,null,!1);var e=c.createTreeWalker(d.element,1|a.whatToShow,function(b){return 1|w(a,b)},!1);if("previousNode"===b){for(var f=a.currentNode;e.lastChild(););for(;G(f,e.currentNode,!0)<=0&&e[b](););}return e}function ha(a,b,c){return"previousNode"===b?c&&a.typerNodeIterator.lastChild()||a.typerNodeIterator.previousSibling()||a.typerNodeIterator.parentNode():!c&&a.typerNodeIterator.nextSibling()||a.typerNodeIterator.nextNode()}function ia(a,b){var c=a.currentNode;if(a.iterator[b]())return a.currentNode.parentNode!==c.parentNode&&1===w(a.iterator,c)&&ha(a,b,!0)&&(a.iteratorStack.unshift({dir:b,iterator:a.iterator}),a.iterator=ga(a,b),1===w(a.iterator)||a.iterator[b]())?a.currentNode:a.currentNode;for(;a.iteratorStack[0];){var d=a.iteratorStack.shift();if(d.dir===b)return a.iterator=d.iterator,a.currentNode}for(;ha(a,b);)if(a.iterator=ga(a,b),a.currentNode!==c&&1===w(a.iterator)||a.iterator[b]())return a.currentNode}function ja(a,b,c){var d=M(a);return new n(a.focusNode,b|Ja,function(a){return N(a.element,d)?c?c(a):1:2})}function ka(a){for(var b=[],c=a.focusNode;c;c=c.parentNode)D(c,Ka|Ia)&&b.unshift(c);return b}function la(a,b){var c=new o(new n(a.typer.getNode(a.typer.element),b),4);return c.typerNodeIterator.currentNode=a.typer.getNode(a.element),c.currentNode=a.textNode||a.element,c}function ma(a){a.timestamp=+new Date,a.direction=Q(a.extendCaret.getRange(),a.baseCaret.getRange())||0,a.isCaret=!a.direction,a.focusNode=a.typer.getEditableNode(J(a.baseCaret.element,a.extendCaret.element));for(var b=0,c=a.getCaret("start"),d=a.getCaret("end");b<4;b++)a[ma.NAMES[b+4]]=c[ma.NAMES[b]],a[ma.NAMES[b+8]]=d[ma.NAMES[b]];a===a.typer.getSelection()&&(a.focus(),a.typer.snapshot())}function na(a,b,c,d,e){return a.node=b,a.element=c,a.textNode=d||null,a.offset=e||0,a.wholeTextOffset=a.offset+(d&&L(b,d)),a.selection&&ma(a.selection),a}function oa(a,b,c,d){var e,f;if("br"===C(b)?(f=b.nextSibling,c=0):1===b.nodeType&&b.childNodes[0]&&(d||c===b.childNodes.length?(b=b.childNodes[(c||1)-1],c=b.length,d=!0):(b=b.childNodes[c],c=0)),3===b.nodeType&&(f=b,b=f.parentNode),e=a.typer.getEditableNode(f||b),f&&(e.element!==f.parentNode?(b=e.element,f=null):D(e,Ma)||(e=v(e.childNodes,function(a){return G(f,a.element)<0})||e.lastChild,b=e.element,f=null,d=!0)),!f&&D(e,Ma)){var g=new o(e,4);for(g.currentNode=b;g.nextNode()&&d;);f=g.currentNode,c=d?f&&f.length:0}if(D(e,Ma))for(;!D(e,Ea|Da);e=e.parentNode);return na(a,e,b,f,f?c:d?Aa:ya)}var pa,qa,ra=JSON.parse('{"8":"backspace","9":"tab","13":"enter","16":"shift","17":"ctrl","18":"alt","19":"pause","20":"capsLock","27":"escape","33":"pageUp","34":"pageDown","35":"end","36":"home","37":"leftArrow","38":"upArrow","39":"rightArrow","40":"downArrow","45":"insert","46":"delete","48":"0","49":"1","50":"2","51":"3","52":"4","53":"5","54":"6","55":"7","56":"8","57":"9","65":"a","66":"b","67":"c","68":"d","69":"e","70":"f","71":"g","72":"h","73":"i","74":"j","75":"k","76":"l","77":"m","78":"n","79":"o","80":"p","81":"q","82":"r","83":"s","84":"t","85":"u","86":"v","87":"w","88":"x","89":"y","90":"z","91":"leftWindow","92":"rightWindowKey","93":"select","96":"numpad0","97":"numpad1","98":"numpad2","99":"numpad3","100":"numpad4","101":"numpad5","102":"numpad6","103":"numpad7","104":"numpad8","105":"numpad9","106":"multiply","107":"add","109":"subtract","110":"decimalPoint","111":"divide","112":"f1","113":"f2","114":"f3","115":"f4","116":"f5","117":"f6","118":"f7","119":"f8","120":"f9","121":"f10","122":"f11","123":"f12","144":"numLock","145":"scrollLock","186":"semiColon","187":"equalSign","188":"comma","189":"dash","190":"period","191":"forwardSlash","192":"backtick","219":"openBracket","220":"backSlash","221":"closeBracket","222":"singleQuote"}'),sa="area base br col command embed hr img input keygen link meta param source track wbr".split(" "),ta="h1,h2,h3,h4,h5,h6,p,q,blockquote,pre,code,li,caption,figcaption,summary,dt,th",ua="​",va="&#8203;",wa="<p>&#8203;</p>",xa=7,ya=6,za=3,Aa=2,Ba=1,Ca=2,Da=32,Ea=4,Fa=8,Ga=16,Ha=64,Ia=128,Ja=4096,Ka=Ca|Da,La=Ga|Ha|Ia,Ma=Ea|Da|La,Na=1,Oa=2,Pa=3,Qa=4,Ra=!!b.ActiveXObject||void 0!==c.documentElement.style.msTouchAction,Sa=a.isFunction,Ta=b.getSelection();if(b.Typer=aa,a.extend(aa,{COLLAPSE_START_INSIDE:xa,COLLAPSE_START_OUTSIDE:ya,COLLAPSE_END_INSIDE:za,COLLAPSE_END_OUTSIDE:Aa,NODE_WIDGET:Ba,NODE_PARAGRAPH:Ea,NODE_EDITABLE:Ca,NODE_EDITABLE_PARAGRAPH:Da,NODE_INLINE:Ga,NODE_INLINE_WIDGET:Ha,NODE_INLINE_EDITABLE:Ia,NODE_OUTER_PARAGRAPH:Fa,NODE_SHOW_EDITABLE:Ja,ZWSP:ua,ZWSP_ENTITIY:va,trim:z,iterate:x,iterateToArray:y,compareAttrs:F,comparePosition:G,compareRangePosition:Q,containsOrEquals:I,createElement:Y,createTextNode:X,createRange:M,rangeIntersects:N,rangeCovers:O,rangeEquals:P,rectEquals:R,caretRangeFromPoint:U,defaultOptions:{historyLevel:100,disallowedWidgets:"keepText",widgets:{}},widgets:{}}),s(m,{get firstChild(){return this.childNodes[0]||null},get lastChild(){return this.childNodes.slice(-1)[0]||null}}),s(n,{previousSibling:function(){return fa(this,"lastChild","previousSibling")},nextSibling:function(){return fa(this,"firstChild","nextSibling")},firstChild:function(){return ea(this,"firstChild","nextSibling")},lastChild:function(){return ea(this,"lastChild","previousSibling")},parentNode:function(){for(var a=this.currentNode;a&&a!==this.root;a=a.parentNode)if(da(this,a.parentNode,!0))return a.parentNode},previousNode:function(){for(var a=this.currentNode;a&&a!==this.root;){for(var b=a.previousSibling;b;b=a.previousSibling){a=b;for(var c=ca(this,b);2!==c&&ba(this,a.childNodes[0])&&a.childNodes[0];)a=a.lastChild,c=ca(this,a,!0);if(1===c)return this.currentNode=a,a}if(a=ba(this,a.parentNode)&&a.parentNode,!a||a===this.root)return null;if(da(this,a,!0))return a}},nextNode:function(){for(var a=this.currentNode,b=1;a;){for(;2!==b&&a.childNodes[0];){if(a=a.firstChild,da(this,a,!0))return a;b=ca.returnValue}for(;a&&a!==this.root&&!a.nextSibling;)a=ba(this,a.parentNode)&&a.parentNode;if(!a||a===this.root)return null;if(a=a.nextSibling,da(this,a))return a;b=ca.returnValue}}}),s(o,{get currentNode(){return this.iterator.currentNode},set currentNode(a){this.iterator.currentNode=a},get typerNodeIterator(){return null},set typerNodeIterator(a){D(a.currentNode,Ma)||a.nextNode(),r(this,"typerNodeIterator",a,!1),r(this,"iteratorStack",[],!1),r(this,"iterator",ga(this),!1)},previousNode:function(){return ia(this,"previousNode")},nextNode:function(){return ia(this,"nextNode")}}),s(j,{get isSingleEditable(){return!ja(this,Ka).nextNode()},getCaret:function(a){switch(a){case"extend":return this.extendCaret;case"start":return this.direction<0?this.extendCaret:this.baseCaret;case"end":return this.direction>0?this.extendCaret:this.baseCaret;default:return this.baseCaret}},getRange:function(a){return void 0!==a||this.isCaret?(a!==!1?this.baseCaret:this.extendCaret).getRange():M(this.baseCaret.getRange(),this.extendCaret.getRange())},getEditableRanges:function(){var b=M(this);return a.map(y(ja(this,Ea|Da)),function(a){return M(b,M(a.element))})},getWidgets:function(){return a.map(ka(this),u("widget"))},getEditableElements:function(){return a.map(ka(this).concat(y(ja(this,Ka))),u("element"))},getParagraphElements:function(){var b=new n(this.focusNode,Ea|Ja),c=y(b,null,this.startNode);return c.splice(c.indexOf(this.endNode)+1),a.map(c,u("element"))},getSelectedElements:function(){return y(ja(this,Ma),u("element"))},createTreeWalker:function(a,b){return ja(this,a,b)},createDOMNodeIterator:function(a,b){return new o(ja(this,Ba|Ma),a,b)},collapse:function(a){return a=this.getCaret(a),(a===this.baseCaret?this.extendCaret:this.baseCaret).moveTo(a)},select:function(a,b,c,d){if("string"==typeof a)return this.getCaret(a).moveTo(b);var e=D(a,f)||M(a,b,c,d);return this.baseCaret.moveTo(e,ya)+(e.collapsed?this.extendCaret.moveTo(this.baseCaret):this.extendCaret.moveTo(e,Aa))>0},expand:function(a){var b=this.direction||1;return this.baseCaret["moveBy"+A(a)](-1*b)+this.extendCaret["moveBy"+A(a)](1*b)>0},shrink:function(a){var b=this.direction,c=!!(b&&this.baseCaret["moveBy"+A(a)](1*b)+this.extendCaret["moveBy"+A(a)](-1*b));return this.direction!==b&&this.collapse(),c},focus:function(){I(c,this.typer.element)&&_(M(this))},clone:function(){var a=new j(this.typer);return a.baseCaret.moveTo(this.baseCaret),a.extendCaret.moveTo(this.extendCaret),a}}),a.each("moveToPoint moveToText moveByLine moveToLineEnd moveByWord moveByCharacter".split(" "),function(a,b){j.prototype[b]=function(a){var c="string"!=typeof a,d=!!p.prototype[b].apply(this.getCaret(a),t(arguments,+!c));return c&&this.collapse(),d}}),ma.NAMES="node element textNode offset startNode startElement startTextNode startOffset endNode endElement endTextNode endOffset".split(" "),s(p,{getRange:function(){return this.textNode&&!this.textNode.parentNode&&this.moveToText(this.node.element,this.wholeTextOffset),M(this.textNode||this.element,this.offset,!!this.textNode)},clone:function(){return Object.create(p.prototype).moveTo(this)},moveTo:function(a,b,c,d){if(D(a,p))return na(this,a.node,a.element,a.textNode,a.offset);var e=M(a,b,c,d),f=this.selection&&this.selection.getCaret("start").getRange();return e&&oa(this,e.startContainer,e.startOffset,f&&Q(f,e)<0)},moveToPoint:function(a,b){return this.moveTo(U(a,b))},moveToText:function(a,b){if(3!==a.nodeType){var c=new o(this.typer.getNode(a),4);if(b)for(;c.nextNode()&&b>c.currentNode.length;b-=c.currentNode.length);else if(1/b<0){for(;c.nextNode(););b=c.currentNode.length}a=c.currentNode}return oa(this,a,K(a,b))},moveToLineEnd:function(b){var c=this.getRange().getBoundingClientRect(),d=c.left;return x(new o(this.node,4),function(e){a.each(M(e).getClientRects(),function(a,e){e.top<=c.top+c.height&&e.top+e.height>=c.top&&(d=Math[b<0?"min":"max"](d,b<0?e.left:e.left+e.width))})}),this.moveToPoint(d,c.top+c.height/2)},moveByLine:function(a){for(var b=la(this,Ma|Ja),c=this.getRange().getBoundingClientRect();;){var d=t(M(b.currentNode).getClientRects()),e=v(a<0?d.reverse():d,function(b){return a<0?b.top+b.height<=c.top:b.top>=c.top+c.height});if(e)return this.moveToPoint(c.left,e.top+e.height/2);if(!b[a<0?"previousNode":"nextNode"]())return this.moveToLineEnd(a)}},moveByWord:function(a){var b=a<0?/\b(\S*\s+|\S+)$/g:/^(\s+\S*|\S+)\b/g;if(this.textNode){
var c=a<0?this.textNode.nodeValue.substr(0,this.offset):this.textNode.nodeValue.slice(this.offset);if(!b.test(c))return this.moveByCharacter(a);if(RegExp.$1.length!==K(c,0*-a))return this.moveToText(this.textNode,this.offset+a*RegExp.$1.length)}var d=new o(this.node,4);for(d.currentNode=this.textNode||this.element;d[a<0?"previousNode":"nextNode"]();)if(b.test(d.currentNode.nodeValue)&&RegExp.$1.length!==K(d.currentNode,0*-a))return this.moveToText(d.currentNode,RegExp.$1.length);return d.currentNode&&this.moveToText(d.currentNode,0*-a)},moveByCharacter:function(a){for(var b=la(this,Ma|Ja),c=this.getRange().getBoundingClientRect(),d=this.offset;;){for(;1===b.currentNode.nodeType||d===K(b.currentNode,0*-a);){if(!b[a<0?"previousNode":"nextNode"]())return!1;d=a<0?b.currentNode.length+1:-1}d+=a;var e=M(b.currentNode,d,!0).getBoundingClientRect();if(c.height&&!R(c,e))return this.moveToText(b.currentNode,d);c=e}}}),a.each("moveByLine moveByWord moveByCharacter".split(" "),function(a,b){var c=p.prototype[b];p.prototype[b]=function(a){for(var b=a;b&&c.call(this,a/Math.abs(a));b+=b>0?-1:1);return a&&b===a?null:this}}),s(k,{remove:function(){var a=this;a.typer.invoke(function(b){b.removeWidget(a)})}}),!Ra){try{c.designMode="on",c.execCommand("enableObjectResizing",!1,!1),c.execCommand("enableInlineTableEditing",!1,!1)}catch(a){}c.designMode="off"}a(b).bind("focusin focusout",function(a){a.target!==b&&a.target!==c.body&&a.relatedTarget||(qa="focusout"===a.type)}),"undefined"==typeof h&&(h=function(){Object.defineProperty(this,"__dataKey__",{value:"typer"+Math.random().toString(36).substr(2,8)})},s(h,{get:function(a){return a[this.__dataKey__]},set:function(a,b){a[this.__dataKey__]=b},has:function(a){return this.__dataKey__ in a},delete:function(a){delete a[this.__dataKey__]}}))}(jQuery,window,document,String,Node,Range,DocumentFragment,window.WeakMap,Array.prototype),function(a,b){"use strict";b.presets={textbox:{inline:!0,defaultOptions:!1,disallowedElement:"*",init:function(a){a.typer.getSelection().moveToText(a.typer.element,-0),Object.defineProperty(a.typer.element,"value",{enumerable:!0,configurable:!0,get:function(){return b.trim(this.textContent)},set:function(b){b!==this.value&&(this.textContent=b,a.typer.getSelection().moveToText(this,-0))}})},change:function(b){a(b.typer.element).trigger("change")}}},a.fn.typer=function(c,d){return d="string"==typeof c?a.extend({},b.presets[c],d):c,this.each(function(a,c){new b(c,d)})}}(jQuery,window.Typer),function(a,b){"use strict";function c(b,d,e){var f=new Function("fn","return function "+(b||"")+"() { return fn.apply(this, arguments); }")(function(b){if(!(this instanceof f)){var c=Object.create(f.prototype);return f.apply(c,arguments),c}if(!m(e))return a.extend(this,b);try{this._super=d,e.apply(this,arguments)}finally{delete this._super}});return f.prototype=m(d)?new d:a.extend(f.prototype,d),f.extend=function(a){return c(null,f,a)},f}function d(a){var b=/^([\w-:]*)(?:\(([^}]+)\))?$/.exec(a),c=null;try{c=b[2]&&JSON.parse(("{"+b[2]+"}").replace(/([{:,])\s*([^\s:,}]+)/g,'$1"$2"'))}catch(a){}return{name:b[1],params:c}}function e(a,b){b?a.data("original-display")?a.css("display",a.data("original-display")):a.show():("none"!==a.css("display")&&a.data("original-display",a.css("display")),a.hide())}function f(a,b,c,d){if(a!==b&&m(b[c]))return b[c](a,b,d)}function g(a,b,c,d){f(a,b,c,d);var e=b.type+c.charAt(0).toUpperCase()+c.slice(1);m(r[a.theme][e])&&r[a.theme][e](a,b,d)}function h(b,c){if(c=c||b,m(c.controls)&&(c.controls=c.controls(b,c)||""),"string"==typeof c.controls){var e=c.controls.split(/\s+/),f={};a.each(e,function(b,c){if("*"===c.slice(-1))a.each(o,function(a,b){a.slice(0,c.length-1)===c.slice(0,-1)&&a.indexOf(":",c.length)<0&&e.indexOf("-"+a)<0&&!f[a]&&(f[a]=Object.create(b))});else if("-"!==c.charAt(0)){var g=d(c);o[g.name]&&e.indexOf("-"+g.name)<0&&!f[g.name]&&(f[g.name]=a.extend(Object.create(o[g.name]),g.params))}}),c.controls=[],a.each(f,function(a,b){b.name=b.name||a,c.controls.push(b)})}else a.isArray(c.controls)&&(c.controls=a.map(c.controls,Object.create));return a.each(c.controls||[],function(a,d){d.name=d.name||"noname:"+Math.random().toString(36).substr(2,8),d.parent=c,void 0===d.label&&(d.label=d.name),b.all[d.name]=d,h(b,d)}),c.controls}function i(b,c,e){function f(){a.each(k,function(b,d){a.each(d[1],function(b,e){"_"===b?a(d[0]).text(q[c[e]]||c[e]||""):n.indexOf(b)>=0?a(d[0]).prop(b,!!c[e]&&"false"!==c[e]):c[e]?a(d[0]).attr(b,q[c[e]]||c[e]||""):a(d[0]).removeAttr(b)})})}function g(b){a(b).find("*").andSelf().filter("[x\\:bind]").each(function(b,c){var e=d(a(c).attr("x:bind"));k.push([c,e.params])}).removeAttr("x:bind")}function h(e){var f=a(r[b.theme][e]||'<div><br x:t="children"></div>')[0];return g(f),a("[x\\:t]",f).each(function(e,f){var j,k=d(a(f).attr("x:t"));m(r[b.theme][k.name])?(j=a(r[b.theme][k.name](b,c,k.params)),g(j)):j="children"===k.name?a.map(c.controls,function(a){return i(b,a,k.params)}):h(k.name),a(f).replaceWith(j)}),f}function j(d){d.stopPropagation(),a(d.target).is(":checkbox")?setTimeout(function(){b.setValue(c,!!d.target.checked)}):b.execute(c)}c=c||b;var k=[];c.element=h(c.type),c.bindData=f;var l=r[b.theme][c.type+"ExecuteOn"];return"string"==typeof l?a(c.element).bind(l,j):l&&a(l.of,c.element).bind(l.on,j),c.element}function j(b,c){var d;"string"==typeof(c.requireWidget||c.requireWidgetEnabled)&&(c.widget=b._widgets[c.requireWidget||c.requireWidgetEnabled]||null,d=!c.widget),d||g(b,c,"stateChange");var f=!b.enabled(c),h=!c.hiddenWhenDisabled||!f;h&&c.bindData();var i=a(c.element),j=r[b.theme];i.is(":input")&&i.prop("disabled",f),j.controlDisabledClass&&i.toggleClass(j.controlDisabledClass,f),j.controlActiveClass&&i.toggleClass(j.controlActiveClass,!!b.active(c)),j.controlHiddenClass?i.toggleClass(j.controlHiddenClass,!h):e(i,h)}function k(a,b){a.typer?m(b.execute)?a.typer.invoke(function(c){b.execute(a,b,c,b.value)}):a.typer.hasCommand(b.execute)&&a.typer.invoke(b.execute,b.value):m(b.execute)&&b.execute(a,b,null,b.value)}function l(b,c,d,e){a.each(Object.keys(b.all).reverse(),function(a,e){c(b,b.all[e],d)}),c(b,b,d)}var m=a.isFunction,n="checked selected disabled readonly multiple ismap".split(" "),o={},p={},q={},r={};b.ui=c("TyperUI",null,function(b,c){"string"==typeof b&&(b={theme:c,controls:b});var d=a.extend(this,b);d.all={},d.controls=h(d),d.element=i(d),a(d.element).addClass("typer-ui typer-ui-"+b.theme),d.typer&&d.typer.retainFocus(d.element),f(d,r[d.theme],"init"),l(d,g,"init")}),a.extend(b.ui.prototype,{update:function(){var b=this,c=b._widgets={};b.widget?c[b.widget.id]=b.widget:b.typer&&a.each(b.typer.getSelection().getWidgets().concat(b.typer.getStaticWidgets()),function(a,b){c[b.id]=b}),l(this,j)},destroy:function(){l(this,f,"destroy")},trigger:function(a,b){"string"==typeof a&&(a=this.all[a]||{}),g(this,a,b)},enabled:function(a){return"string"==typeof a&&(a=this.all[a]||{}),!(!this.typer&&(a.requireTyper||a.requireWidget||a.requireWidgetEnabled||a.requireCommand))&&(!(a.requireCommand&&!this.typer.hasCommand(a.requireCommand)||a.requireWidgetEnabled&&!this.typer.widgetEnabled(a.requireWidgetEnabled))&&(!(a.requireWidget===!0&&!Object.getOwnPropertyNames(this._widgets)[0]||a.requireWidget&&!a.widget&&!this.widget)&&f(this,a,"enabled")!==!1))},active:function(a){return"string"==typeof a&&(a=this.all[a]||{}),!!f(this,a,"active")},setValue:function(a,b){"string"==typeof a&&(a=this.all[a]||{}),a.value=b,a.executeOnSetValue&&this.enabled(a)&&k(this,a)},execute:function(b){"string"==typeof b&&(b=this.all[b]||{});var c=this;if(c.enabled(b)){if(m(b.dialog)){var d=a.when(b.dialog(c,b));return d.done(function(a){void 0!==a&&(b.value=a),k(c,b)}),d}k(c,b)}},prompt:function(a,c){var d=b.ui("ui:prompt",this.theme),e=d.all["ui:prompt"];return e.label=a,e.value=c,d.execute(e)}}),a.extend(b.ui,{controls:o,themes:r,getIcon:function(a,b){return(p[a.icon]||p[a.name]||"")[b]||""},addIcons:function(b,c){a.each(c,function(a,c){p[a]||(p[a]={}),p[a][b]=c})},addLabels:function(b,c){a.extend(q,c)},setZIndex:function(b,c){b.style.zIndex=(+a(c).parentsUntil(b.parentNode).filter(function(b,c){return/absolute|fixed|relative/.test(a(c).css("position"))}).slice(-1).css("z-index")||0)+1}}),a.extend(b.ui,{button:c("TyperUIButton",{type:"button"}),dropdown:c("TyperUIDropdown",{type:"dropdown",stateChange:function(b,c){a.each(c.controls,function(d,e){if(b.active(e))return a("select",c.element).prop("selectedIndex",d),c.selectedIndex=d,c.selectedValue=e.label||e.name,!1})},execute:function(a,b){a.execute(b.controls[b.selectedIndex])},enabled:function(a,b){return b.controls.length>0}}),group:c("TyperUIGroup",{type:"group",hiddenWhenDisabled:!0},function(b,c){this.controls=b,a.extend(this,c)}),callout:c("TyperUICallout",{type:"callout"}),textbox:c("TyperUITextbox",{type:"textbox",executeOnSetValue:!0}),checkbox:c("TyperUICheckbox",{type:"checkbox",executeOnSetValue:!0}),dialog:c("TyperUIDialog",{type:"dialog"},function(b,c){this.controls=b,this.dialog=function(b,d){var e=a.Deferred();return c(b,d,e.resolve.bind(e),e.reject.bind(e)),b.update(),b.trigger(d,"open"),e.always(function(){b.trigger(d,"close"),b.destroy()}),e.promise()}})}),a.extend(o,{"ui:button-ok":b.ui.button(),"ui:button-cancel":b.ui.button(),"ui:prompt-input":b.ui.textbox({label:"",executeOnSetValue:!1}),"ui:prompt-buttonset":b.ui.group("ui:button-ok ui:button-cancel"),"ui:prompt":b.ui.dialog("ui:prompt-input ui:prompt-buttonset",function(a,b,c,d){a.all["ui:button-ok"].execute=function(){c(a.all["ui:prompt-input"].value)},a.all["ui:button-cancel"].execute=d,a.setValue("ui:prompt-input",b.value)})}),b.ui.addLabels("en",{"ui:button-ok":"OK","ui:button-cancel":"Cancel"}),b.ui.addIcons("material",{"ui:button-ok":"done","ui:button-cancel":"close"})}(jQuery,window.Typer),function(a,b){"use strict";function c(b){var c=a(b).css("text-align"),d=a(b).css("direction");switch(c){case"-webkit-left":return"left";case"-webkit-right":return"right";case"start":return"ltr"===d?"left":"right";case"end":return"ltr"===d?"right":"left";default:return c}}function d(b,d){var e;return a(b.getSelectedElements()).each(function(b,f){var g;g="textAlign"===d?c(f):"inlineClass"===d?a(f).filter("span").attr("class")||"":a(f).css(d),e=""===e||e&&e!==g?"":g}),e||""}function e(a,c){var d=b.createElement(a);return c&&(d.className=c),d}function f(b){a(b).is("li:only-child")&&(b=b.parentNode),a(b).remove()}function g(c){var d=a(c.parentNode).filter("ul,ol")[0],e=a(c).prev("li")[0]||a("<li>").insertBefore(c)[0],g=a(e).children("ul,ol")[0]||a(d.cloneNode(!1)).appendTo(e)[0];a("<li>").append(c.childNodes).appendTo(g),f(c),a(g).parent("li")[0]&&!g.previousSibling&&a(b.createTextNode()).insertBefore(g)}function h(b){var c=a(b).parent("ul,ol")[0],d=a(c).parent("li")[0];a(b).next("li")[0]&&(d?a(c.cloneNode(!1)).append(a(b).nextAll()).appendTo(b):(a(c.cloneNode(!1)).append(a(b).nextAll()).insertAfter(c),a(b).children("ul,ol").insertAfter(c))),a(e(d?"li":"p")).append(b.childNodes).insertAfter(d||c),f(b)}function i(b){a(b.selection.getParagraphElements()).attr("align",m[b.commandName])}function j(a){a.selection.isCaret?a.insertHtml(e(n[a.commandName])):(a.widget.subscript&&"superscript"===a.commandName?a.execCommand("subscript"):a.widget.superscript&&"subscript"===a.commandName&&a.execCommand("superscript"),a.execCommand(a.commandName))}function k(c,d){var e="insertOrderedList"===c.commandName||d?"ol":"ul",f="<"+e+(d||"").replace(/^.+/,' type="$&"')+">",g=function(b,c){return c.tagName.toLowerCase()===e&&(a(c).attr("type")||"")===(d||"")};a.each(c.selection.getParagraphElements(),function(d,e){if(a(e).is("ol>li,ul>li"))a(e.parentNode).filter(g)[0]?"list"===c.selection.focusNode.widget.id&&h(e):a(e.parentNode).wrap(f).contents().unwrap();else{var i=a(e).prev().filter(g)[0]||a(e).next().filter(g)[0]||a(f).insertAfter(e)[0];a(e).wrap("<li>").contents().unwrap().parent()[b.comparePosition(e,i)<0?"prependTo":"appendTo"](i)}})}function l(a,c){(c||"").replace(/(\w+):(\w+)/g,function(c,d,e){b.widgets[a][d]=function(a){a.typer.invoke(e)}})}var m={justifyLeft:"left",justifyRight:"right",justifyCenter:"center",justifyFull:"justify"},n={bold:"b",italic:"i",underline:"u",strikeThrough:"strike",superscript:"sup",subscript:"sub"};b.widgets.inlineStyle={inline:!0,beforeStateChange:function(b){var c=b.typer.getSelection();a.extend(b.widget,{bold:/bold|700/.test(d(c,"fontWeight")),italic:"italic"===d(c,"fontStyle"),underline:"underline"===d(c,"textDecoration"),strikeThrough:"line-through"===d(c,"textDecoration"),superscript:!!a(c.getSelectedElements()).filter("sup")[0],subscript:!!a(c.getSelectedElements()).filter("sub")[0],inlineClass:d(c,"inlineClass")})},commands:{bold:j,italic:j,underline:j,strikeThrough:j,superscript:j,subscript:j,applyClass:function(b,c){var d=b.selection.getParagraphElements();a(b.getSelectedTextNodes()).wrap(e("span",c)),a("span:has(span)",d).each(function(b,c){a(c).contents().unwrap().filter(function(a,b){return 3===b.nodeType}).wrap(e("span",c.className))}),a('span[class=""]',d).contents().unwrap()}}},l("inlineStyle","ctrlB:bold ctrlI:italic ctrlU:underline"),b.widgets.formatting={beforeStateChange:function(b){var c=b.typer.getSelection(),e=c.getParagraphElements().slice(-1)[0];a(e).is("li")&&(e=a(e).closest("ol, ul")[0]||e);var f=e&&e.tagName.toLowerCase(),g=f+(a(e).attr("class")||"").replace(/^(.)/,".$1"),h=d(c,"textAlign");a.extend(b.widget,{justifyLeft:"left"===h,justifyCenter:"center"===h,justifyRight:"right"===h,justifyFull:"justify"===h,formatting:f,formattingWithClassName:g})},commands:{justifyCenter:i,justifyFull:i,justifyLeft:i,justifyRight:i,formatting:function(b,c){var d=/^([^.]*)(?:\.(.+))?/.exec(c)||[];"ol"===d[1]||"ul"===d[1]?b.insertWidget("list","ol"===d[1]&&"1"):a(b.selection.getParagraphElements()).not("li").wrap(e(d[1]||"p",d[2])).contents().unwrap()},insertLine:function(a){a.insertText("\n\n")}}},l("formatting","enter:insertLine ctrlShiftL:justifyLeft ctrlShiftE:justifyCenter ctrlShiftR:justifyRight"),b.widgets.lineBreak={inline:!0,commands:{insertLineBreak:function(a){a.insertHtml("<br>")}}},l("lineBreak","shiftEnter:insertLineBreak"),b.widgets.list={element:"ul,ol",editable:"ul,ol",insert:k,remove:"keepText",commands:{indent:function(b){a.map(b.selection.getParagraphElements(),g)},outdent:function(b){a.map(b.selection.getParagraphElements(),h)}}},a.each("formatting list inlineStyle lineBreak".split(" "),function(a,c){b.defaultOptions[c]=!0});var o=b.ui.button.extend(function(a,b){this._super({requireWidget:b,requireCommand:a,execute:a,active:function(b,c){return c.widget&&c.widget[a]}})}),p=b.ui.button.extend(function(b,c){this._super({name:"formatting:orderedList:"+b,annotation:c,requireWidgetEnabled:"list",value:b,execute:function(a,c,d){d.insertWidget("list",b)},active:function(c,d){return d.widget&&a(d.widget.element).attr("type")===b}})});a.extend(b.ui.controls,{"toolbar:formatting":b.ui.group("formatting:*",{rqeuireTyper:!0,enabled:function(a){return!!a.typer.getSelection().getParagraphElements()[0]}}),"formatting:paragraph":b.ui.dropdown({requireCommand:"formatting",hiddenWhenDisabled:!0,controls:function(c){return a.map(Object.keys(c.options.formattings||{}),function(a){return b.ui.button({requireWidget:"formatting",execute:"formatting",value:a,label:c.options.formattings[a],active:function(b,c){return c.widget.formattingWithClassName===a||c.widget.formatting===a}})})}}),"formatting:inlineStyle":b.ui.dropdown({requireCommand:"applyClass",hiddenWhenDisabled:!0,controls:function(c){return a.map(Object.keys(c.options.inlineClass||{}),function(a){return b.ui.button({requireWidget:"inlineStyle",execute:"applyClass",value:a,label:c.options.inlineClass[a],active:function(b,c){return c.widget.inlineClass===a}})})}}),"formatting:bold":o("bold","inlineStyle"),"formatting:italic":o("italic","inlineStyle"),"formatting:underline":o("underline","inlineStyle"),"formatting:strikeThrough":o("strikeThrough","inlineStyle"),"formatting:unorderedList":b.ui.button({requireWidgetEnabled:"list",execute:function(a,b,c){c.insertWidget("list","")},active:function(a,b){return b.widget&&"ul"===b.widget.element.tagName.toLowerCase()}}),"formatting:orderedList":b.ui.callout({requireWidgetEnabled:"list",controls:[p("1","1, 2, 3, 4"),p("a","a, b, c, d"),p("A","A, B, C, D"),p("i","i, ii, iii, iv"),p("I","I, II, III, IV")],active:function(a,b){return b.widget&&"ol"===b.widget.element.tagName.toLowerCase()}}),"formatting:indent":o("indent","list"),"formatting:outdent":o("outdent","list"),"formatting:justifyLeft":o("justifyLeft","formatting"),"formatting:justifyCenter":o("justifyCenter","formatting"),"formatting:justifyRight":o("justifyRight","formatting"),"formatting:justifyFull":o("justifyFull","formatting")}),b.ui.addLabels("en",{"formatting:bold":"Bold","formatting:italic":"Italic","formatting:underline":"Underlined","formatting:strikeThrough":"Strikethrough","formatting:unorderedList":"Bullet List","formatting:orderedList":"Numbered List","formatting:indent":"Indent","formatting:outdent":"Outdent","formatting:justifyLeft":"Align Left","formatting:justifyCenter":"Align Center","formatting:justifyRight":"Align Right","formatting:justifyFull":"Align Justified","formatting:paragraph":"Formatting","formatting:inlineStyle":"Text Style","formatting:orderedList:1":"Decimal numbers","formatting:orderedList:a":"Alphabetically ordered list, lowercase","formatting:orderedList:A":"Alphabetically ordered list, uppercase","formatting:orderedList:i":"Roman numbers, lowercase","formatting:orderedList:I":"Roman numbers, uppercase"}),b.ui.addIcons("material",{"formatting:bold":"format_bold","formatting:italic":"format_italic","formatting:underline":"format_underlined","formatting:strikeThrough":"strikethrough_s","formatting:unorderedList":"format_list_bulleted","formatting:orderedList":"format_list_numbered","formatting:indent":"format_indent_increase","formatting:outdent":"format_indent_decrease","formatting:justifyLeft":"format_align_left","formatting:justifyCenter":"format_align_center","formatting:justifyRight":"format_align_right","formatting:justifyFull":"format_align_justify"})}(jQuery,window.Typer),function(a,b){"use strict";b.widgets.link={element:"a[href]",inline:!0,insert:function(b,c){if(c=c||/^[a-z]+:\/\//g.test(b.getSelectedText())&&RegExp.input||"#",b.selection.isCaret){var d=a("<a>").text(c).attr("href",c)[0];b.insertHtml(d)}else b.execCommand("createLink",c)},remove:"keepText",commands:{setURL:function(a,b){a.widget.element.href=b},unlink:function(a){a.removeWidget(a.widget)}}},b.defaultOptions.link=!0,a.extend(b.ui.controls,{"toolbar:link":b.ui.callout({controls:"link:*",requireWidgetEnabled:"link",hiddenWhenDisabled:!0,dialog:function(b,c){return"function"==typeof b.options.selectLink?b.options.selectLink():b.prompt("dialog:selectLink",c.widget?a(c.widget.element).attr("href"):"")},execute:function(a,b,c,d){b.widget?c.invoke("setURL",d):c.insertWidget("link",d)},active:function(a,b){return b.widget}}),"link:url":b.ui.textbox({hiddenWhenDisabled:!0,requireWidget:"link",execute:"setURL",stateChange:function(b,c){c.value=a(c.widget.element).attr("href")}}),"link:blank":b.ui.checkbox({hiddenWhenDisabled:!0,requireWidget:"link",stateChange:function(b,c){c.value="_blank"===a(c.widget.element).attr("target")},execute:function(b,c){c.value?a(c.widget.element).attr("target","_blank"):a(c.widget.element).removeAttr("target")}}),"link:unlink":b.ui.button({hiddenWhenDisabled:!0,requireWidget:"link",execute:"unlink"})}),b.ui.addLabels("en",{"toolbar:link":"Insert Link","link:url":"Link URL","link:blank":"Open in New Window","link:unlink":"Remove Link","dialog:selectLink":"Enter URL"}),b.ui.addIcons("material",{"toolbar:link":"insert_link","link:url":"insert_link"})}(jQuery,window.Typer),function(a,b){"use strict";var c=/\.(?:(jpg|jpeg|png|gif|webp)|(mp4|ogg|webm)|(mp3))(?:\?.*)?$/gi;b.widgets.media={element:"img,audio,video,a:has(>img)",text:function(a){return a.element.src},insert:function(a,d){var e=b.createElement(c.exec(d.src||d)&&(RegExp.$1?"img":RegExp.$2?"video":"audio"));e.src=d.src||d,a.insertHtml(e)}},b.defaultOptions.media=!0;var d=b.ui.button.extend(function(a){this._super({requireWidgetEnabled:"media",hiddenWhenDisabled:!0,dialog:function(b){return"function"==typeof b.options.selectMedia?b.options.selectMedia(a):b.prompt("dialog:selectImage")},execute:function(a,b,c,d){c.insertWidget("media",d)}})});a.extend(b.ui.controls,{"widget:media":b.ui.group("media:* widget:delete"),"insert:image":d("image"),"insert:video":d("video"),"media:filePicker":b.ui.button({requireWidget:"media",stateChange:function(b,c){c.value=a(c.widget.element).attr("src"),c.label=(/(?:^|\/)([^\/?#]+)(?:\?.+)?$/.exec(c.value)||[])[1]||""},dialog:function(a,b){if("function"==typeof a.options.selectMedia){var d=c.exec(b.label)&&(RegExp.$1?"image":RegExp.$2?"video":"audio");return a.options.selectMedia(d,b.value)}return a.prompt("dialog:selectImage",b.value)},execute:function(b,c,d,e){a(c.widget.element).attr("src",e.src||e)}}),"media:altText":b.ui.textbox({requireWidget:"media",hiddenWhenDisabled:!0,stateChange:function(b,c){c.value=a(c.widget.element).attr("alt")},execute:function(b,c){a(c.widget.element).attr("alt",c.value)}})}),b.ui.addLabels("en",{"insert:image":"Image","insert:video":"Video","media:altText":"Alternate Text","dialog:selectImage":"Enter Image URL"}),b.ui.addIcons("material",{"insert:image":"insert_photo","insert:video":"videocam","media:altText":"comment"})}(jQuery,window.Typer),function(a,b){"use strict";function c(a,b){return new Array(b+1).join(a)}function d(b,c,d){var e=a(">tbody>tr",b.widget.element).eq(Math.max(0,b.widget.row+c)).children()[Math.max(0,b.widget.column+d)];b.normalize(b.widget.element),b.moveCaret(e,-0)}var e="<td></td>",f="<th></th>",g="<tr>%</tr>";b.widgets.table={element:"table",editable:"th,td",insert:function(b,d){d=a.extend({rows:2,columns:2},d),b.insertHtml("<table>"+c(g.replace("%",c(e,d.columns)),d.rows)+"</table>")},beforeStateChange:function(b){var c=b.typer.getSelection(),d=c.getEditableElements(b.widget),e=d.length>1?-1:a(d).index(),f=d.length>1?-1:a(d).parent().index();a.extend(b.widget,{row:f,rowCount:a(">tbody>tr",b.widget.element).length,rowCells:a(">tbody>tr:nth-child("+(f+1)+")>*",b.widget.element).get(),column:e,columnCount:a(">tbody>tr:first>*",b.widget.element).length,columnCells:a(">tbody>tr>*:nth-child("+(e+1)+")",b.widget.element).get()})},tab:function(b){var c=a(">tbody>tr>*",b.widget.element).get(),d=b.widget.row*b.widget.columnCount+b.widget.column;d<c.length-1&&b.typer.moveCaret(c[d+1])},shiftTab:function(b){var c=a(">tbody>tr>*",b.widget.element).get(),d=b.widget.row*b.widget.columnCount+b.widget.column;d>0&&b.typer.moveCaret(c[d-1],-0)},ctrlEnter:function(a){0===a.widget.row&&0===a.widget.column?a.typer.invoke("insertSpaceBefore"):a.widget.row===a.widget.rowCount-1&&a.widget.column===a.widget.columnCount-1&&a.typer.invoke("insertSpaceAfter")},commands:{justifyLeft:function(b){a(b.selection.getEditableElements(b.widget)).attr("align","left")},justifyCenter:function(b){a(b.selection.getEditableElements(b.widget)).attr("align","center")},justifyRight:function(b){a(b.selection.getEditableElements(b.widget)).attr("align","right")},addColumnBefore:function(b){a(b.widget.columnCells).filter("th").before(f),a(b.widget.columnCells).filter("td").before(e),d(b,0,0)},addColumnAfter:function(b){a(b.widget.columnCells).filter("th").after(f),a(b.widget.columnCells).filter("td").after(e),d(b,0,1)},addRowAbove:function(b){a(b.widget.rowCells).before(g.replace("%",c(e,b.widget.columnCount))),d(b,0,0)},addRowBelow:function(b){a(b.widget.rowCells).after(g.replace("%",c(e,b.widget.columnCount))),d(b,1,0)},removeColumn:function(b){a(b.widget.columnCells).remove(),d(b,0,-1)},removeRow:function(b){a(b.widget.rowCells).remove(),d(b,-1,0)},toggleTableHeader:function(b){a(b.widget.element).find("th")[0]?(a(b.widget.element).find("tr:has(th)").remove(),0===b.widget.row&&d(b,0,0)):(a(b.widget.element).find("tbody").prepend(g.replace("%",c(f,b.widget.columnCount))),d(b,-b.widget.row,-b.widget.column))},insertSpaceBefore:function(a){a.select(a.widget.element,b.COLLAPSE_START_OUTSIDE),a.insertText("")},insertSpaceAfter:function(a){a.select(a.widget.element,b.COLLAPSE_END_OUTSIDE),a.insertText("")}}},a.extend(b.ui.controls,{"insert:table":b.ui.callout({controls:"table:*",requireWidgetEnabled:"table",hiddenWhenDisabled:!0,execute:function(a,b,c){c.insertWidget("table")},active:function(a,b){return b.widget}}),"table:addColumnBefore":b.ui.button({requireWidget:"table",execute:"addColumnBefore"}),"table:addColumnAfter":b.ui.button({requireWidget:"table",execute:"addColumnAfter"}),"table:addRowAbove":b.ui.button({requireWidget:"table",execute:"addRowAbove"}),"table:addRowBelow":b.ui.button({requireWidget:"table",execute:"addRowBelow"}),"table:removeColumn":b.ui.button({requireWidget:"table",execute:"removeColumn"}),"table:removeRow":b.ui.button({requireWidget:"table",execute:"removeRow"})}),b.ui.addLabels("en",{"insert:table":"Table","table:addColumnBefore":"Add Column Before","table:addColumnAfter":"Add Column After","table:addRowAbove":"Add Row Above","table:addRowBelow":"Add Row Below","table:removeColumn":"Remove Column","table:removeRow":"Remove Row"}),b.ui.addIcons("material",{"insert:table":"border_all"})}(jQuery,window.Typer),function(a,b){"use strict";function c(c,e){if(c.widget||!c.options.container)if(clearTimeout(g),f!==c&&(d(!0),f=c,a(c.element).appendTo(document.body),b.ui.setZIndex(c.element,c.typer.element)),e)c.position="fixed",a(c.element).css(e);else if("fixed"!==c.position){var h=(c.widget||c.typer).element.getBoundingClientRect(),i=a(c.element).height();h.top+h.height>document.body.offsetHeight?c.position="":h.top<i&&(c.position="bottom"),a(c.element).css({left:h.left+a(window).scrollLeft(),top:("bottom"===c.position?Math.min(h.top+h.height+10,a(window).height()-i-10):Math.max(0,h.top-i-10))+a(window).scrollTop()})}}function d(b){clearTimeout(g),b?f&&(a(f.element).detach(),f.position="",f=null):g=setTimeout(function(){d(!0)},100)}function e(d,e,f){var g=b.ui({type:"toolbar",typer:d,widget:f||null,theme:e.theme,controls:f?"toolbar:widget":"toolbar",options:e}),h=a(g.element).addClass("typer-ui-toolbar");return e.container?h.appendTo(e.container):(h.addClass("typer-ui-toolbar-floating"),h.mousedown(function(b){var d=h.position();if(b.target===g.element){var e=function(a){c(g,{top:d.top+(a.clientY-b.clientY),left:d.left+(a.clientX-b.clientX)})};a(document.body).mousemove(e),a(document.body).mouseup(function(){a(document.body).unbind("mousemove",e)})}})),g}var f,g;b.widgets.toolbar={inline:!0,options:{container:"",theme:"material",formattings:{p:"Paragraph",h1:"Heading 1",h2:"Heading 2",h3:"Heading 3",h4:"Heading 4"},inlineClasses:{}},init:function(a){a.widget.toolbar=e(a.typer,a.widget.options),a.widget.state=a.widget.toolbar.state={}},widgetInit:function(a){var b=a.data;b.toolbar=e(a.typer,a.widget.options,b)},focusin:function(a){c(a.widget.toolbar)},focusout:function(a){setTimeout(d)},widgetFocusin:function(a){var b=a.data;b.toolbar.all["toolbar:widget"].controls[0]&&(b.toolbar.update(),c(b.toolbar))},widgetFocusout:function(a){c(a.widget.toolbar)},widgetDestroy:function(a){var b=a.data;b.toolbar&&(b.toolbar.destroy(),c(a.widget.toolbar))},stateChange:function(){f&&(f.update(),c(f))}},a(window).scroll(function(){f&&c(f)}),a.extend(b.ui.controls,{toolbar:b.ui.group("toolbar:history toolbar:insert toolbar:* -toolbar:widget"),"toolbar:history":b.ui.group("history:*"),"toolbar:insert":b.ui.callout({controls:"insert:*",enabled:function(a){return a.typer.getNode(a.typer.element).nodeType!==b.NODE_EDITABLE_INLINE}}),"toolbar:widget":b.ui.group("",{requireWidget:!0,controls:function(a,b){return a.widget&&"widget:"+a.widget.id}}),"history:undo":b.ui.button({execute:function(a){a.typer.undo()},enabled:function(a){return a.typer.canUndo()}}),"history:redo":b.ui.button({execute:function(a){a.typer.redo()},enabled:function(a){return a.typer.canRedo()}}),"widget:delete":b.ui.button({requireWidget:!0,execute:function(a){a.widget.remove()}})}),b.ui.addLabels("en",{"toolbar:insert":"Insert Widget","history:undo":"Undo","history:redo":"Redo","widget:delete":"Delete"}),b.ui.addIcons("material",{"toolbar:insert":"widgets","history:undo":"undo","history:redo":"redo","widget:delete":"delete"})}(jQuery,window.Typer),function(a,b){function c(){var b='            .has-typer-visualizer:focus { outline:none; }            .has-typer-visualizer::selection,.has-typer-visualizer ::selection { background-color:transparent; }            .has-typer-visualizer::-moz-selection,.has-typer-visualizer ::-moz-selection { background-color:transparent; }            .typer-visualizer { position:fixed;pointer-events:none; }            .typer-visualizer > div { position:fixed;box-sizing:border-box; }            .typer-visualizer .fill { background-color:rgba(0,31,81,0.2); }            .typer-visualizer .fill-margin { border:solid rgba(255,158,98,0.2); }            @supports (clip-path:polygon(0 0,0 0)) or (-webkit-clip-path:polygon(0 0,0 0)) { .typer-visualizer .bl-r:before,.typer-visualizer .tl-r:before,.typer-visualizer .br-r:after,.typer-visualizer .tr-r:after { content:"";display:block;position:absolute;background-color:rgba(0,31,81,0.2);width:4px;height:4px;-webkit-clip-path:polygon(100% 100%,100% 0,96.6% 25.9%,86.6% 50%,70.7% 70.7%,50% 86.6%,25.9% 96.6%,0 100%);clip-path:polygon(100% 100%,100% 0,96.6% 25.9%,86.6% 50%,70.7% 70.7%,50% 86.6%,25.9% 96.6%,0 100%); } }            .typer-visualizer .line-n,.typer-visualizer .line-s { border-top:1px solid rgba(0,31,81,0.2);left:0;right:0;height:1px; }            .typer-visualizer .line-w,.typer-visualizer .line-e { border-left:1px solid rgba(0,31,81,0.2);top:0;bottom:0;width:1px; }            .typer-visualizer .line-s { margin-top:-1px; }            .typer-visualizer .line-e { margin-left:-1px; }            .typer-visualizer .bl { border-bottom-left-radius:4px; }            .typer-visualizer .tl { border-top-left-radius:4px; }            .typer-visualizer .br { border-bottom-right-radius:4px; }            .typer-visualizer .tr { border-top-right-radius:4px; }            .typer-visualizer .bl-r:before { right:100%;bottom:0; }            .typer-visualizer .tl-r:before { right:100%;top:0;-webkit-transform:flipY();transform:flipY(); }            .typer-visualizer .br-r:after { left:100%;bottom:0;-webkit-transform:flipX();transform:flipX(); }            .typer-visualizer .tr-r:after { left:100%;top:0;-webkit-transform:rotate(180deg);transform:rotate(180deg); }        ';a(document.body).append("<style>"+b+"</style>"),p=a('<div class="typer-ui typer-visualizer">').appendTo(document.body)[0],a(window).bind("scroll resize orientationchange focus",function(){z=a(window).width(),A=a(window).height(),m()}),a(document.body).bind("mousewheel",m),a(document.body).bind("mousemove",function(a){n(a.clientX,a.clientY)})}function d(a,b){return a.left===b.left&&a.top===b.top&&a.width===b.width&&a.height===b.height}function e(a,b){return b.left>=a.left&&b.right<=a.right&&b.top>=a.top&&b.bottom<=a.bottom}function f(a){return{top:0|a.top,left:0|a.left,right:0|(a.right||a.left+a.width),bottom:0|(a.bottom||a.top+a.height)}}function g(a){return{top:a.top,left:a.left,right:z-(a.right||a.left+a.width),bottom:A-(a.bottom||a.top+a.height)}}function h(c){var d=c.getBoundingClientRect(),g=window.getSelection().rangeCount&&window.getSelection().getRangeAt(0),h=g?a.map(b.createRange(g,b.createRange(c)).getClientRects(),f):[],i=[];return h.sort(function(a,b){return a.top-b.top||a.left-b.left||b.bottom-a.bottom||b.right-a.right}),a.each(h,function(a,b){var c=i[0];if(c&&(b.left>=c.right&&b.top<c.bottom?(i.shift(),b.top=Math.min(b.top,c.top),b.left=c.left,b.bottom=Math.max(b.bottom,c.bottom),c=i[0]):b.top>=c.bottom&&(c.right=d.left+d.width)),c){if(e(c,b))return;b.top>c.top&&b.top-c.bottom<b.bottom-b.top&&(c.bottom=b.top),i[1]&&c.left===i[1].left&&c.right===i[1].right&&(c.top=i.splice(1,1)[0].top)}i.unshift(b)}),
i}function i(a){if(a.nodeType&(b.NODE_INLINE|b.NODE_INLINE_EDITABLE|b.NODE_INLINE_WIDGET))for(;!(a.nodeType&(b.NODE_PARAGRAPH|b.NODE_EDITABLE_PARAGRAPH))&&a.parentNode;a=a.parentNode);return a}function j(b,c,d){var e;a.each(b,function(a,b){if(null===b.element&&(e=b),b.element===c)return b.type=d,e=!0,!1}),"object"==typeof e?(e.element=c,e.type=d):e||(b[b.length]={element:c,type:d})}function k(b){a.each(b,function(b,c){c.type="none",a.contains(document,c.element)||(c.element=null)})}function l(b){a.each(b,function(b,c){function d(b,c,d){return e[f]=e[f]||y.pop()||a("<div>")[0],e[f].className=b,e[f].setAttribute("style",""),a(e[f]).css(c||"",d),e[f++]}var e=c.dom=c.dom||[],f=0;if("text"===c.type){var i=h(c.element);a.each(i,function(a,b){var c=i[a-1]||t,e=i[a+1]||t,f=d("fill",g(b));f.className+=[b.left<c.left||b.left>c.right?" bl":b.left>c.left&&b.left<c.right?" bl-r":"",b.left<e.left||b.left>e.right?" tl":b.left>e.left&&b.left<e.right?" tl-r":"",b.right>c.right||b.right<c.left?" br":b.right<c.right&&b.right>c.left?" br-r":"",b.right>e.right||b.right<e.left?" tr":b.right<e.right&&b.right>e.left?" tr-r":""].join("")})}else if("layout"===c.type||"layout-fill"===c.type||"layout-margin"===c.type){var j=c.element.getBoundingClientRect();if(d("line-n","top",j.top),d("line-s","top",j.top+j.height),d("line-w","left",j.left),d("line-e","left",j.left+j.width),"layout-margin"===c.type||"layout-fill"===c.type){var k=window.getComputedStyle(c.element),l=g(j);l.margin=[-parseFloat(k.marginTop),-parseFloat(k.marginRight),-parseFloat(k.marginBottom),-parseFloat(k.marginLeft),""].join("px "),l.borderWidth=[k.marginTop,k.marginRight,k.marginBottom,k.marginLeft].join(" "),d("fill-margin",l)}"layout-fill"===c.type&&d("fill",j)}e.length>f&&y.push.apply(y,e.splice(f)),a(e).appendTo(p)}),a(y).detach()}function m(){if(q){var a=q.element.getBoundingClientRect();s&&d(s,a)||(s=a,l(w))}}function n(a,c){if(k(x),q){var d=q.nodeFromPoint(a,c);d&&(d.nodeType&b.NODE_WIDGET?j(x,d.widget.element,"layout"):(d=i(d),j(x,d.element,"layout")))}l(x)}function o(a){var c=q.getSelection();k(w),c.isCaret?a.layout&&c.startNode&&c.startNode.nodeType&u&&j(w,(i(c.startNode)||c.startNode).element,"layout-margin"):b.iterate(c.createTreeWalker(-1,function(b){if(b.nodeType&u||a.layout&&r&&b.element===r.element)return j(w,b.element,b.nodeType&u?"text":"layout-fill"),2})),l(w)}var p,q,r,s,t={left:1e4,right:-1e4},u=b.NODE_PARAGRAPH|b.NODE_EDITABLE_PARAGRAPH|b.NODE_INLINE|b.NODE_INLINE_WIDGET|b.NODE_INLINE_EDITABLE,v=!window.ActiveXObject,w=[],x=[],y=[],z=a(window).width(),A=a(window).height();b.widgets.visualizer={inline:!0,options:{layout:!0},init:function(b){a(b.typer.element).addClass("has-typer-visualizer"),v&&!c.init&&(c(),c.init=!0)},focusin:function(a){q=a.typer,b.ui.setZIndex(p,q.element)},focusout:function(b){q=null,a(p).children().detach()},widgetFocusin:function(a){r=a.data,v&&o(a.widget.options)},widgetFocusout:function(a){r=null},stateChange:function(a){v&&a.typer===q&&o(a.widget.options)}},b.defaultOptions.visualizer=v}(jQuery,window.Typer),function(a,b){"use strict";var c=a('<div style="position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(255,255,255,0.5) url(data:image/gif;,);z-index:999;">');b.ui.themes.material={resources:["https://fonts.googleapis.com/css?family=Roboto:400,500,700","https://fonts.googleapis.com/icon?family=Material+Icons","https://cdn.rawgit.com/misonou/jquery-typer/master/css/jquery.typer.material.css"],controlActiveClass:"active",controlDisabledClass:"disabled",controlHiddenClass:"hidden",labelText:function(a,c){var d=!!b.ui.getIcon(c,"material");return!d||"toolbar"!==a.type||"textbox"!==c.type&&"callout"===(c.parent||"").type?'<span x:bind="(_:label)"></span>':""},labelIcon:function(a,c){var d=b.ui.getIcon(c,"material");return"callout"===(c.parent||"").type?"checkbox"===c.type?"":d.replace(/.*/,'<i class="material-icons">$&</i>'):d.replace(/.+/,'<i class="material-icons">$&</i>')},group:'<div class="typer-ui-group" x:bind="(role:name)"><br x:t="children"/></div>',label:'<span class="typer-ui-label"><br x:t="labelIcon"/><br x:t="labelText"/></span>',button:'<button x:bind="(title:label,role:name)"><br x:t="label"/><span class="typer-ui-menu-annotation" x:bind="(_:annotation)"></span></button>',buttonExecuteOn:"click",callout:'<div class="typer-ui-menu" x:bind="(role:name)"><button x:bind="(title:label)"><br x:t="label"/></button><div class="typer-ui-menupane"><br x:t="children"></div></div>',calloutExecuteOn:{on:"click",of:">button"},dropdown:'<div class="typer-ui-dropdown typer-ui-menu" x:bind="(role:name)"><button x:bind="(title:label)"><span class="typer-ui-label"><br x:t="labelIcon"/><span x:bind="(_:selectedValue)"></span></span></button><div class="typer-ui-menupane"><br x:t="children(t:button)"></div></div>',checkbox:'<label class="typer-ui-checkbox" x:bind="(title:label,role:name)"><input type="checkbox" x:bind="(checked:value)"/><br x:t="label"/></label>',checkboxExecuteOn:{on:"change",of:":checkbox"},textbox:'<label class="typer-ui-textbox" x:bind="(role:name,title:label)"><br x:t="label"/><div contenteditable spellcheck="false" x:bind="(data-placeholder:label)"></div></label>',textboxInit:function(b,c){var d=a("[contenteditable]",c.element);d.typer("textbox",{enter:function(){b.execute("ui:button-ok")},escape:function(){b.execute("ui:button-cancel")}}),d.bind("change",function(){b.setValue(c,this.value),a(c.element).toggleClass("empty",!this.value)}),d.bind("focusin focusout",function(b){a(c.element).parents(".typer-ui-menu").toggleClass("open","focusin"===b.type)})},textboxStateChange:function(b,c){a(c.element).toggleClass("empty",!c.value),a(c.element).find("[contenteditable]").prop("value",c.value||"")},dialog:'<div class="typer-ui-dialog"><h1><br x:t="label"/></h1><br x:t="children"></div>',dialogOpen:function(b,d){c.appendTo(document.body),a(b.element).appendTo(document.body),setTimeout(function(){a(d.element).addClass("open"),a("[contenteditable]:first",b.all["ui:prompt-input"].element).focus()})},dialogClose:function(b,d){c.detach(),a(d.element).removeClass("open").one("transitionend otransitionend webkitTransitionEnd",function(){a(b.element).remove()})},init:function(b){a(b.element).on("mouseover",".typer-ui-menu",function(b){setTimeout(function(){var c=a(".typer-ui-menupane",b.currentTarget)[0],d=!!a(b.currentTarget).parents(".typer-ui-menu")[1],e=c.getBoundingClientRect();e.top+e.height>a(window).height()?a(c).css("bottom",d?"0":"100%"):e.top<0&&a(c).css("bottom","auto"),e.left+e.width>a(window).width()?a(c).css("right",d?"100%":"0"):e.left<0&&a(c).css("right","auto")})})}}}(jQuery,window.Typer);
//# sourceMappingURL=jquery.typer.min.js.map
