/*! jQuery Typer Plugin v0.9.4 | https://github.com/misonou/jquery-typer | The MIT License (MIT) */

!function(a,b,c,d,e,f,g,h,i){"use strict";function j(a,b){this.typer=a,this.baseCaret=new p(a,this),this.extendCaret=new p(a,this),b&&this.select(b)}function k(a,b,c,d){this.typer=a,this.id=b,this.element=c||null,this.options=d||{}}function l(b,c,d,e,f){this.eventName=b,this.typer=c,this.widget=d||null,this.data=void 0!==e?e:null,a.extend(this,f)}function m(a,b,c){this.childNodes=[],this.nodeType=a,this.element=b,this.widget=c}function n(a,b,c){this.whatToShow=b,this.filter=c||null,this.currentNode=a,this.root=a}function o(a,b,c){this.whatToShow=b,this.filter=c||null,ha(this,E(a,n)||new n(a,ya|Ja))}function p(a,b){this.typer=a,this.selection=b||null}function q(){this.weakMap=new h}function r(a){return function b(c,d,e){var f=b.executing;try{return b.executing=!0,c.apply(e||this,d)}finally{b.executing=f,!b.executing&&a&&a()}}}function s(a,b,c,d){Object.defineProperty(a,b,{enumerable:d!==!1,configurable:!0,writable:!0,value:c})}function t(a,b){a.prototype=b,s(b,"constructor",a,!1)}function u(a,b,c){return i.slice.call(a||{},b||0,c)}function v(a){return v[a]=v[a]||function(b){return b[a]},v[a]}function w(b,c){var d;return a.each(b,function(a,b){return d=c.call(this,b)&&b,!d}),d}function x(a,b){var c=(b||a.currentNode||"").nodeType;return a.whatToShow&(E(a,n)?c:1<<c-1)?a.filter?(a.filter.acceptNode||a.filter).call(a.filter,b||a.currentNode):1:3}function y(a,b,c){a.currentNode=c||a.currentNode;var d=x(a);if(2!==d){1===d&&b&&b(a.currentNode);for(var e;e=a.nextNode();b&&b(e));}}function z(b,c,d){var e=[];return y(b,i.push.bind(e),d),c?a.map(e,c):e}function A(a){return d(a||"").replace(/^[\s\u200b]+|[\s\u200b]+$/g,"")}function B(a){return a=d(a||""),a.charAt(0).toUpperCase()+a.slice(1)}function C(a){return a=d(a||""),a.charAt(0).toLowerCase()+a.slice(1)}function D(a){return a&&a.tagName&&a.tagName.toLowerCase()}function E(b,c){return!(!b||!c)&&(c.prototype?b instanceof c&&b:c.toFixed?b.nodeType&c&&b:("*"===c||a(b).is(c))&&b)}function F(b){var c={};return a.each(a.makeArray(b&&b.attributes),function(a,b){c[b.nodeName]=b.value}),c}function G(b,c){var d=F(b),e=F(c);return a.each(e,function(a,b){b===d[a]&&(delete d[a],delete e[a])}),!Object.keys(d)[0]&&!Object.keys(e)[0]}function H(a,b,c){if(a===b)return 0;var d=a&&b&&a.compareDocumentPosition(b);return 2&d?c&&8&d||1&d?NaN:1:4&d?c&&16&d||1&d?NaN:-1:NaN}function I(a,b){return a&&b&&!(1&(a.commonAncestorContainer||a).compareDocumentPosition(b.commonAncestorContainer||b))}function J(b,c){return b===c||a.contains(b,c)}function K(a,b){for(b=b||a;a&&a!==b&&20!==a.compareDocumentPosition(b);a=a.parentNode);return a}function L(a,b){var c=a.length||a.childNodes.length;return b===c||0===b&&1/b===-(1/0)?c:(c+b)%c||0}function M(a,b){for(var c,d=new o(a,5),e=0;(c=d.nextNode())&&c!==b;e+=c.length||0);return e}function N(a,b,d,g){if(a&&Pa(a.getRange))return a.getRange();var h;if(E(a,e)?(h=c.createRange(),+b!==b?(h["contents"!==b&&a.parentNode?"selectNode":"selectNodeContents"](a),"boolean"==typeof b&&h.collapse(b)):h.setStart(a,L(a,b)),E(d,e)&&I(a,d)&&h.setEnd(d,L(d,g))):E(a,f)&&(h=a.cloneRange(),h.collapsed||"boolean"!=typeof b||h.collapse(b)),E(b,f)&&I(h,b)){var i=h.collapsed&&b.collapsed?-1:1;h.compareBoundaryPoints(0,b)*i<0&&h.setStart(b.startContainer,b.startOffset),h.compareBoundaryPoints(2,b)*i>0&&h.setEnd(b.endContainer,b.endOffset)}return h}function O(a,b){return a=E(a,f)||N(a),b=E(b,f)||N(b),I(a,b)&&a.compareBoundaryPoints(3,b)<=0&&a.compareBoundaryPoints(1,b)>=0}function P(a,b){return a=E(a,f)||N(a),b=E(b,f)||N(b),I(a,b)&&a.compareBoundaryPoints(0,b)<=0&&a.compareBoundaryPoints(2,b)>=0}function Q(a,b){return a=E(a,f)||N(a),b=E(b,f)||N(b),I(a,b)&&0===a.compareBoundaryPoints(0,b)&&0===a.compareBoundaryPoints(2,b)}function R(a,b,c){a=E(a,f)||N(a),b=E(b,f)||N(b);var d=I(a,b)?a.compareBoundaryPoints(0,b)+a.compareBoundaryPoints(2,b):NaN;return c&&(0!==d&&O(a,b)||0===d&&!Q(a,b))?NaN:d&&d/Math.abs(d)}function S(a,b){function c(c){return Math.abs(a[c]-b[c])<1}return c("left")&&c("top")&&c("bottom")&&c("right")}function T(a,b,c){return a>=c.left&&a<=c.right&&b>=c.top&&b<=c.bottom}function U(a){var b=E(a,f)||N(a,"contents"),c=b.collapsed&&3===b.startContainer.nodeType&&!b.startContainer.length;c&&(b.startContainer.nodeValue=va);try{if(b.collapsed&&b.startOffset===b.startContainer.length){b.setStart(b.startContainer,b.startOffset-1);var d=b.getClientRects()[0];if(d)return[{top:d.top,left:d.right,right:d.right,bottom:d.bottom,width:0,height:d.height}]}return b.getClientRects()}finally{c&&(b.startContainer.nodeValue="")}}function V(a){if(Qa.rangeCount){var b=Qa.getRangeAt(0);return J(a,b.commonAncestorContainer)&&b}}function W(b,d,e){var f=Ra.call(c,b,d);if(e&&e!==c.body&&T(b,d,e.getBoundingClientRect())){var g=[];try{for(;H(e,f.commonAncestorContainer,!0);){var h=a(f.commonAncestorContainer).parentsUntil(K(e,f.commonAncestorContainer)).slice(-1)[0]||f.commonAncestorContainer;if(h===g[g.length-1])return null;h.style.pointerEvents="none",g[g.length]=h,f=Ra.call(c,b,d)}}finally{a(g).css("pointer-events","")}}return f}function X(b){return E(b,g)||a(c.createDocumentFragment()).append(b)[0]}function Y(a){return c.createTextNode(a||va)}function Z(a){return c.createElement(a)}function $(b,d){d!==!1&&y(c.createNodeIterator(b,1,null,!1),function(a){ra.update(a,b.parentNode)}),a(b).remove()}function _(b,c){return a.each(c,function(c,d){b=a(d.cloneNode(!1)).append(b)[0]}),E(b,e)||X(b)}function aa(a){try{Qa.removeAllRanges()}catch(a){var b=c.body.createTextRange();b.collapse(),b.select(),Qa.removeAllRanges()}Qa.addRange(a)}function ba(q,s){function x(){}function H(a){switch(a){case Ka:return pa.concat(la.getWidgets().slice(0,-1));case La:return pa;case Ma:return la.getWidgets().reverse().concat(pa);case Na:return la.focusNode.widget}}function I(a){return w(H(Ma),function(b){var c=ra[b.id];return c.commands&&Pa(c.commands[a])})}function K(b,c,d,e){var f,g=a.makeArray(E(b,k)||H(b));return Ua(function(){a.each(g,function(a,g){var h=ra[g.id];if(!g.destroyed&&Pa(h[c]))return f=!0,h[c].call(h,new l(c,na,g,d,e)),b!==Ma})}),E(b,k)&&setTimeout(function(){K(La,"widget"+B(c),null,{targetWidget:b})}),f}function L(b,c,d,e){return e=e||a.Event(c),K(b,c,d,{preventDefault:e.preventDefault.bind(e),isDefaultPrevented:function(){return e.isDefaultPrevented()}}),e.isDefaultPrevented()}function S(c,d){function e(a,b){if(b.parentNode!==a&&b!==a){b.parentNode&&f(b,!0);for(var c=a.childNodes.length;c&&R(b.element,a.childNodes[c-1].element)<0;c--);b.parentNode=a,b.previousSibling=a.childNodes[c-1],b.nextSibling=a.childNodes[c],(b.previousSibling||{}).nextSibling=b,(b.nextSibling||{}).previousSibling=b,a.childNodes.splice(c,0,b)}}function f(a,b){if(a.parentNode){var c=a.parentNode.childNodes.indexOf(a);c>=0&&(d&&!b&&a.widget.element===a.element&&(a.widget.destroyed=!0,K(a.widget,"destroy")),a.parentNode.childNodes.splice(c,1),a.parentNode=null,(a.previousSibling||{}).nextSibling=a.nextSibling,(a.nextSibling||{}).previousSibling=a.previousSibling)}}function j(b){var e=b.parentNode||v.get(c);E(e,ya)||b.widget&&E(b.element,ra[b.widget.id].element)||(d&&b.widget&&b.widget.element===b.element&&(b.widget.destroyed=!0,K(b.widget,"destroy")),delete b.widget,a.each(ra,function(a,c){if(E(b.element,c.element))return b.widget=new k(y,a,b.element,c.options),!1}),d&&b.widget&&K(b.widget,"init")),b.widget=b.widget||e.widget;var f=ra[b.widget.id];b.widget!==e.widget||E(e,ya)?E(b.element,f.editable)||f.inline&&!f.editable?b.nodeType=f.inline?Fa:E(b.element,ua)?Aa:za:b.nodeType=f.inline&&!E(e,Ea)?Ea:ya:b.nodeType=E(b.element,ua)?Ba:Da}function l(b){a.each(b.childNodes.slice(0),function(a,b){J(c,b.element)||(f(b),v.delete(b.element))})}function n(b,c){var d=[v.get(b)];l(d[0]);var h=c?a(b).children():E(b,g)?a(b).children().find("*").andSelf():a("*",b);h.each(function(a,b){for(;!J(d[0].element,b);)d.shift();if("br"===D(b))return void(v.has(b)&&E(d[0],Ja)&&(f(v.get(b)),v.delete(b)));var g=!v.has(b),h=v.get(b)||new m(0,b);h.widget;e(d[0],h),l(h),j(h),v.set(b,h),c&&g&&n(b),d.unshift(h)})}function o(b){var c=a.map(b,function(b){return a(b.addedNodes).add(b.removedNodes).filter(":not(#Typer_RangeStart,#Typer_RangeEnd)")[0]?b.target:null});i.push.apply(w,c)}function p(a){for(var b=a;!v.has(b);b=b.parentNode);return n(b),v.get(a)}function r(){u?o(u.takeRecords()):(clearImmediate(r.handle),r.handle=setImmediate(function(){w.push(null)})),null===w[0]?n(w.splice(0)&&c):w[0]&&a(c.parentNode||c).find(a.unique(w.splice(0))).each(function(a,b){n(b,!!u)})}function t(a){if(r(),J(c,a))return 3!==a.nodeType&&"br"!==D(a)||(a=a.parentNode),v.get(a)||p(a)}var u,v=new h,w=[],x={},y=J(q,c)?na:x;return c.parentNode||(c=E(c,g)||X(c)),b.MutationObserver&&d&&(u=new MutationObserver(o),u.observe(c,{subtree:!0,childList:!0})),v.set(c,new m(oa,c,new k(y,"__root__",q,s))),w.push(null),a.extend(x,{getNode:t,getEditableNode:function(a){var b=t(a)||v.get(c);return E(b,ya)?t(b.widget.element):b}})}function T(a,b){var c=new p(na);return c.moveToText(a,b),c.getRange()}function U(b){var c=new j(na,b);return E(c.focusNode,za)&&!c.focusNode.childNodes[0]?void a(xa).appendTo(c.focusNode.element):E(c.focusNode,Aa)&&!c.focusNode.element.childNodes[0]?void a(Y()).appendTo(c.focusNode.element):void 0}function ca(a){var b=la.baseCaret,c=la.extendCaret;if(a===b.textNode||a===c.textNode)return!0;if(Oa){var d=b.textNode&&(a===b.textNode.previousSibling&&0===b.offset||a===b.textNode.nextSibling&&b.offset===b.textNode.length),e=c.textNode&&(a===c.textNode.previousSibling&&0===c.offset||a===c.textNode.nextSibling&&c.offset===c.textNode.length);return d||e}}function da(b){b=E(b,f)||N(q,"contents"),Ua(function(){U(b),y(new j(na,b).createTreeWalker(Ja|za|Ga),function(b){if(E(b,Ia)&&!E(b.parentNode,Ja)&&a(b.element).wrap("<p>"),E(b,Ja)){var c=a("br:last-child",b.element)[0];c&&!c.nextSibling&&(a(Y()).insertBefore(c),$(c));var d=a("br:first-child",b.element)[0];d&&!d.previousSibling&&$(d),a(b.element).contents().each(function(a,b){if(3===b.nodeType&&!ca(b)){var c=b.nextSibling;/\b\u00a0$/.test(b.nodeValue)&&c&&3===c.nodeType&&!/^[^\S\u00a0]/.test(c.nodeValue)&&(b.nodeValue=b.nodeValue.slice(0,-1)+" "),b.nodeValue=b.nodeValue.replace(/(?=.)\u200b+(?=.)/g,"").replace(/\b\u00a0\b/g," ")||va,c&&3===c.nodeType&&!ca(c)&&(c.nodeValue=b.nodeValue+c.nodeValue,$(b))}}),/\S/.test(b.element.textContent)||a(Y()).appendTo(b.element),E(b,Da)&&b.element!==la.startElement&&b.element!==la.endElement&&D(b.element.previousSibling)===D(b.element)&&G(b.element,b.element.previousSibling)&&(a(b.element).contents().appendTo(b.element.previousSibling),$(b.element))}else b.element.childNodes[0]?a(b.element).contents().each(function(b,c){3===c.nodeType&&A(c.nodeValue)&&a(c).wrap("<p>")}):a(xa).appendTo(b.element)}),a('br[type="_moz"]',q).remove(),a(Oa&&"*",q).each(function(b,c){a(c).data("typerIEFix")||(a(c).data("typerIEFix",!0),a(c).bind("input textinput",function(a){Ua.executing||Ua.suppressTextEvent||Ta.trigger(a)}))})})}function ea(b,d,h){b=E(b,f)||N(b);var i="cut"===d?"extractContents":"paste"===d?"deleteContents":"cloneContents",k="paste"!==d,l="copy"!==d,n=c.createDocumentFragment(),o=[],p=new j(na,b),r=p.isSingleEditable||("__root__"===p.startNode.widget.id||ra[p.startNode.widget.id].textFlow)&&("__root__"===p.endNode.widget.id||ra[p.endNode.widget.id].textFlow),s={addTarget:function(a){a=E(a,m)||na.getNode(a),o.indexOf(a.widget)<0&&o.push(a.widget)}};return Ua(function(){if(!b.collapsed){var c,d=p.getCaret("end").clone(),f=!d.moveByCharacter(1)||d.node!==p.endNode||d.textNode&&/\s/.test(d.textNode.nodeValue[d.offset-1]),m=[[q,n]];y(p.createTreeWalker(-1,function(d){var f;if(d===p.focusNode&&E(d,za))return 3;for(;E(d.element,e)&&!J(m[0][0],d.element);)m.shift();if(P(b,d.element))return k&&(f=d.element.cloneNode(!0),a(m[0][1]).append(d.element===q?f.childNodes:f)),l&&(E(d,za)?(a(d.element).html(xa),s.addTarget(d)):E(d,Aa)?(a(d.element).html(wa),s.addTarget(d)):$(d.element)),2;if(E(d,Ja)&&(f=N(d.element,b)[i]()),k){if(d.element!==q&&(!E(d,Ba|Da)||f&&D(f.firstChild)!==D(d.element))){var h=d.element.cloneNode(!1);m[0][1].appendChild(h),E(h,g)||m.unshift([d.element,h])}f&&(c=f.lastChild,m[0][1].appendChild(f))}return l&&s.addTarget(d),E(d,Ja)?2:1})),f&&c&&a(Y(" ")).insertAfter(c)}if(Pa(h)){var t=N(b,!0),u=r?N(b,!1):t,v=new j(na,N(t,u));E(v.startNode,Ha)&&v.startNode===v.endNode&&U(b)&&(v=new j(na,N(v.startNode.element,"contents"))),R(t,v.startNode.element)<0&&(t=N(v.startNode.element,0)),h(v,t,u,s)}o[0]&&(a.each(o,function(a,b){K(b,"contentChange")}),K(La,"contentChange")),da(b)}),n}function fa(b,f){E(f,e)||(f=d(f||"").replace(/\u000d/g,"").replace(/</g,"&lt;").replace(/\n{2,}/g,"</p><p>").replace(/\n/g,"<br>").replace(/.*/,"<p>$&</p>")),f=u(X(f).childNodes),ea(b,"paste",function(b,d,e,g){var h,i,j=("__root__ "+(ra[b.focusNode.widget.id].allowedWidgets||"*")).split(" "),k=d.cloneRange(),l=E(b.startNode,Ja),n=!0;for(i=E(b.startNode,Aa)?[]:E(b.startNode,Ba)?[b.startNode.element]:E(b.startNode,Ia)?a(b.startElement).parentsUntil(b.startNode.element).andSelf().get().reverse():[Z("p")];f[0];){var o=f.shift(),p=new m(Da,o);if(1===o.nodeType&&"br"!==D(o)&&(d.insertNode(o),p=ma.getNode(o),$(o),("__unknown__"===p.widget.id||"*"!==j[1]&&j.indexOf(p.widget.id)<0)&&(o=Y("__unknown__"===p.widget.id?o.textContent:ga(o)),p=new m(Da,o))),!E(p,Ja|Ea)||!E(p,Ia)&&!n){for(var q=ma.getEditableNode(k.startContainer);!E(q.parentNode,Ha);)q=q.parentNode;var r=N(q.element,!1),s=N(k,r).extractContents(),t=s.firstChild;if(r.insertNode(s),g.addTarget(r.startContainer),/\S/.test(q.element.textContent)||k.insertNode(Y()),t&&!/\S/.test(t.textContent)&&t.appendChild(Y())," "===q.element.textContent.slice(-1)){var u=z(c.createNodeIterator(q.element,4,null,!1)).filter(v("nodeValue")).slice(-1)[0];u.nodeValue=u.nodeValue.slice(0,-1)+" "}if(t&&" "===t.textContent.charAt(0)){var w=z(c.createNodeIterator(t,4,null,!1)).filter(v("nodeValue"))[0];w.nodeValue=w.nodeValue.slice(1)}k=t?N(t,0):N(r,!1),e=N(r,!1),n=!0,h=!0}l=l&&E(p,Ja|Ea),E(p,Ia)?o=X(_(o,l?i.slice(0,-1):i)):l&&n&&(o=X(o.childNodes));var x=X(o).lastChild;if(l)x&&(k.insertNode(o),k=N(x,-0)),n=!1;else{var y=ma.getEditableNode(k.startContainer);E(y,Ha)?k.insertNode(o):N(y.element,!0).insertNode(o),l=E(p,Ja|Ea),k=l?N(x,-0):N(x,!1),n=!l,h=!0}g.addTarget(k.startContainer)}!h&&b.startNode!==b.endNode&&E(b.startNode,Ba)&&E(b.endNode,Ba)&&(N(b.startNode.element,-0).insertNode(N(b.endNode.element,"contents").extractContents()),$(b.endNode.element),g.addTarget(b.endNode),g.addTarget(b.startNode)),la.select(k)})}function ga(a){J(q,a)&&(a=ea(a,"copy"));var b="",c=S(a).getNode(a);return y(new n(c,-1,function(a){if(E(a,ya|Ea)&&Pa(ra[a.widget.id].text))return b+=(b&&"\n\n")+ra[a.widget.id].text(a.widget),2;if(E(a,Ja)){var c=new n(a,Ja|Ea|Ga,function(a){return E(a,ya|Ea)&&Pa(ra[a.widget.id].text)?(b+=ra[a.widget.id].text(a.widget),2):E(a,Ja)?1:3});return b+=b&&"\n\n",y(new o(c,5),function(a){b+=3===a.nodeType?a.nodeValue:"br"===D(a)?"\n":""}),2}})),b.replace(/\u200b/g,"").replace(/[^\S\n\u00a0]+|\u00a0/g," ")}function ha(){function b(){setTimeout(function(){K(Ka,"beforeStateChange"),K(Ka,"stateChange")})}function c(){var a=A(q.innerHTML.replace(/\s+(style|x-typer-(start|end))(="[^"]*")?|(?!>)\u200b(?!<\/)/g,""));if(a!==j)return j=a,!0}function d(b,c,d){b&&3===b.nodeType?a(b.parentNode).attr(i[+d],M(ma.getNode(b),b)+c):b&&a(b).attr(i[+d],"")}function e(b){var c=i[+b],d=Ta.find("["+c+"]")[0]||Ta.filter("["+c+"]")[0],e=parseInt(a(d).attr(c));if(d)return a(d).removeAttr(c),+e===e?T(d,e):N(d,!!b)}function f(){b(),d(la.startTextNode||la.startElement,la.startOffset,!0),la.isCaret||d(la.endTextNode||la.endElement,la.endOffset,!1);var a=q.outerHTML;if(a!==k[0]){var e=c();k.splice(0,l+!e,a),k.splice(ba.historyLevel),l=0}Ta.find("[x-typer-start], [x-typer-end]").andSelf().removeAttr("x-typer-start x-typer-end")}function g(d){var f=a.parseHTML(d)[0];Ta.empty().append(f.childNodes).attr(F(f)),la.select(e(!0),e(!1)),b(),c()}var h,i=["x-typer-end","x-typer-start"],j=q.outerHTML,k=[j],l=0;a.extend(Ca,{getValue:function(){return j},canUndo:function(){return l<k.length-1},canRedo:function(){return l>0},undo:function(){Ca.canUndo()&&g(k[++l])},redo:function(){Ca.canRedo()&&g(k[--l])},snapshot:function(a){clearTimeout(h),+a!==a&&la?a!==!0&&Ua.executing?(Ua.needSnapshot=!0,b()):(Ua.needSnapshot=!1,f()):h=setTimeout(f,a)}})}function ia(){function e(a,b){return C((a.ctrlKey||a.metaKey?"Ctrl":"")+(a.altKey?"Alt":"")+(a.shiftKey?"Shift":"")+B(b))}function f(){var a=p;p&&!p.destroyed&&(p=null,K(a,"focusout"))}function g(){var a=V(q);if(!qa.has(na)&&a&&!Q(a,N(la))){la.select(a),la.focusNode.widget!==p&&f();var b=+new Date;setTimeout(function(){Ca.snapshot(b-r<200?200:0),r=b})}}function h(a){if(la.isCaret){var b=la.clone();b.extendCaret.moveByCharacter("backspace"===a.data?-1:1)&&fa(b,"")}else fa(la,"")}function i(a,b){return!(!a||!K(Na,"textInput",a))||(!b&&la.startTextNode&&la.isCaret?void setImmediate(function(){g(),K(Na,"contentChange"),K(La,"contentChange")}):(fa(la,a),!0))}var j,k,l,m,n,o,p,r=0;Ta.mousedown(function(b){var d={mousemove:function(a){return!a.which&&j?void d.mouseup():(la.extendCaret.moveToPoint(a.clientX,a.clientY),setImmediate(function(){la.focus()}),void a.preventDefault())},mouseup:function(){j=!1,a(c.body).unbind(d)}};1===b.which&&((b.shiftKey?la.extendCaret:la).moveToPoint(b.clientX,b.clientY),a(c.body).bind(d),j=!0),b.preventDefault()}),Ta.bind("compositionstart compositionupdate compositionend",function(a){if(a.stopPropagation(),k="d"!==a.type.slice(-1))i("");else{var b=V(q);N(b.startContainer,b.startOffset-a.originalEvent.data.length,b.startContainer,b.startOffset).deleteContents(),g(),i(a.originalEvent.data,!0)}}),Ta.bind("keydown keypress keyup",function(b){if(k)return void b.stopImmediatePropagation();o=!0,setImmediate(function(){o=!1});var c=a.inArray(b.keyCode,[16,17,18,91,93])>=0,f=!c&&ta[b.keyCode]!==d.fromCharCode(b.keyCode).toLowerCase();if("keydown"===b.type){if(l=b.ctrlKey+b.shiftKey+b.altKey+b.metaKey+!c,l*=f||(l>2||l>1&&!b.shiftKey)&&!c,m=b.keyCode,l){var h=e(b,ta[m]||d.fromCharCode(b.charCode));K(Ma,h)&&b.preventDefault(),(L(Ka,"keystroke",h,b)||/ctrl(?![acfnprstvwx]|f5|shift[nt]$)|enter/i.test(h))&&b.preventDefault()}n=b.isDefaultPrevented(),setImmediate(function(){k||n||g()})}else"keypress"===b.type?b.charCode||b.stopImmediatePropagation():((b.keyCode===m||c)&&l--&&b.stopImmediatePropagation(),n||c||k||g())}),Ta.bind("keypress textInput textinput",function(a){Ua.executing||"keypress"!==a.type&&Ua.suppressTextEvent||i(a.originalEvent.data||d.fromCharCode(a.charCode)||"")&&a.preventDefault()}),Ta.bind("dragstart",function(a){var b=N(la),c={drop:function(a){var d=W(a.originalEvent.clientX,a.originalEvent.clientY),e=ea(b,a.ctrlKey?"copy":"cut");fa(d,e),a.preventDefault(),Ta.unbind(c)}};Ta.bind(c)}),Ta.bind("cut copy",function(c){var d=c.originalEvent.clipboardData||b.clipboardData;Sa.content=ea(la,c.type),Sa.textContent=ga(Sa.content),b.clipboardData?d.setData("Text",Sa.textContent):(d.setData("text/plain",Sa.textContent),d.setData("text/html",a('<div id="Typer">').append(Sa.content.cloneNode(!0))[0].outerHTML),d.setData("application/x-typer","true")),c.preventDefault()}),Ta.bind("paste",function(c){var d=c.originalEvent.clipboardData||b.clipboardData;if(a.inArray("application/x-typer",d.types)>=0){var e=d.getData("text/html"),f=X(a(e).filter("#Typer").contents());fa(la,f)}else{var g=d.getData(b.clipboardData?"Text":"text/plain");fa(la,g===Sa.textContent?Sa.content.cloneNode(!0):g)}if(c.preventDefault(),Oa){var h=la.clone();setImmediate(function(){la.select(h)})}}),Ta.bind("mousedown mouseup mscontrolselect",function(a){var b=ma.getNode(a.target);p!==b.widget&&f(),E(b,ya|Ea)&&(setImmediate(function(){la.focus()}),la.select(b.widget.element),p!==b.widget&&(p=b.widget,K(b.widget,"focusin")))}),Ta.bind("contextmenu",function(a){var b=W(a.clientX,a.clientY,q);!la.isCaret&&O(la,b)||la.select(b)}),Ta.bind("click",function(a){var b={clientX:a.clientX,clientY:a.clientY,target:a.target};K(Ma,e(a,"click"),null,b),a.preventDefault()}),Ta.bind("dblclick",function(a){K(Ma,"dblclick")||la.select("word"),a.preventDefault()}),Ta.bind("focus",function(){var a=j;setImmediate(function(){qa.has(na)||(Ra=!0,K(Ka,"focusin"),a||la.focus()),sa=!1,qa.delete(na)})}),Ta.bind("blur",function(){setImmediate(function(){sa||qa.has(na)||(Ra=!1,f(),K(Ka,"focusout")),da()})});var s={ctrlZ:Ca.undo,ctrlY:Ca.redo,ctrlShiftZ:Ca.redo,backspace:h,delete:h,escape:function(){q.blur(),V(q)&&Qa.removeAllRanges()}};a.each({moveByLine:"upArrow downArrow shiftUpArrow shiftDownArrow",moveByWord:"ctrlLeftArrow ctrlRightArrow ctrlShiftLeftArrow ctrlShiftRightArrow",moveToLineEnd:"home end shiftHome shiftEnd",moveByCharacter:"leftArrow rightArrow shiftLeftArrow shiftRightArrow"},function(b,c){a.each(c.split(" "),function(a,c){var d=1&a?1:-1,e=!!(2&a);s[c]=function(){e||la.isCaret?(e?la.extendCaret:la)[b](d):la.collapse(d<0?"start":"end")}})}),ra.__core__.keystroke=function(a){!a.isDefaultPrevented()&&a.data in s&&(a.preventDefault(),s[a.data](a))}}function ja(b,c){!s[b]&&!(s.widgets||"")[b]||!c.inline&&oa!==za||(ra[b]=Object.create(c),ra[b].options=a.extend(Object.create(c.options||null),s[b]),c.element||pa.push(new k(na,b,null,ra[b].options)))}function ka(){pa[0]=new k(na,"__root__"),a.each(s.widgets||{},ja),a.each(ba.widgets,ja),pa[pa.length]=new k(na,"__core__"),ra.__root__=s,ra.__core__={},ra.__unknown__={element:s.disallowedElement||":not("+ua+",br,b,em,i,u,strike,small,strong,sub,sup,ins,del,mark,span)"}}E(q,e)||(s=q,q=q.element),s=a.extend(!0,{},(!s||s.defaultOptions!==!1)&&ba.defaultOptions,s);var la,ma,na=this,oa=s.inline||E(q,ua)?Aa:za,pa=[],ra={},Ca={},Ra=!1,Ta=a(q),Ua=r(function(){Ua.needSnapshot&&Ca.snapshot(),Ua.suppressTextEvent=!0,setImmediate(function(){Ua.suppressTextEvent=!1})}),Va={focusin:function(a){qa.set(na,a.currentTarget)},focusout:function(a){var b=a.currentTarget;setImmediate(function(){J(b,a.relatedTarget)||qa.get(na)!==b||V(q)||(qa.delete(na),Ta.trigger("focusout"))})}};ha(),ka(),ia(),Ta.attr("contenteditable","true"),ma=S(q,!0),a.extend(na,Ca,ma,{element:q,hasCommand:function(a){return!!I(a)},focused:function(){return Ra},widgetEnabled:function(a){return ra.hasOwnProperty(a)},getStaticWidget:function(a){return w(pa.slice(1,-1),function(b){return b.id===a})},getStaticWidgets:function(){return pa.slice(1,-1)},getSelection:function(){return la},extractText:function(a){var b=ea(a||q,"copy");return ga(b)},nodeFromPoint:function(a,b){var c=W(a,b,q);return c&&ma.getNode(c.commonAncestorContainer)},retainFocus:function(b){a(b).bind(Va)},invoke:function(a,b){var c=new x;"string"==typeof a&&(c.commandName=a,c.widget=I(a),a=c.widget&&ra[c.widget.id].commands[a]),Pa(a)&&Ua(function(){a.call(na,c,b),qa.has(na)||la.focus()})}}),t(x,{typer:na,widget:null,get selection(){return la},insertText:function(a){fa(la,a)},insertHtml:function(a){fa(la,X(a))},insertWidget:function(a,b){ra[a]&&Pa(ra[a].insert)&&ra[a].insert(this,b)},removeWidget:function(a){if(Pa(ra[a.id].remove))ra[a.id].remove(this,a);else if("keepText"===ra[a.id].remove){var b=ga(a.element);fa(N(a.element,!0),b),$(a.element)}else $(a.element)},execCommand:function(b,d){var e,f;a.each(la.getEditableRanges(),function(a,g){aa(g),c.execCommand(b,!1,d||""),e=e||Qa.getRangeAt(0),f=Qa.getRangeAt(0)}),la.select(N(e,!0),N(f,!1))}}),la=new j(na,N(q,0)),da(),K(La,"init")}function ca(a,b){return b&&(a.whatToShow&Ga||!E(b,ya|Ha))}function da(a,b,c){return c&&!ca(a,b)?2:E(b,ya)&&E(b.parentNode,ya)?3:x(a,b)}function ea(a,b,c){if(da.returnValue=da(a,b,c),1===da.returnValue)return a.currentNode=b,!0}function fa(a,b,c){for(var d=a.currentNode[b];d;){if(ea(a,d,!0))return d;if(3===da.returnValue&&d[b])d=d[b];else{for(;!d[c];)if(d=ca(a,d.parentNode)&&d.parentNode,!d||d===a.root||d===a.currentNode)return null;d=d[c]}}}function ga(a,b,c){for(var d=a.currentNode;d&&d!==a.root;){for(var e=d[c];e;){if(ea(a,e))return e;e=2!==da.returnValue&&e[b]?e[b]:e[c]}if(d=ca(a,d.parentNode)&&d.parentNode,!d||d===a.root||1===da(a,d,!0))return null}}function ha(a,b){var d=b.currentNode.widget.typer,e=c.createTreeWalker(b.root.element,1|a.whatToShow,function(c){return 1!==da(b,d.getNode(c),!0)?3:1|x(a,c)},!1);s(a,"iterator",e,!1)}function ia(a,b,c){var d=N(a);return new n(a.focusNode,b|Ga,function(a){return O(a.element,d)?c?c(a):1:2})}function ja(a){var b=a.getCaret("start"),c=a.getCaret("end"),d=b.textNode===c.textNode;if(c.textNode&&c.offset<c.textNode.length&&c.textNode.splitText(c.offset),b.textNode&&b.offset>0){var e=b.offset;la(a,function(){oa(b,b.node,b.element,b.textNode.splitText(b.offset),0),d&&oa(c,c.node,c.element,b.textNode,c.offset-e)})}}function ka(a){a.direction=R(a.extendCaret.getRange(),a.baseCaret.getRange())||0,a.isCaret=!a.direction;for(var b=0,c=a.getCaret("start"),d=a.getCaret("end");b<4;b++)a[ka.NAMES[b+4]]=c[ka.NAMES[b]],a[ka.NAMES[b+8]]=d[ka.NAMES[b]]}function la(a,b,c,d){return a._lock=a._lock||r(function(){delete a._lock,ka(a),a===a.typer.getSelection()&&(qa.has(a.typer)||a.focus(),a.typer.snapshot())}),a._lock(b,c,d)}function ma(a){var b=new o(new n(a.typer.getNode(a.typer.element),Ja|Ga),4);return b.currentNode=a.textNode||a.element,b}function na(a,b){return a.selection?la(a.selection,b,null,a):b.call(a)}function oa(a,b,c,d,e){return na(a,function(){a.selection&&a.selection===a.typer.getSelection()&&(a.node!==b&&a.node.element!==a.element&&ra.unlisten(a,a.node.element),a.element!==c&&a.element!==a.node.element&&ra.unlisten(a,a.element),ra.listen(a,b.element),ra.listen(a,c)),a.node=b,a.element=c,a.textNode=d||null,a.offset=e,a.wholeTextOffset=(d?a.offset:0)+M(b,d||c)}),!0}function pa(a,b,c,d){var e,f;if("br"===D(b)?(f=b.nextSibling,c=0):1===b.nodeType&&b.childNodes[0]&&(c===b.childNodes.length||d&&1===b.childNodes[(c||1)-1].nodeType?(b=b.childNodes[(c||1)-1],c=b.length,d=!0):(b=b.childNodes[c],c=0)),3===b.nodeType&&(f=b,b=f.parentNode),e=a.typer.getEditableNode(f||b),f&&(e.element!==f.parentNode?(b=e.element,f=null):E(e,Ja)||(e=w(e.childNodes,function(a){return H(f,a.element)<0})||e.lastChild||e,b=e.element,f=null,d=!0)),!f&&E(e,Ja)){var g=new o(e,4);for(g.currentNode=b;g.nextNode()&&d;);3===g.currentNode.nodeType&&(f=g.currentNode),c=d?f&&f.length:0}if(E(e,Ja|Ea))for(;e.parentNode&&!E(e,Ba|Aa);e=e.parentNode);return oa(a,e,b,f,f?c:!d)}var qa,ra,sa,ta=JSON.parse('{"8":"backspace","9":"tab","13":"enter","16":"shift","17":"ctrl","18":"alt","19":"pause","20":"capsLock","27":"escape","32":"space","33":"pageUp","34":"pageDown","35":"end","36":"home","37":"leftArrow","38":"upArrow","39":"rightArrow","40":"downArrow","45":"insert","46":"delete","48":"0","49":"1","50":"2","51":"3","52":"4","53":"5","54":"6","55":"7","56":"8","57":"9","65":"a","66":"b","67":"c","68":"d","69":"e","70":"f","71":"g","72":"h","73":"i","74":"j","75":"k","76":"l","77":"m","78":"n","79":"o","80":"p","81":"q","82":"r","83":"s","84":"t","85":"u","86":"v","87":"w","88":"x","89":"y","90":"z","91":"leftWindow","92":"rightWindowKey","93":"select","96":"numpad0","97":"numpad1","98":"numpad2","99":"numpad3","100":"numpad4","101":"numpad5","102":"numpad6","103":"numpad7","104":"numpad8","105":"numpad9","106":"multiply","107":"add","109":"subtract","110":"decimalPoint","111":"divide","112":"f1","113":"f2","114":"f3","115":"f4","116":"f5","117":"f6","118":"f7","119":"f8","120":"f9","121":"f10","122":"f11","123":"f12","144":"numLock","145":"scrollLock","186":"semiColon","187":"equalSign","188":"comma","189":"dash","190":"period","191":"forwardSlash","192":"backtick","219":"openBracket","220":"backSlash","221":"closeBracket","222":"singleQuote"}'),ua=("area base br col command embed hr img input keygen link meta param source track wbr".split(" "),"h1,h2,h3,h4,h5,h6,p,q,blockquote,pre,code,li,caption,figcaption,summary,dt,th"),va="​",wa="&#8203;",xa="<p>&#8203;</p>",ya=1,za=2,Aa=32,Ba=4,Ca=8,Da=16,Ea=64,Fa=128,Ga=4096,Ha=za|Aa,Ia=Da|Ea|Fa,Ja=Ba|Aa|Da|Fa,Ka=1,La=2,Ma=3,Na=4,Oa=!!b.ActiveXObject||void 0!==c.documentElement.style.msTouchAction,Pa=a.isFunction,Qa=b.getSelection(),Ra=c.caretRangeFromPoint,Sa={};if(b.Typer=ba,a.extend(ba,{NODE_WIDGET:ya,NODE_PARAGRAPH:Ba,NODE_EDITABLE:za,NODE_EDITABLE_PARAGRAPH:Aa,NODE_INLINE:Da,NODE_INLINE_WIDGET:Ea,NODE_INLINE_EDITABLE:Fa,NODE_OUTER_PARAGRAPH:Ca,NODE_SHOW_EDITABLE:Ga,ZWSP:va,ZWSP_ENTITIY:wa,trim:A,iterate:y,iterateToArray:z,compareAttrs:G,comparePosition:H,compareRangePosition:R,containsOrEquals:J,createElement:Z,createTextNode:Y,createRange:N,rangeIntersects:O,rangeCovers:P,rangeEquals:Q,rectEquals:S,caretRangeFromPoint:W,innermost:function(b){return a.grep(b,function(c){return!w(b,function(b){return a.contains(c,b)})})},outermost:function(b){return a.grep(b,function(c){return!w(b,function(b){return a.contains(b,c)})})},replaceElement:function(b,c){return c=E(c,e)||Z(c),a(c).append(b.childNodes).insertBefore(b),ra.update(b,c),$(b,!1),c},removeElement:function(a){$(a)},historyLevel:100,defaultOptions:{disallowedWidgets:"keepText",widgets:{}},widgets:{}}),t(m,{get firstChild(){return this.childNodes[0]||null},get lastChild(){return this.childNodes.slice(-1)[0]||null}}),t(n,{previousSibling:function(){return ga(this,"lastChild","previousSibling")},nextSibling:function(){return ga(this,"firstChild","nextSibling")},firstChild:function(){return fa(this,"firstChild","nextSibling")},lastChild:function(){return fa(this,"lastChild","previousSibling")},parentNode:function(){for(var a=this.currentNode;a&&a!==this.root;a=a.parentNode)if(ea(this,a.parentNode,!0))return a.parentNode},previousNode:function(){for(var a=this.currentNode;a&&a!==this.root;){for(var b=a.previousSibling;b;b=a.previousSibling){a=b;for(var c=da(this,b);2!==c&&ca(this,a.childNodes[0])&&a.childNodes[0];)a=a.lastChild,c=da(this,a,!0);if(1===c)return this.currentNode=a,a}if(a=ca(this,a.parentNode)&&a.parentNode,!a||a===this.root)return null;if(ea(this,a,!0))return a}},nextNode:function(){for(var a=this.currentNode,b=1;a;){for(;2!==b&&a.childNodes[0];){if(a=a.firstChild,ea(this,a,!0))return a;b=da.returnValue}for(;a&&a!==this.root&&!a.nextSibling;)a=ca(this,a.parentNode)&&a.parentNode;if(!a||a===this.root)return null;if(a=a.nextSibling,ea(this,a))return a;b=da.returnValue}}}),t(o,{get currentNode(){return this.iterator.currentNode},set currentNode(a){this.iterator.currentNode=a},previousNode:function(){return this.iterator.previousNode()},nextNode:function(){return this.iterator.nextNode()}}),ka.NAMES="node element textNode offset startNode startElement startTextNode startOffset endNode endElement endTextNode endOffset".split(" "),t(j,{get isSingleEditable(){return this.isCaret||!ia(this,Ha).nextNode()},get focusNode(){for(var a=this.typer.getEditableNode(K(this.baseCaret.element,this.extendCaret.element));a.parentNode&&!E(a,ya|Ea|Ha|Fa);)a=a.parentNode;return a},getCaret:function(a){switch(a){case"extend":return this.extendCaret;case"start":return this.direction<0?this.extendCaret:this.baseCaret;case"end":return this.direction<0?this.baseCaret:this.extendCaret;default:return this.baseCaret}},getRange:function(a){return void 0!==a||this.isCaret?(a!==!1?this.baseCaret:this.extendCaret).getRange():N(this.baseCaret.getRange(),this.extendCaret.getRange())},getEditableRanges:function(){var b=N(this);return this.isCaret||E(this.focusNode,Ia)?[b]:a.map(z(ia(this,Ba|Aa)),function(a){return N(b,N(a.element))})},getWidgets:function(){for(var a=[],b=this.focusNode;b;b=b.parentNode)a.unshift(b.widget),b=this.typer.getNode(b.widget.element);return a},getParagraphElements:function(){if(this.isCaret)return[this.startNode.element];var b=new n(this.focusNode,Ba|Ga),c=z(b,null,this.startNode);return c.splice(c.indexOf(this.endNode)+1),a.map(c,v("element"))},getSelectedElements:function(){return this.isCaret?[this.startElement]:z(ia(this,Ja|Ea),v("element"))},getSelectedText:function(){return this.typer.extractText(this)},getSelectedTextNodes:function(){if(this.isCaret)return[];ja(this);var a=N(this),b=new o(ia(this,Ja),4,function(b){return O(a,N(b,"contents"))?1:2});return z(b)},createTreeWalker:function(a,b){return ia(this,a,b)},
collapse:function(a){return a=this.getCaret(a),(a===this.baseCaret?this.extendCaret:this.baseCaret).moveTo(a)},select:function(a,b,c,d){return la(this,function(){if("word"===a)return this.getCaret("start").moveByWord(-1)+this.getCaret("end").moveByWord(1)>0;var e=N(a,b,c,d);return this.baseCaret.moveTo(N(e,!0))+this.extendCaret.moveTo(N(e,!1))>0})},focus:function(){J(c,this.typer.element)&&(qa.delete(this.typer),aa(N(this)))},clone:function(){var a=new j(this.typer);return a.baseCaret.moveTo(this.baseCaret),a.extendCaret.moveTo(this.extendCaret),a}}),a.each("moveToPoint moveToText moveByLine moveToLineEnd moveByWord moveByCharacter".split(" "),function(a,b){j.prototype[b]=function(){return la(this,function(){return p.prototype[b].apply(this.extendCaret,arguments)+this.collapse("extend")>0},u(arguments))}}),t(q,{listen:function(a,b){var c=this.weakMap.get(b)||(this.weakMap.set(b,[]),this.weakMap.get(b));c.indexOf(a.selection)<0&&c.push(a.selection)},unlisten:function(a,b){var c=this.weakMap.get(b);c&&c.indexOf(a.selection)>=0&&c.splice(c.indexOf(a.selection),1)},update:function(a,b){function c(c){var d=c.node.element===a?c.typer.getNode(b):c.node,e=c.element===a?b:c.element,f=J(a,c.textNode)?null:c.textNode;d===c.node&&e===c.element||oa(c,d,e,f,!f||c.offset)}(this.weakMap.get(a)||[]).forEach(function(a){la(a,function(){c(a.baseCaret),c(a.extendCaret)})})}}),t(p,{getRange:function(){return(this.element&&this.element!==this.typer.element&&!this.element.parentNode||this.textNode&&(!this.textNode.parentNode||this.offset>this.textNode.length))&&this.moveToText(this.node.element,this.wholeTextOffset),Oa&&this.textNode&&this.offset===this.textNode.length&&this.textNode.nextSibling&&1===this.textNode.nextSibling.nodeType&&!/inline/.test(a(this.textNode.nextSibling).css("display"))&&(this.textNode.nodeValue.slice(-1)===va?this.offset--:this.textNode.nodeValue+=va),N(this.textNode||this.element,this.offset)},clone:function(){var a=new p(this.typer);return a.moveTo(this),a},moveTo:function(a,b){var c=E(a,f)||N(a,b);if(c){var d=this.selection&&this===this.selection.extendCaret&&R(this.selection.baseCaret,c)<0;return pa(this,c.startContainer,c.startOffset,d)}return!1},moveToPoint:function(a,b){return this.moveTo(W(a,b,this.typer.element))},moveToText:function(a,b){if(3!==a.nodeType){var c=new o(new n(this.typer.getNode(a),Ja|Ga),4);if(b)for(;c.nextNode()&&b>c.currentNode.length;b-=c.currentNode.length);else if(1/b<0)for(;c.nextNode(););a=c.currentNode}return!!a&&pa(this,a,L(a,b))},moveToLineEnd:function(b){var c=U(this)[0],d=c.left;return y(new o(new n(this.node,Ja|Ga),4),function(e){a.each(U(e),function(a,e){e.top<=c.bottom&&e.bottom>=c.top&&(d=Math[b<0?"min":"max"](d,b<0?e.left:e.right))})}),this.moveToPoint(d,c.top+c.height/2)},moveByLine:function(a){var b=ma(this),c=U(this)[0];do{var d=U(b.currentNode),e=w(a<0?u(d).reverse():d,function(b){return a<0?b.bottom<=c.top:b.top>=c.bottom});if(e)return this.moveToPoint(c.left,e.top+e.height/2)}while(b[a<0?"previousNode":"nextNode"]());return this.moveToLineEnd(a)},moveByWord:function(a){var b,c=a<0?/\b(\S*\s+|\S+)$/:/^(\s+\S*|\S+)\b/,d="";if(this.textNode&&(d=a<0?this.textNode.nodeValue.substr(0,this.offset):this.textNode.nodeValue.slice(this.offset),(b=c.test(d))&&RegExp.$1.length!==d.length))return this.moveToText(this.textNode,this.offset+a*RegExp.$1.length);var e=new o(new n(this.node,Ja|Ga),4);for(e.currentNode=this.textNode||this.element;e[a<0?"previousNode":"nextNode"]();)if(d=a<0?e.currentNode.nodeValue+d:d+e.currentNode.nodeValue,(b=c.test(d))&&RegExp.$1.length!==d.length)return this.moveToText(e.currentNode,a*(RegExp.$1.length-(d.length-e.currentNode.length)));return!(!b||!e.currentNode)&&this.moveToText(e.currentNode,0*-a)},moveByCharacter:function(a){for(var b=ma(this),c=U(this)[0],d=this.offset;;){for(;1===b.currentNode.nodeType||d===L(b.currentNode,0*-a);){if(!b[a<0?"previousNode":"nextNode"]())return!1;var e=new p(this.typer);e.moveToText(b.currentNode),d=(a<0?b.currentNode.length:0)+(e.node!==this.node&&-a)}d+=a;var f=U(N(b.currentNode,d))[0];if(!c||f&&!S(c,f))return this.moveToText(b.currentNode,d)}}}),a.each("moveByLine moveByWord moveByCharacter".split(" "),function(a,b){var c=p.prototype[b];p.prototype[b]=function(a){return na(this,function(){for(var b=a;b&&c.call(this,a/Math.abs(a));b+=b>0?-1:1);return!a||b!==a})}}),t(k,{remove:function(){var a=this;a.typer.invoke(function(b){b.removeWidget(a)})}}),!Oa){try{c.designMode="on",c.execCommand("enableObjectResizing",!1,!1),c.execCommand("enableInlineTableEditing",!1,!1)}catch(a){}c.designMode="off"}a(b).bind("focusin focusout",function(a){(Oa?a.relatedTarget:a.target!==b)||(sa="focusout"===a.type)}),"undefined"==typeof h&&(h=function(){Object.defineProperty(this,"__dataKey__",{value:"typer"+Math.random().toString(36).substr(2,8)})},t(h,{get:function(a){return a[this.__dataKey__]},set:function(a,b){a[this.__dataKey__]=b},has:function(a){return this.__dataKey__ in a},delete:function(a){delete a[this.__dataKey__]}})),qa=new h,ra=new q,"undefined"==typeof Ra&&(Ra=function(){return c.caretPositionFromPoint?function(a,b){var d=c.caretPositionFromPoint(a,b);return N(d.offsetNode,d.offset)}:function(d,e){function f(a){var b=a.left>d?a.left-d:Math.min(0,a.right-d),c=a.top>e?a.top-e:Math.min(0,a.bottom-e);return b&&c?1/0:Math.abs(b||c)}function g(a,b){for(;10===a.nodeValue.charCodeAt(b)&&--b;);var c=U(N(a,b))[0];if(c){var f=c.left>d?c.left-d:Math.min(0,c.right-d),g=c.top>e?c.top-e:Math.min(0,c.bottom-e);return g?g>0?1/0:-(1/0):f}}function h(a){for(var b=0,c=a.length;c-b>1;){var d=c+b>>1,e=g(a,d)<0;b=e?d:b,c=e?c:d}return Math.abs(g(a,b))<Math.abs(g(a,c))?b:c}function i(b){var c,f;return a(b).children().each(function(b,g){if(T(d,e,g.getBoundingClientRect())&&"none"!==a(g).css("pointer-events")){var h="static"===a(g).css("position")?void 0:parseInt(a(g).css("z-index"))||0;(void 0===c||h>c)&&(c=h,f=g)}}),f}for(var j=b.ActiveXObject?c.body:c.elementFromPoint(d,e),k=j;k;j=k||j)k=i(j);for(var l,m,n=e,o=j;o&&1===o.nodeType;j=o||j)l=1/0,o=null,a(j).contents().each(function(b,c){if(3===c.nodeType)for(var d=U(c),h=0,i=d.length;h<i;h++){if(d[h].top<=e&&d[h].bottom>=e)return o=c,n=e,l=0,g(c,c.length-1)<0;m=l,l=Math.min(l,f(d[h])),l<m&&(o=c,n=d[h].top+d[h].height/2)}else 1===c.nodeType&&"none"!==a(c).css("pointer-events")&&(m=l,l=Math.min(l,f(c.getBoundingClientRect())),l<m&&(o=c))});return 3===j.nodeType?(e=n,N(j,h(j))):N(j,-0)}}())}(jQuery,window,document,String,Node,Range,DocumentFragment,window.WeakMap,Array.prototype),function(a,b){"use strict";b.presets={textbox:{inline:!0,defaultOptions:!1,disallowedElement:"*",overrides:{getValue:function(){return this.extractText()},setValue:function(a){a!==this.getValue()&&this.invoke(function(b){b.selection.select(this.element,"contents"),b.insertText(a)})}},init:function(a){a.typer.getSelection().moveToText(a.typer.element,-0)},contentChange:function(b){a(b.typer.element).toggleClass("has-value",!!b.typer.getValue())}}},b.preset=function(c,d,e){var f=b.presets[d],g={};e={__preset__:e||{},widgets:{}},a.each(f,function(a,b){("function"==typeof b||"options"===a?g:e)[a]=b}),a.each(e.__preset__,function(a,b){g.options&&a in g.options||(e[a]=b,delete this[a])});var h=e.init;return e.init=function(b){a.extend(b.typer,f.overrides),"function"==typeof h&&h.call(e,b)},e.widgets.__preset__=g,g.inline=!0,new b(c,e)},a.fn.typer=function(a){return this.each(function(c,d){new b(d,a)})}}(jQuery,window.Typer),function(a,b){"use strict";function c(b,d,e){var f=new Function("fn","return function "+(b||"")+"() { return fn.apply(this, arguments); }")(function(b){if(!(this instanceof f)){var c=Object.create(f.prototype);return f.apply(c,arguments),c}if(!p(e))return a.extend(this,b);try{this._super=d,e.apply(this,arguments)}finally{delete this._super}});return p(d)?f.prototype=new d:d&&(f.prototype=d,Object.defineProperty(d,"constructor",{enumerable:!1,configurable:!0,writable:!0,value:f})),f.prototype=p(d)?new d:a.extend(f.prototype,d),f.extend=function(a){return c(null,f,a)},f}function d(a,b,c){var d=a[b];Object.defineProperty(a,b,{enumerable:!0,configurable:!0,get:function(){return d},set:function(a){d!==a&&(d=a,c.call(this,b,a))}})}function e(b,c,d){d=d||r;var e=(c||"")+(d.expandedFrom?" @ "+d.expandedFrom:"")+" @ "+(b.type||"");if(x[e])return x[e].slice(0);var f=(c||"").split(/\s+/),g=[],h=function(a){return(!d[a].context||d[a].context.indexOf(b.type)>=0)&&f.indexOf("-"+a)<0&&g.indexOf(a)<0};return a.each(f,function(b,c){"*"===c.slice(-1)?a.each(d,function(a){a.slice(0,c.length-1)===c.slice(0,-1)&&a.indexOf(":",c.length)<0&&h(a)&&(g[g.length]=a)}):"-"!==c.charAt(0)&&d[c]&&h(c)&&(g[g.length]=c)}),x[e]=g.slice(0),g}function f(a){var b=/^([\w-:]*)(?:\(([^}]+)\))?$/.exec(a),c=null;try{c=b[2]&&JSON.parse(("{"+b[2]+"}").replace(/([{:,])\s*([^\s:,}]+)/g,'$1"$2"'))}catch(a){}return{name:b[1],params:c}}function g(a,b){b?a.data("original-display")?a.css("display",a.data("original-display")):a.show():("none"!==a.css("display")&&a.data("original-display",a.css("display")),a.hide())}function h(a,b,c,d){if(p(b[c]))return b[c](a,b,d)}function i(a,b,c,d){h(a,b,c,d);var e=a===b?c:b.type+c.charAt(0).toUpperCase()+c.slice(1);p(u[a.theme][e])&&u[a.theme][e](a,b,d)}function j(b,c,d){c=c||b,d="group"!==c.type?c:d||b,p(c.controls)&&(c.controls=c.controls(b,c)),"string"==typeof c.controls&&(c.controls=e(b,c.controls));var f={};return c.controls=a.map(c.controls||[],function(a,e){var g=Object.create("string"==typeof a?r[a]:a);return g.ui=b,g.parent=c,g.contextualParent=d,g.name=g.name||("string"==typeof a?a:"noname:"+Math.random().toString(36).substr(2,8)),void 0===g.label&&(g.label=g.name),f[g.name]=e,b.all[g.name]=g,j(b,g,d),g}),c.controls.sort(function(a,b){function c(a,b,c,d){return!a[c]||b[c]&&b[c].indexOf(a.name)?0:d*(a[c].indexOf(b.name)>=0?1:-1)}return c(a,b,"after",1)||c(a,b,"before",-1)||c(b,a,"after",-1)||c(b,a,"before",1)||f[a.name]-f[b.name]}),c.controls}function k(b,c,e){function g(b,c){c=(w[b]||w.__default__)(c),a.each(l[b],function(b,d){"_"===d[1]?a(d[0]).text(c||""):q.indexOf(d[1])>=0?a(d[0]).prop(d[1],!!c&&"false"!==c):c?a(d[0]).attr(d[1],c):a(d[0]).removeAttr(d[1])})}function h(b){a(b).find("*").andSelf().filter("[x\\:bind]").each(function(b,e){var h=f(a(e).attr("x:bind"));a.each(h.params,function(a,b){l[b]||(l[b]=[],d(c,b,g)),l[b].push([e,a])})}).removeAttr("x:bind")}function i(d){var e=a(u[b.theme][d]||'<div><br x:t="children"></div>')[0];return h(e),a("[x\\:t]",e).each(function(d,e){var g,j=f(a(e).attr("x:t"));p(u[b.theme][j.name])?(g=a(u[b.theme][j.name](b,c,j.params)),h(g)):g="children"===j.name?a.map(c.controls,function(a){return k(b,a,j.params)}):i(j.name),a(e).replaceWith(g)}),e}function j(d){a(d.target).is(":checkbox")?setImmediate(function(){b.setValue(c,!!d.target.checked),b.execute(c)}):b.execute(c)}c=c||b;var l={};c.element=i(c.type),a(c.element).attr("role",c.name),a.each(l,function(a,b){g(a,c[a])});var m=u[b.theme][c.type+"ExecuteOn"];return"string"==typeof m?a(c.element).bind(m,j):m&&a(m.of,c.element).bind(m.on,j),c.element}function l(b,c){var d;(c.requireWidget||c.requireWidgetEnabled)&&(c.widget=b._widgets[c.requireWidget||c.requireWidgetEnabled]||b.widget,d=!c.widget),d||i(b,c,"stateChange");var e=!b.enabled(c),f=!c.hiddenWhenDisabled||!e,h=a(c.element),j=u[b.theme];h.is(":input")&&h.prop("disabled",e),j.controlDisabledClass&&h.toggleClass(j.controlDisabledClass,e),j.controlActiveClass&&h.toggleClass(j.controlActiveClass,!!b.active(c)),j.controlHiddenClass?h.toggleClass(j.controlHiddenClass,!f):g(h,f)}function m(a,b){a.typer?p(b.execute)?a.typer.invoke(function(c){b.execute(a,b,c,b.value)}):a.typer.hasCommand(b.execute)&&a.typer.invoke(b.execute,b.value):p(b.execute)&&b.execute(a,b,null,b.value),i(a,a,"controlExecuted",b)}function n(b,c,d){a.each(Object.keys(b.all).reverse(),function(a,e){c(b,b.all[e],d)})}var o,p=a.isFunction,q="checked selected disabled readonly multiple ismap".split(" "),r={},s={},t={},u={},v={},w={},x={},y=[];b.ui=c("TyperUI",null,function(b,c){"string"==typeof b&&(b={controls:b}),c&&a.extend(b,{theme:c.theme,typer:c.typer,widget:c.widget,parentUI:c});var d=a.extend(this,b);d.all={},Object.defineProperty(d.all,"expandedFrom",{value:d.controls}),d.theme||(d.theme=Object.getOwnPropertyNames(u)[0]),d.controls=j(d),d.element=k(d),a(d.element).addClass("typer-ui typer-ui-"+d.theme),d.typer&&d.typer.retainFocus(d.element),n(d,i,"init"),i(d,d,"init")}),a.extend(b.ui.prototype,{update:function(){var b=this,c=b._widgets={};b.widget?c[b.widget.id]=b.widget:b.typer&&a.each(b.typer.getSelection().getWidgets().concat(b.typer.getStaticWidgets()),function(a,b){c[b.id]=b}),n(this,l)},destroy:function(){n(this,i,"destroy")},trigger:function(a,b,c){"string"==typeof a&&(a=this.all[a]||{}),i(this,a,b,c)},enabled:function(a){return"string"==typeof a&&(a=this.all[a]||{}),!(!this.typer&&(a.requireTyper||a.requireWidget||a.requireWidgetEnabled||a.requireCommand))&&(!(a.requireCommand&&!this.typer.hasCommand(a.requireCommand)||a.requireWidgetEnabled&&!this.typer.widgetEnabled(a.requireWidgetEnabled))&&(!(a.requireWidget===!0&&!Object.getOwnPropertyNames(this._widgets)[0]||a.requireWidget&&!a.widget)&&(!(a.requireChildControls===!0&&!a.controls[0])&&h(this,a,"enabled")!==!1)))},active:function(a){return"string"==typeof a&&(a=this.all[a]||{}),!!h(this,a,"active")},resolve:function(b){var c=this;return a.map(e(this,b,c.all),function(a){return c.all[a]})},getValue:function(b){var c=this;if("string"==typeof b&&(b=c.all[b]||{}),!b.valueMap)return b.value;var d={};return a.each(b.valueMap,function(a,b){d[a]=c.getValue(b)}),d},setValue:function(b,c){var d=this;if("string"==typeof b&&(b=d.all[b]||{}),b.valueMap){var e=b.valueMap||{};return void a.each(c,function(b,c){a.each(d.resolve(e[b]),function(a,b){d.setValue(b,c)})})}b.value=c,l(d,b)},getExecutingControl:function(){for(var a=0,b=y.length;a<b;a++)if(y[a].ui===this)return y[a]},execute:function(b){var c=this;if("string"==typeof b?b=c.all[b]||{}:b||(b=c.controls[0]),y.indexOf(b)<0&&c.enabled(b)){if(y.unshift(b),p(b.dialog)){var d=a.when(b.dialog(c,b));return d.done(function(a){c.setValue(b,a),m(c,b)}),d.always(function(){y.pop(b)}),d}try{m(c,b)}finally{y.pop(b)}}},openDialog:function(a,c,d){var e=b.ui(a,this);return e.setValue(a,c),e.pinToParent=d,e.execute()},alert:function(a,c){var d=b.ui("ui:alert",this);return d.all["ui:prompt-message"].label=a,d.pinToParent=c,d.execute()},confirm:function(a,c){var d=b.ui("ui:confirm",this);return d.all["ui:prompt-message"].label=a,d.pinToParent=c,d.execute()},prompt:function(a,c,d){var e=b.ui("ui:prompt",this);return e.all["ui:prompt-message"].label=a,e.all["ui:prompt"].value=c,e.pinToParent=d,e.execute()}}),a.extend(b.ui,{controls:r,themes:u,getIcon:function(a,b){return(s[a.icon]||s[a.name]||"")[b]||""},getShortcut:function(a){var b=v._map[a];return b&&b[0]},addIcons:function(b,c){a.each(c,function(a,c){s[a]||(s[a]={}),s[a][b]=c})},addLabels:function(b,c){a.extend(t,c)},addHook:function(c,d){return"object"==typeof c?void a.each(c,b.ui.addHook):void(c||"").replace(/\S+/g,function(a){v[a]=v[a]||[],v[a].push({hook:d})})},setShortcut:function(c,d){if("object"==typeof c)return void a.each(c,b.ui.setShortcut);c=f(c),v._map=v._map||{};var e=v._map[c.name]=v._map[c.name]||[],g=e.slice(0);(d||"").replace(/\S+/g,function(a){var b=g.indexOf(a);b>=0?g.splice(b,1):(e[e.length]=a,v[a]=v[a]||[],v[a].push({command:c.name,value:(c.params||"").value}))}),a.each(g,function(b,d){e.splice(e.indexOf(d),1),a.each(v[d],function(a,b){if(b.command===c.name&&b.value===(c.params||"").value)return v[d].splice(a,1),!1})})},setZIndex:function(c,d){var e=-1,f=document.createTreeWalker(document.body,1,function(c){return b.comparePosition(c,d,!0)?2:/absolute|fixed|relative/.test(a(c).css("position"))&&"auto"!==a(c).css("z-index")?(e=Math.max(e,parseInt(a(c).css("z-index"))),2):void 0},!1);b.iterate(f),c.style.zIndex=e+1,"static"===a(c).css("position")&&(c.style.position="relative")},focus:function(b){a.contains(b,document.activeElement)||a(":input, [contenteditable], a[href], area[href], iframe",b).not(":disabled, :hidden").andSelf().eq(0).focus()},openDialog:function(a,c,d){var e=b.ui(a);return e.setValue(a,c),e.pinToParent=d,e.execute()},alert:function(a,c){var d=b.ui("ui:alert");return d.all["ui:prompt-message"].label=a,d.pinToParent=c,d.execute()},confirm:function(a,c){var d=b.ui("ui:confirm");return d.all["ui:prompt-message"].label=a,d.pinToParent=c,d.execute()},prompt:function(a,c,d){var e=b.ui("ui:prompt");return e.all["ui:prompt-message"].label=a,e.all["ui:prompt"].value=c,e.pinToParent=d,e.execute()}}),a.extend(b.ui,{button:c("TyperUIButton",{type:"button"}),file:c("TyperUIFile",{type:"file"}),dropdown:c("TyperUIDropdown",{type:"dropdown",requireChildControls:!0,get value(){return this.selectedValue},set value(b){var c=this;a.each(c.controls,function(a,d){if(d.value===b)return c.selectedIndex=a,c.selectedText=d.label||d.name,c.selectedValue=d.value,!1}),a.each(c.controls,function(a,b){l(c.ui,b)})},init:function(b,c){a.each(c.controls,function(a,d){d.active=function(){return c.selectedIndex===a},d.execute=function(){c.value=d.value,b.execute(c)}})}}),group:c("TyperUIGroup",{type:"group",hiddenWhenDisabled:!0,requireChildControls:!0,enabled:function(b,c){return!!a.grep(c.controls,function(a){return b.enabled(a)})[0]}},function(b,c){this.controls=b,a.extend(this,c)}),callout:c("TyperUICallout",{type:"callout"}),textbox:c("TyperUITextbox",{type:"textbox",preset:"textbox"}),checkbox:c("TyperUICheckbox",{type:"checkbox"}),dialog:c("TyperUIDialog",{type:"dialog",keyboardResolve:!0,keyboardReject:!0,resolve:"ui:button-ok",reject:"ui:button-cancel"},function(c){a.extend(this,c),this.dialog=function(c,d){var e=a.Deferred(),f=o,g=document.activeElement,h=function(b){var f=a.when(p(d.submit)&&d.submit(c,d));"pending"===f.state()&&(c.trigger(d,"submit"),f.fail(function(a){c.trigger(d,"error",a)})),f.done(function(){e.resolve(b)})},i=function(){h(c.getValue(d.resolveValue||d))},j=function(){e.reject()};return a.each(c.resolve(d.resolve),function(a,b){b.execute=i}),a.each(c.resolve(d.reject),function(a,b){b.execute=j}),p(d.setup)&&d.setup(c,d,h,j),c.update(),c.trigger(d,"open"),setImmediate(b.ui.focus,d.element),e.always(function(){c.trigger(d,"close"),c.destroy(),o=f,g&&g.focus()}),c.parentUI&&b.ui.setZIndex(c.element,c.parentUI.element),o={element:d.element,keyboardResolve:d.keyboardResolve&&i,keyboardReject:d.keyboardReject&&j},e.promise()}})}),a.extend(r,{"ui:button-ok":b.ui.button(),"ui:button-cancel":b.ui.button(),"ui:prompt-message":{type:"label"},"ui:prompt-input":b.ui.textbox({label:"",executeOnSetValue:!1}),"ui:prompt-buttonset":b.ui.group("ui:button-ok ui:button-cancel",{type:"buttonset"}),"ui:prompt":b.ui.dialog({keyboardResolve:!0,keyboardReject:!0,controls:"ui:prompt-message ui:prompt-input ui:prompt-buttonset",resolveValue:"ui:prompt-input",setup:function(a,b){a.setValue("ui:prompt-input",b.value)}}),"ui:confirm-buttonset":b.ui.group("ui:button-ok ui:button-cancel",{type:"buttonset"}),"ui:confirm":b.ui.dialog({keyboardResolve:!0,keyboardReject:!0,controls:"ui:prompt-message ui:confirm-buttonset"}),"ui:alert-buttonset":b.ui.group("ui:button-ok",{type:"buttonset"}),"ui:alert":b.ui.dialog({keyboardResolve:!0,keyboardReject:!0,controls:"ui:prompt-message ui:alert-buttonset"})}),b.ui.addLabels("en",{"ui:button-ok":"OK","ui:button-cancel":"Cancel"}),b.ui.addIcons("material",{"ui:button-ok":"","ui:button-cancel":""}),b.defaultOptions.shortcut=!0,b.widgets.shortcut={keystroke:function(b){b.isDefaultPrevented()||a.each(v[b.data]||[],function(a,c){return c.hook&&c.hook(b.typer)?(b.preventDefault(),!1):b.typer.hasCommand(c.command)?(b.typer.invoke(c.command,c.value),b.preventDefault(),!1):void 0})}},w.__default__=function(a){return"string"==typeof a&&a in t?t[a]:a},w.shortcut=function(a){return(a||"").replace(/ctrl|alt|shift/gi,function(a){return a.charAt(0).toUpperCase()+a.slice(1)+"+"})},a(window).keydown(function(b){!o||13!==b.which&&27!==b.which||(o[13===b.which?"keyboardResolve":"keyboardReject"]||a.noop)()}),a(window).focusout(function(c){o&&!c.relatedTarget&&a.contains(o.element,c.target)&&b.ui.focus(o.element)})}(jQuery,window.Typer),function(a,b){"use strict";function c(b){var c=a(b).css("text-align"),d=a(b).css("direction");switch(c){case"-webkit-left":return"left";case"-webkit-right":return"right";case"start":return"ltr"===d?"left":"right";case"end":return"ltr"===d?"right":"left";default:return c}}function d(b,d){var e;return a(b).each(function(b,f){var g;g="textAlign"===d?c(f):"inlineClass"===d?a(f).filter("span").attr("class")||"":a(f).css(d),e=""===e||e&&e!==g?"":g}),e||""}function e(a,c){var d=b.createElement(a);return c&&(d.className=c),d}function f(b){a(b.selection.getParagraphElements()).attr("align",l[b.commandName])}function g(a){a.selection.isCaret?a.insertHtml(e(m[a.commandName])):(a.widget.subscript&&"superscript"===a.commandName?a.execCommand("subscript"):a.widget.superscript&&"subscript"===a.commandName&&a.execCommand("superscript"),a.execCommand(a.commandName))}function h(c,d){var e="insertOrderedList"===c.commandName||d?"ol":"ul",f="<"+e+(d||"").replace(/^.+/,' type="$&"')+">",g=function(b,c){return c.tagName.toLowerCase()===e&&(a(c).attr("type")||"")===(d||"")},h=[];a.each(c.selection.getParagraphElements(),function(d,e){if(a(e).is("ol>li,ul>li"))a(e.parentNode).filter(g)[0]?"list"===c.selection.focusNode.widget.id&&a.inArray(e.parentNode,h)<0&&j(c,[e]):(b.replaceElement(e.parentNode,a(f)[0]),h.push(e.parentNode));else{var i=a(e).prev().filter(g)[0]||a(e).next().filter(g)[0]||a(f).insertAfter(e)[0];a(e)[b.comparePosition(e,i)<0?"prependTo":"appendTo"](i),b.replaceElement(e,"li"),h.push(i)}})}function i(c,d){d=d||b.outermost(c.selection.getParagraphElements()),a.each(d,function(c,d){var e=a(d).parent("ul,ol")[0]||a(d).prev("ul,ol")[0]||a("<ul>").insertBefore(d)[0],f=e;if(f===d.parentNode){var g=a(d).prev("li")[0]||a("<li>").insertBefore(d)[0];f=a(g).children("ul,ol")[0]||a(e.cloneNode(!1)).appendTo(g)[0]}a(b.replaceElement(d,"li")).appendTo(f),a(f).parent("li")[0]&&a(b.createTextNode(" ")).insertBefore(f),e.children[0]||b.removeElement(e)})}function j(c,d){d=d||b.outermost(c.selection.getParagraphElements()),a.each(d,function(d,e){var f=a(e).parent("ul,ol")[0],g=a(f).parent("li")[0];a(e).next("li")[0]&&(g?a(f.cloneNode(!1)).append(a(e).nextAll()).appendTo(e):(a(f.cloneNode(!1)).append(a(e).nextAll()).insertAfter(f),a(e).children("ul,ol").insertAfter(f))),g?(a(e).insertAfter(g),b.trim(c.typer.extractText(g))||b.removeElement(g)):a(b.replaceElement(e,"p")).insertAfter(f),f.children[0]||b.removeElement(f)})}function k(a,c){var d=a.typer.getSelection();return!!(c?d.startNode.nodeType&(b.NODE_PARAGRAPH|b.NODE_EDITABLE_PARAGRAPH|b.NODE_INLINE):d.getParagraphElements()[0])}var l={justifyLeft:"left",justifyRight:"right",justifyCenter:"center",justifyFull:"justify"},m={bold:"b",italic:"i",underline:"u",strikeThrough:"strike",superscript:"sup",subscript:"sub"},n={1:"decimal",A:"upper-alpha",a:"lower-alpha",I:"upper-roman",i:"lower-roman"};b.widgets.inlineStyle={inline:!0,beforeStateChange:function(b){var c=b.typer.getSelection(),e=c.getSelectedElements();a.extend(b.widget,{bold:/bold|700/.test(d(e,"fontWeight")),italic:"italic"===d(e,"fontStyle"),underline:"underline"===d(e,"textDecoration"),strikeThrough:"line-through"===d(e,"textDecoration"),superscript:!!a(e).filter("sup")[0],subscript:!!a(e).filter("sub")[0],inlineClass:d(e,"inlineClass")})},commands:{bold:g,italic:g,underline:g,strikeThrough:g,superscript:g,subscript:g,applyClass:function(b,c){var d=b.selection.getParagraphElements();a(b.selection.getSelectedTextNodes()).wrap(e("span",c)),a("span:has(span)",d).each(function(b,c){a(c).contents().unwrap().filter(function(a,b){return 3===b.nodeType}).wrap(e("span",c.className))}),a('span[class=""]',d).contents().unwrap()}}},b.widgets.formatting={beforeStateChange:function(b){var c=b.typer.getSelection(),e=c.getParagraphElements().slice(-1)[0];a(e).is("li")&&(e=a(e).closest("ol, ul")[0]||e);var f=e&&e.tagName.toLowerCase(),g=f+(a(e).attr("class")||"").replace(/^(.)/,".$1"),h=d(c.getSelectedElements(),"textAlign");a.extend(b.widget,{justifyLeft:"left"===h,justifyCenter:"center"===h,justifyRight:"right"===h,justifyFull:"justify"===h,formatting:f,formattingWithClassName:g})},enter:function(a){a.typer.invoke("insertLine")},commands:{justifyCenter:f,justifyFull:f,justifyLeft:f,justifyRight:f,formatting:function(c,d){var f=/^([a-z\d]*)(?:\.(.+))?/i.exec(d)||[];"ol"===f[1]||"ul"===f[1]?c.insertWidget("list","ol"===f[1]&&"1"):a(c.selection.getParagraphElements()).not("li").each(function(a,c){b.replaceElement(c,e(f[1]||"p",f[2]))})},insertLine:function(a){a.insertText("\n\n")}}},b.widgets.lineBreak={inline:!0,shiftEnter:function(a){a.typer.invoke("insertLineBreak")},commands:{insertLineBreak:function(a){a.insertHtml("<br>")}}},b.widgets.list={element:"ul,ol",editable:"ul,ol",insert:h,textFlow:!0,remove:"keepText",tab:function(a){a.typer.invoke("indent")},shiftTab:function(a){a.typer.invoke("outdent")},init:function(c){a(c.widget.element).filter("ol").attr("type-css-value",n[a(c.widget.element).attr("type")]||"decimal"),a(c.widget.element).parent("li")[0]&&!c.widget.element.previousSibling&&a(b.createTextNode()).insertBefore(c.widget.element)},contentChange:function(c){a(c.widget.element).children("li")[0]||b.removeElement(c.widget.element)},commands:{indent:i,outdent:j}},a.each("formatting list inlineStyle lineBreak".split(" "),function(a,c){b.defaultOptions[c]=!0});var o=b.ui.button.extend(function(a,b){this._super({requireWidget:b,requireCommand:a,execute:a,active:function(b,c){return c.widget&&c.widget[a]},enabled:function(a){return k(a,"inlineStyle"===b)}})}),p=b.ui.button.extend(function(b,c){this._super({name:"formatting:orderedList:"+b,annotation:c,requireWidgetEnabled:"list",value:b,execute:function(a,c,d){d.insertWidget("list",b)},active:function(c,d){return d.widget&&a(d.widget.element).attr("type")===b}})});a.extend(b.ui.controls,{"toolbar:formatting":b.ui.group("formatting:*",{requireTyper:!0}),"formatting:paragraph":b.ui.dropdown({requireWidget:"formatting",requireCommand:"formatting",hiddenWhenDisabled:!0,controls:function(c){return a.map(Object.keys(c.options.formattings||{}),function(a){return b.ui.button({value:a,label:c.options.formattings[a]})})},execute:"formatting",enabled:function(a){return k(a,!1)},stateChange:function(a,b){for(var c=0,d=b.controls.length;c<d;c++)if(b.controls[c].value===b.widget.formattingWithClassName)return void(b.value=b.widget.formattingWithClassName);b.value=b.widget.formatting}}),"formatting:inlineStyle":b.ui.dropdown({requireWidget:"inlineStyle",requireCommand:"applyClass",hiddenWhenDisabled:!0,controls:function(c){return a.map(Object.keys(c.options.inlineClass||{}),function(a){return b.ui.button({value:a,label:c.options.inlineClass[a]})})},execute:"applyClass",enabled:function(a){return k(a,!0)}}),"formatting:bold":o("bold","inlineStyle"),"formatting:italic":o("italic","inlineStyle"),"formatting:underline":o("underline","inlineStyle"),"formatting:strikeThrough":o("strikeThrough","inlineStyle"),"formatting:unorderedList":b.ui.button({requireWidgetEnabled:"list",execute:function(a,b,c){c.insertWidget("list","")},active:function(a,b){return b.widget&&"ul"===b.widget.element.tagName.toLowerCase()},enabled:function(a){return k(a,!1)}}),"formatting:orderedList":b.ui.callout({requireWidgetEnabled:"list",controls:[p("1","1, 2, 3, 4"),p("a","a, b, c, d"),p("A","A, B, C, D"),p("i","i, ii, iii, iv"),p("I","I, II, III, IV")],active:function(a,b){return b.widget&&"ol"===b.widget.element.tagName.toLowerCase()},enabled:function(a){return k(a,!1)}}),"formatting:indent":o("indent","list"),"formatting:outdent":o("outdent","list"),"formatting:justifyLeft":o("justifyLeft","formatting"),"formatting:justifyCenter":o("justifyCenter","formatting"),"formatting:justifyRight":o("justifyRight","formatting"),"formatting:justifyFull":o("justifyFull","formatting")}),b.ui.addLabels("en",{"formatting:bold":"Bold","formatting:italic":"Italic","formatting:underline":"Underlined","formatting:strikeThrough":"Strikethrough","formatting:unorderedList":"Bullet list","formatting:orderedList":"Numbered list","formatting:indent":"Indent","formatting:outdent":"Outdent","formatting:justifyLeft":"Align left","formatting:justifyCenter":"Align center","formatting:justifyRight":"Align right","formatting:justifyFull":"Align justified","formatting:paragraph":"Formatting","formatting:inlineStyle":"Text style","formatting:orderedList:1":"Decimal numbers","formatting:orderedList:a":"Alphabetically ordered list, lowercase","formatting:orderedList:A":"Alphabetically ordered list, uppercase","formatting:orderedList:i":"Roman numbers, lowercase","formatting:orderedList:I":"Roman numbers, uppercase"}),b.ui.addIcons("material",{"formatting:bold":"","formatting:italic":"","formatting:underline":"","formatting:strikeThrough":"","formatting:unorderedList":"","formatting:orderedList":"","formatting:indent":"","formatting:outdent":"","formatting:justifyLeft":"","formatting:justifyCenter":"","formatting:justifyRight":"","formatting:justifyFull":""}),b.ui.setShortcut({bold:"ctrlB",italic:"ctrlI",underline:"ctrlU",justifyLeft:"ctrlShiftL",justifyCenter:"ctrlShiftE",justifyRight:"ctrlShiftR"}),b.ui.addHook("tab",function(a){if(a.widgetEnabled("list"))return a.invoke(i),!0})}(jQuery,window.Typer),function(a,b){"use strict";function c(a){var b=document.createElement("A");return b.href=a||"",location.protocol===b.protocol&&location.hostname===b.hostname&&(location.port===b.port||""===location.port&&b.port===("https:"===location.protocol?"443":"80"))?b.pathname.replace(/^(?!\/)/,"/")+b.search+b.hash:a}b.widgets.link={element:"a[href]",inline:!0,insert:function(b,d){if(d=c(d||/^[a-z]+:\/\//g.test(b.selection.getSelectedText())&&RegExp.input),b.selection.isCaret){var e=a("<a>").text(d).attr("href",d)[0];b.insertHtml(e)}else b.execCommand("createLink",d),b.selection.collapse("end")},remove:"keepText",ctrlClick:function(a){window.open(a.widget.element.href)},commands:{setURL:function(a,b){a.widget.element.href=c(b)},unlink:function(a){a.removeWidget(a.widget)}}},b.defaultOptions.link=!0,a.extend(b.ui.controls,{"toolbar:link":b.ui.button({after:"toolbar:insert",requireWidgetEnabled:"link",hiddenWhenDisabled:!0,dialog:function(b,c){var d=c.widget||b.typer.getSelection().getSelectedText(),e={href:c.widget?a(c.widget.element).attr("href"):/^[a-z]+:\/\//g.test(d)?d:"",text:c.widget?a(c.widget.element).text():d,blank:!!c.widget&&"_blank"===a(c.widget.element).attr("target")};return"function"==typeof b.options.selectLink?b.options.selectLink(e):b.openDialog("dialog:selectLink",e)},execute:function(c,d,e,f){if(!f)return null;var g=f.href||f,h=f.text||g;if(d.widget)a(d.widget.element).text(h),e.typer.invoke("setURL",g),f.blank?a(d.widget.element).attr("target","_blank"):a(d.widget.element).removeAttr("target");else{var i=b.createTextNode(h);e.insertHtml(i),e.selection.select(i),e.insertWidget("link",g),"link"===e.selection.focusNode.widget.id&&(f.blank?a(e.selection.focusNode.widget.element).attr("target","_blank"):a(e.selection.focusNode.widget.element).removeAttr("target"))}},active:function(a,b){return b.widget}}),"link:open":b.ui.button({context:"contextmenu",requireWidget:"link",hiddenWhenDisabled:!0,shortcut:"ctrlClick",execute:function(a,b){window.open(b.widget.element.href)}}),"link:unlink":b.ui.button({hiddenWhenDisabled:!0,requireWidget:"link",execute:"unlink"}),"contextmenu:link":b.ui.group("link:*"),"dialog:selectLink:text":b.ui.textbox(),"dialog:selectLink:url":b.ui.textbox(),"dialog:selectLink:blank":b.ui.checkbox(),"dialog:selectLink":b.ui.dialog({controls:"dialog:selectLink:* ui:prompt-buttonset",valueMap:{text:"dialog:selectLink:text",href:"dialog:selectLink:url",blank:"dialog:selectLink:blank"}})}),b.ui.addLabels("en",{"toolbar:link":"Insert hyperlink","link:url":"Link URL","link:blank":"Open in new window","link:open":"Open hyperlink",
"link:unlink":"Remove hyperlink","dialog:selectLink":"Create hyperlink","dialog:selectLink:text":"Text","dialog:selectLink:url":"URL","dialog:selectLink:blank":"Open in new window"}),b.ui.addIcons("material",{"toolbar:link":"","link:url":""}),b.ui.addHook("space",function(a){if(a.widgetEnabled("link")){var b=a.getSelection().clone();b.getCaret("start").moveByWord(-1)&&"link"!==b.focusNode.widget.id&&/^[a-z]+:\/\//g.test(b.getSelectedText())&&(a.snapshot(!0),a.getSelection().select(b),a.invoke(function(a){a.insertWidget("link")}),a.getSelection().collapse("end"))}})}(jQuery,window.Typer),function(a,b){"use strict";var c=/\.(?:(jpg|jpeg|png|gif|webp)|(mp4|ogg|webm)|(mp3))(?:\?.*)?$/gi;b.widgets.media={element:"img,audio,video,a:has(>img)",text:function(a){return a.element.src},insert:function(d,e){var f=b.createElement(c.exec(e.src||e)&&(RegExp.$1?"img":RegExp.$2?"video":"audio"));f.src=e.src||e,"video"===f.tagName.toLowerCase()&&a(f).attr("controls",""),d.insertHtml(f)}},b.defaultOptions.media=!0;var d=b.ui.button.extend(function(a){this._super({requireWidgetEnabled:"media",hiddenWhenDisabled:!0,dialog:function(b){return"function"==typeof b.options.selectMedia?b.options.selectMedia(a):b.prompt("dialog:selectImage")},execute:function(a,b,c,d){c.insertWidget("media",d)}})});a.extend(b.ui.controls,{"widget:media":b.ui.group("media:* widget:delete"),"insert:image":d("image"),"insert:video":d("video"),"media:filePicker":b.ui.button({requireWidget:"media",stateChange:function(b,c){c.value=a(c.widget.element).attr("src"),c.label=(/(?:^|\/)([^\/?#]+)(?:\?.+)?$/.exec(c.value)||[])[1]||""},dialog:function(a,b){if("function"==typeof a.options.selectMedia){var d=c.exec(b.label)&&(RegExp.$1?"image":RegExp.$2?"video":"audio");return a.options.selectMedia(d,b.value)}return a.prompt("dialog:selectImage",b.value)},execute:function(b,c,d,e){a(c.widget.element).attr("src",e.src||e)}}),"media:altText":b.ui.textbox({requireWidget:"media",hiddenWhenDisabled:!0,stateChange:function(b,c){c.value=a(c.widget.element).attr("alt")},execute:function(b,c){a(c.widget.element).attr("alt",c.value).attr("title",c.value)}})}),b.ui.addLabels("en",{"insert:image":"Image","insert:video":"Video","media:altText":"Alternate text","dialog:selectImage":"Enter image URL"}),b.ui.addIcons("material",{"insert:image":"","insert:video":"","media:altText":""})}(jQuery,window.Typer),function(a,b){"use strict";function c(a,b){return new Array(b+1).join(a)}function d(c){var d=[],e=[];return b.iterate(c.createTreeWalker(b.NODE_EDITABLE|b.NODE_EDITABLE_PARAGRAPH),function(b){d[d.length]=a(b).parent().index(),e[e.length]=a(b).index()}),{minRow:Math.min.apply(null,d),maxRow:Math.max.apply(null,d),minColumn:Math.min.apply(null,e),maxColumn:Math.max.apply(null,e)}}function e(b,c,d){if(b.isSingleEditable){var e=a(b.focusNode.element)[c]()[0]||a(b.focusNode.element).parent()[c]().children(d)[0];e&&b.moveToText(e,-0)}}var f="<td></td>",g="<th></th>",h="<tr>%</tr>";b.widgets.table={element:"table",editable:"th,td",insert:function(b,d){d=a.extend({rows:2,columns:2},d),b.insertHtml("<table>"+c(h.replace("%",c(f,d.columns)),d.rows)+"</table>")},tab:function(a){e(a.typer.getSelection(),"next",":first-child")},shiftTab:function(a){e(a.typer.getSelection(),"prev",":last-child")},ctrlEnter:function(a){a.typer.invoke(function(a){a.selection.select(a.widget.element,b.COLLAPSE_START_OUTSIDE),a.insertText("")})},commands:{addColumnBefore:function(b){var c=d(b.selection);a(b.widget.element).find(">tbody>tr>th:nth-child("+(c.minColumn+1)+")").before(g),a(b.widget.element).find(">tbody>tr>td:nth-child("+(c.minColumn+1)+")").before(f)},addColumnAfter:function(b){var c=d(b.selection);a(b.widget.element).find(">tbody>tr>th:nth-child("+(c.maxColumn+1)+")").after(g),a(b.widget.element).find(">tbody>tr>td:nth-child("+(c.maxColumn+1)+")").after(f)},addRowAbove:function(b){var e=d(b.selection),g=a(b.widget.element).find(">tbody>tr")[e.minRow];a(g).before(h.replace("%",c(f,g.childElementCount)))},addRowBelow:function(b){var e=d(b.selection),g=a(b.widget.element).find(">tbody>tr")[e.maxRow];a(g).after(h.replace("%",c(f,g.childElementCount)))},removeColumn:function(b){var c=d(b.selection);a(b.widget.element).find(">tbody>tr").each(function(b,d){a(a(d).children().splice(c.minColumn,c.maxColumn-c.minColumn+1)).remove()})},removeRow:function(b){var c=d(b.selection);a(a(b.widget.element).find(">tbody>tr").splice(c.minRow,c.maxRow-c.minRow+1)).remove()},toggleTableHeader:function(b){if(a(b.widget.element).find("th")[0])a(b.widget.element).find("th").wrap("<td>").contents().unwrap();else{var d=a(b.widget.element).find(">tbody>tr")[0].childElementCount;a(b.widget.element).find("tbody").prepend(h.replace("%",c(g,d)))}}}},a.extend(b.ui.controls,{"insert:table":b.ui.button({requireWidgetEnabled:"table",hiddenWhenDisabled:!0,execute:function(a,b,c){c.insertWidget("table")}}),"contextmenu:table":b.ui.callout({controls:"table:*",requireWidget:"table",hiddenWhenDisabled:!0}),"table:toggleTableHeader":b.ui.checkbox({requireWidget:"table",execute:"toggleTableHeader",stateChange:function(b,c){c.value=!!a(c.widget.element).find("th")[0]}}),"table:addColumnBefore":b.ui.button({requireWidget:"table",execute:"addColumnBefore"}),"table:addColumnAfter":b.ui.button({requireWidget:"table",execute:"addColumnAfter"}),"table:addRowAbove":b.ui.button({requireWidget:"table",execute:"addRowAbove"}),"table:addRowBelow":b.ui.button({requireWidget:"table",execute:"addRowBelow"}),"table:removeColumn":b.ui.button({requireWidget:"table",execute:"removeColumn"}),"table:removeRow":b.ui.button({requireWidget:"table",execute:"removeRow"})}),b.ui.addLabels("en",{"insert:table":"Table","contextmenu:table":"Modify table","table:toggleTableHeader":"Toggle header","table:addColumnBefore":"Add column before","table:addColumnAfter":"Add column after","table:addRowAbove":"Add row above","table:addRowBelow":"Add row below","table:removeColumn":"Remove column","table:removeRow":"Remove row"})}(jQuery,window.Typer),function(a,b){"use strict";function c(b){if(c.value===!1)b();else if(!c.value){var d=function(){c.value=!0};a(document).one("paste",d),setTimeout(function(){a(document).unbind("paste",d),c.value||(c.value=!1,b())})}}function d(c,d){if(c.update(),c.widget||!c.options.container){clearTimeout(h),g!==c&&(e(),g=c,a(c.element).appendTo(document.body),b.ui.setZIndex(c.element,c.typer.element));var f=a(c.element).height();if(d)c.position="fixed";else if("fixed"!==c.position){var i=(c.widget||c.typer).element.getBoundingClientRect();d={position:"fixed",left:i.left,top:Math.max(0,i.top-f-10)}}if(d){var j=c.typer.getSelection().getRange();if(j){var k=j.getClientRects()[0]||j.getBoundingClientRect();k.top>=d.top&&k.top<=d.top+f&&(d.top=k.bottom+10)}a(c.element).css(d)}}}function e(b){!g||b&&g!==b||(a(g.element).detach(),g.position="",g=null)}function f(c,e,f,g){var h=b.ui({type:g||"toolbar",typer:c,widget:f||null,theme:e.theme,controls:"contextmenu"===g?"contextmenu":f?"toolbar:widget":"toolbar",options:e,controlExecuted:function(a,b,c){/button|dropdown/.test(c.type)&&a.typer.getSelection().focus()}}),i=a(h.element);return e.container?i.appendTo(e.container):(i.addClass("typer-ui-float"),i.mousedown(function(b){var c=i.position();if(b.target===h.element){var e=function(a){d(h,{top:c.top+(a.clientY-b.clientY),left:c.left+(a.clientX-b.clientX)})};a(document.body).mousemove(e),a(document.body).mouseup(function(){a(document.body).unbind("mousemove",e)})}})),"contextmenu"===g&&a(c.element).bind("contextmenu",function(a){a.preventDefault(),h.update(),h.trigger(h,"show",{x:a.clientX,y:a.clientY})}),h}var g,h;b.widgets.toolbar={inline:!0,options:{container:"",theme:"material",formattings:{p:"Paragraph",h1:"Heading 1",h2:"Heading 2",h3:"Heading 3",h4:"Heading 4"},inlineClasses:{}},init:function(a){a.widget.toolbar=f(a.typer,a.widget.options),a.widget.contextmenu=f(a.typer,a.widget.options,null,"contextmenu"),a.widget.widgetbars={}},widgetInit:function(a){b.ui.controls["widget:"+a.targetWidget.id]&&(a.widget.widgetbars[a.targetWidget.id]||(a.widget.widgetbars[a.targetWidget.id]=f(a.typer,a.widget.options,a.targetWidget)))},focusin:function(a){d(a.widget.toolbar)},focusout:function(a){e(a.widget.toolbar)},widgetFocusin:function(a){a.widget.widgetbars[a.targetWidget.id]&&(a.widget.widgetbars[a.targetWidget.id].widget=a.targetWidget,d(a.widget.widgetbars[a.targetWidget.id]))},widgetFocusout:function(a){d(a.widget.toolbar)},widgetDestroy:function(a){g&&g.typer===a.typer&&d(a.widget.toolbar)},stateChange:function(a){g&&g.typer===a.typer&&d(g)}},a(window).scroll(function(){g&&d(g)}),a.extend(b.ui.controls,{contextmenu:b.ui.group("contextmenu:*"),"contextmenu:history":b.ui.group("history:*"),"contextmenu:selection":b.ui.group("selection:*"),"contextmenu:clipboard":b.ui.group("clipboard:*"),toolbar:b.ui.group("toolbar:insert toolbar:* -toolbar:widget"),"toolbar:insert":b.ui.callout({controls:"insert:*",enabled:function(a){return a.typer.getNode(a.typer.element).nodeType!==b.NODE_EDITABLE_INLINE}}),"toolbar:widget":b.ui.group("",{requireWidget:!0,controls:function(a,b){return a.widget&&"widget:"+a.widget.id}}),"history:undo":b.ui.button({shortcut:"ctrlZ",execute:function(a){a.typer.undo()},enabled:function(a){return a.typer.canUndo()}}),"history:redo":b.ui.button({shortcut:"ctrlShiftZ",execute:function(a){a.typer.redo()},enabled:function(a){return a.typer.canRedo()}}),"widget:delete":b.ui.button({requireWidget:!0,execute:function(a){a.widget.remove()}}),"selection:selectAll":b.ui.button({shortcut:"ctrlA",execute:function(a){a.typer.getSelection().select(a.typer.element,"contents"),a.typer.getSelection().focus()}}),"clipboard:cut":b.ui.button({shortcut:"ctrlX",execute:function(a){a.typer.getSelection().focus(),document.execCommand("cut")}}),"clipboard:copy":b.ui.button({shortcut:"ctrlC",execute:function(a){a.typer.getSelection().focus(),document.execCommand("copy")}}),"clipboard:paste":b.ui.button({shortcut:"ctrlV",execute:function(a){a.typer.getSelection().focus(),document.execCommand("paste"),c(function(){a.alert("clipboard:inaccessible")})}})}),b.ui.addLabels("en",{"toolbar:insert":"Insert widget","history:undo":"Undo","history:redo":"Redo","selection:selectAll":"Select all","clipboard:cut":"Cut","clipboard:copy":"Copy","clipboard:paste":"Paste","clipboard:inaccessible":"Unable to access clipboard due to browser security. Please use Ctrl+V or [Paste] from browser's menu.","widget:delete":"Delete"}),b.ui.addIcons("material",{"toolbar:insert":"","history:undo":"","history:redo":"","selection:selectAll":"","clipboard:cut":"","clipboard:copy":"","clipboard:paste":"","widget:delete":""})}(jQuery,window.Typer),function(a,b){function c(){var b='            .has-typer-visualizer:focus { outline:none; }            .has-typer-visualizer::selection,.has-typer-visualizer ::selection { background-color:transparent; }            .has-typer-visualizer::-moz-selection,.has-typer-visualizer ::-moz-selection { background-color:transparent; }            .typer-visualizer { position:fixed;pointer-events:none;width:100%;height:100%; }            .typer-visualizer > div { position:fixed;box-sizing:border-box; }            .typer-visualizer .fill { background-color:rgba(0,31,81,0.2); }            .typer-visualizer .fill-margin { border:solid rgba(255,158,98,0.2); }            @supports (clip-path:polygon(0 0,0 0)) or (-webkit-clip-path:polygon(0 0,0 0)) { .typer-visualizer .bl-r:before,.typer-visualizer .tl-r:before,.typer-visualizer .br-r:after,.typer-visualizer .tr-r:after { content:"";display:block;position:absolute;background-color:rgba(0,31,81,0.2);width:4px;height:4px;-webkit-clip-path:polygon(100% 100%,100% 0,96.6% 25.9%,86.6% 50%,70.7% 70.7%,50% 86.6%,25.9% 96.6%,0 100%);clip-path:polygon(100% 100%,100% 0,96.6% 25.9%,86.6% 50%,70.7% 70.7%,50% 86.6%,25.9% 96.6%,0 100%); } }            .typer-visualizer .line-n,.typer-visualizer .line-s { border-top:1px solid rgba(0,31,81,0.2);left:0;right:0;height:1px; }            .typer-visualizer .line-w,.typer-visualizer .line-e { border-left:1px solid rgba(0,31,81,0.2);top:0;bottom:0;width:1px; }            .typer-visualizer .line-s { margin-top:-1px; }            .typer-visualizer .line-e { margin-left:-1px; }            .typer-visualizer .bl { border-bottom-left-radius:4px; }            .typer-visualizer .tl { border-top-left-radius:4px; }            .typer-visualizer .br { border-bottom-right-radius:4px; }            .typer-visualizer .tr { border-top-right-radius:4px; }            .typer-visualizer .bl-r:before { right:100%;bottom:0; }            .typer-visualizer .tl-r:before { right:100%;top:0;-webkit-transform:flipY();transform:flipY(); }            .typer-visualizer .br-r:after { left:100%;bottom:0;-webkit-transform:flipX();transform:flipX(); }            .typer-visualizer .tr-r:after { left:100%;top:0;-webkit-transform:rotate(180deg);transform:rotate(180deg); }        ';a(document.body).append("<style>"+b+"</style>"),p=a('<div class="typer-ui typer-visualizer">').appendTo(document.body)[0],a(window).bind("scroll resize orientationchange focus",function(){z=a(window).width(),A=a(window).height(),m()}),a(document.body).bind("mousewheel",m),a(document.body).bind("mousemove",function(a){n(a.clientX,a.clientY)})}function d(a,b){return a.left===b.left&&a.top===b.top&&a.width===b.width&&a.height===b.height}function e(a,b){return b.left>=a.left&&b.right<=a.right&&b.top>=a.top&&b.bottom<=a.bottom}function f(a){return{top:0|a.top,left:0|a.left,right:0|(a.right||a.left+a.width),bottom:0|(a.bottom||a.top+a.height)}}function g(a){return{top:a.top,left:a.left,right:z-(a.right||a.left+a.width),bottom:A-(a.bottom||a.top+a.height)}}function h(c){var d=c.getBoundingClientRect(),g=window.getSelection().rangeCount&&window.getSelection().getRangeAt(0),h=g?a.map(b.createRange(g,b.createRange(c)).getClientRects(),f):[],i=[];return h.sort(function(a,b){return a.top-b.top||a.left-b.left||b.bottom-a.bottom||b.right-a.right}),a.each(h,function(a,b){var c=i[0];if(c&&(b.left>=c.right&&b.top<c.bottom?(i.shift(),b.top=Math.min(b.top,c.top),b.left=c.left,b.bottom=Math.max(b.bottom,c.bottom),c=i[0]):b.top>=c.bottom&&(c.right=d.left+d.width)),c){if(e(c,b))return;b.top>c.top&&b.top-c.bottom<b.bottom-b.top&&(c.bottom=b.top),i[1]&&c.left===i[1].left&&c.right===i[1].right&&(c.top=i.splice(1,1)[0].top)}i.unshift(b)}),i}function i(a){if(a.nodeType&(b.NODE_INLINE|b.NODE_INLINE_EDITABLE|b.NODE_INLINE_WIDGET))for(;!(a.nodeType&(b.NODE_PARAGRAPH|b.NODE_EDITABLE_PARAGRAPH))&&a.parentNode;a=a.parentNode);return a}function j(b,c,d){var e;a.each(b,function(a,b){if(null===b.element&&(e=b),b.element===c)return b.type=d,e=!0,!1}),"object"==typeof e?(e.element=c,e.type=d):e||(b[b.length]={element:c,type:d})}function k(b){a.each(b,function(b,c){c.type="none",a.contains(document,c.element)||(c.element=null)})}function l(b){a.each(b,function(b,c){function d(b,c,d){return e[f]=e[f]||y.pop()||a("<div>")[0],e[f].className=b,e[f].setAttribute("style",""),a(e[f]).css(c||"",d),e[f++]}var e=c.dom=c.dom||[],f=0;if("text"===c.type){var i=h(c.element);a.each(i,function(a,b){var c=i[a-1]||t,e=i[a+1]||t,f=d("fill",g(b));f.className+=[b.left<c.left||b.left>c.right?" bl":b.left>c.left&&b.left<c.right?" bl-r":"",b.left<e.left||b.left>e.right?" tl":b.left>e.left&&b.left<e.right?" tl-r":"",b.right>c.right||b.right<c.left?" br":b.right<c.right&&b.right>c.left?" br-r":"",b.right>e.right||b.right<e.left?" tr":b.right<e.right&&b.right>e.left?" tr-r":""].join("")})}else if("layout"===c.type||"layout-fill"===c.type||"layout-margin"===c.type){var j=c.element.getBoundingClientRect();if(d("line-n","top",j.top),d("line-s","top",j.top+j.height),d("line-w","left",j.left),d("line-e","left",j.left+j.width),"layout-margin"===c.type||"layout-fill"===c.type){var k=window.getComputedStyle(c.element),l=g(j);l.margin=[-parseFloat(k.marginTop),-parseFloat(k.marginRight),-parseFloat(k.marginBottom),-parseFloat(k.marginLeft),""].join("px "),l.borderWidth=[k.marginTop,k.marginRight,k.marginBottom,k.marginLeft].join(" "),d("fill-margin",l)}"layout-fill"===c.type&&d("fill",j)}e.length>f&&y.push.apply(y,e.splice(f)),a(e).appendTo(p)}),a(y).detach()}function m(){if(q){var a=q.element.getBoundingClientRect();s&&d(s,a)||(s=a,l(w))}}function n(a,c){if(k(x),q){var d=q.nodeFromPoint(a,c);d&&(d.nodeType&b.NODE_WIDGET?j(x,d.widget.element,"layout"):(d=i(d),j(x,d.element,"layout")))}l(x)}function o(a){var c=q.getSelection();k(w),c.isCaret?a.layout&&c.startNode&&c.startNode.nodeType&u&&j(w,(i(c.startNode)||c.startNode).element,"layout-margin"):b.iterate(c.createTreeWalker(-1,function(b){if(b.nodeType&u||a.layout&&r&&b.element===r.element)return j(w,b.element,b.nodeType&u?"text":"layout-fill"),2})),l(w)}var p,q,r,s,t={left:1e4,right:-1e4},u=b.NODE_PARAGRAPH|b.NODE_EDITABLE_PARAGRAPH|b.NODE_INLINE|b.NODE_INLINE_WIDGET|b.NODE_INLINE_EDITABLE,v=!window.ActiveXObject,w=[],x=[],y=[],z=a(window).width(),A=a(window).height();b.widgets.visualizer={inline:!0,options:{layout:!0},init:function(b){a(b.typer.element).addClass("has-typer-visualizer"),v&&!c.init&&(c(),c.init=!0)},focusin:function(a){q=a.typer,b.ui.setZIndex(p,q.element)},focusout:function(b){q=null,a(p).children().detach()},widgetFocusin:function(a){a.targetWidget.typer===q&&(r=a.targetWidget,v&&o(a.widget.options))},widgetFocusout:function(a){r=null},stateChange:function(a){v&&a.typer===q&&o(a.widget.options)}},b.defaultOptions.visualizer=v}(jQuery,window.Typer),function(a,b){"use strict";function c(c,e){if(g!==c&&(d(),g=c,a(c).appendTo(document.body).css("position","fixed"),b.ui.setZIndex(c,document.body)),e.getBoundingClientRect){var f=e.getBoundingClientRect();e={x:f.left,y:f.bottom}}e.x+a(c).width()>a(window).width()&&(e.x-=a(c).width()),e.y+a(c).height()>a(window).height()&&(e.y-=a(c).height()),a(c).css({left:e.x,top:e.y})}function d(){a(g).detach(),g=null}function e(b){var c=a(".typer-ui-float",b)[0],d=!!a(b).parents(".typer-ui-float")[0],e=c.getBoundingClientRect();e.bottom>a(window).height()?a(c).css("bottom",d?"0":"100%"):e.top<0&&a(c).css("bottom","auto"),e.right>a(window).width()?a(c).css("right",d?"100%":"0"):e.left<0&&a(c).css("right","auto")}function f(){a.each(h,function(b,c){var d=c.reference.getBoundingClientRect();a(c.target).css({top:d.top,left:d.left,width:d.width,height:d.height})})}var g,h=[];b.ui.themes.material={resources:["https://fonts.googleapis.com/css?family=Roboto:400,500,700","https://fonts.googleapis.com/icon?family=Material+Icons","https://cdn.rawgit.com/misonou/jquery-typer/master/css/jquery.typer.material.css"],controlActiveClass:"active",controlDisabledClass:"disabled",controlHiddenClass:"hidden",label:'<span class="typer-ui-label"><br x:t="labelIcon"/><br x:t="labelText"/></span>',labelText:function(a,c){var d=!!b.ui.getIcon(c,"material");return"textbox"===c.type||d&&"toolbar"===a.type&&"callout"!==(c.parent||"").type?"":'<span x:bind="(_:label)"></span>'},labelIcon:function(a,c){var d=b.ui.getIcon(c,"material");return"dropdown"===(c.parent||a).type?"":"callout"===(c.parent||a).type||"contextmenu"===a.type?"checkbox"===c.type?"":d.replace(/.*/,'<i class="material-icons">$&</i>'):d.replace(/.+/,'<i class="material-icons">$&</i>')},buttonset:'<div class="typer-ui-buttonset"><br x:t="children"/></div>',buttonlist:'<div class="typer-ui-buttonlist"><br x:t="children"/></div>',menupane:'<div class="typer-ui-float"><div class="typer-ui-buttonlist"><br x:t="children(t:button)"/></div></div>',toolbar:'<div class="typer-ui-toolbar"><div class="typer-ui-buttonset"><br x:t="children"/></div></div>',contextmenu:'<div class="typer-ui-float typer-ui-contextmenu"><div class="typer-ui-buttonlist"><br x:t="children(t:button)"/></div></div>',group:'<div class="typer-ui-group"><br x:t="children"/></div>',groupStateChange:function(b,c){setImmediate(function(){a(c.element).toggleClass("sep-before",!!a(c.element).prevAll(":not(.hidden)")[0]),a(c.element).toggleClass("sep-after",!!a(c.element).nextAll(":not(.hidden):first:not(.typer-ui-group)")[0])})},button:'<button x:bind="(title:label)"><br x:t="label"/><span class="typer-ui-label-annotation" role="shortcut" x:bind="(_:shortcut)"></span><span class="typer-ui-label-annotation" x:bind="(_:annotation)"></span></button>',buttonExecuteOn:"click",file:'<label class="has-clickeffect" x:bind="(title:label)"><input type="file"/><br x:t="label"/></label>',fileInit:function(b,c){a(c.element).find(":file").change(function(d){c.value=d.target.dataTransfer,b.execute(c),setImmediate(function(){var b=document.createElement("form");b.appendChild(d.target),b.reset(),a(d.target).prependTo(c.element)})})},callout:'<div class="typer-ui-menu"><button x:bind="(title:label)"><br x:t="label"/></button><br x:t="menupane"/></div>',calloutExecuteOn:{on:"click",of:">button"},dropdown:'<div class="typer-ui-dropdown typer-ui-menu"><button x:bind="(title:label)"><span class="typer-ui-label"><br x:t="labelIcon"/><span x:bind="(_:selectedText)"></span></span></button><br x:t="menupane"/></div>',checkbox:'<label class="typer-ui-checkbox" x:bind="(title:label)"><input type="checkbox" x:bind="(checked:value)"/><br x:t="label"/></label>',checkboxExecuteOn:{on:"change",of:":checkbox"},textbox:'<label x:bind="(title:label)"><div class="typer-ui-textbox"><br x:t="label"/><div class="typer-ui-textbox-wrapper"><div contenteditable spellcheck="false"></div><div class="typer-ui-textbox-placeholder" x:bind="(_:label)"></div></div></div></label>',textboxInit:function(c,d){var e=a(d.element).parents(".typer-ui-menu"),f=a("[contenteditable]",d.element)[0];d.preset=b.preset(f,d.preset,a.extend({},d.presetOptions,{focusin:function(){e.addClass("open")},focusout:function(){e.removeClass("open")},contentChange:function(a){a.typer.focused()&&(d.value=d.preset.getValue(),c.execute(d))}}))},textboxStateChange:function(a,b){b.preset.setValue(b.value||"")},dialog:'<div class="typer-ui-dialog-wrapper"><div class="typer-ui-dialog-pin"></div><div class="typer-ui-dialog"><div class="typer-ui-dialog-content"><br x:t="children"></div></div></div>',dialogOpen:function(b,c){var d=b.resolve(c.resolve)[0],e=b.parentUI&&b.parentUI.getExecutingControl(),g=a(b.element).find(".typer-ui-dialog-wrapper"),i=a(b.element).find(".typer-ui-dialog-content"),j=a('<div style="position:fixed;top:0;left:0;right:0;bottom:0;background:url(data:image/gif;,);">');a(b.element).appendTo(document.body),j.prependTo(b.element).click(function(){i.addClass("pop")}),i.bind("animationend oanimationend webkitAnimationEnd",function(){i.removeClass("pop")}),d&&a(d.element).addClass("pin-active"),setImmediate(function(){if(a(c.element).addClass("open"),/top|bottom|left|right/.test(b.pinToParent)&&document.activeElement!==document.body){var d=e?e.element:document.activeElement;g.addClass("pinned pinned-"+b.pinToParent),a(d).addClass("pin-active"),h.push({dialog:b,reference:d,target:g[0]}),f()}})},dialogClose:function(b,c){a(c.element).addClass("closing").one("transitionend otransitionend webkitTransitionEnd",function(){a(b.element).remove(),a.each(h,function(c,d){if(d.dialog===b)return a(d.reference).removeClass("pin-active"),h.splice(c,1),!1})})},init:function(b){a(b.element).on("mouseover",".typer-ui-menu:has(>.typer-ui-float)",function(a){e(a.currentTarget)}),a.each(b.all,function(d,e){if(/callout|dropdown/.test(e.type)&&"callout"!==e.contextualParent.type&&"contextmenu"!==e.contextualParent.type){var f=a('<div class="typer-ui typer-ui-material">').append(a(e.element).children(".typer-ui-float").addClass("parent-is-"+e.type))[0];b.typer&&b.typer.retainFocus(f),a(e.element).click(function(a){c(f,e.element)})}})},show:function(a,b,d){"contextmenu"===a.type&&c(a.element,d)},controlExecuted:function(a,b,c){/callout|dropdown|contextmenu/.test(c.contextualParent.type)&&d()}},a(function(){a(document.body).on("mousedown",".typer-ui-material button, .typer-ui-material .has-clickeffect",function(b){var c=b.currentTarget.getBoundingClientRect(),d=a('<div class="typer-ui-clickeffect">').appendTo(b.currentTarget).css({top:b.clientY-c.top,left:b.clientX-c.left}),e=Math.pow(b.clientY-c.top,2)+Math.pow(b.clientX-c.left,2),f=Math.pow(b.clientY-c.top,2)+Math.pow(b.clientX-c.right,2),g=Math.pow(b.clientY-c.bottom,2)+Math.pow(b.clientX-c.left,2),h=Math.pow(b.clientY-c.bottom,2)+Math.pow(b.clientX-c.right,2),i=.5+2*Math.sqrt(Math.max.call(null,e,f,g,h))/parseFloat(d.css("font-size"));setImmediate(function(){d.css("transform",d.css("transform")+" scale("+i+")").addClass("animate-in")})}),a(document.body).on("mouseup mouseleave",".typer-ui-material button, .typer-ui-material .has-clickeffect",function(b){var c=a(".typer-ui-clickeffect",b.currentTarget);c.addClass("animate-out"),c.bind("transitionend otransitionend webkitTransitionEnd",function(){c.remove()})}),a(document.body).mousedown(function(a){g&&!b.containsOrEquals(g,a.target)&&d()}),a(window).bind("resize scroll orientationchange",function(a){f()})})}(jQuery,window.Typer),function(a,b){"use strict";function c(a){"function"!=typeof a&&(a=new Function(""+a));for(var b=new Array(arguments.length-1),c=0;c<b.length;c++)b[c]=arguments[c+1];var d={callback:a,args:b};return o[n]=d,m(n),n++}function d(a){delete o[a]}function e(a){var c=a.callback,d=a.args;switch(d.length){case 0:c();break;case 1:c(d[0]);break;case 2:c(d[0],d[1]);break;case 3:c(d[0],d[1],d[2]);break;default:c.apply(b,d)}}function f(a){if(p)setTimeout(f,0,a);else{var b=o[a];if(b){p=!0;try{e(b)}finally{d(a),p=!1}}}}function g(){m=function(a){process.nextTick(function(){f(a)})}}function h(){if(a.postMessage&&!a.importScripts){var b=!0,c=a.onmessage;return a.onmessage=function(){b=!1},a.postMessage("","*"),a.onmessage=c,b}}function i(){var b="setImmediate$"+Math.random()+"$",c=function(c){c.source===a&&"string"==typeof c.data&&0===c.data.indexOf(b)&&f(+c.data.slice(b.length))};a.addEventListener?a.addEventListener("message",c,!1):a.attachEvent("onmessage",c),m=function(c){a.postMessage(b+c,"*")}}function j(){var a=new MessageChannel;a.port1.onmessage=function(a){var b=a.data;f(b)},m=function(b){a.port2.postMessage(b)}}function k(){var a=q.documentElement;m=function(b){var c=q.createElement("script");c.onreadystatechange=function(){f(b),c.onreadystatechange=null,a.removeChild(c),c=null},a.appendChild(c)}}function l(){m=function(a){setTimeout(f,0,a)}}if(!a.setImmediate){var m,n=1,o={},p=!1,q=a.document,r=Object.getPrototypeOf&&Object.getPrototypeOf(a);r=r&&r.setTimeout?r:a,"[object process]"==={}.toString.call(a.process)?g():h()?i():a.MessageChannel?j():q&&"onreadystatechange"in q.createElement("script")?k():l(),r.setImmediate=c,r.clearImmediate=d}}("undefined"==typeof self?"undefined"==typeof global?this:global:self);
//# sourceMappingURL=jquery.typer.min.js.map
